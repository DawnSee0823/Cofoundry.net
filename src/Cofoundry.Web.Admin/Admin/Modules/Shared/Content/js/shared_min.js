(function(){function e(s){return function(e,t,n,r){t=b(t,r,4);var i=!E(e)&&y.keys(e),o=(i||e).length,a=0<s?0:o-1;return arguments.length<3&&(n=e[i?i[a]:a],a+=s),function(e,t,n,r,i,o){for(;0<=i&&i<o;i+=s){var a=r?r[i]:i;n=t(n,e[a],a,e)}return n}(e,t,n,i,a,o)}}function t(o){return function(e,t,n){t=w(t,n);for(var r=k(e),i=0<o?0:r-1;0<=i&&i<r;i+=o)if(t(e[i],i,e))return i;return-1}}function n(o,a,s){return function(e,t,n){var r=0,i=k(e);if("number"==typeof n)0<o?r=0<=n?n:Math.max(n+i,r):i=0<=n?Math.min(n+1,i):n+i+1;else if(s&&n&&i)return e[n=s(e,t)]===t?n:-1;if(t!=t)return 0<=(n=a(d.call(e,r,i),y.isNaN))?n+r:-1;for(n=0<o?r:i-1;0<=n&&n<i;n+=o)if(e[n]===t)return n;return-1}}function r(e,t){var n=_.length,r=e.constructor,i=y.isFunction(r)&&r.prototype||l,o="constructor";for(y.has(e,o)&&!y.contains(t,o)&&t.push(o);n--;)(o=_[n])in e&&e[o]!==i[o]&&!y.contains(t,o)&&t.push(o)}function i(){}var o=this,a=o._,s=Array.prototype,l=Object.prototype,c=Function.prototype,u=s.push,d=s.slice,f=l.toString,h=l.hasOwnProperty,m=Array.isArray,p=Object.keys,g=c.bind,v=Object.create,y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};"undefined"!=typeof exports?(exports="undefined"!=typeof module&&module.exports?module.exports=y:exports)._=y:o._=y,y.VERSION="1.8.3";var b=function(i,o,e){if(void 0===o)return i;switch(null==e?3:e){case 1:return function(e){return i.call(o,e)};case 2:return function(e,t){return i.call(o,e,t)};case 3:return function(e,t,n){return i.call(o,e,t,n)};case 4:return function(e,t,n,r){return i.call(o,e,t,n,r)}}return function(){return i.apply(o,arguments)}},w=function(e,t,n){return null==e?y.identity:y.isFunction(e)?b(e,t,n):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,t){return w(e,t,1/0)};function x(e){return y.isObject(e)?v?v(e):(i.prototype=e,e=new i,i.prototype=null,e):{}}var $=function(l,c){return function(e){var t=arguments.length;if(t<2||null==e)return e;for(var n=1;n<t;n++)for(var r=arguments[n],i=l(r),o=i.length,a=0;a<o;a++){var s=i[a];c&&void 0!==e[s]||(e[s]=r[s])}return e}},C=function(t){return function(e){return null==e?void 0:e[t]}},S=Math.pow(2,53)-1,k=C("length"),E=function(e){e=k(e);return"number"==typeof e&&0<=e&&e<=S};y.each=y.forEach=function(e,t,n){if(t=b(t,n),E(e))for(i=0,o=e.length;i<o;i++)t(e[i],i,e);else for(var r=y.keys(e),i=0,o=r.length;i<o;i++)t(e[r[i]],r[i],e);return e},y.map=y.collect=function(e,t,n){t=w(t,n);for(var r=!E(e)&&y.keys(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o},y.reduce=y.foldl=y.inject=e(1),y.reduceRight=y.foldr=e(-1),y.find=y.detect=function(e,t,n){n=E(e)?y.findIndex(e,t,n):y.findKey(e,t,n);return void 0!==n&&-1!==n?e[n]:void 0},y.filter=y.select=function(e,r,t){var i=[];return r=w(r,t),y.each(e,function(e,t,n){r(e,t,n)&&i.push(e)}),i},y.reject=function(e,t,n){return y.filter(e,y.negate(w(t)),n)},y.every=y.all=function(e,t,n){t=w(t,n);for(var r=!E(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0},y.some=y.any=function(e,t,n){t=w(t,n);for(var r=!E(e)&&y.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,n,r){return E(e)||(e=y.values(e)),"number"==typeof n&&!r||(n=0),0<=y.indexOf(e,t,n)},y.invoke=function(e,n){var r=d.call(arguments,2),i=y.isFunction(n);return y.map(e,function(e){var t=i?n:e[n];return null==t?t:t.apply(e,r)})},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,r,t){var n,i,o=-1/0,a=-1/0;if(null==r&&null!=e)for(var s=0,l=(e=E(e)?e:y.values(e)).length;s<l;s++)n=e[s],o<n&&(o=n);else r=w(r,t),y.each(e,function(e,t,n){i=r(e,t,n),(a<i||i===-1/0&&o===-1/0)&&(o=e,a=i)});return o},y.min=function(e,r,t){var n,i,o=1/0,a=1/0;if(null==r&&null!=e)for(var s=0,l=(e=E(e)?e:y.values(e)).length;s<l;s++)(n=e[s])<o&&(o=n);else r=w(r,t),y.each(e,function(e,t,n){((i=r(e,t,n))<a||1/0===i&&1/0===o)&&(o=e,a=i)});return o},y.shuffle=function(e){for(var t,n=E(e)?e:y.values(e),r=n.length,i=Array(r),o=0;o<r;o++)(t=y.random(0,o))!==o&&(i[o]=i[t]),i[t]=n[o];return i},y.sample=function(e,t,n){return null==t||n?(e=!E(e)?y.values(e):e)[y.random(e.length-1)]:y.shuffle(e).slice(0,Math.max(0,t))},y.sortBy=function(e,r,t){return r=w(r,t),y.pluck(y.map(e,function(e,t,n){return{value:e,index:t,criteria:r(e,t,n)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};c=function(o){return function(n,r,e){var i={};return r=w(r,e),y.each(n,function(e,t){t=r(e,t,n);o(i,e,t)}),i}};y.groupBy=c(function(e,t,n){y.has(e,n)?e[n].push(t):e[n]=[t]}),y.indexBy=c(function(e,t,n){e[n]=t}),y.countBy=c(function(e,t,n){y.has(e,n)?e[n]++:e[n]=1}),y.toArray=function(e){return e?y.isArray(e)?d.call(e):E(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:(E(e)?e:y.keys(e)).length},y.partition=function(e,r,t){r=w(r,t);var i=[],o=[];return y.each(e,function(e,t,n){(r(e,t,n)?i:o).push(e)}),[i,o]},y.first=y.head=y.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},y.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},y.compact=function(e){return y.filter(e,y.identity)};var A=function(e,t,n,r){for(var i=[],o=0,a=r||0,s=k(e);a<s;a++){var l=e[a];if(E(l)&&(y.isArray(l)||y.isArguments(l))){var c=0,u=(l=!t?A(l,t,n):l).length;for(i.length+=u;c<u;)i[o++]=l[c++]}else n||(i[o++]=l)}return i};y.flatten=function(e,t){return A(e,t,!1)},y.without=function(e){return y.difference(e,d.call(arguments,1))},y.uniq=y.unique=function(e,t,n,r){y.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=w(n,r));for(var i=[],o=[],a=0,s=k(e);a<s;a++){var l=e[a],c=n?n(l,a,e):l;t?(a&&o===c||i.push(l),o=c):n?y.contains(o,c)||(o.push(c),i.push(l)):y.contains(i,l)||i.push(l)}return i},y.union=function(){return y.uniq(A(arguments,!0,!0))},y.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=k(e);r<i;r++){var o=e[r];if(!y.contains(t,o)){for(var a=1;a<n&&y.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},y.difference=function(e){var t=A(arguments,!0,!0,1);return y.filter(e,function(e){return!y.contains(t,e)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var t=e&&y.max(e,k).length||0,n=Array(t),r=0;r<t;r++)n[r]=y.pluck(e,r);return n},y.object=function(e,t){for(var n={},r=0,i=k(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},y.findIndex=t(1),y.findLastIndex=t(-1),y.sortedIndex=function(e,t,n,r){for(var i=(n=w(n,r,1))(t),o=0,a=k(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o},y.indexOf=n(1,y.findIndex,y.sortedIndex),y.lastIndexOf=n(-1,y.findLastIndex),y.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i};function T(e,t,n,r,i){return r instanceof t?(n=x(e.prototype),i=e.apply(n,i),y.isObject(i)?i:n):e.apply(n,i)}y.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,d.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),r=function(){return T(e,r,t,this,n.concat(d.call(arguments)))};return r},y.partial=function(i){var o=d.call(arguments,1),a=function(){for(var e=0,t=o.length,n=Array(t),r=0;r<t;r++)n[r]=o[r]===y?arguments[e++]:o[r];for(;e<arguments.length;)n.push(arguments[e++]);return T(i,a,this,this,n)};return a},y.bindAll=function(e){var t,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)e[n=arguments[t]]=y.bind(e[n],e);return e},y.memoize=function(r,i){var o=function(e){var t=o.cache,n=""+(i?i.apply(this,arguments):e);return y.has(t,n)||(t[n]=r.apply(this,arguments)),t[n]};return o.cache={},o},y.delay=function(e,t){var n=d.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(n,r,i){var o,a,s,l=null,c=0;i=i||{};function u(){c=!1===i.leading?0:y.now(),l=null,s=n.apply(o,a),l||(o=a=null)}return function(){var e=y.now();c||!1!==i.leading||(c=e);var t=r-(e-c);return o=this,a=arguments,t<=0||r<t?(l&&(clearTimeout(l),l=null),c=e,s=n.apply(o,a),l||(o=a=null)):l||!1===i.trailing||(l=setTimeout(u,t)),s}},y.debounce=function(t,n,r){var i,o,a,s,l,c=function(){var e=y.now()-s;e<n&&0<=e?i=setTimeout(c,n-e):(i=null,r||(l=t.apply(a,o),i||(a=o=null)))};return function(){a=this,o=arguments,s=y.now();var e=r&&!i;return i=i||setTimeout(c,n),e&&(l=t.apply(a,o),a=o=null),l}},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var n=arguments,r=n.length-1;return function(){for(var e=r,t=n[r].apply(this,arguments);e--;)t=n[e].call(this,t);return t}},y.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},y.before=function(e,t){var n;return function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},y.once=y.partial(y.before,2);var N=!{toString:null}.propertyIsEnumerable("toString"),_=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(e){if(!y.isObject(e))return[];if(p)return p(e);var t,n=[];for(t in e)y.has(e,t)&&n.push(t);return N&&r(e,n),n},y.allKeys=function(e){if(!y.isObject(e))return[];var t,n=[];for(t in e)n.push(t);return N&&r(e,n),n},y.values=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},y.mapObject=function(e,t,n){t=w(t,n);for(var r,i=y.keys(e),o=i.length,a={},s=0;s<o;s++)a[r=i[s]]=t(e[r],r,e);return a},y.pairs=function(e){for(var t=y.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},y.invert=function(e){for(var t={},n=y.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},y.functions=y.methods=function(e){var t,n=[];for(t in e)y.isFunction(e[t])&&n.push(t);return n.sort()},y.extend=$(y.allKeys),y.extendOwn=y.assign=$(y.keys),y.findKey=function(e,t,n){t=w(t,n);for(var r,i=y.keys(e),o=0,a=i.length;o<a;o++)if(t(e[r=i[o]],r,e))return r},y.pick=function(e,t,n){var r,i,o={},a=e;if(null==a)return o;y.isFunction(t)?(i=y.allKeys(a),r=b(t,n)):(i=A(arguments,!1,!1,1),r=function(e,t,n){return t in n},a=Object(a));for(var s=0,l=i.length;s<l;s++){var c=i[s],u=a[c];r(u,c,a)&&(o[c]=u)}return o},y.omit=function(e,t,n){var r;return t=y.isFunction(t)?y.negate(t):(r=y.map(A(arguments,!1,!1,1),String),function(e,t){return!y.contains(r,t)}),y.pick(e,t,n)},y.defaults=$(y.allKeys,!0),y.create=function(e,t){e=x(e);return t&&y.extendOwn(e,t),e},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var n=y.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0};var R=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var i=f.call(e);if(i!==f.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,i=t.constructor;if(a!==i&&!(y.isFunction(a)&&a instanceof a&&y.isFunction(i)&&i instanceof i)&&"constructor"in e&&"constructor"in t)return!1}r=r||[];for(var s=(n=n||[]).length;s--;)if(n[s]===e)return r[s]===t;if(n.push(e),r.push(t),o){if((s=e.length)!==t.length)return!1;for(;s--;)if(!R(e[s],t[s],n,r))return!1}else{var l,c=y.keys(e),s=c.length;if(y.keys(t).length!==s)return!1;for(;s--;)if(l=c[s],!y.has(t,l)||!R(e[l],t[l],n,r))return!1}return n.pop(),r.pop(),!0};y.isEqual=function(e,t){return R(e,t)},y.isEmpty=function(e){return null==e||(E(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length)},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=m||function(e){return"[object Array]"===f.call(e)},y.isObject=function(e){var t=typeof e;return"function"==t||"object"==t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){y["is"+t]=function(e){return f.call(e)==="[object "+t+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===f.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return null!=e&&h.call(e,t)},y.noConflict=function(){return o._=a,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=C,y.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},y.matcher=y.matches=function(t){return t=y.extendOwn({},t),function(e){return y.isMatch(e,t)}},y.times=function(e,t,n){var r=Array(Math.max(0,e));t=b(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},m=y.invert($),C=function(t){function n(e){return t[e]}var e="(?:"+y.keys(t).join("|")+")",r=RegExp(e),i=RegExp(e,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,n):e}};y.escape=C($),y.unescape=C(m),y.result=function(e,t,n){t=null==e?void 0:e[t];return void 0===t&&(t=n),y.isFunction(t)?t.call(e):t};var D=0;y.uniqueId=function(e){var t=++D+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};function M(e){return"\\"+P[e]}var I=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\u2028|\u2029/g;y.template=function(o,e,t){!e&&t&&(e=t),e=y.defaults({},e,y.templateSettings);var n=RegExp([(e.escape||I).source,(e.interpolate||I).source,(e.evaluate||I).source].join("|")+"|$","g"),a=0,s="__p+='";o.replace(n,function(e,t,n,r,i){return s+=o.slice(a,i).replace(O,M),a=i+e.length,t?s+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),e}),s+="';\n",s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+(s=!e.variable?"with(obj||{}){\n"+s+"}\n":s)+"return __p;\n";try{var r=new Function(e.variable||"obj","_",s)}catch(e){throw e.source=s,e}t=function(e){return r.call(this,e,y)},n=e.variable||"obj";return t.source="function("+n+"){\n"+s+"}",t},y.chain=function(e){e=y(e);return e._chain=!0,e};function B(e,t){return e._chain?y(t).chain():t}y.mixin=function(n){y.each(y.functions(n),function(e){var t=y[e]=n[e];y.prototype[e]=function(){var e=[this._wrapped];return u.apply(e,arguments),B(this,t.apply(y,e))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=s[t];y.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],B(this,e)}}),y.each(["concat","join","slice"],function(e){var t=s[e];y.prototype[e]=function(){return B(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}).call(this),function(ce){"use strict";function e(e){if(!ge(e))return Kn;E(e.objectMaxDepth)&&(Kn.objectMaxDepth=w(e.objectMaxDepth)?e.objectMaxDepth:NaN),E(e.urlErrorParamsEnabled)&&b(e.urlErrorParamsEnabled)&&(Kn.urlErrorParamsEnabled=e.urlErrorParamsEnabled)}function w(e){return y(e)&&0<e}function N(i,o){return o=o||Error,function(){for(var e="["+(i?i+":":"")+(t=arguments[0])+"] http://errors.angularjs.org/1.8.2/"+(i?i+"/":"")+t,t=1;t<arguments.length;t++){e=e+(1==t?"?":"&")+"p"+(t-1)+"=";var n=encodeURIComponent,r=arguments[t];e+=n(r="function"==typeof r?r.toString().replace(/ \{[\s\S]*$/,""):void 0===r?"undefined":"string"!=typeof r?JSON.stringify(r):r)}return new o(e)}}function _(e){if(null!=e&&!c(e)){if(ye(e)||ve(e)||Gn&&e instanceof Gn)return 1;var t="length"in Object(e)&&e.length;return y(t)&&(0<=t&&t-1 in e||"function"==typeof e.item)}}function ue(e,t,n){if(e)if(we(e))for(i in e)"prototype"!==i&&"length"!==i&&"name"!==i&&e.hasOwnProperty(i)&&t.call(n,e[i],i,e);else if(ye(e)||_(e))for(var r="object"!=typeof e,i=0,o=e.length;i<o;i++)(r||i in e)&&t.call(n,e[i],i,e);else if(e.forEach&&e.forEach!==ue)e.forEach(t,n,e);else if(l(e))for(i in e)t.call(n,e[i],i,e);else if("function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e);else for(i in e)Jn.call(e,i)&&t.call(n,e[i],i,e);return e}function o(e,t,n){for(var r=Object.keys(e).sort(),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function g(n){return function(e,t){n(t,e)}}function f(e,t,n){for(var r=e.$$hashKey,i=0,o=t.length;i<o;++i){var a=t[i];if(ge(a)||we(a))for(var s=Object.keys(a),l=0,c=s.length;l<c;l++){var u=s[l],d=a[u];n&&ge(d)?$(d)?e[u]=new Date(d.valueOf()):h(d)?e[u]=new RegExp(d):d.nodeName?e[u]=d.cloneNode(!0):m(d)?e[u]=d.clone():"__proto__"!==u&&(ge(e[u])||(e[u]=ye(d)?[]:{}),f(e[u],[d],!0)):e[u]=d}}return r?e.$$hashKey=r:delete e.$$hashKey,e}function de(e){return f(e,er.call(arguments,1),!1)}function t(e){return f(e,er.call(arguments,1),!0)}function v(e){return parseInt(e,10)}function fe(e,t){return de(Object.create(e),t)}function he(){}function me(e){return e}function k(e){return function(){return e}}function u(e){return we(e.toString)&&e.toString!==rr}function pe(e){return void 0===e}function E(e){return void 0!==e}function ge(e){return null!==e&&"object"==typeof e}function l(e){return null!==e&&"object"==typeof e&&!ir(e)}function ve(e){return"string"==typeof e}function y(e){return"number"==typeof e}function $(e){return"[object Date]"===rr.call(e)}function ye(e){return Array.isArray(e)||e instanceof Array}function be(e){switch(rr.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return 1;default:return e instanceof Error}}function we(e){return"function"==typeof e}function h(e){return"[object RegExp]"===rr.call(e)}function c(e){return e&&e.window===e}function xe(e){return e&&e.$evalAsync&&e.$watch}function b(e){return"boolean"==typeof e}function m(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function $e(e){return Zn(e.nodeName||e[0]&&e[0].nodeName)}function Ce(e,t){t=e.indexOf(t);return 0<=t&&e.splice(t,1),t}function A(e,n,t){function i(e,t,n){if(--n<0)return"...";var r,i=t.$$hashKey;if(ye(e)){r=0;for(var o=e.length;r<o;r++)t.push(a(e[r],n))}else if(l(e))for(r in e)t[r]=a(e[r],n);else if(e&&"function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&(t[r]=a(e[r],n));else for(r in e)Jn.call(e,r)&&(t[r]=a(e[r],n));return i?t.$$hashKey=i:delete t.$$hashKey,t}function a(e,t){if(!ge(e))return e;if(-1!==(n=o.indexOf(e)))return s[n];if(c(e)||xe(e))throw or("cpws");var n=!1,r=function(e){switch(rr.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(a(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t;case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":return(t=new RegExp(e.source,e.toString().match(/[^/]*$/)[0])).lastIndex=e.lastIndex,t;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(we(e.cloneNode))return e.cloneNode(!0)}(e);return void 0===r&&(r=ye(e)?[]:Object.create(ir(e)),n=!0),o.push(e),s.push(r),n?i(e,r,t):r}var r,o=[],s=[];if(t=w(t)?t:NaN,n){if((r=n)&&y(r.length)&&dr.test(rr.call(r))||"[object ArrayBuffer]"===rr.call(n))throw or("cpta");if(e===n)throw or("cpi");return ye(n)?n.length=0:ue(n,function(e,t){"$$hashKey"!==t&&delete n[t]}),o.push(e),s.push(n),i(e,n,t)}return a(e,t)}function x(e,t){return e===t||e!=e&&t!=t}function Se(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var n,r=typeof e;if(r===typeof t&&"object"===r){if(!ye(e)){if($(e))return!!$(t)&&x(e.getTime(),t.getTime());if(h(e))return!!h(t)&&e.toString()===t.toString();if(xe(e)||xe(t)||c(e)||c(t)||ye(t)||$(t)||h(t))return!1;for(n in r=Ne(),e)if("$"!==n.charAt(0)&&!we(e[n])){if(!Se(e[n],t[n]))return!1;r[n]=!0}for(n in t)if(!(n in r)&&"$"!==n.charAt(0)&&E(t[n])&&!we(t[n]))return!1;return!0}if(!ye(t))return!1;if((r=e.length)===t.length){for(n=0;n<r;n++)if(!Se(e[n],t[n]))return!1;return!0}}return!1}function T(e,t,n){return e.concat(er.call(t,n))}function ke(e,t){var n=2<arguments.length?er.call(arguments,2):[];return!we(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,T(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function C(e,t){var n=t;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?n=void 0:c(t)?n="$WINDOW":t&&ce.document===t?n="$DOCUMENT":xe(t)&&(n="$SCOPE"),n}function i(e,t){if(!pe(e))return y(t)||(t=t?2:null),JSON.stringify(e,C,t)}function a(e){return ve(e)?JSON.parse(e):e}function S(e,t){e=e.replace(gr,"");e=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return cr(e)?t:e}function R(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}function D(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset();return R(e,n*((t=S(t,r))-r))}function Ee(e){e=Gn(e).clone().empty();var t=Gn("<div></div>").append(e).html();try{return e[0].nodeType===xr?Zn(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+Zn(t)})}catch(e){return Zn(t)}}function s(e){try{return decodeURIComponent(e)}catch(e){}}function M(e){var i={};return ue((e||"").split("&"),function(e){var t,n,r;e&&(n=e=e.replace(/\+/g,"%20"),-1!==(t=e.indexOf("="))&&(n=e.substring(0,t),r=e.substring(t+1)),E(n=s(n))&&(r=!E(r)||s(r),Jn.call(i,n)?ye(i[n])?i[n].push(r):i[n]=[i[n],r]:i[n]=r))}),i}function d(e){return p(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function p(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function n(n,e){var r,i,t={};ue(vr,function(e){e+="app",!r&&n.hasAttribute&&n.hasAttribute(e)&&(i=(r=n).getAttribute(e))}),ue(vr,function(e){var t;e+="app",!r&&(t=n.querySelector("["+e.replace(":","\\:")+"]"))&&(i=(r=t).getAttribute(e))}),r&&(yr?(t.strictDi=null!==function(e,t){for(var n,r=vr.length,i=0;i<r;++i)if(n=vr[i]+t,ve(n=e.getAttribute(n)))return n;return null}(r,"strict-di"),e(r,i?[i]:[],t)):ce.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match."))}function r(t,n,r){r=de({strictDi:!1},r=!ge(r)?{}:r);function i(){if((t=Gn(t)).injector()){var e=t[0]===ce.document?"document":Ee(t);throw or("btstrpd",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}return(n=n||[]).unshift(["$provide",function(e){e.value("$rootElement",t)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng"),(e=Le(n,r.strictDi)).invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),e}var e=/^NG_ENABLE_DEBUG_INFO!/,o=/^NG_DEFER_BOOTSTRAP!/;if(ce&&e.test(ce.name)&&(r.debugInfoEnabled=!0,ce.name=ce.name.replace(e,"")),ce&&!o.test(ce.name))return i();ce.name=ce.name.replace(o,""),ar.resumeBootstrap=function(e){return ue(e,function(e){n.push(e)}),i()},we(ar.resumeDeferredBootstrap)&&ar.resumeDeferredBootstrap()}function I(){ce.name="NG_ENABLE_DEBUG_INFO!"+ce.name,ce.location.reload()}function P(e){if(!(e=ar.element(e).injector()))throw or("test");return e.get("$$testability")}function Ae(e,n){return n=n||"_",e.replace(br,function(e,t){return(t?n:"")+e.toLowerCase()})}function O(){W.legacyXHTMLReplacement=!0}function Te(e,t,n){if(!e)throw or("areq",t||"?",n||"required");return e}function B(e,t,n){return Te(we(e=n&&ye(e)?e[e.length-1]:e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function L(e,t){if("hasOwnProperty"===e)throw or("badname",t)}function F(e){for(var t,n=e[0],r=e[e.length-1],i=1;n!==r&&(n=n.nextSibling);i++)!t&&e[i]===n||(t=t||Gn(er.call(e,0,i))).push(n);return t||e}function Ne(){return Object.create(null)}function U(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=!u(e)||ye(e)||$(e)?i(e):e.toString()}return e}function H(e,t){if(ye(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(ge(e))for(n in t=t||{},e)"$"===n.charAt(0)&&"$"===n.charAt(1)||(t[n]=e[n]);return t||e}function z(e,t){return t.toUpperCase()}function V(e){return e.replace(kr,z)}function j(e){return 1===(e=e.nodeType)||!e||9===e}function q(e,t){var n,r,i,o,a=t.createDocumentFragment(),s=[];if(_r.test(e)){if(n=a.appendChild(t.createElement("div")),r=(Rr.exec(e)||["",""])[1].toLowerCase(),i=W.legacyXHTMLReplacement?e.replace(Dr,"<$1></$2>"):e,lr<10)for(r=Pr[r]||Pr._default,n.innerHTML=r[1]+i+r[2],o=r[0];o--;)n=n.firstChild;else{for(o=(r=Mr[r]||[]).length;-1<--o;)n.appendChild(ce.document.createElement(r[o])),n=n.firstChild;n.innerHTML=i}s=T(s,n.childNodes),(n=a.firstChild).textContent=""}else s.push(t.createTextNode(e));return a.textContent="",a.innerHTML="",ue(s,function(e){a.appendChild(e)}),a}function W(e){if(e instanceof W)return e;var t,n;if(ve(e)&&(e=fr(e),n=!0),!(this instanceof W)){if(n&&"<"!==e.charAt(0))throw Tr("nosel");return new W(e)}n?(n=ce.document,re(this,e=(t=Nr.exec(e))?[n.createElement(t[1])]:(t=q(e,n))?t.childNodes:[])):we(e)?le(e):re(this,e)}function _e(e){return e.cloneNode(!0)}function G(e,t){!t&&j(e)&&Gn.cleanData([e]),e.querySelectorAll&&Gn.cleanData(e.querySelectorAll("*"))}function Y(e){for(var t in e)return;return 1}function K(e){var t=e.ng339,n=t&&Cr[t],r=n&&n.events;(n=n&&n.data)&&!Y(n)||r&&!Y(r)||(delete Cr[t],e.ng339=void 0)}function X(n,e,r,t){if(E(t))throw Tr("offargs");var i=(t=Z(n))&&t.events,o=t&&t.handle;if(o){if(e){var a=function(e){var t=i[e];E(r)&&Ce(t||[],r),E(r)&&t&&0<t.length||(n.removeEventListener(e,o),delete i[e])};ue(e.split(" "),function(e){a(e),Ar[e]&&a(Ar[e])})}else for(e in i)"$destroy"!==e&&n.removeEventListener(e,o),delete i[e];K(n)}}function J(e,t){var n=e.ng339;(n=n&&Cr[n])&&(t?delete n.data[t]:n.data={},K(e))}function Z(e,t){var n=(n=e.ng339)&&Cr[n];return t&&!n&&(e.ng339=n=++Sr,n=Cr[n]={events:{},data:{},handle:void 0}),n}function Q(e,t,n){if(j(e)){var r,i=E(n),o=!i&&t&&!ge(t),a=!t;if(e=(e=Z(e,!o))&&e.data,i)e[V(t)]=n;else{if(a)return e;if(o)return e&&e[V(t)];for(r in t)e[V(r)]=t[r]}}}function ee(e,t){return!!e.getAttribute&&-1<(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")}function te(e,t){var n,r;t&&e.setAttribute&&(n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n,ue(t.split(" "),function(e){e=fr(e),r=r.replace(" "+e+" "," ")}),r!==n&&e.setAttribute("class",fr(r)))}function ne(e,t){var n,r;t&&e.setAttribute&&(n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n,ue(t.split(" "),function(e){e=fr(e),-1===r.indexOf(" "+e+" ")&&(r+=e+" ")}),r!==n&&e.setAttribute("class",fr(r)))}function re(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;r<n;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function ie(e,t){return oe(e,"$"+(t||"ngController")+"Controller")}function oe(e,t,n){for(9===e.nodeType&&(e=e.documentElement),t=ye(t)?t:[t];e;){for(var r=0,i=t.length;r<i;r++)if(E(n=Gn.data(e,t[r])))return n;e=e.parentNode||11===e.nodeType&&e.host}}function ae(e){for(G(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function se(e,t){t||G(e);t=e.parentNode;t&&t.removeChild(e)}function le(e){function t(){ce.document.removeEventListener("DOMContentLoaded",t),ce.removeEventListener("load",t),e()}"complete"===ce.document.readyState?ce.setTimeout(e):(ce.document.addEventListener("DOMContentLoaded",t),ce.addEventListener("load",t))}function Re(e,t){t=Ur[t.toLowerCase()];return t&&Hr[$e(e)]&&t}function De(s,l){function e(e,t){e.isDefaultPrevented=function(){return e.defaultPrevented};var n,r=l[t||e.type],i=r?r.length:0;if(i){pe(e.immediatePropagationStopped)&&(n=e.stopImmediatePropagation,e.stopImmediatePropagation=function(){e.immediatePropagationStopped=!0,e.stopPropagation&&e.stopPropagation(),n&&n.call(e)}),e.isImmediatePropagationStopped=function(){return!0===e.immediatePropagationStopped};var o=r.specialHandlerWrapper||Me;1<i&&(r=H(r));for(var a=0;a<i;a++)e.isImmediatePropagationStopped()||o(s,e,r[a])}}return e.elem=s,e}function Me(e,t,n){n.call(e,t)}function Ie(e,t,n){var r=t.relatedTarget;r&&(r===e||Fr.call(e,r))||n.call(e,t)}function Pe(){this.$get=function(){return de(W,{hasClass:function(e,t){return ee(e=e.attr?e[0]:e,t)},addClass:function(e,t){return ne(e=e.attr?e[0]:e,t)},removeClass:function(e,t){return te(e=e.attr?e[0]:e,t)}})}}function Oe(e,t){var n=e&&e.$$hashKey;return n?"function"==typeof n?e.$$hashKey():n:"function"===(n=typeof e)||"object"===n&&null!==e?e.$$hashKey=n+":"+(t||function(){return++sr})():n+":"+e}function Be(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}function Fe(e){return(e=Function.prototype.toString.call(e).replace(Jr,"")).match(Gr)||e.match(Yr)}function Le(e,l){function t(n){return function(e,t){if(!ge(e))return n(e,t);ue(e,g(n))}}function o(e,t){if(L(e,"service"),!(t=we(t)||ye(t)?d.instantiate(t):t).$get)throw Zr("pget",e);return u[e+"Provider"]=t}function n(e,t,n){return o(e,{$get:!1!==n?(r=e,i=t,function(){var e=m.invoke(i,this);if(pe(e))throw Zr("undef",r);return e}):t});var r,i}function i(e){Te(pe(e)||ye(e),"modulesToLoad","not an array");var n,r=[];return ue(e,function(t){function e(e){for(var t=0,n=e.length;t<n;t++){var r=e[t],i=d.get(r[0]);i[r[1]].apply(i,r[2])}}if(!s.get(t)){s.set(t,!0);try{ve(t)?(n=Yn(t),m.modules[t]=n,r=r.concat(i(n.requires)).concat(n._runBlocks),e(n._invokeQueue),e(n._configBlocks)):we(t)||ye(t)?r.push(d.invoke(t)):B(t,"module")}catch(e){throw ye(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Zr("modulerr",t,e.stack||e.message||e)}}}),r}function r(n,r){function s(t,e){if(n.hasOwnProperty(t)){if(n[t]===a)throw Zr("cdep",t+" <- "+c.join(" <- "));return n[t]}try{return c.unshift(t),n[t]=a,n[t]=r(t,e),n[t]}catch(e){throw n[t]===a&&delete n[t],e}finally{c.shift()}}function o(e,t,n){for(var r=[],i=0,o=(e=Le.$$annotate(e,l,n)).length;i<o;i++){var a=e[i];if("string"!=typeof a)throw Zr("itkn",a);r.push(t&&t.hasOwnProperty(a)?t[a]:s(a,n))}return r}return{invoke:function(e,t,n,r){var i;return"string"==typeof n&&(r=n,n=null),n=o(e,n,r),r=e=ye(e)?e[e.length-1]:e,(r=!lr&&"function"==typeof r&&(i=b(i=r.$$ngIsClass)?i:r.$$ngIsClass=/^class\b/.test(Function.prototype.toString.call(r))))?(n.unshift(null),new(Function.prototype.bind.apply(e,n))):e.apply(t,n)},instantiate:function(e,t,n){var r=ye(e)?e[e.length-1]:e;return(e=o(e,t,n)).unshift(null),new(Function.prototype.bind.apply(r,e))},get:s,annotate:Le.$$annotate,has:function(e){return u.hasOwnProperty(e+"Provider")||n.hasOwnProperty(e)}}}l=!0===l;var a={},c=[],s=new qr,u={$provide:{provider:t(o),factory:t(n),service:t(function(e,t){return n(e,["$injector",function(e){return e.instantiate(t)}])}),value:t(function(e,t){return n(e,k(t),!1)}),constant:t(function(e,t){L(e,"constant"),u[e]=t,f[e]=t}),decorator:function(e,t){var n=d.get(e+"Provider"),r=n.$get;n.$get=function(){var e=m.invoke(r,n);return m.invoke(t,null,{$delegate:e})}}}},d=u.$injector=r(u,function(e,t){throw ar.isString(t)&&c.push(t),Zr("unpr",c.join(" <- "))}),f={},h=r(f,function(e,t){t=d.get(e+"Provider",t);return m.invoke(t.$get,t,void 0,e)}),m=h;u.$injectorProvider={$get:k(h)},m.modules=d.modules=Ne();e=i(e);return(m=h.get("$injector")).strictDi=l,ue(e,function(e){e&&m.invoke(e)}),m.loadNewModules=function(e){ue(i(e),function(e){e&&m.invoke(e)})},m}function Ue(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,i,r){function o(e){var t;e?(e.scrollIntoView(),we(t=a.yOffset)?t=t():m(t)?(t=t[0],t="fixed"!==n.getComputedStyle(t).position?0:t.getBoundingClientRect().bottom):y(t)||(t=0),t&&(e=e.getBoundingClientRect().top,n.scrollBy(0,e-t))):n.scrollTo(0,0)}function a(e){var t,n,r;(e=ve(e)?e:y(e)?e.toString():i.hash())?(t=s.getElementById(e))?o(t):(n=s.getElementsByName(e),r=null,Array.prototype.some.call(n,function(e){if("a"===$e(e))return r=e,!0}),(t=r)?o(t):"top"===e&&o(null)):o(null)}var s=n.document;return e&&r.$watch(function(){return i.hash()},function(e,t){var n;e===t&&""===e||(e=function(){r.$evalAsync(a)},"complete"===(n=n||ce).document.readyState?n.setTimeout(e):Gn(n).on("load",e))}),a}]}function He(e,t){return e||t?e?t?(e=ye(e)?e.join(" "):e)+" "+(t=ye(t)?t.join(" "):t):e:t:""}function ze(e){return ge(e)?e:{}}function Ve(o,e,t,a,n){function r(){b=null,i()}function s(){Se(p=pe(p=w())?null:p,C)&&(p=C),g=C=p}function i(){var e=g;s(),v===l.url()&&e===p||(v=l.url(),g=p,ue(x,function(e){e(l.url(),p)}))}var l=this,c=o.location,u=o.history,d=o.setTimeout,f=o.clearTimeout,h={},m=n(t);l.isMock=!1,l.$$completeOutstandingRequest=m.completeTask,l.$$incOutstandingRequestCount=m.incTaskCount,l.notifyWhenNoOutstandingRequests=m.notifyWhenNoPendingTasks;var p,g,v=c.href,y=e.find("base"),b=null,w=a.history?function(){try{return u.state}catch(e){}}:he;s(),l.url=function(e,t,n){if(pe(n)&&(n=null),c!==o.location&&(c=o.location),u!==o.history&&(u=o.history),e){var r=g===n;if(e=en(e).href,v===e&&(!a.history||r))return l;var i=v&&bt(v)===bt(e);return v=e,g=n,!a.history||i&&r?(i||(b=e),t?c.replace(e):i?(t=c,n=-1===(r=(n=e).indexOf("#"))?"":n.substr(r),t.hash=n):c.href=e,c.href!==e&&(b=e)):(u[t?"replaceState":"pushState"](n,"",e),s()),b=b&&e,l}return(b||c.href).replace(/#$/,"")},l.state=function(){return p};var x=[],$=!1,C=null;l.onUrlChange=function(e){return $||(a.history&&Gn(o).on("popstate",r),Gn(o).on("hashchange",r),$=!0),x.push(e),e},l.$$applicationDestroyed=function(){Gn(o).off("hashchange popstate",r)},l.$$checkUrlChange=i,l.baseHref=function(){var e=y.attr("href");return e?e.replace(/^(https?:)?\/\/[^/]*/,""):""},l.defer=function(e,t,n){var r;return t=t||0,n=n||m.DEFAULT_TASK_TYPE,m.incTaskCount(n),r=d(function(){delete h[r],m.completeTask(e,n)},t),h[r]=n,r},l.defer.cancel=function(e){if(h.hasOwnProperty(e)){var t=h[e];return delete h[e],f(e),m.completeTask(he,t),!0}return!1}}function je(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(e,t,n,r,i){return new Ve(e,r,t,n,i)}]}function qe(){this.$get=function(){function e(e,t){function n(e){e!==c&&(u?u===e&&(u=e.n):u=e,r(e.n,e.p),r(e,c),(c=e).n=null)}function r(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}if(e in d)throw N("$cacheFactory")("iid",e);var i=0,o=de({},t,{id:e}),a=Ne(),s=t&&t.capacity||Number.MAX_VALUE,l=Ne(),c=null,u=null;return d[e]={put:function(e,t){if(!pe(t))return s<Number.MAX_VALUE&&n(l[e]||(l[e]={key:e})),e in a||i++,a[e]=t,s<i&&this.remove(u.key),t},get:function(e){if(s<Number.MAX_VALUE){var t=l[e];if(!t)return;n(t)}return a[e]},remove:function(e){if(s<Number.MAX_VALUE){var t=l[e];if(!t)return;t===c&&(c=t.p),t===u&&(u=t.n),r(t.n,t.p),delete l[e]}e in a&&(delete a[e],i--)},removeAll:function(){a=Ne(),i=0,l=Ne(),c=u=null},destroy:function(){l=o=a=null,delete d[e]},info:function(){return de({},o,{size:i})}}}var d={};return e.info=function(){var n={};return ue(d,function(e,t){n[t]=e.info()}),n},e.get=function(e){return d[e]},e}}function We(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Ge(n,t){function h(e,r,i){var o=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,a=Ne();return ue(e,function(e,t){if((e=e.trim())in s)a[t]=s[e];else{var n=e.match(o);if(!n)throw ai("iscp",r,t,e,i?"controller bindings definition":"isolate scope definition");a[t]={mode:n[1][0],collection:"*"===n[2],optional:"?"===n[3],attrName:n[4]||t},n[4]&&(s[e]=a[t])}}),a}var I={},P=/^\s*directive:\s*([\w-]+)\s+(.*)$/,O=/(([\w-]+)(?::([^;]+))?;?)/,B=function(e){var t,n={};for(e=e.split(","),t=0;t<e.length;t++)n[e[t]]=!0;return n}("ngSrc,ngSrcset,src,srcset"),u=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,F=/^(on[a-z]+|formaction)$/,s=Ne();this.directive=function e(c,t){return Te(c,"name"),L(c,"directive"),ve(c)?(function(e){var t=e.charAt(0);if(!t||t!==Zn(t))throw ai("baddir",e);if(e!==e.trim())throw ai("baddir",e)}(c),Te(t,"directiveFactory"),I.hasOwnProperty(c)||(I[c]=[],n.factory(c+"Directive",["$injector","$exceptionHandler",function(a,s){var l=[];return ue(I[c],function(e,t){try{var n=a.invoke(e);we(n)?n={compile:k(n)}:!n.compile&&n.link&&(n.compile=k(n.link)),n.priority=n.priority||0,n.index=t,n.name=n.name||c,n.require=(!ye(o=(i=n).require||i.controller&&i.name)&&ge(o)&&ue(o,function(e,t){var n=e.match(u);e.substring(n[0].length)||(o[t]=n[0]+t)}),o);var r=n,i=n.restrict;if(i&&(!ve(i)||!/[EACM]/.test(i)))throw ai("badrestrict",i,c);r.restrict=i||"EA",n.$$moduleName=e.$$moduleName,l.push(n)}catch(e){s(e)}var i,o}),l}])),I[c].push(t)):ue(c,g(e)),this},this.component=function e(t,i){function n(r){function e(n){return we(n)||ye(n)?function(e,t){return r.invoke(n,this,{$element:e,$attrs:t})}:n}var t=i.template||i.templateUrl?i.template:"",n={controller:o,controllerAs:function(e,t){if(t&&ve(t))return t;if(ve(e)){e=fi.exec(e);if(e)return e[3]}}(i.controller)||i.controllerAs||"$ctrl",template:e(t),templateUrl:e(i.templateUrl),transclude:i.transclude,scope:{},bindToController:i.bindings||{},restrict:"E",require:i.require};return ue(i,function(e,t){"$"===t.charAt(0)&&(n[t]=e)}),n}if(!ve(t))return ue(t,g(ke(this,e))),this;var o=i.controller||function(){};return ue(i,function(e,t){"$"===t.charAt(0)&&(n[t]=e,we(o)&&(o[t]=e))}),n.$inject=["$injector"],this.directive(t,n)},this.aHrefSanitizationTrustedUrlList=function(e){return E(e)?(t.aHrefSanitizationTrustedUrlList(e),this):t.aHrefSanitizationTrustedUrlList()},Object.defineProperty(this,"aHrefSanitizationWhitelist",{get:function(){return this.aHrefSanitizationTrustedUrlList},set:function(e){this.aHrefSanitizationTrustedUrlList=e}}),this.imgSrcSanitizationTrustedUrlList=function(e){return E(e)?(t.imgSrcSanitizationTrustedUrlList(e),this):t.imgSrcSanitizationTrustedUrlList()},Object.defineProperty(this,"imgSrcSanitizationWhitelist",{get:function(){return this.imgSrcSanitizationTrustedUrlList},set:function(e){this.imgSrcSanitizationTrustedUrlList=e}});var i=!0,d=!(this.debugInfoEnabled=function(e){return E(e)?(i=e,this):i});this.strictComponentBindingsEnabled=function(e){return E(e)?(d=e,this):d};var f=10;this.onChangesTtl=function(e){return arguments.length?(f=e,this):f};var m=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(m=e,this):m};var p=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(p=e,this):p};var le=Ne();function e(t,e){ue(e,function(e){le[e.toLowerCase()]=t})}this.addPropertySecurityContext=function(e,t,n){var r=e.toLowerCase()+"|"+t.toLowerCase();if(r in le&&le[r]!==n)throw ai("ctxoverride",e,t,le[r],n);return le[r]=n,this},e(Oi.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),e(Oi.CSS,["*|style"]),e(Oi.URL,"area|href area|ping a|href a|ping blockquote|cite body|background del|cite input|src ins|cite q|cite".split(" ")),e(Oi.MEDIA_URL,"audio|src img|src img|srcset source|src source|srcset track|src video|src video|poster".split(" ")),e(Oi.RESOURCE_URL,"*|formAction applet|code applet|codebase base|href embed|src frame|src form|action head|profile html|manifest iframe|src link|href media|src object|codebase object|data script|src".split(" ")),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function($,C,L,U,S,H,k,E,r){function o(){try{if(!--e)throw a=void 0,ai("infchng",f);k.$apply(function(){for(var e=0,t=a.length;e<t;++e)try{a[e]()}catch(e){L(e)}a=void 0})}finally{e++}}function s(e,t){if(!e)return e;if(!ve(e))throw ai("srcset",t,e.toString());for(var n="",r=fr(e),i=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,i=/\s/.test(r)?i:/(,)/,r=r.split(i),i=Math.floor(r.length/2),o=0;o<i;o++)var a=2*o,n=(n=n+E.getTrustedMediaUrl(fr(r[a])))+(" "+fr(r[1+a]));return r=fr(r[2*o]).split(/\s/),n+=E.getTrustedMediaUrl(fr(r[0])),2===r.length&&(n+=" "+fr(r[1])),n}function z(e,t){if(t)for(var n,r=Object.keys(t),i=0,o=r.length;i<o;i++)this[n=r[i]]=t[n];else this.$attr={};this.$$element=e}function V(e,t){try{e.addClass(t)}catch(e){}}function j(a,e,t,n,s){var l=q(a=!(a instanceof Gn)?Gn(a):a,e,a,t,n,s);j.$$addScopeClass(a);var c=null;return function(e,t,n){if(!a)throw ai("multilink");Te(e,"scope"),s&&s.needsNewScope&&(e=e.$parent.$new());var r=(n=n||{}).parentBoundTranscludeFn,i=n.transcludeControllers;if(n=n.futureParentElement,r&&r.$$boundTransclude&&(r=r.$$boundTransclude),n="html"!==(c=c||((n=n&&n[0])&&"foreignobject"!==$e(n)&&rr.call(n).match(/SVG/)?"svg":"html"))?Gn(ne(c,Gn("<div></div>").append(a).html())):t?Lr.clone.call(a):a,i)for(var o in i)n.data("$"+o+"Controller",i[o].instance);return j.$$addScopeInfo(n,e),t&&t(n,e),l&&l(e,n,n,r),t||(a=l=null),n}}function q(e,u,t,n,r,i){for(var o,a,s,l,d,f=[],c=ye(e)||e instanceof Gn,h=0;h<e.length;h++)o=new z,11===lr&&function(e,t,n){var r,i=e[t],o=i.parentNode;if(i.nodeType===xr)for(;(r=o?i.nextSibling:e[t+1])&&r.nodeType===xr;)i.nodeValue+=r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===e[t+1]&&e.splice(t+1,1)}(e,h,c),(i=(a=G(e[h],[],o,0===h?n:void 0,r)).length?J(a,e[h],o,u,t,null,[],[],i):null)&&i.scope&&j.$$addScopeClass(o.$$element),o=i&&i.terminal||!(s=e[h].childNodes)||!s.length?null:q(s,i?(i.transcludeOnThisElement||!i.templateOnThisElement)&&i.transclude:u),(i||o)&&(f.push(h,i,o),l=!0,d=d||i),i=null;return l?function(e,t,n,r){var i,o,a,s,l,c;if(d)for(c=Array(t.length),s=0;s<f.length;s+=3)c[i=f[s]]=t[i];else c=t;for(s=0,l=f.length;s<l;)o=c[f[s++]],t=f[s++],i=f[s++],t?(t.scope?(a=e.$new(),j.$$addScopeInfo(Gn(o),a)):a=e,t(i,a,o,n,t.transcludeOnThisElement?W(e,t.transclude,r):!t.templateOnThisElement&&r?r:!r&&u?W(e,u):null)):i&&i(e,o.childNodes,void 0,r)}:null}function W(o,a,s){function e(e,t,n,r,i){return e||((e=o.$new(!1,i)).$$transcluded=!0),a(e,t,{parentBoundTranscludeFn:s,transcludeControllers:n,futureParentElement:r})}var t,n=e.$$slots=Ne();for(t in a.$$slots)n[t]=a.$$slots[t]?W(o,a.$$slots[t],s):null;return e}function G(e,t,n,r,i){var o,a,s,l=n.$attr;switch(e.nodeType){case 1:A(t,Ke(a=$e(e)),"E",r,i);for(var c=e.attributes,u=0,d=c&&c.length;u<d;u++){var f,h,m,p=!1,g=!1,v=!1,y=!1,b=!1,w=(h=c[u]).name,x=h.value;(f=(m=Ke(w.toLowerCase())).match(D))?(v="Attr"===f[1],y="Prop"===f[1],b="On"===f[1],w=w.replace(ci,"").toLowerCase().substr(4+f[1].length).replace(/_(.)/g,function(e,t){return t.toUpperCase()})):(f=m.match(M))&&function(e){if(I.hasOwnProperty(e))for(var t=$.get(e+"Directive"),n=0,r=t.length;n<r;n++)if((e=t[n]).multiElement)return!0;return!1}(f[1])&&(g=(p=w).substr(0,w.length-5)+"end",w=w.substr(0,w.length-6)),y||b?(n[m]=x,l[m]=h.name,y?function(e,t,n,o){if(F.test(o))throw ai("nodomevents");var r=function(e,t){t=t.toLowerCase();return le[e+"|"+t]||le["*|"+t]}(e=$e(e),o),a=me;"srcset"!==o||"img"!==e&&"source"!==e?r&&(a=E.getTrusted.bind(E,r)):a=N,t.push({priority:100,compile:function(e,t){var r=S(t[n]),i=S(t[n],function(e){return E.valueOf(e)});return{pre:function(t,n){function e(){var e=r(t);n[0][o]=a(e)}e(),t.$watch(i,e)}}}})}(e,t,m,w):t.push(Un(S,k,L,m,w,!1))):(l[m=Ke(w.toLowerCase())]=w,!v&&n.hasOwnProperty(m)||(n[m]=x,Re(e,m)&&(n[m]=!0)),function(e,t,i,o,n){var r=$e(e),a=function(e,t){if("srcdoc"===t)return E.HTML;if("src"===t||"ngSrc"===t)return-1===["img","video","audio","source","track"].indexOf(e)?E.RESOURCE_URL:E.MEDIA_URL;if("xlinkHref"===t)return"image"===e?E.MEDIA_URL:"a"===e?E.URL:E.RESOURCE_URL;if("form"===e&&"action"===t||"base"===e&&"href"===t||"link"===e&&"href"===t)return E.RESOURCE_URL;if("a"===e&&("href"===t||"ngHref"===t))return E.URL}(r,o),s=B[o]||n,l=C(i,!n,a,s);if(l){if("multiple"===o&&"select"===r)throw ai("selmulti",Ee(e));if(F.test(o))throw ai("nodomevents");t.push({priority:100,compile:function(){return{pre:function(e,t,n){t=n.$$observers||(n.$$observers=Ne());var r=n[o];r!==i&&(l=r&&C(r,!0,a,s),i=r),l&&(n[o]=l(e),(t[o]||(t[o]=[])).$$inter=!0,(n.$$observers&&n.$$observers[o].$$scope||e).$watch(l,function(e,t){"class"===o&&e!==t?n.$updateClass(e,t):n.$set(o,e)}))}}}})}}(e,t,x,m,v),A(t,m,"A",r,i,p,g))}if("input"===a&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!R)break;if(ve(l=ge(l=e.className)?l.animVal:l)&&""!==l)for(;e=O.exec(l);)A(t,m=Ke(e[2]),"C",r,i)&&(n[m]=fr(e[3])),l=l.substr(e.index+e[0].length);break;case xr:o=t,a=e.nodeValue,(s=C(a,!0))&&o.push({priority:0,compile:function(e){var r=!!(e=e.parent()).length;return r&&j.$$addBindingClass(e),function(e,t){var n=t.parent();r||j.$$addBindingClass(n),j.$$addBindingInfo(n,s.expressions),e.$watch(s,function(e){t[0].nodeValue=e})}}});break;case 8:if(!_)break;!function(e,t,n,r,i){try{var o,a=P.exec(e.nodeValue);a&&(o=Ke(a[1]),A(t,o,"M",r,i)&&(n[o]=fr(a[2])))}catch(e){}}(e,t,n,r,i)}return t.sort(T),t}function Y(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw ai("uterdir",t,n)}while(1===e.nodeType&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling,0<i)}else r.push(e);return Gn(r)}function K(o,a,s){return function(e,t,n,r,i){return t=Y(t[0],a,s),o(e,t,n,r,i)}}function X(e,t,n,r,i,o){var a;return e?j(t,n,r,i,o):function(){return a||(a=j(t,n,r,i,o),t=n=o=null),a.apply(this,arguments)}}function J(e,p,g,t,n,r,v,y,i){function o(e,t,n,r){e&&((e=n?K(e,n,r):e).require=s.require,e.directiveName=l,x!==s&&!s.$$isolateScope||(e=ie(e,{isolateScope:!0})),v.push(e)),t&&((t=n?K(t,n,r):t).require=s.require,t.directiveName=l,x!==s&&!s.$$isolateScope||(t=ie(t,{isolateScope:!0})),y.push(t))}function a(e,t,n,r,a){var i,o,s,l,c,u,d,f;for(i in p===n?f=(r=g).$$element:r=new z(f=Gn(n),g),c=t,x?l=t.$new(!0):b&&(c=t.$parent),a&&((d=function(e,t,n,r){var i;if(xe(e)||(r=n,n=t,t=e,e=void 0),S&&(i=u),n=n||(S?f.parent():f),!r)return a(e,t,i,n,m);var o=a.$$slots[r];if(o)return o(e,t,i,n,m);if(pe(o))throw ai("noslot",r,Ee(f))}).$$boundTransclude=a,d.isSlotFilled=function(e){return!!a.$$slots[e]}),w&&(u=function(e,t,n,r,i,o,a){var s,l=Ne();for(s in r){var c=r[s],u={$scope:c===a||c.$$isolateScope?i:o,$element:e,$attrs:t,$transclude:n},d=c.controller;"@"===d&&(d=t[c.name]),u=H(d,u,!0,c.controllerAs),l[c.name]=u,e.data("$"+c.name+"Controller",u.instance)}return l}(f,r,d,w,l,t,x)),x&&(j.$$addScopeInfo(f,l,!0,!($&&($===x||$===x.$$originalDirective))),j.$$addScopeClass(f,!0),l.$$isolateBindings=x.$$isolateBindings,(o=ae(t,r,l,l.$$isolateBindings,x)).removeWatches&&l.$on("$destroy",o.removeWatches)),u){o=w[i],s=u[i];var h=o.$$bindings.bindToController;s.instance=s(),f.data("$"+o.name+"Controller",s.instance),s.bindingInfo=ae(c,r,s.instance,h,o)}for(ue(w,function(e,t){var n=e.require;e.bindToController&&!ye(n)&&ge(n)&&de(u[t].instance,Z(t,n,f,u))}),ue(u,function(e){var t=e.instance;if(we(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){L(e)}if(we(t.$onInit))try{t.$onInit()}catch(e){L(e)}we(t.$doCheck)&&(c.$watch(function(){t.$doCheck()}),t.$doCheck()),we(t.$onDestroy)&&c.$on("$destroy",function(){t.$onDestroy()})}),i=0,o=v.length;i<o;i++)oe(s=v[i],s.isolateScope?l:t,f,r,s.require&&Z(s.directiveName,s.require,f,u),d);var m=t;for(x&&(x.template||null===x.templateUrl)&&(m=l),e&&e(m,n.childNodes,void 0,a),i=y.length-1;0<=i;i--)oe(s=y[i],s.isolateScope?l:t,f,r,s.require&&Z(s.directiveName,s.require,f,u),d);ue(u,function(e){we((e=e.instance).$postLink)&&e.$postLink()})}i=i||{};for(var s,l,c,u,d,f=-Number.MAX_VALUE,b=i.newScopeDirective,w=i.controllerDirectives,x=i.newIsolateScopeDirective,$=i.templateDirective,h=i.nonTlbTranscludeDirective,m=!1,C=!1,S=i.hasElementTranscludeDirective,k=g.$$element=Gn(p),E=t,A=!1,T=!1,N=0,_=e.length;N<_;N++){var R=(s=e[N]).$$start,D=s.$$end;if(R&&(k=Y(p,R,D)),c=void 0,f>s.priority)break;if((d=s.scope)&&(s.templateUrl||(ge(d)?(te("new/isolated scope",x||b,s,k),x=s):te("new/isolated scope",x,s,k)),b=b||s),l=s.name,!A&&(s.replace&&(s.templateUrl||s.template)||s.transclude&&!s.$$tlb)){for(d=N+1;A=e[d++];)if(A.transclude&&!A.$$tlb||A.replace&&(A.templateUrl||A.template)){T=!0;break}A=!0}if(!s.templateUrl&&s.controller&&(w=w||Ne(),te("'"+l+"' controller",w[l],s,k),w[l]=s),d=s.transclude)if(m=!0,s.$$tlb||(te("transclusion",h,s,k),h=s),"element"===d)S=!0,f=s.priority,c=k,k=g.$$element=Gn(j.$$createComment(l,g[l])),p=k[0],re(n,er.call(c,0),p),E=X(T,c,t,f,r&&r.name,{nonTlbTranscludeDirective:h});else{var M=Ne();if(ge(d)){c=ce.document.createDocumentFragment();var I,P=Ne(),O=Ne();for(I in ue(d,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,P[e]=t,M[t]=null,O[t]=n}),ue(k.contents(),function(e){var t=P[Ke($e(e))];t?(O[t]=!0,M[t]=M[t]||ce.document.createDocumentFragment(),M[t].appendChild(e)):c.appendChild(e)}),ue(O,function(e,t){if(!e)throw ai("reqslot",t)}),M)M[I]&&(E=Gn(M[I].childNodes),M[I]=X(T,E,t));c=Gn(c.childNodes)}else c=Gn(_e(p)).contents();k.empty(),(E=X(T,c,t,void 0,void 0,{needsNewScope:s.$$isolateScope||s.$$newScope})).$$slots=M}if(s.template)if(C=!0,te("template",$,s,k),d=we(($=s).template)?s.template(k,g):s.template,d=se(d),s.replace){if(r=s,c=_r.test(d)?Je(ne(s.templateNamespace,fr(d))):[],p=c[0],1!==c.length||1!==p.nodeType)throw ai("tplrt",l,"");re(n,k,p),d=G(p,[],_={$attr:{}});var B=e.splice(N+1,e.length-(N+1));(x||b)&&Q(d,x,b),e=e.concat(d).concat(B),ee(g,_),_=e.length}else k.html(d);if(s.templateUrl)C=!0,te("template",$,s,k),($=s).replace&&(r=s),a=function(s,l,c,u,d,f,h,m){var p,g,v=[],y=l[0],b=s.shift(),w=fe(b,{templateUrl:null,transclude:null,replace:null,$$originalDirective:b}),x=we(b.templateUrl)?b.templateUrl(l,c):b.templateUrl,$=b.templateNamespace;return l.empty(),U(x).then(function(e){var n,t;if(e=se(e),b.replace){if(e=_r.test(e)?Je(ne($,fr(e))):[],n=e[0],1!==e.length||1!==n.nodeType)throw ai("tplrt",b.name,x);e={$attr:{}},re(u,l,n);var r=G(n,[],e);ge(b.scope)&&Q(r,!0),s=r.concat(s),ee(c,e)}else n=y,l.html(e);for(s.unshift(w),p=J(s,n,c,d,l,b,f,h,m),ue(u,function(e,t){e===n&&(u[t]=l[0])}),g=q(l[0].childNodes,d);v.length;){e=v.shift(),t=v.shift();var i,o=v.shift(),a=v.shift(),r=l[0];e.$$destroyed||(t!==y&&(i=t.className,m.hasElementTranscludeDirective&&b.replace||(r=_e(n)),re(o,Gn(t),r),V(Gn(r),i)),t=p.transcludeOnThisElement?W(e,p.transclude,a):a,p(g,e,r,u,t))}v=null}).catch(function(e){be(e)&&L(e)}),function(e,t,n,r,i){e=i,t.$$destroyed||(v?v.push(t,n,r,e):(p.transcludeOnThisElement&&(e=W(t,p.transclude,i)),p(g,t,n,r,e)))}}(e.splice(N,e.length-N),k,g,n,m&&E,v,y,{controllerDirectives:w,newScopeDirective:b!==s&&b,newIsolateScopeDirective:x,templateDirective:$,nonTlbTranscludeDirective:h}),_=e.length;else if(s.compile)try{u=s.compile(k,g,E);var F=s.$$originalDirective||s;we(u)?o(null,ke(F,u),R,D):u&&o(ke(F,u.pre),ke(F,u.post),R,D)}catch(e){L(e,Ee(k))}s.terminal&&(a.terminal=!0,f=Math.max(f,s.priority))}return a.scope=b&&!0===b.scope,a.transcludeOnThisElement=m,a.templateOnThisElement=C,a.transclude=E,i.hasElementTranscludeDirective=S,a}function Z(n,e,r,i){if(ve(e)){var t=e.match(u);e=e.substring(t[0].length);var o,a,s=t[1]||t[3],t="?"===t[2];if("^^"===s?r=r.parent():a=(a=i&&i[e])&&a.instance,a||(o="$"+e+"Controller",a="^^"===s&&r[0]&&9===r[0].nodeType?null:s?r.inheritedData(o):r.data(o)),!a&&!t)throw ai("ctreq",e,n)}else if(ye(e))for(a=[],s=0,t=e.length;s<t;s++)a[s]=Z(n,e[s],r,i);else ge(e)&&(a={},ue(e,function(e,t){a[t]=Z(n,e,r,i)}));return a||null}function Q(e,t,n){for(var r=0,i=e.length;r<i;r++)e[r]=fe(e[r],{$$isolateScope:t,$$newScope:n})}function A(e,t,n,r,i,o,a){if(t!==i){var s=null;if(I.hasOwnProperty(t))for(var l=0,c=(i=$.get(t+"Directive")).length;l<c;l++)if(t=i[l],(pe(r)||r>t.priority)&&-1!==t.restrict.indexOf(n)){if(!(t=o?fe(t,{$$start:o,$$end:a}):t).$$bindings){var u=s=t,d=t.name,f={isolateScope:null,bindToController:null};if(ge(u.scope)&&(!0===u.bindToController?(f.bindToController=h(u.scope,d,!0),f.isolateScope={}):f.isolateScope=h(u.scope,d,!1)),ge(u.bindToController)&&(f.bindToController=h(u.bindToController,d,!0)),f.bindToController&&!u.controller)throw ai("noctrl",d);ge((s=s.$$bindings=f).isolateScope)&&(t.$$isolateBindings=s.isolateScope)}e.push(t),s=t}return s}}function ee(n,r){var i=r.$attr,o=n.$attr;ue(n,function(e,t){"$"!==t.charAt(0)&&(r[t]&&r[t]!==e&&(e=e.length?e+(("style"===t?";":" ")+r[t]):r[t]),n.$set(t,e,!0,i[t]))}),ue(r,function(e,t){n.hasOwnProperty(t)||"$"===t.charAt(0)||(n[t]=e,"class"!==t&&"style"!==t&&(o[t]=i[t]))})}function T(e,t){var n=t.priority-e.priority;return 0!=n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function te(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw ai("multidir",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,Ee(r))}function ne(e,t){switch(e=Zn(e||"html")){case"svg":case"math":var n=ce.document.createElement("div");return n.innerHTML="<"+e+">"+t+"</"+e+">",n.childNodes[0].childNodes;default:return t}}function N(e){return s(E.valueOf(e),"ng-prop-srcset")}function re(e,t,n){var r,i,o=t[0],a=t.length,s=o.parentNode;if(e)for(r=0,i=e.length;r<i;r++)if(e[r]===o){e[r++]=n,i=r+a-1;for(var l=e.length;r<l;r++,i++)i<l?e[r]=e[i]:delete e[r];e.length-=a-1,e.context===o&&(e.context=n);break}for(s&&s.replaceChild(n,o),e=ce.document.createDocumentFragment(),r=0;r<a;r++)e.appendChild(t[r]);for(Gn.hasData(o)&&(Gn.data(n,Gn.data(o)),Gn(o).off("$destroy")),Gn.cleanData(e.querySelectorAll("*")),r=1;r<a;r++)delete t[r];t[0]=n,t.length=1}function ie(e,t){return de(function(){return e.apply(null,arguments)},e,t)}function oe(e,t,n,r,i,o){try{e(t,n,r,i,o)}catch(e){L(e,Ee(n))}}function v(e,t){if(d)throw ai("missingattr",e,t)}function ae(u,d,f,e,h){function m(e,t,n){we(f.$onChanges)&&!x(t,n)&&(a||(u.$$postDigest(o),a=[]),i||(i={},a.push(r)),i[e]&&(n=i[e].previousValue),i[e]=new Ye(n,t))}function r(){f.$onChanges(i),i=void 0}var i,p=[],g={};return ue(e,function(e,n){var t,r,i,o,a=e.attrName,s=e.optional;switch(e.mode){case"@":s||Jn.call(d,a)||(v(a,h.name),f[n]=d[a]=void 0),s=d.$observe(a,function(e){(ve(e)||b(e))&&(m(n,e,f[n]),f[n]=e)}),d.$$observers[a].$$scope=u,ve(t=d[a])?f[n]=C(t)(u):b(t)&&(f[n]=t),g[n]=new Ye(si,f[n]),p.push(s);break;case"=":if(!Jn.call(d,a)){if(s)break;v(a,h.name),d[a]=void 0}if(s&&!d[a])break;r=S(d[a]),o=r.literal?Se:x,i=r.assign||function(){throw t=f[n]=r(u),ai("nonassign",d[a],a,h.name)},t=f[n]=r(u),(s=function(e){return o(e,f[n])||(o(e,t)?i(u,e=f[n]):f[n]=e),t=e}).$stateful=!0,s=e.collection?u.$watchCollection(d[a],s):u.$watch(S(d[a],s),null,r.literal),p.push(s);break;case"<":if(!Jn.call(d,a)){if(s)break;v(a,h.name),d[a]=void 0}if(s&&!d[a])break;var l=(r=S(d[a])).literal,c=f[n]=r(u);g[n]=new Ye(si,f[n]),s=u[e.collection?"$watchCollection":"$watch"](r,function(e,t){if(t===e){if(t===c||l&&Se(t,c))return;t=c}m(n,e,t),f[n]=e}),p.push(s);break;case"&":if(s||Jn.call(d,a)||v(a,h.name),(r=d.hasOwnProperty(a)?S(d[a]):he)===he&&s)break;f[n]=function(e){return r(u,e)}}}),{initialChanges:g,removeWatches:p.length&&function(){for(var e=0,t=p.length;e<t;++e)p[e]()}}}var a,l=/^\w/,c=ce.document.createElement("div"),_=m,R=p,e=f;z.prototype={$normalize:Ke,$addClass:function(e){e&&0<e.length&&r.addClass(this.$$element,e)},$removeClass:function(e){e&&0<e.length&&r.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Xe(e,t);n&&n.length&&r.addClass(this.$$element,n),(n=Xe(t,e))&&n.length&&r.removeClass(this.$$element,n)},$set:function(e,t,n,r){var i=Re(this.$$element[0],e),o=zr[e],a=e;i?(this.$$element.prop(e,t),r=i):o&&(this[o]=t,a=o),this[e]=t,r?this.$attr[e]=r:(r=this.$attr[e])||(this.$attr[e]=r=Ae(e,"-")),"img"===$e(this.$$element)&&"srcset"===e&&(this[e]=t=s(t,"$set('srcset', value)")),!1!==n&&(null===t||pe(t)?this.$$element.removeAttr(r):l.test(r)?i&&!1===t?this.$$element.removeAttr(r):this.$$element.attr(r,t):function(e,t,n){c.innerHTML="<span "+t+">";var r=(t=c.firstChild.attributes)[0];t.removeNamedItem(r.name),r.value=n,e.attributes.setNamedItem(r)}(this.$$element[0],r,t)),(e=this.$$observers)&&ue(e[a],function(e){try{e(t)}catch(e){L(e)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=Ne()),i=r[e]||(r[e]=[]);return i.push(t),k.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(e)||pe(n[e])||t(n[e])}),function(){Ce(i,t)}}};var t=C.startSymbol(),n=C.endSymbol(),se="{{"===t&&"}}"===n?me:function(e){return e.replace(/\{\{/g,t).replace(/}}/g,n)},D=/^ng(Attr|Prop|On)([A-Z].*)$/,M=/^(.+)Start$/;return j.$$addBindingInfo=i?function(e,t){var n=e.data("$binding")||[];ye(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:he,j.$$addBindingClass=i?function(e){V(e,"ng-binding")}:he,j.$$addScopeInfo=i?function(e,t,n,r){e.data(n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope",t)}:he,j.$$addScopeClass=i?function(e,t){V(e,t?"ng-isolate-scope":"ng-scope")}:he,j.$$createComment=function(e,t){var n="";return i&&(n=" "+(e||"")+": ",t&&(n+=t+" ")),ce.document.createComment(n)},j}]}function Ye(e,t){this.previousValue=e,this.currentValue=t}function Ke(e){return e.replace(ci,"").replace(ui,function(e,t,n){return n?t.toUpperCase():t})}function Xe(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/),o=0;e:for(;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a===i[s])continue e;n+=(0<n.length?" ":"")+a}return n}function Je(e){var t=(e=Gn(e)).length;if(t<=1)return e;for(;t--;){var n=e[t];(8===n.nodeType||n.nodeType===xr&&""===n.nodeValue.trim())&&tr.call(e,t,1)}return e}function Ze(){var c={};this.has=function(e){return c.hasOwnProperty(e)},this.register=function(e,t){L(e,"controller"),ge(e)?de(c,e):c[e]=t},this.$get=["$injector",function(s){function l(e,t,n,r){if(!e||!ge(e.$scope))throw N("$controller")("noscp",r,t);e.$scope[t]=n}return function(t,n,e,r){var i,o,a;if(e=!0===e,r&&ve(r)&&(a=r),ve(t)){if(!(r=t.match(fi)))throw di("ctrlfmt",t);if(o=r[1],a=a||r[3],!(t=c.hasOwnProperty(o)?c[o]:function(e,t,n){if(!t)return e;for(var r,i=e,o=(t=t.split(".")).length,a=0;a<o;a++)r=t[a],e=e&&(i=e)[r];return!n&&we(e)?ke(i,e):e}(n.$scope,o,!0)))throw di("ctrlreg",o);B(t,o,!0)}return e?(e=(ye(t)?t[t.length-1]:t).prototype,i=Object.create(e||null),a&&l(n,a,i,o||t.name),de(function(){var e=s.invoke(t,i,n,o);return e!==i&&(ge(e)||we(e))&&(i=e,a&&l(n,a,i,o||t.name)),i},{instance:i,identifier:a})):(i=s.instantiate(t,n,o),a&&l(n,a,i,o||t.name),i)}}]}function Qe(){this.$get=["$window",function(e){return Gn(e.document)}]}function et(){this.$get=["$document","$rootScope",function(e,t){function n(){i=r.hidden}var r=e[0],i=r&&r.hidden;return e.on("visibilitychange",n),t.$on("$destroy",function(){e.off("visibilitychange",n)}),function(){return i}}]}function tt(){this.$get=["$log",function(n){return function(e,t){n.error.apply(n,arguments)}}]}function nt(e){return ge(e)?$(e)?e.toISOString():i(e):e}function rt(){this.$get=function(){return function(e){if(!e)return"";var n=[];return o(e,function(e,t){null===e||pe(e)||we(e)||(ye(e)?ue(e,function(e){n.push(p(t)+"="+p(nt(e)))}):n.push(p(t)+"="+p(nt(e))))}),n.join("&")}}}function it(){this.$get=function(){return function(e){if(!e)return"";var t=[];return function n(e,r,i){ye(e)?ue(e,function(e,t){n(e,r+"["+(ge(e)?t:"")+"]")}):ge(e)&&!$(e)?o(e,function(e,t){n(e,r+(i?"":"[")+t+(i?"":"]"))}):(we(e)&&(e=e()),t.push(p(r)+"="+(null==e?"":p(nt(e)))))}(e,"",!0),t.join("&")}}}function ot(t,e){if(ve(t)){var n=t.replace(vi,"").trim();if(n){var r=e("Content-Type");if(e=!(e=r=r&&0===r.indexOf(hi))?(e=n.match(pi))&&gi[e[0]].test(n):e)try{t=a(n)}catch(e){if(!r)return t;throw yi("baddata",t,e)}}}return t}function at(e){var n,r=Ne();return ve(e)?ue(e.split("\n"),function(e){n=e.indexOf(":");var t=Zn(fr(e.substr(0,n)));e=fr(e.substr(n+1)),t&&(r[t]=r[t]?r[t]+", "+e:e)}):ge(e)&&ue(e,function(e,t){t=Zn(t),e=fr(e);t&&(r[t]=r[t]?r[t]+", "+e:e)}),r}function st(t){var n;return function(e){return n=n||at(t),e?e=void 0===(e=n[Zn(e)])?null:e:n}}function lt(t,n,r,e){return we(e)?e(t,n,r):(ue(e,function(e){t=e(t,n,r)}),t)}function ct(){var C=this.defaults={transformResponse:[ot],transformRequest:[function(e){return ge(e)&&"[object File]"!==rr.call(e)&&"[object Blob]"!==rr.call(e)&&"[object FormData]"!==rr.call(e)?i(e):e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:H(mi),put:H(mi),patch:H(mi)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},S=!1;this.useApplyAsync=function(e){return E(e)?(S=!!e,this):S};var n=this.interceptors=[],r=this.xsrfTrustedOrigins=[];Object.defineProperty(this,"xsrfWhitelistedOrigins",{get:function(){return this.xsrfTrustedOrigins},set:function(e){this.xsrfTrustedOrigins=e}}),this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(o,p,g,e,v,y,a,b){function w(e){function t(e,t){for(var n=0,r=t.length;n<r;){var i=t[n++],o=t[n++];e=e.then(i,o)}return t.length=0,e}function m(e){var t=de({},e);return t.data=lt(e.data,e.headers,e.status,n.transformResponse),200<=(e=e.status)&&e<300?t:y.reject(t)}if(!ge(e))throw N("$http")("badreq",e);if(!ve(b.valueOf(e.url)))throw N("$http")("badreq",e.url);var n=de({method:"get",transformRequest:C.transformRequest,transformResponse:C.transformResponse,paramSerializer:C.paramSerializer,jsonpCallbackParam:C.jsonpCallbackParam},e);n.headers=function(e){var t,n,r,i,o,a,s,l=C.headers,c=de({},e.headers);e:for(t in l=de({},l.common,l[Zn(e.method)])){for(r in n=Zn(t),c)if(Zn(r)===n)continue e;c[t]=l[t]}return i=c,o=H(e),s={},ue(i,function(e,t){we(e)?null!=(a=e(o))&&(s[t]=a):s[t]=e}),s}(e),n.method=Qn(n.method),n.paramSerializer=ve(n.paramSerializer)?a.get(n.paramSerializer):n.paramSerializer,o.$$incOutstandingRequestCount("$http");var r=[],i=[];return e=y.resolve(n),ue(s,function(e){(e.request||e.requestError)&&r.unshift(e.request,e.requestError),(e.response||e.responseError)&&i.push(e.response,e.responseError)}),e=t(e,r),(e=t(e=e.then(function(e){var o,t,a,n,s,r,l,i=e.headers,c=lt(e.data,st(i),void 0,e.transformRequest);return pe(c)&&ue(i,function(e,t){"content-type"===Zn(t)&&delete i[t]}),pe(e.withCredentials)&&!pe(C.withCredentials)&&(e.withCredentials=C.withCredentials),o=e,t=c,s=y.defer(),r=s.promise,e=o.headers,c="jsonp"===Zn(o.method),l=o.url,c?l=b.getTrustedResourceUrl(l):ve(l)||(l=b.valueOf(l)),l=function(e,t){return 0<t.length&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}(l,o.paramSerializer(o.params)),c&&(l=function(n,r){var e=n.split("?");if(2<e.length)throw yi("badjsonp",n);return ue(e=M(e[1]),function(e,t){if("JSON_CALLBACK"===e)throw yi("badjsonp",n);if(t===r)throw yi("badjsonp",r,n)}),n+=(-1===n.indexOf("?")?"?":"&")+r+"=JSON_CALLBACK"}(l,o.jsonpCallbackParam)),w.pendingRequests.push(o),r.then(h,h),(a=(o.cache||C.cache)&&!1!==o.cache&&("GET"===o.method||"JSONP"===o.method)?ge(o.cache)?o.cache:ge(C.cache)?C.cache:x:a)&&(E(n=a.get(l))?n&&we(n.then)?n.then(f,f):ye(n)?d(n[1],n[0],H(n[2]),n[3],n[4]):d(n,200,{},"OK","complete"):a.put(l,r)),pe(n)&&((n=$(o.url)?g()[o.xsrfCookieName||C.xsrfCookieName]:void 0)&&(e[o.xsrfHeaderName||C.xsrfHeaderName]=n),p(o.method,l,t,function(e,t,n,r,i){function o(){d(t,e,n,r,i)}a&&(200<=e&&e<300?a.put(l,[e,t,at(n),r,i]):a.remove(l)),S?v.$applyAsync(o):(o(),v.$$phase||v.$apply())},e,o.timeout,o.withCredentials,o.responseType,u(o.eventHandlers),u(o.uploadEventHandlers))),r.then(m,m);function u(e){if(e){var t={};return ue(e,function(n,e){t[e]=function(e){function t(){n(e)}S?v.$applyAsync(t):v.$$phase?t():v.$apply(t)}}),t}}function d(e,t,n,r,i){(200<=(t=-1<=t?t:0)&&t<300?s.resolve:s.reject)({data:e,status:t,headers:st(n),config:o,statusText:r,xhrStatus:i})}function f(e){d(e.data,e.status,H(e.headers()),e.statusText,e.xhrStatus)}function h(){var e=w.pendingRequests.indexOf(o);-1!==e&&w.pendingRequests.splice(e,1)}}),i)).finally(function(){o.$$completeOutstandingRequest(he,"$http")})}var x=e("$http");C.paramSerializer=ve(C.paramSerializer)?a.get(C.paramSerializer):C.paramSerializer;var s=[];ue(n,function(e){s.unshift(ve(e)?a.get(e):a.invoke(e))});var t,$=(t=[Hi].concat(r.map(en)),function(e){return e=en(e),t.some(tn.bind(null,e))});return w.pendingRequests=[],function(){ue(arguments,function(n){w[n]=function(e,t){return w(de({},t||{},{method:n,url:e}))}})}("get","delete","head","jsonp"),function(){ue(arguments,function(r){w[r]=function(e,t,n){return w(de({},n||{},{method:r,url:e,data:t}))}})}("post","put","patch"),w.defaults=C,w}]}function ut(){this.$get=function(){return function(){return new ce.XMLHttpRequest}}}function dt(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,r){return y=r,b=(v=e).defer,w=t,x=n[0],function(e,r,t,i,n,o,a,s,l,c){function u(e){p="timeout"===e,h&&h(),m&&m.abort()}function d(e,t,n,r,i,o){E(g)&&b.cancel(g),h=m=null,e(t,n,r,i,o)}if(r=r||v.url(),"jsonp"===Zn(e))var f=w.createCallback(r),h=function(e,r,i){e=e.replace("JSON_CALLBACK",r);var o=x.createElement("script"),a=null;return o.type="text/javascript",o.src=e,o.async=!0,a=function(e){o.removeEventListener("load",a),o.removeEventListener("error",a),x.body.removeChild(o),o=null;var t=-1,n="unknown";e&&(n=(e="load"===e.type&&!w.wasCalled(r)?{type:"error"}:e).type,t="error"===e.type?404:200),i&&i(t,n)},o.addEventListener("load",a),o.addEventListener("error",a),x.body.appendChild(o),a}(r,f,function(e,t){var n=200===e&&w.getResponse(f);d(i,e,n,"",t,"complete"),w.removeCallback(f)});else{var m=y(e,r),p=!1;if(m.open(e,r,!0),ue(n,function(e,t){E(e)&&m.setRequestHeader(t,e)}),m.onload=function(){var e=m.statusText||"",t="response"in m?m.response:m.responseText,n=1223===m.status?204:m.status;0===n&&(n=t?200:"file"===en(r).protocol?404:0),d(i,n,t,m.getAllResponseHeaders(),e,"complete")},m.onerror=function(){d(i,-1,null,null,"","error")},m.ontimeout=function(){d(i,-1,null,null,"","timeout")},m.onabort=function(){d(i,-1,null,null,"",p?"timeout":"abort")},ue(l,function(e,t){m.addEventListener(t,e)}),ue(c,function(e,t){m.upload.addEventListener(t,e)}),a&&(m.withCredentials=!0),s)try{m.responseType=s}catch(e){if("json"!==s)throw e}m.send(pe(t)?null:t)}var g;0<o?g=b(function(){u("timeout")},o):o&&we(o.then)&&o.then(function(){u(E(o.$$timeoutId)?"timeout":"abort")})};var v,y,b,w,x}]}function ft(){var C="{{",S="}}";this.startSymbol=function(e){return e?(C=e,this):C},this.endSymbol=function(e){return e?(S=e,this):S},this.$get=["$parse","$exceptionHandler","$sce",function(g,v,y){function e(e){return"\\\\\\"+e}function b(e){return e.replace(n,C).replace(r,S)}function w(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function t(i,e,r,o){var a=r===y.URL||r===y.MEDIA_URL;if(!i.length||-1===i.indexOf(C))return e?void 0:(e=b(i),(e=k(e=a?y.getTrusted(r,e):e)).exp=i,e.expressions=[],e.$$watchDelegate=w,e);o=!!o;for(var t,n,s,l=0,c=[],u=i.length,d=[],f=[];l<u;){if(-1===(t=i.indexOf(C,l))||-1===(n=i.indexOf(S,t+x))){l!==u&&d.push(b(i.substring(l)));break}l!==t&&d.push(b(i.substring(l,t))),l=i.substring(t+x,n),c.push(l),l=n+$,f.push(d.length),d.push("")}s=1===d.length&&1===f.length;var h=a&&s?void 0:function(e){try{return e=r&&!a?y.getTrusted(r,e):y.valueOf(e),o&&!E(e)?e:U(e)}catch(e){v(bi.interr(i,e))}},m=c.map(function(e){return g(e,h)});if(!e||c.length){var p=function(e){for(var t=0,n=c.length;t<n;t++){if(o&&pe(e[t]))return;d[f[t]]=e[t]}return a?y.getTrusted(r,s?d[0]:d.join("")):(r&&1<d.length&&bi.throwNoconcat(i),d.join(""))};return de(function(e){var t=0,n=c.length,r=Array(n);try{for(;t<n;t++)r[t]=m[t](e);return p(r)}catch(e){v(bi.interr(i,e))}},{exp:i,expressions:c,$$watchDelegate:function(r,i){var o;return r.$watchGroup(m,function(e,t){var n=p(e);i.call(this,n,e!==t?o:n,r),o=n})}})}}var x=C.length,$=S.length,n=new RegExp(C.replace(/./g,e),"g"),r=new RegExp(S.replace(/./g,e),"g");return t.startSymbol=function(){return C},t.endSymbol=function(){return S},t}]}function ht(){this.$get=["$$intervalFactory","$window",function(e,r){function i(e){r.clearInterval(e),delete o[e]}var o={},e=e(function(e,t,n){return e=r.setInterval(e,t),o[e]=n,e},i);return e.cancel=function(e){if(!e)return!1;if(!e.hasOwnProperty("$$intervalId"))throw xi("badprom");if(!o.hasOwnProperty(e.$$intervalId))return!1;e=e.$$intervalId;var t=o[e],n=t.promise;return n.$$state&&(n.$$state.pur=!0),t.reject("canceled"),i(e),!0},e}]}function mt(){this.$get=["$browser","$q","$$q","$rootScope",function(h,m,p,g){return function(d,f){return function(e,t,n,r){function i(){o?e.apply(null,a):e(s)}var o=4<arguments.length,a=o?er.call(arguments,4):[],s=0,l=E(r)&&!r,c=(l?p:m).defer(),u=c.promise;return n=E(n)?n:0,u.$$intervalId=d(function(){l?h.defer(i):g.$evalAsync(i),c.notify(s++),0<n&&n<=s&&(c.resolve(s),f(u.$$intervalId)),l||g.$apply()},t,c,l),u}}}]}function pt(e,t){e=en(e);t.$$protocol=e.protocol,t.$$host=e.hostname,t.$$port=v(e.port)||Ci[e.protocol]||null}function gt(e,t,n){if(ki.test(e))throw Si("badpath",e);var r="/"!==e.charAt(0);e=en(e=r?"/"+e:e);for(var i=(r=(r&&"/"===e.pathname.charAt(0)?e.pathname.substring(1):e.pathname).split("/")).length;i--;)r[i]=decodeURIComponent(r[i]),n&&(r[i]=r[i].replace(/\//g,"%2F"));n=r.join("/"),t.$$path=n,t.$$search=M(e.search),t.$$hash=decodeURIComponent(e.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function vt(e,t){return e.slice(0,t.length)===t}function yt(e,t){if(vt(t,e))return t.substr(e.length)}function bt(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function wt(r,i,o){this.$$html5=!0,o=o||"",pt(r,this),this.$$parse=function(e){var t=yt(i,e);if(!ve(t))throw Si("ipthprfx",e,i);gt(t,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(e){return i+e.substr(1)},this.$$parseLinkUrl=function(e,t){return t&&"#"===t[0]?(this.hash(t.slice(1)),!0):(E(t=yt(r,e))?(n=t,n=o&&E(t=yt(o,t))?i+(yt("/",t)||t):r+n):E(t=yt(i,e))?n=i+t:i===e+"/"&&(n=i),n&&this.$$parse(n),!!n);var n}}function xt(i,o,a){pt(i,this),this.$$parse=function(e){var t,n=yt(i,e)||yt(o,e);pe(n)||"#"!==n.charAt(0)?this.$$html5?t=n:(t="",pe(n)&&(i=e,this.replace())):pe(t=yt(a,n))&&(t=n),gt(t,this,!1),e=this.$$path;var r=/^\/[A-Z]:(\/.*)/;vt(t,n=i)&&(t=t.replace(n,"")),r.exec(t)||(e=(t=r.exec(e))?t[1]:e),this.$$path=e,this.$$compose()},this.$$normalizeUrl=function(e){return i+(e?a+e:"")},this.$$parseLinkUrl=function(e,t){return bt(i)===bt(e)&&(this.$$parse(e),!0)}}function $t(r,i,o){this.$$html5=!0,xt.apply(this,arguments),this.$$parseLinkUrl=function(e,t){return t&&"#"===t[0]?(this.hash(t.slice(1)),!0):(r===bt(e)?n=e:(t=yt(i,e))?n=r+o+t:i===e+"/"&&(n=i),n&&this.$$parse(n),!!n);var n},this.$$normalizeUrl=function(e){return r+o+e}}function Ct(e){return function(){return this[e]}}function St(t,n){return function(e){return pe(e)?this[t]:(this[t]=n(e),this.$$compose(),this)}}function kt(){var m="!",p={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return E(e)?(m=e,this):m},this.html5Mode=function(e){return b(e)?(p.enabled=e,this):ge(e)?(b(e.enabled)&&(p.enabled=e.enabled),b(e.requireBase)&&(p.requireBase=e.requireBase),(b(e.rewriteLinks)||ve(e.rewriteLinks))&&(p.rewriteLinks=e.rewriteLinks),this):p},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(a,s,l,i,e){function c(e,t,n){var r=d.url(),i=d.$$state;try{s.url(e,t,n),d.$$state=s.state()}catch(e){throw d.url(r),d.$$state=i,e}}function u(e,t){a.$broadcast("$locationChangeSuccess",d.absUrl(),e,d.$$state,t)}var t,n=s.baseHref(),r=s.url();if(p.enabled){if(!n&&p.requireBase)throw Si("nobase");t=r.substring(0,r.indexOf("/",r.indexOf("//")+2))+(n||"/"),n=l.history?wt:$t}else t=bt(r),n=xt;var d,o=t.substr(0,bt(t).lastIndexOf("/")+1);(d=new n(t,o,"#"+m)).$$parseLinkUrl(r,r),d.$$state=s.state();var f=/^\s*(javascript|mailto):/i;i.on("click",function(e){if((t=p.rewriteLinks)&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var t,n,r=Gn(e.target);"a"!==$e(r[0]);)if(r[0]===i[0]||!(r=r.parent())[0])return;ve(t)&&pe(r.attr(t))||(t=r.prop("href"),n=r.attr("href")||r.attr("xlink:href"),ge(t)&&"[object SVGAnimatedString]"===t.toString()&&(t=en(t.animVal).href),f.test(t)||!t||r.attr("target")||e.isDefaultPrevented()||!d.$$parseLinkUrl(t,n)||(e.preventDefault(),d.absUrl()!==s.url()&&a.$apply()))}}),d.absUrl()!==r&&s.url(d.absUrl(),!0);var h=!0;return s.onUrlChange(function(r,i){vt(r,o)?(a.$evalAsync(function(){var e,t=d.absUrl(),n=d.$$state;d.$$parse(r),d.$$state=i,e=a.$broadcast("$locationChangeStart",r,t,i,n).defaultPrevented,d.absUrl()===r&&(e?(d.$$parse(t),d.$$state=n,c(t,!1,n)):(h=!1,u(t,n)))}),a.$$phase||a.$digest()):e.location.href=r}),a.$watch(function(){var n,r,i,o,e,t;(h||d.$$urlUpdatedByLocation)&&(d.$$urlUpdatedByLocation=!1,n=s.url(),t=d.absUrl(),r=s.state(),i=d.$$replace,o=!((e=n)===(t=t)||en(e).href===en(t).href)||d.$$html5&&l.history&&r!==d.$$state,(h||o)&&(h=!1,a.$evalAsync(function(){var e=d.absUrl(),t=a.$broadcast("$locationChangeStart",e,n,d.$$state,r).defaultPrevented;d.absUrl()===e&&(t?(d.$$parse(n),d.$$state=r):(o&&c(e,i,r===d.$$state?null:d.$$state),u(n,r)))}))),d.$$replace=!1}),d}]}function Et(){var r=!0,o=this;this.debugEnabled=function(e){return E(e)?(r=e,this):r},this.$get=["$window",function(t){function e(e){var n=t.console||{},r=n[e]||n.log||he;return function(){var t=[];return ue(arguments,function(e){t.push((be(e=e)&&(e.stack&&i?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e))}),Function.prototype.apply.call(r,n,t)}}var n,i=lr||/\bEdge\//.test(t.navigator&&t.navigator.userAgent);return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:(n=e("debug"),function(){r&&n.apply(o,arguments)})}}]}function At(e){return e+""}function Tt(e,t){return void 0!==e?e:t}function Nt(e,t){return void 0===e?t:void 0===t?e:e+t}function _t(e,t,n){var r,i,o=e.isPure=function(e,t){switch(e.type){case Di.MemberExpression:if(e.computed)return!1;break;case Di.UnaryExpression:return 1;case Di.BinaryExpression:return"+"!==e.operator&&1;case Di.CallExpression:return!1}return void 0===t?Mi:t}(e,n);switch(e.type){case Di.Program:r=!0,ue(e.body,function(e){_t(e.expression,t,o),r=r&&e.expression.constant}),e.constant=r;break;case Di.Literal:e.constant=!0,e.toWatch=[];break;case Di.UnaryExpression:_t(e.argument,t,o),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case Di.BinaryExpression:_t(e.left,t,o),_t(e.right,t,o),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case Di.LogicalExpression:_t(e.left,t,o),_t(e.right,t,o),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case Di.ConditionalExpression:_t(e.test,t,o),_t(e.alternate,t,o),_t(e.consequent,t,o),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case Di.Identifier:e.constant=!1,e.toWatch=[e];break;case Di.MemberExpression:_t(e.object,t,o),e.computed&&_t(e.property,t,o),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=e.constant?[]:[e];break;case Di.CallExpression:r=n=!!e.filter&&!t(e.callee.name).$stateful,i=[],ue(e.arguments,function(e){_t(e,t,o),r=r&&e.constant,i.push.apply(i,e.toWatch)}),e.constant=r,e.toWatch=n?i:[e];break;case Di.AssignmentExpression:_t(e.left,t,o),_t(e.right,t,o),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case Di.ArrayExpression:r=!0,i=[],ue(e.elements,function(e){_t(e,t,o),r=r&&e.constant,i.push.apply(i,e.toWatch)}),e.constant=r,e.toWatch=i;break;case Di.ObjectExpression:r=!0,i=[],ue(e.properties,function(e){_t(e.value,t,o),r=r&&e.value.constant,i.push.apply(i,e.value.toWatch),e.computed&&(_t(e.key,t,!1),r=r&&e.key.constant,i.push.apply(i,e.key.toWatch))}),e.constant=r,e.toWatch=i;break;case Di.ThisExpression:e.constant=!1,e.toWatch=[];break;case Di.LocalsExpression:e.constant=!1,e.toWatch=[]}}function Rt(e){if(1===e.length){var t=(e=e[0].expression).toWatch;return 1!==t.length||t[0]!==e?t:void 0}}function Dt(e){return e.type===Di.Identifier||e.type===Di.MemberExpression}function Mt(e){if(1===e.body.length&&Dt(e.body[0].expression))return{type:Di.AssignmentExpression,left:e.body[0].expression,right:{type:Di.NGValueParameter},operator:"="}}function It(e){this.$filter=e}function Pt(e){this.$filter=e}function Ot(e,t,n){this.ast=new Di(e,n),this.astCompiler=new(n.csp?Pt:It)(t)}function Bt(e){return we(e.valueOf)?e.valueOf():Ti.call(e)}function Ft(){var s,l,c=Ne(),u={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(e,t){u[e]=t},this.setIdentifierFns=function(e,t){return s=e,l=t,this},this.$get=["$filter",function(i){function e(e,t){var n,r;switch(typeof e){case"string":return r=e=e.trim(),(n=c[r])||(n=new Ot(n=new Ri(a),i,a).parse(e),c[r]=m(n)),o(n,t);case"function":return o(e,t);default:return o(he,t)}}function f(e,t,n){return null==e||null==t?e===t:!("object"==typeof e&&("object"==typeof(e=Bt(e))&&!n))&&(e===t||e!=e&&t!=t)}function t(e,t,n,o,r){var a;if(1===(s=o.inputs).length){var i=f,s=s[0];return e.$watch(function(e){var t=s(e);return f(t,i,s.isPure)||(a=o(e,void 0,void 0,[t]),i=t&&Bt(t)),a},t,n,r)}for(var l=[],c=[],u=0,d=s.length;u<d;u++)l[u]=f,c[u]=null;return e.$watch(function(e){for(var t=!1,n=0,r=s.length;n<r;n++){var i=s[n](e);(t=t||!f(i,l[n],s[n].isPure))&&(c[n]=i,l[n]=i&&Bt(i))}return a=t?o(e,void 0,void 0,c):a},t,n,r)}function n(e,t,n,r,i){function o(){c(l)&&s()}function a(e,t,n,r){return l=f&&r?r[0]:u(e,t,n,r),c(l)&&e.$$postDigest(o),d(l)}var s,l,c=r.literal?h:E,u=r.$$intercepted||r,d=r.$$interceptor||me,f=r.inputs&&!u.inputs;return a.literal=r.literal,a.constant=r.constant,a.inputs=r.inputs,m(a),s=e.$watch(a,t,n,i)}function h(e){var t=!0;return ue(e,function(e){E(e)||(t=!1)}),t}function r(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function m(e){return e.constant?e.$$watchDelegate=r:e.oneTime?e.$$watchDelegate=n:e.inputs&&(e.$$watchDelegate=t),e}function o(i,o){if(!o)return i;function e(e){return n(t(e))}var t,n;i.$$interceptor&&(t=i.$$interceptor,n=o,e.$stateful=t.$stateful||n.$stateful,e.$$pure=t.$$pure&&n.$$pure,o=e,i=i.$$intercepted);function r(e,t,n,r){return e=a&&r?r[0]:i(e,t,n,r),o(e)}var a=!1;return r.$$intercepted=i,r.$$interceptor=o,r.literal=i.literal,r.oneTime=i.oneTime,r.constant=i.constant,o.$stateful||(a=!i.inputs,r.inputs=i.inputs||[i],o.$$pure||(r.inputs=r.inputs.map(function(t){return t.isPure===Mi?function(e){return t(e)}:t}))),m(r)}var a={csp:mr().noUnsafeEval,literals:A(u),isIdentifierStart:we(s)&&s,isIdentifierContinue:we(l)&&l};return e.$$getAst=function(e){return new Ot(new Ri(a),i,a).getAst(e).ast},e}]}function Lt(){var n=!0;this.$get=["$rootScope","$exceptionHandler",function(t,e){return Ht(function(e){t.$evalAsync(e)},e,n)}],this.errorOnUnhandledRejections=function(e){return E(e)?(n=e,this):n}}function Ut(){var n=!0;this.$get=["$browser","$exceptionHandler",function(t,e){return Ht(function(e){t.defer(e)},e,n)}],this.errorOnUnhandledRejections=function(e){return E(e)?(n=e,this):n}}function Ht(a,s,l){function n(){return new e}function e(){var t=this.promise=new o;this.resolve=function(e){d(t,e)},this.reject=function(e){f(t,e)},this.notify=function(e){m(t,e)}}function o(){this.$$state={status:0}}function c(){for(;!v&&y.length;){var e,t=y.shift();t.pur||(t.pur=!0,e="Possibly unhandled rejection: "+("function"==typeof(e=t.value)?e.toString().replace(/ \{[\s\S]*$/,""):pe(e)?"undefined":"string"!=typeof e?function(e,t){var n=[];return w(t)&&(e=ar.copy(e,null,t)),JSON.stringify(e,function(e,t){if(ge(t=C(e,t))){if(0<=n.indexOf(t))return"...";n.push(t)}return t})}(e,void 0):e),be(t.value)?s(t.value,e):s(e))}}function u(o){!l||o.pending||2!==o.status||o.pur||(0===v&&0===y.length&&a(c),y.push(o)),!o.processScheduled&&o.pending&&(o.processScheduled=!0,++v,a(function(){var e,t,n=o.pending;o.processScheduled=!1,o.pending=void 0;try{for(var r=0,i=n.length;r<i;++r){o.pur=!0,t=n[r][0],e=n[r][o.status];try{we(e)?d(t,e(o.value)):(1===o.status?d:f)(t,o.value)}catch(e){f(t,e),e&&!0===e.$$passToExceptionHandler&&s(e)}}}finally{--v,l&&0===v&&a(c)}}))}function d(e,t){e.$$state.status||(t===e?h(e,g("qcycle",t)):function t(n,e){function r(e){s||(s=!0,t(n,e))}function i(e){s||(s=!0,h(n,e))}function o(e){m(n,e)}var a,s=!1;try{(ge(e)||we(e))&&(a=e.then),we(a)?(n.$$state.status=-1,a.call(e,r,i,o)):(n.$$state.value=e,n.$$state.status=1,u(n.$$state))}catch(e){i(e)}}(e,t))}function f(e,t){e.$$state.status||h(e,t)}function h(e,t){e.$$state.value=t,e.$$state.status=2,u(e.$$state)}function m(e,i){var o=e.$$state.pending;e.$$state.status<=0&&o&&o.length&&a(function(){for(var e,t,n=0,r=o.length;n<r;n++){t=o[n][0],e=o[n][3];try{m(t,we(e)?e(i):i)}catch(e){s(e)}}})}function i(e){var t=new o;return f(t,e),t}function r(e,t,n){var r=null;try{we(n)&&(r=n())}catch(e){return i(e)}return r&&we(r.then)?r.then(function(){return t(e)},i):t(e)}function p(e,t,n,r){var i=new o;return d(i,e),i.then(t,n,r)}function t(e){if(!we(e))throw g("norslvr",e);var t=new o;return e(function(e){d(t,e)},function(e){f(t,e)}),t}var g=N("$q",TypeError),v=0,y=[];de(o.prototype,{then:function(e,t,n){if(pe(e)&&pe(t)&&pe(n))return this;var r=new o;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),0<this.$$state.status&&u(this.$$state),r},catch:function(e){return this.then(null,e)},finally:function(t,e){return this.then(function(e){return r(e,b,t)},function(e){return r(e,i,t)},e)}});var b=p;return t.prototype=o.prototype,t.defer=n,t.reject=i,t.when=p,t.resolve=b,t.all=function(e){var n=new o,r=0,i=ye(e)?[]:{};return ue(e,function(e,t){r++,p(e).then(function(e){i[t]=e,--r||d(n,i)},function(e){f(n,e)})}),0===r&&d(n,i),n},t.race=function(e){var t=n();return ue(e,function(e){p(e).then(t.resolve,t.reject)}),t.promise},t}function zt(){this.$get=["$window","$timeout",function(e,n){var r=e.requestAnimationFrame||e.webkitRequestAnimationFrame,i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,t=!!r,e=t?function(e){var t=r(e);return function(){i(t)}}:function(e){var t=n(e,16.66,!1);return function(){n.cancel(t)}};return e.supported=t,e}]}function Vt(){var x=10,$=N("$rootScope"),C=null,S=null;this.digestTtl=function(e){return x=arguments.length?e:x},this.$get=["$exceptionHandler","$parse","$browser",function(d,h,f){function i(e){e.currentScope.$$destroyed=!0}function o(){this.$id=++sr,this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,(this.$root=this).$$suspended=this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function m(e){if(v.$$phase)throw $("inprog",v.$$phase);v.$$phase=e}function l(e,t){for(;e.$$watchersCount+=t,e=e.$parent;);}function a(e,t,n){for(;e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n],e=e.$parent;);}function p(){}function g(){for(;n.length;)try{n.shift()()}catch(e){d(e)}S=null}o.prototype={constructor:o,$new:function(e,t){var n;function r(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=++sr,this.$$ChildScope=null,this.$$suspended=!1}return t=t||this,e?(n=new o).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=(r.prototype=this,r)),n=new this.$$ChildScope),n.$parent=t,n.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=n,t.$$childTail=n):t.$$childHead=t.$$childTail=n,!e&&t===this||n.$on("$destroy",i),n},$watch:function(e,t,n,r){var i=h(e);if(t=we(t)?t:he,i.$$watchDelegate)return i.$$watchDelegate(this,t,n,i,e);var o=this,a=o.$$watchers,s={fn:t,last:p,get:i,exp:r||e,eq:!!n};return C=null,a||((a=o.$$watchers=[]).$$digestWatchIndex=-1),a.unshift(s),a.$$digestWatchIndex++,l(this,1),function(){var e=Ce(a,s);0<=e&&(l(o,-1),e<a.$$digestWatchIndex&&a.$$digestWatchIndex--),C=null}},$watchGroup:function(t,r){function n(){l=!1;try{c?(c=!1,r(o,o,s)):r(o,i,s)}finally{for(var e=0;e<t.length;e++)i[e]=o[e]}}var i=Array(t.length),o=Array(t.length),a=[],s=this,l=!1,c=!0;if(t.length)return 1===t.length?this.$watch(t[0],function(e,t,n){o[0]=e,i[0]=t,r(o,e===t?o:i,n)}):(ue(t,function(e,t){e=s.$watch(e,function(e){o[t]=e,l||(l=!0,s.$evalAsync(n))});a.push(e)}),function(){for(;a.length;)a.shift()()});var e=!0;return s.$evalAsync(function(){e&&r(o,o,s)}),function(){e=!1}},$watchCollection:function(e,t){function n(e){var t,n,r,i;if(!pe(o=e)){if(ge(o))if(_(o))for(a!==c&&(f=(a=c).length=0,l++),e=o.length,f!==e&&(l++,a.length=f=e),t=0;t<e;t++)i=a[t],r=o[t],(n=i!=i&&r!=r)||i===r||(l++,a[t]=r);else{for(t in a!==u&&(a=u={},f=0,l++),e=0,o)Jn.call(o,t)&&(e++,r=o[t],i=a[t],t in a?(n=i!=i&&r!=r,n||i===r||(l++,a[t]=r)):(f++,a[t]=r,l++));if(e<f)for(t in l++,a)Jn.call(o,t)||(f--,delete a[t])}else a!==o&&(a=o,l++);return l}}n.$$pure=h(e).literal,n.$stateful=!n.$$pure;var o,a,r,i=this,s=1<t.length,l=0,e=h(e,n),c=[],u={},d=!0,f=0;return this.$watch(e,function(){if(d?(d=!1,t(o,o,i)):t(o,r,i),s)if(ge(o))if(_(o)){r=Array(o.length);for(var e=0;e<o.length;e++)r[e]=o[e]}else for(e in r={},o)Jn.call(o,e)&&(r[e]=o[e]);else r=o})},$digest:function(){var e,t,n,r,i,o,a,s,l=x,c=y.length?v:this,u=[];m("$digest"),f.$$checkUrlChange(),this===v&&null!==S&&(f.defer.cancel(S),g()),C=null;do{for(i=!1,o=c,r=0;r<y.length;r++){try{(0,(s=y[r]).fn)(s.scope,s.locals)}catch(e){d(e)}C=null}y.length=0;e:do{if(r=!o.$$suspended&&o.$$watchers)for(r.$$digestWatchIndex=r.length;r.$$digestWatchIndex--;)try{if(e=r[r.$$digestWatchIndex])if((t=(0,e.get)(o))===(n=e.last)||(e.eq?Se(t,n):cr(t)&&cr(n))){if(e===C){i=!1;break e}}else i=!0,(C=e).last=e.eq?A(t,null):t,(0,e.fn)(t,n===p?t:n,o),l<5&&(u[a=4-l]||(u[a]=[]),u[a].push({msg:we(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:t,oldVal:n}))}catch(e){d(e)}if(!(r=!o.$$suspended&&o.$$watchersCount&&o.$$childHead||o!==c&&o.$$nextSibling))for(;o!==c&&!(r=o.$$nextSibling);)o=o.$parent}while(o=r);if((i||y.length)&&!l--)throw v.$$phase=null,$("infdig",x,u)}while(i||y.length);for(v.$$phase=null;w<b.length;)try{b[w++]()}catch(e){d(e)}b.length=w=0,f.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var e,t=this.$parent;for(e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===v&&f.$$applicationDestroyed(),l(this,-this.$$watchersCount),this.$$listenerCount)a(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=he,this.$on=this.$watch=this.$watchGroup=function(){return he},this.$$listeners={},this.$$nextSibling=null,function e(t){9===lr&&(t.$$childHead&&e(t.$$childHead),t.$$nextSibling&&e(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}(this)}},$eval:function(e,t){return h(e)(this,t)},$evalAsync:function(e,t){v.$$phase||y.length||f.defer(function(){y.length&&v.$digest()},null,"$evalAsync"),y.push({scope:this,fn:h(e),locals:t})},$$postDigest:function(e){b.push(e)},$apply:function(e){try{m("$apply");try{return this.$eval(e)}finally{v.$$phase=null}}catch(e){d(e)}finally{try{v.$digest()}catch(e){throw d(e),e}}},$applyAsync:function(e){var t=this;e&&n.push(function(){t.$eval(e)}),e=h(e),null===S&&(S=f.defer(function(){v.$apply(g)},null,"$applyAsync"))},$on:function(t,n){var r=this.$$listeners[t];r||(this.$$listeners[t]=r=[]),r.push(n);for(var e=this;e.$$listenerCount[t]||(e.$$listenerCount[t]=0),e.$$listenerCount[t]++,e=e.$parent;);var i=this;return function(){var e=r.indexOf(n);-1!==e&&(delete r[e],a(i,1,t))}},$emit:function(e,t){var n,r,i,o=[],a=this,s=!1,l={name:e,targetScope:a,stopPropagation:function(){s=!0},preventDefault:function(){l.defaultPrevented=!0},defaultPrevented:!1},c=T([l],arguments,1);do{for(n=a.$$listeners[e]||o,l.currentScope=a,r=0,i=n.length;r<i;r++)if(n[r])try{n[r].apply(null,c)}catch(e){d(e)}else n.splice(r,1),r--,i--}while(!s&&(a=a.$parent));return l.currentScope=null,l},$broadcast:function(e,t){var n=this,r=this,i={name:e,targetScope:this,preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[e])return i;for(var o,a,s=T([i],arguments,1);n=r;){for(o=0,a=(r=(i.currentScope=n).$$listeners[e]||[]).length;o<a;o++)if(r[o])try{r[o].apply(null,s)}catch(e){d(e)}else r.splice(o,1),o--,a--;if(!(r=n.$$listenerCount[e]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(r=n.$$nextSibling);)n=n.$parent}return i.currentScope=null,i}};var v=new o,y=v.$$asyncQueue=[],b=v.$$postDigestQueue=[],n=v.$$applyAsyncQueue=[],w=0;return v}]}function jt(){var r=/^\s*(https?|s?ftp|mailto|tel|file):/,i=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationTrustedUrlList=function(e){return E(e)?(r=e,this):r},this.imgSrcSanitizationTrustedUrlList=function(e){return E(e)?(i=e,this):i},this.$get=function(){return function(e,t){var n=t?i:r,t=en(e&&e.trim()).href;return""===t||t.match(n)?e:"unsafe:"+t}}}function qt(e){var t=[];return E(e)&&ue(e,function(e){t.push(function(e){if("self"===e)return e;if(ve(e)){if(-1<e.indexOf("***"))throw Pi("iwcard",e);return e=hr(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(h(e))return new RegExp("^"+e.source+"$");throw Pi("imatcher")}(e))}),t}function Wt(){this.SCE_CONTEXTS=Oi;var u=["self"],d=[];this.trustedResourceUrlList=function(e){return u=arguments.length?qt(e):u},Object.defineProperty(this,"resourceUrlWhitelist",{get:function(){return this.trustedResourceUrlList},set:function(e){this.trustedResourceUrlList=e}}),this.bannedResourceUrlList=function(e){return d=arguments.length?qt(e):d},Object.defineProperty(this,"resourceUrlBlacklist",{get:function(){return this.bannedResourceUrlList},set:function(e){this.bannedResourceUrlList=e}}),this.$get=["$injector","$$sanitizeUri",function(e,a){function s(e,t){var n;return"self"===e?(n=tn(t,Hi))||(n=tn(t,n=ce.document.baseURI||(Ii||((Ii=ce.document.createElement("a")).href=".",Ii=Ii.cloneNode(!1)),Ii.href))):n=!!e.exec(t.href),n}function t(e){function t(e){this.$$unwrapTrustedValue=function(){return e}}return(t.prototype=e?new e:t.prototype).valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}var l=function(e){throw Pi("unsafe")};e.has("$sanitize")&&(l=e.get("$sanitize"));var n=t(),c={};return c[Oi.HTML]=t(n),c[Oi.CSS]=t(n),c[Oi.MEDIA_URL]=t(n),c[Oi.URL]=t(c[Oi.MEDIA_URL]),c[Oi.JS]=t(n),c[Oi.RESOURCE_URL]=t(c[Oi.URL]),{trustAs:function(e,t){var n=c.hasOwnProperty(e)?c[e]:null;if(!n)throw Pi("icontext",e,t);if(null===t||pe(t)||""===t)return t;if("string"!=typeof t)throw Pi("itype",e);return new n(t)},getTrusted:function(e,t){if(null===t||pe(t)||""===t)return t;if((n=c.hasOwnProperty(e)?c[e]:null)&&t instanceof n)return t.$$unwrapTrustedValue();if(we(t.$$unwrapTrustedValue)&&(t=t.$$unwrapTrustedValue()),e===Oi.MEDIA_URL||e===Oi.URL)return a(t.toString(),e===Oi.MEDIA_URL);if(e===Oi.RESOURCE_URL){for(var n=en(t.toString()),r=!1,i=0,o=u.length;i<o;i++)if(s(u[i],n)){r=!0;break}if(r)for(i=0,o=d.length;i<o;i++)if(s(d[i],n)){r=!1;break}if(r)return t;throw Pi("insecurl",t.toString())}if(e===Oi.HTML)return l(t);throw Pi("unsafe")},valueOf:function(e){return e instanceof n?e.$$unwrapTrustedValue():e}}}]}function Gt(){var t=!0;this.enabled=function(e){return t=arguments.length?!!e:t},this.$get=["$parse","$sceDelegate",function(r,e){if(t&&lr<8)throw Pi("iequirks");var i=H(Oi);i.isEnabled=function(){return t},i.trustAs=e.trustAs,i.getTrusted=e.getTrusted,i.valueOf=e.valueOf,t||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=me),i.parseAs=function(t,e){var n=r(e);return n.literal&&n.constant?n:r(e,function(e){return i.getTrusted(t,e)})};var n=i.parseAs,o=i.getTrusted,a=i.trustAs;return ue(Oi,function(t,e){e=Zn(e);i[("parse_as_"+e).replace(Bi,z)]=function(e){return n(t,e)},i[("get_trusted_"+e).replace(Bi,z)]=function(e){return o(t,e)},i[("trust_as_"+e).replace(Bi,z)]=function(e){return a(t,e)}}),i}]}function Yt(){this.$get=["$window","$document",function(e,t){var n={},r=!((!e.nw||!e.nw.process)&&e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id))&&e.history&&e.history.pushState,i=v((/android (\d+)/.exec(Zn((e.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((e.navigator||{}).userAgent),a=t[0]||{},s=a.body&&a.body.style,e=!1,t=!1;return s&&(e=!!("transition"in s||"webkitTransition"in s),t=!!("animation"in s||"webkitAnimation"in s)),{history:!(!r||i<4||o),hasEvent:function(e){return("input"!==e||!lr)&&(pe(n[e])&&(t=a.createElement("div"),n[e]="on"+e in t),n[e]);var t},csp:mr(),transitions:e,animations:t,android:i}}]}function Kt(){this.$get=k(function(e){return new Xt(e)})}function Xt(i){function o(){var e=r.pop();return e&&e.cb}function a(e){for(var t=r.length-1;0<=t;--t){var n=r[t];if(n.type===e)return r.splice(t,1),n.cb}}var s={},r=[],l=this.ALL_TASKS_TYPE="$$all$$",c=this.DEFAULT_TASK_TYPE="$$default$$";this.completeTask=function(e,t){t=t||c;try{e()}finally{var n=t||c;s[n]&&(s[n]--,s[l]--),n=s[t];var r=s[l];if(!r||!n)for(n=r?a:o;r=n(t);)try{r()}catch(e){i.error(e)}}},this.incTaskCount=function(e){s[e=e||c]=(s[e]||0)+1,s[l]=(s[l]||0)+1},this.notifyWhenNoPendingTasks=function(e,t){s[t=t||l]?r.push({type:t,cb:e}):e()}}function Jt(){var c;this.httpOptions=function(e){return e?(c=e,this):c},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(r,i,o,a,s){function l(t,n){l.totalPendingRequests++,ve(t)&&!pe(i.get(t))||(t=s.getTrustedResourceUrl(t));var e=o.defaults&&o.defaults.transformResponse;return ye(e)?e=e.filter(function(e){return e!==ot}):e===ot&&(e=null),o.get(t,de({cache:i,transformResponse:e},c)).finally(function(){l.totalPendingRequests--}).then(function(e){return i.put(t,e.data)},function(e){return n||(e=Fi("tpload",t,e.status,e.statusText),r(e)),a.reject(e)})}return l.totalPendingRequests=0,l}]}function Zt(){this.$get=["$rootScope","$browser","$location",function(t,n,r){return{findBindings:function(e,n,r){e=e.getElementsByClassName("ng-binding");var i=[];return ue(e,function(t){var e=ar.element(t).data("$binding");e&&ue(e,function(e){r?new RegExp("(^|\\s)"+hr(n)+"(\\s|\\||$)").test(e)&&i.push(t):-1!==e.indexOf(n)&&i.push(t)})}),i},findModels:function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=e.querySelectorAll("["+r[i]+"model"+(n?"=":"*=")+'"'+t+'"]');if(o.length)return o}},getLocation:function(){return r.url()},setLocation:function(e){e!==r.url()&&(r.url(e),t.$digest())},whenStable:function(e){n.notifyWhenNoOutstandingRequests(e)}}}]}function Qt(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(s,l,c,u,d){function e(e,t,n){we(e)||(n=t,t=e,e=he);var r=er.call(arguments,3),i=E(n)&&!n,o=(i?u:c).defer(),a=o.promise,t=l.defer(function(){try{o.resolve(e.apply(null,r))}catch(e){o.reject(e),d(e)}finally{delete f[a.$$timeoutId]}i||s.$apply()},t,"$timeout");return a.$$timeoutId=t,f[t]=o,a}var f={};return e.cancel=function(e){if(!e)return!1;if(!e.hasOwnProperty("$$timeoutId"))throw Li("badprom");if(!f.hasOwnProperty(e.$$timeoutId))return!1;e=e.$$timeoutId;var t=f[e],n=t.promise;return n.$$state&&(n.$$state.pur=!0),t.reject("canceled"),delete f[e],l.defer.cancel(e)},e}]}function en(e){return ve(e)?(lr&&(Ui.setAttribute("href",e),e=Ui.href),Ui.setAttribute("href",e),e=Ui.hostname,!zi&&-1<e.indexOf(":")&&(e="["+e+"]"),{href:Ui.href,protocol:Ui.protocol?Ui.protocol.replace(/:$/,""):"",host:Ui.host,search:Ui.search?Ui.search.replace(/^\?/,""):"",hash:Ui.hash?Ui.hash.replace(/^#/,""):"",hostname:e,port:Ui.port,pathname:"/"===Ui.pathname.charAt(0)?Ui.pathname:"/"+Ui.pathname}):e}function tn(e,t){return e=en(e),t=en(t),e.protocol===t.protocol&&e.host===t.host}function nn(){this.$get=k(ce)}function rn(e){function o(t){try{return decodeURIComponent(t)}catch(e){return t}}var a=e[0]||{},s={},l="";return function(){var t,e,n,r,i;try{t=a.cookie||""}catch(e){t=""}if(t!==l)for(t=(l=t).split("; "),s={},n=0;n<t.length;n++)0<(r=(e=t[n]).indexOf("="))&&(i=o(e.substring(0,r)),pe(s[i])&&(s[i]=o(e.substring(r+1))));return s}}function on(){this.$get=rn}function an(r){function i(e,t){if(ge(e)){var n={};return ue(e,function(e,t){n[t]=i(t,e)}),n}return r.factory(e+"Filter",t)}this.register=i,this.$get=["$injector",function(t){return function(e){return t.get(e+"Filter")}}],i("currency",un),i("date",bn),i("filter",sn),i("json",wn),i("limitTo",xn),i("lowercase",Ki),i("number",dn),i("orderBy",Cn),i("uppercase",Xi)}function sn(){return function(e,t,n,r){if(!_(e)){if(null==e)return e;throw N("filter")("notarray",e)}var i,o,a,s,l,c;switch(r=r||"$",cn(t)){case"function":break;case"boolean":case"null":case"number":case"string":i=!0;case"object":a=n,s=r,l=i,c=ge(o=t)&&s in o,!0===a?a=Se:we(a)||(a=function(e,t){return!pe(e)&&(null===e||null===t?e===t:!(ge(t)||ge(e)&&!u(e))&&(e=Zn(""+e),t=Zn(""+t),-1!==e.indexOf(t)))}),t=function(e){return c&&!ge(e)?ln(e,o[s],a,s,!1):ln(e,o,a,s,l)};break;default:return e}return Array.prototype.filter.call(e,t)}}function ln(e,t,n,r,i,o){var a,s=cn(e),l=cn(t);if("string"===l&&"!"===t.charAt(0))return!ln(e,t.substring(1),n,r,i);if(ye(e))return e.some(function(e){return ln(e,t,n,r,i)});switch(s){case"object":if(i){for(a in e)if(a.charAt&&"$"!==a.charAt(0)&&ln(e[a],t,n,r,!0))return!0;return!o&&ln(e,t,n,r,!1)}if("object"!==l)return n(e,t);for(a in t)if(o=t[a],!we(o)&&!pe(o)&&(s=a===r,!ln(s?e:e[a],o,n,r,s,s)))return!1;return!0;case"function":return!1;default:return n(e,t)}}function cn(e){return null===e?"null":typeof e}function un(e){var i=e.NUMBER_FORMATS;return function(e,t,n){pe(t)&&(t=i.CURRENCY_SYM),pe(n)&&(n=i.PATTERNS[1].maxFrac);var r=t?/\u00A4/g:/\s*\u00A4\s*/g;return null==e?e:fn(e,i.PATTERNS[1],i.GROUP_SEP,i.DECIMAL_SEP,n).replace(r,t)}}function dn(e){var n=e.NUMBER_FORMATS;return function(e,t){return null==e?e:fn(e,n.PATTERNS[0],n.GROUP_SEP,n.DECIMAL_SEP,t)}}function fn(e,t,n,r,i){if(!ve(e)&&!y(e)||isNaN(e))return"";var o=!isFinite(e),a=!1,s=Math.abs(e)+"",l="";if(o)l="∞";else{for(function(e,t,n,r){var i=e.d,o=i.length-e.i;if(r=i[n=(t=pe(t)?Math.min(Math.max(n,o),r):+t)+e.i],0<n){i.splice(Math.max(e.i,n));for(var a=n;a<i.length;a++)i[a]=0}else for(o=Math.max(0,o),e.i=1,i.length=Math.max(1,n=t+1),i[0]=0,a=1;a<n;a++)i[a]=0;if(5<=r)if(n-1<0){for(r=0;n<r;r--)i.unshift(0),e.i++;i.unshift(1),e.i++}else i[n-1]++;for(;o<Math.max(0,t);o++)i.push(0);(t=i.reduceRight(function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)},0))&&(i.unshift(t),e.i++)}(a=function(e){var t,n,r,i,o,a=0;for(0<(r=(e=-1<(n=e.indexOf(ji))?e.replace(ji,""):e).search(/e/i))?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charAt(r)===qi;r++);if(r===(o=e.length))t=[0],n=1;else{for(o--;e.charAt(o)===qi;)o--;for(n-=r,t=[],i=0;r<=o;r++,i++)t[i]=+e.charAt(r)}return Vi<n&&(t=t.splice(0,Vi-1),a=n-1,n=1),{d:t,e:a,i:n}}(s),i,t.minFrac,t.maxFrac),l=a.d,s=a.i,i=a.e,o=[],a=l.reduce(function(e,t){return e&&!t},!0);s<0;)l.unshift(0),s++;for(0<s?o=l.splice(s,l.length):(o=l,l=[0]),s=[],l.length>=t.lgSize&&s.unshift(l.splice(-t.lgSize,l.length).join(""));l.length>t.gSize;)s.unshift(l.splice(-t.gSize,l.length).join(""));l.length&&s.unshift(l.join("")),l=s.join(n),o.length&&(l+=r+o.join("")),i&&(l+="e+"+i)}return e<0&&!a?t.negPre+l+t.negSuf:t.posPre+l+t.posSuf}function hn(e,t,n,r){var i="";for((e<0||r&&e<=0)&&(r?e=1-e:(e=-e,i="-")),e=""+e;e.length<t;)e=qi+e;return i+(e=n?e.substr(e.length-t):e)}function mn(t,n,r,i,o){return r=r||0,function(e){return e=e["get"+t](),(0<r||-r<e)&&(e+=r),hn(e=0===e&&-12===r?12:e,n,i,o)}}function pn(n,r,i){return function(e,t){e=e["get"+n]();return t[Qn((i?"STANDALONE":"")+(r?"SHORT":"")+n)][e]}}function gn(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function vn(n){return function(e){var t=gn(e.getFullYear());return e=+new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))-+t,hn(e=1+Math.round(e/6048e5),n)}}function yn(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function bn(m){var p=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(t,e,n){var r,i,o,a,s,l,c,u,d="",f=[];if(e=e||"mediumDate",e=m.DATETIME_FORMATS[e]||e,!$(t=y(t=ve(t)?Yi.test(t)?v(t):((a=(o=t).match(p))&&(o=new Date(0),l=s=0,c=a[8]?o.setUTCFullYear:o.setFullYear,u=a[8]?o.setUTCHours:o.setHours,a[9]&&(s=v(a[9]+a[10]),l=v(a[9]+a[11])),c.call(o,v(a[1]),v(a[2])-1,v(a[3])),s=v(a[4]||0)-s,l=v(a[5]||0)-l,c=v(a[6]||0),a=Math.round(1e3*parseFloat("0."+(a[7]||0))),u.call(o,s,l,c,a)),o):t)?new Date(t):t)||!isFinite(t.getTime()))return t;for(;e;)e=(i=Gi.exec(e))?(f=T(f,i,1)).pop():(f.push(e),null);var h=t.getTimezoneOffset();return n&&(h=S(n,h),t=D(t,n,!0)),ue(f,function(e){r=Wi[e],d+=r?r(t,m.DATETIME_FORMATS,h):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}}function wn(){return function(e,t){return i(e,t=pe(t)?2:t)}}function xn(){return function(e,t,n){return t=(1/0===Math.abs(Number(t))?Number:v)(t),!cr(t)&&_(e=y(e)?e.toString():e)?(n=(n=!n||isNaN(n)?0:v(n))<0?Math.max(0,e.length+n):n,0<=t?$n(e,n,n+t):0===n?$n(e,t,e.length):$n(e,Math.max(0,n+t),n)):e}}function $n(e,t,n){return ve(e)?e.slice(t,n):er.call(e,t,n)}function Cn(i){function l(e){switch(typeof e){case"number":case"boolean":case"string":return 1;default:return}}function c(e,t){var n,r=0,i=e.type,o=t.type;return i===o?(o=e.value,n=t.value,"string"===i?(o=o.toLowerCase(),n=n.toLowerCase()):"object"===i&&(ge(o)&&(o=e.index),ge(n)&&(n=t.index)),o!==n&&(r=o<n?-1:1)):r="undefined"!==i&&("undefined"===o||"null"!==i&&("null"===o||i<o))?-1:1,r}return function(e,t,n,r){if(null==e)return e;if(!_(e))throw N("orderBy")("notarray",e);0===(t=!ye(t)?[t]:t).length&&(t=["+"]);var o=t.map(function(e){var t,n=1,r=me;return we(e)?r=e:ve(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(r=i(e)).constant&&(t=r(),r=function(e){return e[t]})),{get:r,descending:n}}),a=n?-1:1,s=we(r)?r:c;return(e=Array.prototype.map.call(e,function(n,r){return{value:n,tieBreaker:{value:r,type:"number",index:r},predicateValues:o.map(function(e){var t=e.get(n);return e=typeof t,null===t?e="null":"object"===e&&(we(t.valueOf)&&l(t=t.valueOf())||u(t)&&l(t=t.toString())),{value:t,type:e,index:r}})}})).sort(function(e,t){for(var n=0,r=o.length;n<r;n++){var i=s(e.predicateValues[n],t.predicateValues[n]);if(i)return i*o[n].descending*a}return(s(e.tieBreaker,t.tieBreaker)||c(e.tieBreaker,t.tieBreaker))*a}),e.map(function(e){return e.value})}}function Sn(e){return(e=we(e)?{link:e}:e).restrict=e.restrict||"AC",k(e)}function kn(e,t,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(t.name||t.ngForm||"")(n),this.$dirty=!1,this.$valid=this.$pristine=!0,this.$submitted=this.$invalid=!1,this.$$parentForm=Qi,this.$$element=e,this.$$animate=r,En(this)}function En(e){e.$$classCache={},e.$$classCache[Io]=!(e.$$classCache[Mo]=e.$$element.hasClass(Mo))}function An(e){function r(e,t,n){n&&!e.$$classCache[t]?(e.$$animate.addClass(e.$$element,t),e.$$classCache[t]=!0):!n&&e.$$classCache[t]&&(e.$$animate.removeClass(e.$$element,t),e.$$classCache[t]=!1)}function i(e,t,n){t=t?"-"+Ae(t,"-"):"",r(e,Mo+t,!0===n),r(e,Io+t,!1===n)}var o=e.set,a=e.unset;e.clazz.prototype.$setValidity=function(e,t,n){pe(t)?(this.$pending||(this.$pending={}),o(this.$pending,e,n)):(this.$pending&&a(this.$pending,e,n),Tn(this.$pending)&&(this.$pending=void 0)),b(t)?t?(a(this.$error,e,n),o(this.$$success,e,n)):(o(this.$error,e,n),a(this.$$success,e,n)):(a(this.$error,e,n),a(this.$$success,e,n)),this.$pending?(r(this,"ng-pending",!0),this.$valid=this.$invalid=void 0,i(this,"",null)):(r(this,"ng-pending",!1),this.$valid=Tn(this.$error),this.$invalid=!this.$valid,i(this,"",this.$valid)),i(this,e,t=this.$pending&&this.$pending[e]?void 0:!this.$error[e]&&(!!this.$$success[e]||null)),this.$$parentForm.$setValidity(e,t,this)}}function Tn(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Nn(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function _n(e,n,r,i,t,o){var a,s=Zn(n[0].type);t.android||(a=!1,n.on("compositionstart",function(){a=!0}),n.on("compositionupdate",function(e){!pe(e.data)&&""!==e.data||(a=!1)}),n.on("compositionend",function(){a=!1,u()}));var l,c,u=function(e){var t;l&&(o.defer.cancel(l),l=null),a||(t=n.val(),e=e&&e.type,"password"===s||r.ngTrim&&"false"===r.ngTrim||(t=fr(t)),(i.$viewValue!==t||""===t&&i.$$hasNativeValidators)&&i.$setViewValue(t,e))};t.hasEvent("input")?n.on("input",u):(c=function(e,t,n){l=l||o.defer(function(){l=null,t&&t.value===n||u(e)})},n.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||c(e,this,this.value)}),t.hasEvent("paste")&&n.on("paste cut drop",c)),n.on("change",u),uo[s]&&i.$$hasNativeValidators&&s===r.type&&n.on("keydown wheel mousedown",function(e){var t,n,r;l||(t=this.validity,n=t.badInput,r=t.typeMismatch,l=o.defer(function(){l=null,t.badInput===n&&t.typeMismatch===r||u(e)}))}),i.$render=function(){var e=i.$isEmpty(i.$viewValue)?"":i.$viewValue;n.val()!==e&&n.val(e)}}function Rn(r,i){return function(e,t){var n;if($(e))return e;if(ve(e)){if('"'===e.charAt(0)&&'"'===e.charAt(e.length-1)&&(e=e.substring(1,e.length-1)),no.test(e))return new Date(e);if(r.lastIndex=0,e=r.exec(e))return e.shift(),n=t?{yyyy:t.getFullYear(),MM:t.getMonth()+1,dd:t.getDate(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds(),sss:t.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},ue(e,function(e,t){t<i.length&&(n[i[t]]=+e)}),e=new Date(n.yyyy,n.MM-1,n.dd,n.HH,n.mm,n.ss||0,1e3*n.sss||0),n.yyyy<100&&e.setFullYear(n.yyyy),e}return NaN}}function Dn(y,b,w,x){return function(e,t,n,r,i,o,a,s){function l(e){return e&&(!e.getTime||e.getTime()===e.getTime())}function c(e){return E(e)&&!$(e)?u(e)||void 0:e}function u(e,t){var n=r.$options.getOption("timezone");f&&f!==n&&(t=R(t,S(f)));t=w(e,t);return t=!isNaN(t)&&n?D(t,n):t}Mn(0,t,0,r,y),_n(0,t,n,r,i,o);var d,f,h,m,p,g,v="time"===y||"datetimelocal"===y;r.$parsers.push(function(e){return r.$isEmpty(e)?null:b.test(e)?u(e,d):void(r.$$parserName=y)}),r.$formatters.push(function(e){if(e&&!$(e))throw Bo("datefmt",e);if(l(e)){d=e;var t=r.$options.getOption("timezone");t&&(d=D(d,f=t,!0));var n=x;return v&&ve(r.$options.getOption("timeSecondsFormat"))&&(n=x.replace("ss.sss",r.$options.getOption("timeSecondsFormat")).replace(/:$/,"")),e=a("date")(e,n,t),e=v&&r.$options.getOption("timeStripZeroSeconds")?e.replace(/(?::00)?(?:\.000)?$/,""):e}return f=d=null,""}),(E(n.min)||n.ngMin)&&(h=n.min||s(n.ngMin)(e),m=c(h),r.$validators.min=function(e){return!l(e)||pe(m)||w(e)>=m},n.$observe("min",function(e){e!==h&&(m=c(e),h=e,r.$validate())})),(E(n.max)||n.ngMax)&&(p=n.max||s(n.ngMax)(e),g=c(p),r.$validators.max=function(e){return!l(e)||pe(g)||w(e)<=g},n.$observe("max",function(e){e!==p&&(g=c(e),p=e,r.$validate())}))}}function Mn(e,n,t,r,i){(r.$$hasNativeValidators=ge(n[0].validity))&&r.$parsers.push(function(e){var t=n.prop("validity")||{};if(!t.badInput&&!t.typeMismatch)return e;r.$$parserName=i})}function In(t){t.$parsers.push(function(e){return t.$isEmpty(e)?null:oo.test(e)?parseFloat(e):void(t.$$parserName="number")}),t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!y(e))throw Bo("numfmt",e);e=e.toString()}return e})}function Pn(e){return E(e)&&!y(e)&&(e=parseFloat(e)),cr(e)?void 0:e}function On(e){var t=e.toString(),n=t.indexOf(".");return-1===n?-1<e&&e<1&&(e=/e-(\d+)$/.exec(t))?Number(e[1]):0:t.length-n-1}function Bn(e,t,n){var r,i,o,a=(0|(e=Number(e)))!==e,s=(0|t)!==t,l=(0|n)!==n;return(a||s||l)&&(o=a?On(e):0,r=s?On(t):0,i=l?On(n):0,o=Math.max(o,r,i),e*=o=Math.pow(10,o),t*=o,n*=o,a&&(e=Math.round(e)),s&&(t=Math.round(t)),l&&(n=Math.round(n))),0==(e-t)%n}function Fn(e,t,n,r,i){if(E(r)){if(!(e=e(r)).constant)throw Bo("constexpr",n,r);return e(t)}return i}function Ln(l,c){function u(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var n=[],r=0;e:for(;r<e.length;r++){for(var i=e[r],o=0;o<t.length;o++)if(i===t[o])continue e;n.push(i)}return n}function d(t){if(!t)return t;var e=t;return ye(t)?e=t.map(d).join(" "):ge(t)?e=Object.keys(t).filter(function(e){return t[e]}).join(" "):ve(t)||(e=t+""),e}var f;return l="ngClass"+l,["$parse",function(n){return{restrict:"AC",link:function(e,t,i){function o(e,t){var n=[];return ue(e,function(e){(0<t||r[e])&&(r[e]=(r[e]||0)+t,r[e]===+(0<t)&&n.push(e))}),n.join(" ")}var a,r=t.data("$classCounts"),s=!0;r||(r=Ne(),t.data("$classCounts",r)),"ngClass"!==l&&(f=f||n("$index",function(e){return 1&e}),e.$watch(f,function(e){var t;e===c?(t=o((t=a)&&t.split(" "),1),i.$addClass(t)):(t=o((t=a)&&t.split(" "),-1),i.$removeClass(t)),s=e})),e.$watch(n(i[l],d),function(e){var t,n,r;s===c&&(n=u(r=a&&a.split(" "),t=e&&e.split(" ")),r=u(t,r),n=o(n,-1),r=o(r,1),i.$addClass(r),i.$removeClass(n)),a=e})}}}]}function Un(n,i,o,a,s,l){return{restrict:"A",compile:function(e,t){var r=n(t[a]);return function(n,e){e.on(s,function(e){function t(){r(n,{$event:e})}if(i.$$phase)if(l)n.$evalAsync(t);else try{t()}catch(e){o(e)}else n.$apply(t)})}}}}function Hn(e,t,n,r,i,o,a,s,l){var c;this.$modelValue=this.$viewValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(n.name||"",!1)(e),this.$$parentForm=Qi,this.$options=Fo,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=e,this.$$rootScope=e.$root,this.$$attr=n,this.$$element=r,this.$$animate=o,this.$$timeout=a,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=t,En(this),(c=this).$$scope.$watch(function(e){return(e=c.$$ngModelGet(e))===c.$modelValue||c.$modelValue!=c.$modelValue&&e!=e||c.$$setModelValue(e),e})}function zn(e){this.$$options=e}function Vn(n,e){ue(e,function(e,t){E(n[t])||(n[t]=e)})}function jn(e,t){e.prop("selected",t),e.attr("selected",t)}function qn(e,t,n){if(e){if(!(e=ve(e)?new RegExp("^"+e+"$"):e).test)throw N("ngPattern")("noregexp",t,e,Ee(n));return e}}function Wn(e){return e=v(e),cr(e)?-1:e}var Gn,Yn,Kn={objectMaxDepth:5,urlErrorParamsEnabled:!0},Xn=/^\/(.+)\/([a-z]*)$/,Jn=Object.prototype.hasOwnProperty,Zn=function(e){return ve(e)?e.toLowerCase():e},Qn=function(e){return ve(e)?e.toUpperCase():e},er=[].slice,tr=[].splice,nr=[].push,rr=Object.prototype.toString,ir=Object.getPrototypeOf,or=N("ng"),ar=ce.angular||(ce.angular={}),sr=0,lr=ce.document.documentMode,cr=Number.isNaN||function(e){return e!=e};he.$inject=[],me.$inject=[];var ur,dr=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,fr=function(e){return ve(e)?e.trim():e},hr=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},mr=function(){if(!E(mr.rules)){var e=ce.document.querySelector("[ng-csp]")||ce.document.querySelector("[data-ng-csp]");if(e){var t=e.getAttribute("ng-csp")||e.getAttribute("data-ng-csp");mr.rules={noUnsafeEval:!t||-1!==t.indexOf("no-unsafe-eval"),noInlineStyle:!t||-1!==t.indexOf("no-inline-style")}}else{e=mr;try{new Function(""),t=!1}catch(e){t=!0}e.rules={noUnsafeEval:t,noInlineStyle:!1}}}return mr.rules},pr=function(){if(E(pr.name_))return pr.name_;for(var e,t,n,r=vr.length,i=0;i<r;++i)if(t=vr[i],e=ce.document.querySelector("["+t.replace(":","\\:")+"jq]")){n=e.getAttribute(t+"jq");break}return pr.name_=n},gr=/:/g,vr=["ng-","data-ng-","ng:","x-ng-"],yr=(ur=ce.document,!(so=ur.currentScript)||(so instanceof ce.HTMLScriptElement||so instanceof ce.SVGScriptElement)&&[(so=so.attributes).getNamedItem("src"),so.getNamedItem("href"),so.getNamedItem("xlink:href")].every(function(e){if(!e)return!0;if(!e.value)return!1;var t=ur.createElement("a");if(t.href=e.value,ur.location.origin===t.origin)return!0;switch(t.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})),br=/[A-Z]/g,wr=!1,xr=3,$r={full:"1.8.2",major:1,minor:8,dot:2,codeName:"meteoric-mining"};W.expando="ng339";var Cr=W.cache={},Sr=1;W._data=function(e){return this.cache[e[this.expando]]||{}};var kr=/-([a-z])/g,Er=/^-ms-/,Ar={mouseleave:"mouseout",mouseenter:"mouseover"},Tr=N("jqLite"),Nr=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,_r=/<|&#?\w+;/,Rr=/<([\w:-]+)/,Dr=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Mr={thead:["table"],col:["colgroup","table"],tr:["tbody","table"],td:["tr","tbody","table"]};Mr.tbody=Mr.tfoot=Mr.colgroup=Mr.caption=Mr.thead,Mr.th=Mr.td;var Ir,Pr={option:[1,'<select multiple="multiple">',"</select>"],_default:[0,"",""]};for(Ir in Mr){var Or=Mr[Ir],Br=Or.slice().reverse();Pr[Ir]=[Br.length,"<"+Br.join("><")+">","</"+Or.join("></")+">"]}Pr.optgroup=Pr.option;var Fr=ce.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))},Lr=W.prototype={ready:le,toString:function(){var t=[];return ue(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(e){return Gn(0<=e?this[e]:this[this.length+e])},length:0,push:nr,sort:[].sort,splice:[].splice},Ur={};ue("multiple selected checked disabled readOnly required open".split(" "),function(e){Ur[Zn(e)]=e});var Hr={};ue("input select option textarea button form details".split(" "),function(e){Hr[e]=!0});var zr={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Vr(e,t){if(pe(t)){var n=e.nodeType;return 1===n||n===xr?e.textContent:""}e.textContent=t}ue({data:Q,removeData:J,hasData:function(e){for(var t in Cr[e.ng339])return!0;return!1},cleanData:function(e){for(var t=0,n=e.length;t<n;t++)J(e[t]),X(e[t])}},function(e,t){W[t]=e}),ue({data:Q,inheritedData:oe,scope:function(e){return Gn.data(e,"$scope")||oe(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Gn.data(e,"$isolateScope")||Gn.data(e,"$isolateScopeNoTemplate")},controller:ie,injector:function(e){return oe(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:ee,css:function(e,t,n){if(t=V(t.replace(Er,"ms-")),!E(n))return e.style[t];e.style[t]=n},attr:function(e,t,n){if((r=e.nodeType)!==xr&&2!==r&&8!==r&&e.getAttribute){var r=Zn(t),i=Ur[r];if(!E(n))return e=e.getAttribute(t),null===(e=i&&null!==e?r:e)?void 0:e;null===n||!1===n&&i?e.removeAttribute(t):e.setAttribute(t,i?r:n)}},prop:function(e,t,n){if(!E(n))return e[t];e[t]=n},text:(Vr.$dv="",Vr),val:function(e,t){if(pe(t)){if(e.multiple&&"select"===$e(e)){var n=[];return ue(e.options,function(e){e.selected&&n.push(e.value||e.text)}),n}return e.value}e.value=t},html:function(e,t){if(pe(t))return e.innerHTML;G(e,!0),e.innerHTML=t},empty:ae},function(a,e){W.prototype[e]=function(e,t){var n,r=this.length;if(a!==ae&&pe(2===a.length&&a!==ee&&a!==ie?e:t)){if(ge(e)){for(o=0;o<r;o++)if(a===Q)a(this[o],e);else for(n in e)a(this[o],n,e[n]);return this}for(r=pe(o=a.$dv)?Math.min(r,1):r,n=0;n<r;n++)var i=a(this[n],e,t),o=o?o+i:i;return o}for(o=0;o<r;o++)a(this[o],e,t);return this}}),ue({removeData:J,on:function(i,e,o,t){if(E(t))throw Tr("onargs");if(j(i))for(var a=(t=Z(i,!0)).events,s=(s=t.handle)||(t.handle=De(i,a)),n=(t=0<=e.indexOf(" ")?e.split(" "):[e]).length,r=function(e,t,n){var r=a[e];r||((r=a[e]=[]).specialHandlerWrapper=t,"$destroy"===e||n||i.addEventListener(e,s)),r.push(o)};n--;)e=t[n],Ar[e]?(r(Ar[e],Ie),r(e,void 0,!0)):r(e)},off:X,one:function(t,n,r){(t=Gn(t)).on(n,function e(){t.off(n,r),t.off(n,e)}),t.on(n,r)},replaceWith:function(t,e){var n,r=t.parentNode;G(t),ue(new W(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(e){var t=[];return ue(e.childNodes,function(e){1===e.nodeType&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){if(1===(n=e.nodeType)||11===n)for(var n=0,r=(t=new W(t)).length;n<r;n++)e.appendChild(t[n])},prepend:function(t,e){var n;1===t.nodeType&&(n=t.firstChild,ue(new W(e),function(e){t.insertBefore(e,n)}))},wrap:function(e,t){var n=Gn(t).eq(0).clone()[0],t=e.parentNode;t&&t.replaceChild(n,e),n.appendChild(e)},remove:se,detach:function(e){se(e,!0)},after:function(e,t){var n=e,r=e.parentNode;if(r)for(var i=0,o=(t=new W(t)).length;i<o;i++){var a=t[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:ne,removeClass:te,toggleClass:function(n,e,r){e&&ue(e.split(" "),function(e){var t=r;((t=pe(t)?!ee(n,e):t)?ne:te)(n,e)})},parent:function(e){return(e=e.parentNode)&&11!==e.nodeType?e:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:_e,triggerHandler:function(t,e,n){var r,i,o=e.type||e,a=Z(t);(a=(a=a&&a.events)&&a[o])&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:he,type:o,target:t},e.type&&(r=de(r,e)),e=H(a),i=n?[r].concat(n):[r],ue(e,function(e){r.isImmediatePropagationStopped()||e.apply(t,i)}))}},function(a,e){W.prototype[e]=function(e,t,n){for(var r,i=0,o=this.length;i<o;i++)pe(r)?E(r=a(this[i],e,t,n))&&(r=Gn(r)):re(r,a(this[i],e,t,n));return E(r)?r:this}}),W.prototype.bind=W.prototype.on,W.prototype.unbind=W.prototype.off;var jr=Object.create(null);Be.prototype={_idx:function(e){return e!==this._lastKey&&(this._lastKey=e,this._lastIndex=this._keys.indexOf(e)),this._lastIndex},_transformKey:function(e){return cr(e)?jr:e},get:function(e){if(e=this._transformKey(e),-1!==(e=this._idx(e)))return this._values[e]},has:function(e){return e=this._transformKey(e),-1!==this._idx(e)},set:function(e,t){e=this._transformKey(e);var n=this._idx(e);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=e,this._values[n]=t},delete:function(e){return e=this._transformKey(e),-1!==(e=this._idx(e))&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var qr=Be,Wr=[function(){this.$get=[function(){return qr}]}],Gr=/^([^(]+?)=>/,Yr=/^[^(]*\(\s*([^)]*)\)/m,Kr=/,/,Xr=/^\s*(_?)(\S+?)\1\s*$/,Jr=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Zr=N("$injector");function Qr(){this.$get=he}function ei(){var l=new qr,c=[];this.$get=["$$AnimateRunner","$rootScope",function(i,o){function a(t,e,n){var r=!1;return e&&ue(e=ve(e)?e.split(" "):ye(e)?e:[],function(e){e&&(r=!0,t[e]=n)}),r}function s(){ue(c,function(e){var n,r,i,t=l.get(e);t&&(n=function(e){ve(e)&&(e=e.split(" "));var t=Ne();return ue(e,function(e){e.length&&(t[e]=!0)}),t}(e.attr("class")),i=r="",ue(t,function(e,t){e!==!!n[t]&&(e?r+=(r.length?" ":"")+t:i+=(i.length?" ":"")+t)}),ue(e,function(e){r&&ne(e,r),i&&te(e,i)}),l.delete(e))}),c.length=0}return{enabled:he,on:he,off:he,pin:he,push:function(e,t,n,r){return r&&r(),(n=n||{}).from&&e.css(n.from),n.to&&e.css(n.to),(n.addClass||n.removeClass)&&(t=n.addClass,r=n.removeClass,t=a(n=l.get(e)||{},t,!0),r=a(n,r,!1),(t||r)&&(l.set(e,n),c.push(e),1===c.length&&o.$$postDigest(s))),(e=new i).complete(),e}}}]}function ti(){this.$get=["$$rAF",function(t){function n(e){r.push(e),1<r.length||t(function(){for(var e=0;e<r.length;e++)r[e]();r=[]})}var r=[];return function(){var t=!1;return n(function(){t=!0}),function(e){t?e():n(e)}}}]}function ni(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,r,i){function o(e){this.setHost(e);var t=n();this._doneCallbacks=[],this._tick=function(e){r()?i(e,0,!1):t(e)},this._state=0}return o.chain=function(e,n){var r=0;!function t(){r===e.length?n(!0):e[r](function(e){!1===e?n(!1):(r++,t())})}()},o.all=function(t,n){function r(e){o=o&&e,++i===t.length&&n(o)}var i=0,o=!0;ue(t,function(e){e.done(r)})},o.prototype={setHost:function(e){this.host=e||{}},done:function(e){2===this._state?e():this._doneCallbacks.push(e)},progress:he,getPromise:function(){var e;return this.promise||((e=this).promise=t(function(t,n){e.done(function(e){(!1===e?n:t)()})})),this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;0===t._state&&(t._state=1,t._tick(function(){t._resolve(e)}))},_resolve:function(t){2!==this._state&&(ue(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},o}]}function ri(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,e,s){return function(e,t){function n(){return a(function(){r.addClass&&(e.addClass(r.addClass),r.addClass=null),r.removeClass&&(e.removeClass(r.removeClass),r.removeClass=null),r.to&&(e.css(r.to),r.to=null),i||o.complete(),i=!0}),o}var r=t||{};(r=!r.$$prepared?A(r):r).cleanupStyles&&(r.from=r.to=null),r.from&&(e.css(r.from),r.from=null);var i,o=new s;return{start:n,end:n}}}]}Le.$$annotate=function(e,t,n){var r,i;if("function"==typeof e){if(!(r=e.$inject)){if(r=[],e.length){if(t)throw ve(n)&&n||(n=e.name||((i=Fe(i=e))?"function("+(i[1]||"").replace(/[\s\r\n]+/," ")+")":"fn")),Zr("strictdi",n);ue((t=Fe(e))[1].split(Kr),function(e){e.replace(Xr,function(e,t,n){r.push(n)})})}e.$inject=r}}else ye(e)?(B(e[t=e.length-1],"fn"),r=e.slice(0,t)):B(e,"fn",!0);return r};var ii=N("$animate"),oi=["$provide",function(r){var i=this,t=null,n=null;this.$$registeredAnimations=Object.create(null),this.register=function(e,t){if(e&&"."!==e.charAt(0))throw ii("notcsel",e);var n=e+"-animation";i.$$registeredAnimations[e.substr(1)]=n,r.factory(n,t)},this.customFilter=function(e){return n=1===arguments.length?we(e)?e:null:n},this.classNameFilter=function(e){if(1===arguments.length&&(t=e instanceof RegExp?e:null)&&/[(\s|\/)]ng-animate[(\s|\/)]/.test(t.toString()))throw t=null,ii("nongcls","ng-animate");return t},this.$get=["$$animateQueue",function(o){function i(e,t,n){if(n){var r;e:{for(r=0;r<n.length;r++){var i=n[r];if(1===i.nodeType){r=i;break e}}r=void 0}!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:o.on,off:o.off,pin:o.pin,enabled:o.enabled,cancel:function(e){e.cancel&&e.cancel()},enter:function(e,t,n,r){return t=t&&Gn(t),n=n&&Gn(n),i(e,t=t||n.parent(),n),o.push(e,"enter",ze(r))},move:function(e,t,n,r){return t=t&&Gn(t),n=n&&Gn(n),i(e,t=t||n.parent(),n),o.push(e,"move",ze(r))},leave:function(e,t){return o.push(e,"leave",ze(t),function(){e.remove()})},addClass:function(e,t,n){return(n=ze(n)).addClass=He(n.addclass,t),o.push(e,"addClass",n)},removeClass:function(e,t,n){return(n=ze(n)).removeClass=He(n.removeClass,t),o.push(e,"removeClass",n)},setClass:function(e,t,n,r){return(r=ze(r)).addClass=He(r.addClass,t),r.removeClass=He(r.removeClass,n),o.push(e,"setClass",r)},animate:function(e,t,n,r,i){return(i=ze(i)).from=i.from?de(i.from,t):t,i.to=i.to?de(i.to,n):n,i.tempClasses=He(i.tempClasses,r||"ng-inline-animate"),o.push(e,"animate",i)}}}]}],ai=N("$compile"),si=new function(){};function li(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof Gn&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]}Ge.$inject=["$provide","$$sanitizeUriProvider"],Ye.prototype.isFirstChange=function(){return this.previousValue===si};var ci=/^((?:x|data)[:\-_])/i,ui=/[:\-_]+(.)/g,di=N("$controller"),fi=/^(\S+)(\s+as\s+([\w$]+))?$/,hi="application/json",mi={"Content-Type":hi+";charset=utf-8"},pi=/^\[|^\{(?!\{)/,gi={"[":/]$/,"{":/}$/},vi=/^\)]\}',?\n/,yi=N("$http"),bi=ar.$interpolateMinErr=N("$interpolate");function wi(){this.$get=function(){var i=ar.callbacks,o={};return{createCallback:function(e){var t,n="angular.callbacks."+(e="_"+(i.$$counter++).toString(36)),r=((t=function(e){t.data=e,t.called=!0}).id=e,t);return o[n]=i[e]=r,n},wasCalled:function(e){return o[e].called},getResponse:function(e){return o[e].data},removeCallback:function(e){delete i[o[e].id],delete o[e]}}}}bi.throwNoconcat=function(e){throw bi("noconcat",e)},bi.interr=function(e,t){return bi("interr",e,t.toString())};var xi=N("$interval"),$i=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Ci={http:80,https:443,ftp:21},Si=N("$location"),ki=/^\s*[\\/]{2,}/,Ei={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){for(var e,n,t=this.$$path,r=this.$$hash,e=(e=this.$$search,n=[],ue(e,function(e,t){ye(e)?ue(e,function(e){n.push(p(t,!0)+(!0===e?"":"="+p(e,!0)))}):n.push(p(t,!0)+(!0===e?"":"="+p(e,!0)))}),n.length?n.join("&"):""),r=r?"#"+d(r):"",i=(t=t.split("/")).length;i--;)t[i]=d(t[i].replace(/%2F/g,"/"));this.$$url=t.join("/")+(e?"?"+e:"")+r,this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:Ct("$$absUrl"),url:function(e){if(pe(e))return this.$$url;var t=$i.exec(e);return!t[1]&&""!==e||this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:Ct("$$protocol"),host:Ct("$$host"),port:Ct("$$port"),path:St("$$path",function(e){return"/"===(e=null!==e?e.toString():"").charAt(0)?e:"/"+e}),search:function(n,e){switch(arguments.length){case 0:return this.$$search;case 1:if(ve(n)||y(n))n=n.toString(),this.$$search=M(n);else{if(!ge(n))throw Si("isrcharg");ue(n=A(n,{}),function(e,t){null==e&&delete n[t]}),this.$$search=n}break;default:pe(e)||null===e?delete this.$$search[n]:this.$$search[n]=e}return this.$$compose(),this},hash:St("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};ue([$t,xt,wt],function(t){t.prototype=Object.create(Ei),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==wt||!this.$$html5)throw Si("nostate");return this.$$state=pe(e)?null:e,this.$$urlUpdatedByLocation=!0,this}});var Ai=N("$parse"),Ti={}.constructor.prototype.valueOf,Ni=Ne();ue("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){Ni[e]=!0});var _i={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Ri=function(e){this.options=e};Ri.prototype={constructor:Ri,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t,n,r,i;'"'===(e=this.text.charAt(this.index))||"'"===e?this.readString(e):this.isNumber(e)||"."===e&&this.isNumber(this.peek())?this.readNumber():this.isIdentifierStart(this.peekMultichar())?this.readIdent():this.is(e,"(){}[].,;:?")?(this.tokens.push({index:this.index,text:e}),this.index++):this.isWhitespace(e)?this.index++:(n=(t=e+this.peek())+this.peek(2),r=Ni[t],i=Ni[n],Ni[e]||r||i?(e=i?n:r?t:e,this.tokens.push({index:this.index,text:e,operator:!0}),this.index+=e.length):this.throwError("Unexpected next character ",this.index,this.index+1))}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){return e=e||1,this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||" "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return 55296<=n&&n<=56319&&56320<=r&&r<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){throw n=n||this.index,t=E(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n,Ai("lexerr",e,t,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Zn(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index),r=r+o;if(i)"u"===o?((i=this.text.substring(this.index+1,this.index+5)).match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+i+"]"),this.index+=4,n+=String.fromCharCode(parseInt(i,16))):n+=_i[o]||o,i=!1;else if("\\"===o)i=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var Di=function(e,t){this.lexer=e,this.options=t};Di.Program="Program",Di.ExpressionStatement="ExpressionStatement",Di.AssignmentExpression="AssignmentExpression",Di.ConditionalExpression="ConditionalExpression",Di.LogicalExpression="LogicalExpression",Di.BinaryExpression="BinaryExpression",Di.UnaryExpression="UnaryExpression",Di.CallExpression="CallExpression",Di.MemberExpression="MemberExpression",Di.Identifier="Identifier",Di.Literal="Literal",Di.ArrayExpression="ArrayExpression",Di.Property="Property",Di.ObjectExpression="ObjectExpression",Di.ThisExpression="ThisExpression",Di.LocalsExpression="LocalsExpression",Di.NGValueParameter="NGValueParameter",Di.prototype={ast:function(e){return this.text=e,this.tokens=this.lexer.lex(e),e=this.program(),0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var e=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:Di.Program,body:e}},expressionStatement:function(){return{type:Di.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!Dt(e))throw Ai("lval");e={type:Di.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:Di.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:Di.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:Di.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:Di.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:Di.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:Di.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:Di.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:Di.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e,t;for(this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=A(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:Di.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());t=this.expect("(","[",".");)"("===t.text?(e={type:Di.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:Di.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:Di.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){e=[e];for(var t={type:Di.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return t},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)for(;e.push(this.filterChain()),this.expect(","););return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:Di.Identifier,name:e.text}},constant:function(){return{type:Di.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)for(;!this.peek("]")&&(e.push(this.expression()),this.expect(",")););return this.consume("]"),{type:Di.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)for(;!this.peek("}")&&(e={type:Di.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e),this.expect(",")););return this.consume("}"),{type:Di.ObjectExpression,properties:t}},throwError:function(e,t){throw Ai("syntax",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw Ai("ueoe",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw Ai("ueoe",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var o=(e=this.tokens[e]).text;if(o===t||o===n||o===r||o===i||!(t||n||r||i))return e}return!1},expect:function(e,t,n,r){return!!(e=this.peek(e,t,n,r))&&(this.tokens.shift(),e)},selfReferential:{this:{type:Di.ThisExpression},$locals:{type:Di.LocalsExpression}}};var Mi=2;It.prototype={compile:function(e){var i=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},_t(e,i.$filter);var t,n="";return this.stage="assign",(t=Mt(e))&&(this.state.computing="assign",n=this.nextId(),this.recurse(t,n),this.return_(n),n="fn.assign="+this.generateFunction("assign","s,v,l")),t=Rt(e.body),i.stage="inputs",ue(t,function(e,t){var n="fn"+t;i.state[n]={vars:[],body:[],own:{}},i.state.computing=n;var r=i.nextId();i.recurse(e,r),i.return_(r),i.state.inputs.push({name:n,isPure:e.isPure}),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(e),e='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+n+this.watchFns()+"return fn;",e=new Function("$filter","getStringValue","ifDefined","plus",e)(this.$filter,At,Tt,Nt),this.state=this.stage=void 0,e},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return ue(e,function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")}),e.length&&t.push("fn.inputs=["+e.map(function(e){return e.name}).join(",")+"];"),t.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var n=[],r=this;return ue(this.state.filters,function(e,t){n.push(e+"=$filter("+r.escape(t)+")")}),n.length?"var "+n.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(n,t,e,r,i,o){var a,s,l,c,u,d=this;if(r=r||he,!o&&E(n.watchId))t=t||this.nextId(),this.if_("i",this.lazyAssign(t,this.computedMember("i",n.watchId)),this.lazyRecurse(n,t,e,r,i,!0));else switch(n.type){case Di.Program:ue(n.body,function(e,t){d.recurse(e.expression,void 0,void 0,function(e){s=e}),t!==n.body.length-1?d.current().body.push(s,";"):d.return_(s)});break;case Di.Literal:c=this.escape(n.value),this.assign(t,c),r(t||c);break;case Di.UnaryExpression:this.recurse(n.argument,void 0,void 0,function(e){s=e}),c=n.operator+"("+this.ifDefined(s,0)+")",this.assign(t,c),r(c);break;case Di.BinaryExpression:this.recurse(n.left,void 0,void 0,function(e){a=e}),this.recurse(n.right,void 0,void 0,function(e){s=e}),c="+"===n.operator?this.plus(a,s):"-"===n.operator?this.ifDefined(a,0)+n.operator+this.ifDefined(s,0):"("+a+")"+n.operator+"("+s+")",this.assign(t,c),r(c);break;case Di.LogicalExpression:t=t||this.nextId(),d.recurse(n.left,t),d.if_("&&"===n.operator?t:d.not(t),d.lazyRecurse(n.right,t)),r(t);break;case Di.ConditionalExpression:t=t||this.nextId(),d.recurse(n.test,t),d.if_(t,d.lazyRecurse(n.alternate,t),d.lazyRecurse(n.consequent,t)),r(t);break;case Di.Identifier:t=t||this.nextId(),e&&(e.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",n.name)+"?l:s"),e.computed=!1,e.name=n.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",n.name)),function(){d.if_("inputs"===d.stage||"s",function(){i&&1!==i&&d.if_(d.isNull(d.nonComputedMember("s",n.name)),d.lazyAssign(d.nonComputedMember("s",n.name),"{}")),d.assign(t,d.nonComputedMember("s",n.name))})},t&&d.lazyAssign(t,d.nonComputedMember("l",n.name))),r(t);break;case Di.MemberExpression:a=e&&(e.context=this.nextId())||this.nextId(),t=t||this.nextId(),d.recurse(n.object,a,void 0,function(){d.if_(d.notNull(a),function(){n.computed?(s=d.nextId(),d.recurse(n.property,s),d.getStringValue(s),i&&1!==i&&d.if_(d.not(d.computedMember(a,s)),d.lazyAssign(d.computedMember(a,s),"{}")),c=d.computedMember(a,s),d.assign(t,c),e&&(e.computed=!0,e.name=s)):(i&&1!==i&&d.if_(d.isNull(d.nonComputedMember(a,n.property.name)),d.lazyAssign(d.nonComputedMember(a,n.property.name),"{}")),c=d.nonComputedMember(a,n.property.name),d.assign(t,c),e&&(e.computed=!1,e.name=n.property.name))},function(){d.assign(t,"undefined")}),r(t)},!!i);break;case Di.CallExpression:t=t||this.nextId(),n.filter?(s=d.filter(n.callee.name),l=[],ue(n.arguments,function(e){var t=d.nextId();d.recurse(e,t),l.push(t)}),c=s+"("+l.join(",")+")",d.assign(t,c),r(t)):(s=d.nextId(),a={},l=[],d.recurse(n.callee,s,a,function(){d.if_(d.notNull(s),function(){ue(n.arguments,function(e){d.recurse(e,n.constant?void 0:d.nextId(),void 0,function(e){l.push(e)})}),c=a.name?d.member(a.context,a.name,a.computed)+"("+l.join(",")+")":s+"("+l.join(",")+")",d.assign(t,c)},function(){d.assign(t,"undefined")}),r(t)}));break;case Di.AssignmentExpression:s=this.nextId(),a={},this.recurse(n.left,void 0,a,function(){d.if_(d.notNull(a.context),function(){d.recurse(n.right,s),c=d.member(a.context,a.name,a.computed)+n.operator+s,d.assign(t,c),r(t||c)})},1);break;case Di.ArrayExpression:l=[],ue(n.elements,function(e){d.recurse(e,n.constant?void 0:d.nextId(),void 0,function(e){l.push(e)})}),c="["+l.join(",")+"]",this.assign(t,c),r(t||c);break;case Di.ObjectExpression:u=!(l=[]),ue(n.properties,function(e){e.computed&&(u=!0)}),u?(t=t||this.nextId(),this.assign(t,"{}"),ue(n.properties,function(e){e.computed?(a=d.nextId(),d.recurse(e.key,a)):a=e.key.type===Di.Identifier?e.key.name:""+e.key.value,s=d.nextId(),d.recurse(e.value,s),d.assign(d.member(t,a,e.computed),s)})):(ue(n.properties,function(t){d.recurse(t.value,n.constant?void 0:d.nextId(),void 0,function(e){l.push(d.escape(t.key.type===Di.Identifier?t.key.name:""+t.key.value)+":"+e)})}),c="{"+l.join(",")+"}",this.assign(t,c)),r(t||c);break;case Di.ThisExpression:this.assign(t,"s"),r(t||"s");break;case Di.LocalsExpression:this.assign(t,"l"),r(t||"l");break;case Di.NGValueParameter:this.assign(t,"v"),r(t||"v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){var r;!0===e?t():((r=this.current().body).push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}")))},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(t)?e+"."+t:e+'["'+t.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,n,r,i,o){var a=this;return function(){a.recurse(e,t,n,r,i,o)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(ve(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(y(e))return e.toString();if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(void 0===e)return"undefined";throw Ai("esc")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},Pt.prototype={compile:function(e){var t,r,i,o=this;_t(e,o.$filter),(t=Mt(e))&&(r=this.recurse(t)),(t=Rt(e.body))&&(i=[],ue(t,function(e,t){var n=o.recurse(e);n.isPure=e.isPure,e.input=n,i.push(n),e.watchId=t}));var a=[];return ue(e.body,function(e){a.push(o.recurse(e.expression))}),e=0===e.body.length?he:1===e.body.length?a[0]:function(t,n){var r;return ue(a,function(e){r=e(t,n)}),r},r&&(e.assign=function(e,t,n){return r(e,n,t)}),i&&(e.inputs=i),e},recurse:function(e,s,t){var o,l,c,n=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case Di.Literal:return this.value(e.value,s);case Di.UnaryExpression:return l=this.recurse(e.argument),this["unary"+e.operator](l,s);case Di.BinaryExpression:case Di.LogicalExpression:return o=this.recurse(e.left),l=this.recurse(e.right),this["binary"+e.operator](o,l,s);case Di.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),s);case Di.Identifier:return n.identifier(e.name,s,t);case Di.MemberExpression:return o=this.recurse(e.object,!1,!!t),e.computed||(l=e.property.name),e.computed&&(l=this.recurse(e.property)),e.computed?this.computedMember(o,l,s,t):this.nonComputedMember(o,l,s,t);case Di.CallExpression:return c=[],ue(e.arguments,function(e){c.push(n.recurse(e))}),e.filter&&(l=this.$filter(e.callee.name)),e.filter||(l=this.recurse(e.callee,!0)),e.filter?function(e,t,n,r){for(var i=[],o=0;o<c.length;++o)i.push(c[o](e,t,n,r));return e=l.apply(void 0,i,r),s?{context:void 0,name:void 0,value:e}:e}:function(e,t,n,r){var i,o=l(e,t,n,r);if(null!=o.value){i=[];for(var a=0;a<c.length;++a)i.push(c[a](e,t,n,r));i=o.value.apply(o.context,i)}return s?{value:i}:i};case Di.AssignmentExpression:return o=this.recurse(e.left,!0,1),l=this.recurse(e.right),function(e,t,n,r){var i=o(e,t,n,r);return e=l(e,t,n,r),i.context[i.name]=e,s?{value:e}:e};case Di.ArrayExpression:return c=[],ue(e.elements,function(e){c.push(n.recurse(e))}),function(e,t,n,r){for(var i=[],o=0;o<c.length;++o)i.push(c[o](e,t,n,r));return s?{value:i}:i};case Di.ObjectExpression:return c=[],ue(e.properties,function(e){e.computed?c.push({key:n.recurse(e.key),computed:!0,value:n.recurse(e.value)}):c.push({key:e.key.type===Di.Identifier?e.key.name:""+e.key.value,computed:!1,value:n.recurse(e.value)})}),function(e,t,n,r){for(var i={},o=0;o<c.length;++o)c[o].computed?i[c[o].key(e,t,n,r)]=c[o].value(e,t,n,r):i[c[o].key]=c[o].value(e,t,n,r);return s?{value:i}:i};case Di.ThisExpression:return function(e){return s?{value:e}:e};case Di.LocalsExpression:return function(e,t){return s?{value:t}:t};case Di.NGValueParameter:return function(e,t,n){return s?{value:n}:n}}},"unary+":function(i,o){return function(e,t,n,r){return e=E(e=i(e,t,n,r))?+e:0,o?{value:e}:e}},"unary-":function(i,o){return function(e,t,n,r){return e=E(e=i(e,t,n,r))?-e:-0,o?{value:e}:e}},"unary!":function(i,o){return function(e,t,n,r){return e=!i(e,t,n,r),o?{value:e}:e}},"binary+":function(o,a,s){return function(e,t,n,r){var i=Nt(i=o(e,t,n,r),e=a(e,t,n,r));return s?{value:i}:i}},"binary-":function(o,a,s){return function(e,t,n,r){var i=o(e,t,n,r);return e=a(e,t,n,r),i=(E(i)?i:0)-(E(e)?e:0),s?{value:i}:i}},"binary*":function(i,o,a){return function(e,t,n,r){return e=i(e,t,n,r)*o(e,t,n,r),a?{value:e}:e}},"binary/":function(i,o,a){return function(e,t,n,r){return e=i(e,t,n,r)/o(e,t,n,r),a?{value:e}:e}},"binary%":function(i,o,a){return function(e,t,n,r){return e=i(e,t,n,r)%o(e,t,n,r),a?{value:e}:e}},"binary===":function(i,o,a){return function(e,t,n,r){return e=i(e,t,n,r)===o(e,t,n,r),a?{value:e}:e}},"binary!==":function(i,o,a){return function(e,t,n,r){return e=i(e,t,n,r)!==o(e,t,n,r),a?{value:e}:e}},"binary==":function(i,o,a){return function(e,t,n,r){return e=i(e,t,n,r)==o(e,t,n,r),a?{value:e}:e}},"binary!=":function(i,o,a){return function(e,t,n,r){return e=i(e,t,n,r)!=o(e,t,n,r),a?{value:e}:e}},"binary<":function(i,o,a){return function(e,t,n,r){return e=i(e,t,n,r)<o(e,t,n,r),a?{value:e}:e}},"binary>":function(i,o,a){return function(e,t,n,r){return e=i(e,t,n,r)>o(e,t,n,r),a?{value:e}:e}},"binary<=":function(i,o,a){return function(e,t,n,r){return e=i(e,t,n,r)<=o(e,t,n,r),a?{value:e}:e}},"binary>=":function(i,o,a){return function(e,t,n,r){return e=i(e,t,n,r)>=o(e,t,n,r),a?{value:e}:e}},"binary&&":function(i,o,a){return function(e,t,n,r){return e=i(e,t,n,r)&&o(e,t,n,r),a?{value:e}:e}},"binary||":function(i,o,a){return function(e,t,n,r){return e=i(e,t,n,r)||o(e,t,n,r),a?{value:e}:e}},"ternary?:":function(i,o,a,s){return function(e,t,n,r){return e=(i(e,t,n,r)?o:a)(e,t,n,r),s?{value:e}:e}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(i,o,a){return function(e,t,n,r){return e=t&&i in t?t:e,a&&1!==a&&e&&null==e[i]&&(e[i]={}),t=e?e[i]:void 0,o?{context:e,name:i,value:t}:t}},computedMember:function(s,l,c,u){return function(e,t,n,r){var i,o,a=s(e,t,n,r);return null!=a&&(i=l(e,t,n,r),i+="",u&&1!==u&&a&&!a[i]&&(a[i]={}),o=a[i]),c?{context:a,name:i,value:o}:o}},nonComputedMember:function(i,o,a,s){return function(e,t,n,r){return e=i(e,t,n,r),s&&1!==s&&e&&null==e[o]&&(e[o]={}),t=null!=e?e[o]:void 0,a?{context:e,name:o,value:t}:t}},inputs:function(i,o){return function(e,t,n,r){return r?r[o]:i(e,t,n)}}},Ot.prototype={constructor:Ot,parse:function(e){e=this.getAst(e);var t=this.astCompiler.compile(e.ast),n=e.ast;return t.literal=0===n.body.length||1===n.body.length&&(n.body[0].expression.type===Di.Literal||n.body[0].expression.type===Di.ArrayExpression||n.body[0].expression.type===Di.ObjectExpression),t.constant=e.ast.constant,t.oneTime=e.oneTime,t},getAst:function(e){var t=!1;return":"===(e=e.trim()).charAt(0)&&":"===e.charAt(1)&&(t=!0,e=e.substring(2)),{ast:this.ast.ast(e),oneTime:t}}};var Ii,Pi=N("$sce"),Oi={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Bi=/_([a-z])/g,Fi=N("$templateRequest"),Li=N("$timeout"),Ui=ce.document.createElement("a"),Hi=en(ce.location.href);Ui.href="http://[::1]";var zi="[::1]"===Ui.hostname;rn.$inject=["$document"],an.$inject=["$provide"];var Vi=22,ji=".",qi="0";un.$inject=["$locale"];var Wi={yyyy:mn("FullYear",4,0,!(dn.$inject=["$locale"]),!0),yy:mn("FullYear",2,0,!0,!0),y:mn("FullYear",1,0,!1,!0),MMMM:pn("Month"),MMM:pn("Month",!0),MM:mn("Month",2,1),M:mn("Month",1,1),LLLL:pn("Month",!1,!0),dd:mn("Date",2),d:mn("Date",1),HH:mn("Hours",2),H:mn("Hours",1),hh:mn("Hours",2,-12),h:mn("Hours",1,-12),mm:mn("Minutes",2),m:mn("Minutes",1),ss:mn("Seconds",2),s:mn("Seconds",1),sss:mn("Milliseconds",3),EEEE:pn("Day"),EEE:pn("Day",!0),a:function(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]},Z:function(e,t,n){return(0<=(e=-1*n)?"+":"")+(hn(Math[0<e?"floor":"ceil"](e/60),2)+hn(Math.abs(e%60),2))},ww:vn(2),w:vn(1),G:yn,GG:yn,GGG:yn,GGGG:function(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}},Gi=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Yi=/^-?\d+$/;bn.$inject=["$locale"];var Ki=k(Zn),Xi=k(Qn);Cn.$inject=["$parse"];var Ji=k({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){var n;"a"===t[0].nodeName.toLowerCase()&&(n="[object SVGAnimatedString]"===rr.call(t.prop("href"))?"xlink:href":"href",t.on("click",function(e){t.attr(n)||e.preventDefault()}))}}}),Zi={};ue(Ur,function(e,r){function i(e,t,n){e.$watch(n[o],function(e){n.$set(r,!!e)})}var o,t;"multiple"!==e&&(o=Ke("ng-"+r),t="checked"===e?function(e,t,n){n.ngModel!==n[o]&&i(e,0,n)}:i,Zi[o]=function(){return{restrict:"A",priority:100,link:t}})}),ue(zr,function(e,r){Zi[r]=function(){return{priority:100,link:function(e,t,n){"ngPattern"===r&&"/"===n.ngPattern.charAt(0)&&(t=n.ngPattern.match(Xn))?n.$set("ngPattern",new RegExp(t[1],t[2])):e.$watch(n[r],function(e){n.$set(r,e)})}}}}),ue(["src","srcset","href"],function(a){var s=Ke("ng-"+a);Zi[s]=["$sce",function(o){return{priority:99,link:function(e,t,n){var r=a,i=a;"href"===a&&"[object SVGAnimatedString]"===rr.call(t.prop("href"))&&(i="xlinkHref",n.$attr[i]="xlink:href",r=null),n.$set(s,o.getTrustedMediaUrl(n[s])),n.$observe(s,function(e){e?(n.$set(i,e),lr&&r&&t.prop(r,n[i])):"href"===a&&n.$set(i,null)})}}}]});var Qi={$addControl:he,$getControls:k([]),$$renameControl:function(e,t){e.$name=t},$removeControl:he,$setValidity:he,$setDirty:he,$setPristine:he,$setSubmitted:he,$$setSubmitted:he};kn.$inject=["$element","$attrs","$scope","$animate","$interpolate"],kn.prototype={$rollbackViewValue:function(){ue(this.$$controls,function(e){e.$rollbackViewValue()})},$commitViewValue:function(){ue(this.$$controls,function(e){e.$commitViewValue()})},$addControl:function(e){L(e.$name,"input"),this.$$controls.push(e),e.$name&&(this[e.$name]=e),e.$$parentForm=this},$getControls:function(){return H(this.$$controls)},$$renameControl:function(e,t){var n=e.$name;this[n]===e&&delete this[n],(this[t]=e).$name=t},$removeControl:function(n){n.$name&&this[n.$name]===n&&delete this[n.$name],ue(this.$pending,function(e,t){this.$setValidity(t,null,n)},this),ue(this.$error,function(e,t){this.$setValidity(t,null,n)},this),ue(this.$$success,function(e,t){this.$setValidity(t,null,n)},this),Ce(this.$$controls,n),n.$$parentForm=Qi},$setDirty:function(){this.$$animate.removeClass(this.$$element,Po),this.$$animate.addClass(this.$$element,Oo),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Po,Oo+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,ue(this.$$controls,function(e){e.$setPristine()})},$setUntouched:function(){ue(this.$$controls,function(e){e.$setUntouched()})},$setSubmitted:function(){for(var e=this;e.$$parentForm&&e.$$parentForm!==Qi;)e=e.$$parentForm;e.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,ue(this.$$controls,function(e){e.$$setSubmitted&&e.$$setSubmitted()})}},An({clazz:kn,set:function(e,t,n){var r=e[t];r?-1===r.indexOf(n)&&r.push(n):e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(Ce(r,n),0===r.length&&delete e[t])}});var eo=(co=function(n){return["$timeout","$parse",function(l,t){function c(e){return""===e?t('this[""]').assign:t(e).assign||he}return{name:"form",restrict:n?"EAC":"E",require:["form","^^?form"],controller:kn,compile:function(e,t){e.addClass(Po).addClass(Mo);var s=t.name?"name":!(!n||!t.ngForm)&&"ngForm";return{pre:function(t,e,n,r){var i,o=r[0];"action"in n||(i=function(e){t.$apply(function(){o.$commitViewValue(),o.$setSubmitted()}),e.preventDefault()},e[0].addEventListener("submit",i),e.on("$destroy",function(){l(function(){e[0].removeEventListener("submit",i)},0,!1)})),(r[1]||o.$$parentForm).$addControl(o);var a=s?c(o.$name):he;s&&(a(t,o),n.$observe(s,function(e){o.$name!==e&&(a(t,void 0),o.$$parentForm.$$renameControl(o,e),(a=c(o.$name))(t,o))})),e.on("$destroy",function(){o.$$parentForm.$removeControl(o),a(t,void 0),de(o,Qi)})}}}}}]})(),to=co(!0),no=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,ro=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,io=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,oo=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,ao=/^(\d{4,})-(\d{2})-(\d{2})$/,so=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,lo=/^(\d{4,})-W(\d\d)$/,nr=/^(\d{4,})-(\d\d)$/,co=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,uo=Ne();function fo(){var i={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(e){this.setAttribute("value",e)}};return{restrict:"E",priority:200,compile:function(e,t){if("hidden"===Zn(t.type))return{pre:function(e,t,n,r){(e=t[0]).parentNode&&e.parentNode.insertBefore(e,e.nextSibling),Object.defineProperty&&Object.defineProperty(e,"value",i)}}}}}function ho(){function r(e,t,n){var r=E(n)?n:9===lr?"":null;e.prop("value",r),t.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,t){return go.test(t.ngValue)?function(e,t,n){r(t,n,e=e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){r(t,n,e)})}}}}ue(["date","datetime-local","month","time","week"],function(e){uo[e]=!0});var mo={text:function(e,t,n,r,i,o){_n(0,t,n,r,i,o),Nn(r)},date:Dn("date",ao,Rn(ao,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Dn("datetimelocal",so,Rn(so,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:Dn("time",co,Rn(co,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Dn("week",lo,function(e,t){if($(e))return e;if(ve(e)){lo.lastIndex=0;var n=lo.exec(e);if(n){var r=+n[1],i=+n[2],o=n=0,a=0,s=0,e=gn(r),i=7*(i-1);return t&&(n=t.getHours(),o=t.getMinutes(),a=t.getSeconds(),s=t.getMilliseconds()),new Date(r,0,e.getDate()+i,n,o,a,s)}}return NaN},"yyyy-Www"),month:Dn("month",nr,Rn(nr,["yyyy","MM"]),"yyyy-MM"),number:function(e,t,n,r,i,o,a,s){var l,c,u,d,f,h;Mn(0,t,0,r,"number"),In(r),_n(0,t,n,r,i,o),(E(n.min)||n.ngMin)&&(l=n.min||s(n.ngMin)(e),c=Pn(l),r.$validators.min=function(e,t){return r.$isEmpty(t)||pe(c)||c<=t},n.$observe("min",function(e){e!==l&&(c=Pn(e),l=e,r.$validate())})),(E(n.max)||n.ngMax)&&(u=n.max||s(n.ngMax)(e),d=Pn(u),r.$validators.max=function(e,t){return r.$isEmpty(t)||pe(d)||t<=d},n.$observe("max",function(e){e!==u&&(d=Pn(e),u=e,r.$validate())})),(E(n.step)||n.ngStep)&&(f=n.step||s(n.ngStep)(e),h=Pn(f),r.$validators.step=function(e,t){return r.$isEmpty(t)||pe(h)||Bn(t,c||0,h)},n.$observe("step",function(e){e!==f&&(h=Pn(e),f=e,r.$validate())}))},url:function(e,t,n,r,i,o){_n(0,t,n,r,i,o),Nn(r),r.$validators.url=function(e,t){t=e||t;return r.$isEmpty(t)||ro.test(t)}},email:function(e,t,n,r,i,o){_n(0,t,n,r,i,o),Nn(r),r.$validators.email=function(e,t){t=e||t;return r.$isEmpty(t)||io.test(t)}},radio:function(e,n,r,i){var o=!r.ngTrim||"false"!==fr(r.ngTrim);pe(r.name)&&n.attr("name",++sr),n.on("change",function(e){var t;n[0].checked&&(t=r.value,o&&(t=fr(t)),i.$setViewValue(t,e&&e.type))}),i.$render=function(){var e=r.value;o&&(e=fr(e)),n[0].checked=e===i.$viewValue},r.$observe("value",i.$render)},range:function(e,r,i,n,t,o){function a(e,t){r.attr(e,i[e]);var n=i[e];i.$observe(e,function(e){e!==n&&t(n=e)})}Mn(0,r,0,n,"range"),In(n),_n(0,r,i,n,t,o);var s=n.$$hasNativeValidators&&"range"===r[0].type,l=s?0:void 0,c=s?100:void 0,u=s?1:void 0,d=r[0].validity;e=E(i.min),t=E(i.max),o=E(i.step);var f=n.$render;n.$render=s&&E(d.rangeUnderflow)&&E(d.rangeOverflow)?function(){f(),n.$setViewValue(r.val())}:f,e&&(l=Pn(i.min),n.$validators.min=s?function(){return!0}:function(e,t){return n.$isEmpty(t)||pe(l)||l<=t},a("min",function(e){l=Pn(e),cr(n.$modelValue)||(s?((e=r.val())<l&&(e=l,r.val(e)),n.$setViewValue(e)):n.$validate())})),t&&(c=Pn(i.max),n.$validators.max=s?function(){return!0}:function(e,t){return n.$isEmpty(t)||pe(c)||t<=c},a("max",function(e){c=Pn(e),cr(n.$modelValue)||(s?(e=r.val(),c<e&&(r.val(c),e=c<l?l:c),n.$setViewValue(e)):n.$validate())})),o&&(u=Pn(i.step),n.$validators.step=s?function(){return!d.stepMismatch}:function(e,t){return n.$isEmpty(t)||pe(u)||Bn(t,l||0,u)},a("step",function(e){u=Pn(e),cr(n.$modelValue)||(s?n.$viewValue!==r.val()&&n.$setViewValue(r.val()):n.$validate())}))},checkbox:function(e,t,n,r,i,o,a,s){var l=Fn(s,e,"ngTrueValue",n.ngTrueValue,!0),c=Fn(s,e,"ngFalseValue",n.ngFalseValue,!1);t.on("change",function(e){r.$setViewValue(t[0].checked,e&&e.type)}),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return!1===e},r.$formatters.push(function(e){return Se(e,l)}),r.$parsers.push(function(e){return e?l:c})},hidden:he,button:he,submit:he,reset:he,file:he},po=["$browser","$sniffer","$filter","$parse",function(i,o,a,s){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,t,n,r){r[0]&&(mo[Zn(n.type)]||mo.text)(e,t,n,r[0],o,i,a,s)}}}}],go=/^(true|false|\d+)$/,vo=["$compile",function(r){return{restrict:"AC",compile:function(e){return r.$$addBindingClass(e),function(e,t,n){r.$$addBindingInfo(t,n.ngBind),t=t[0],e.$watch(n.ngBind,function(e){t.textContent=U(e)})}}}}],yo=["$interpolate","$compile",function(r,i){return{compile:function(e){return i.$$addBindingClass(e),function(e,t,n){e=r(t.attr(n.$attr.ngBindTemplate)),i.$$addBindingInfo(t,e.expressions),t=t[0],n.$observe("ngBindTemplate",function(e){t.textContent=pe(e)?"":e})}}}}],bo=["$sce","$parse","$compile",function(o,n,a){return{restrict:"A",compile:function(e,t){var r=n(t.ngBindHtml),i=n(t.ngBindHtml,function(e){return o.valueOf(e)});return a.$$addBindingClass(e),function(t,n,e){a.$$addBindingInfo(n,e.ngBindHtml),t.$watch(i,function(){var e=r(t);n.html(o.getTrustedHtml(e)||"")})}}}}],wo=k({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),xo=Ln("",!0),$o=Ln("Odd",0),Co=Ln("Even",1),So=Sn({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),ko=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Eo={},Ao={blur:!0,focus:!0};function To(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,r){var i=n.ngList||", ",o="false"!==n.ngTrim,a=o?fr(i):i;r.$parsers.push(function(e){if(!pe(e)){var t=[];return e&&ue(e.split(a),function(e){e&&t.push(o?fr(e):e)}),t}}),r.$formatters.push(function(e){if(ye(e))return e.join(i)}),r.$isEmpty=function(e){return!e||!e.length}}}}ue("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(r){var i=Ke("ng-"+r);Eo[i]=["$parse","$rootScope","$exceptionHandler",function(e,t,n){return Un(e,t,n,i,r,Ao[r])}]});var No=["$animate","$compile",function(l,c){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(e,n,r,t,i){var o,a,s;e.$watch(r.ngIf,function(e){e?a||i(function(e,t){a=t,e[e.length++]=c.$$createComment("end ngIf",r.ngIf),o={clone:e},l.enter(e,n.parent(),n)}):(s&&(s.remove(),s=null),a&&(a.$destroy(),a=null),o&&(s=F(o.clone),l.leave(s).done(function(e){!1!==e&&(s=null)}),o=null))})}}}],_o=["$templateRequest","$anchorScroll","$animate",function(p,g,v){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ar.noop,compile:function(e,t){var n=t.ngInclude||t.src,h=t.onload||"",m=t.autoscroll;return function(o,a,e,s,l){function c(){t&&(t.remove(),t=null),u&&(u.$destroy(),u=null),d&&(v.leave(d).done(function(e){!1!==e&&(t=null)}),t=d,d=null)}var u,t,d,f=0;o.$watch(n,function(n){function r(e){!1===e||!E(m)||m&&!o.$eval(m)||g()}var i=++f;n?(p(n,!0).then(function(e){var t;o.$$destroyed||i!==f||(t=o.$new(),s.template=e,e=l(t,function(e){c(),v.enter(e,null,a).done(r)}),d=e,(u=t).$emit("$includeContentLoaded",n),o.$eval(h))},function(){o.$$destroyed||i!==f||(c(),o.$emit("$includeContentError",n))}),o.$emit("$includeContentRequested",n)):(c(),s.template=null)})}}}}],Ro=["$compile",function(i){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(e,t,n,r){rr.call(t[0]).match(/SVG/)?(t.empty(),i(q(r.template,ce.document).childNodes)(e,function(e){t.append(e)},{futureParentElement:t})):(t.html(r.template),i(t.contents())(e))}}}],Do=Sn({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Mo="ng-valid",Io="ng-invalid",Po="ng-pristine",Oo="ng-dirty",Bo=N("ngModel");Hn.$inject="$scope $exceptionHandler $attrs $element $parse $animate $timeout $q $interpolate".split(" "),Hn.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var n=this.$$parse(this.$$attr.ngModel+"()"),r=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var t=this.$$parsedNgModel(e);return t=we(t)?n(e):t},this.$$ngModelSet=function(e,t){we(this.$$parsedNgModel(e))?r(e,{$$$p:t}):this.$$parsedNgModelAssign(e,t)}}else if(!this.$$parsedNgModel.assign)throw Bo("nonassign",this.$$attr.ngModel,Ee(this.$$element))},$render:he,$isEmpty:function(e){return pe(e)||""===e||null===e||e!=e},$$updateEmptyClasses:function(e){this.$isEmpty(e)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Oo),this.$$animate.addClass(this.$$element,Po)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Po),this.$$animate.addClass(this.$$element,Oo),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){var e,t,n,r,i,o;cr(this.$modelValue)||(e=this.$$lastCommittedViewValue,t=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),(o=this).$$runValidators(t,e,function(e){i||n===e||(o.$modelValue=e?t:void 0,o.$modelValue!==r&&o.$$writeModelToScope())}))},$$runValidators:function(n,r,t){function i(e,t){c===u.$$currentValidationRunId&&u.$setValidity(e,t)}function e(e){c===u.$$currentValidationRunId&&t(e)}this.$$currentValidationRunId++;var o,a,s,l,c=this.$$currentValidationRunId,u=this;l=u.$$parserName,(pe(u.$$parserValid)?(i(l,null),1):(u.$$parserValid||(ue(u.$validators,function(e,t){i(t,null)}),ue(u.$asyncValidators,function(e,t){i(t,null)})),i(l,u.$$parserValid),u.$$parserValid))?(s=!0,ue(u.$validators,function(e,t){e=Boolean(e(n,r));s=s&&e,i(t,e)}),s||(ue(u.$asyncValidators,function(e,t){i(t,null)}),0)?(o=[],a=!0,ue(u.$asyncValidators,function(e,t){e=e(n,r);if(!e||!we(e.then))throw Bo("nopromise",e);i(t,void 0),o.push(e.then(function(){i(t,!0)},function(){i(t,a=!1)}))}),o.length?u.$$q.all(o).then(function(){e(a)},he):e(!0)):e(!1)):e(!1)},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==e||""===e&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(e),this.$$lastCommittedViewValue=e,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,n=this;if(this.$$parserValid=!pe(t)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var e=0;e<this.$parsers.length;e++)if(pe(t=this.$parsers[e](t))){this.$$parserValid=!1;break}cr(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var r=this.$modelValue,i=this.$options.getOption("allowInvalid");this.$$rawModelValue=t,i&&(this.$modelValue=t,n.$modelValue!==r&&n.$$writeModelToScope()),this.$$runValidators(t,this.$$lastCommittedViewValue,function(e){i||(n.$modelValue=e?t:void 0,n.$modelValue!==r&&n.$$writeModelToScope())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),ue(this.$viewChangeListeners,function(e){try{e()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(e,t){this.$viewValue=e,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(t)},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");y(t[e])?t=t[e]:y(t.default)&&-1===this.$options.getOption("updateOn").indexOf(e)?t=t.default:y(t["*"])&&(t=t["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;0<t?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},t):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(e){this.$options=this.$options.createChild(e),this.$$setUpdateOnEvents()},$processModelValue:function(){var e=this.$$format();this.$viewValue!==e&&(this.$$updateEmptyClasses(e),this.$viewValue=this.$$lastCommittedViewValue=e,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,he))},$$format:function(){for(var e=this.$formatters,t=e.length,n=this.$modelValue;t--;)n=e[t](n);return n},$$setModelValue:function(e){this.$modelValue=this.$$rawModelValue=e,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),(this.$$updateEvents=this.$options.getOption("updateOn"))&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(e){this.$$debounceViewValueCommit(e&&e.type)}},An({clazz:Hn,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]}});var Fo,Lo=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Hn,priority:1,compile:function(e){return e.addClass(Po).addClass("ng-untouched").addClass(Mo),{pre:function(e,t,n,r){var i=r[0];t=r[1]||i.$$parentForm,(r=r[2])&&(i.$options=r.$options),i.$$initGetterSetters(),t.$addControl(i),n.$observe("name",function(e){i.$name!==e&&i.$$parentForm.$$renameControl(i,e)}),e.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(e,t,n,r){function i(){o.$setTouched()}var o=r[0];o.$$setUpdateOnEvents(),t.on("blur",function(){o.$touched||(a.$$phase?e.$evalAsync(i):e.$apply(i))})}}}}}],Uo=/(\s+|^)default(\s+|$)/;function Ho(){function e(e,t){this.$$attrs=e,this.$$scope=t}return e.$inject=["$attrs","$scope"],e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:Fo,t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:e}}function zo(){return{restrict:"E",require:["select","?ngModel"],controller:ua,priority:1,link:{pre:function(e,r,t,n){var i,o,a=n[0],s=n[1];s?(a.ngModelCtrl=s,r.on("change",function(){a.removeUnknownOption(),e.$apply(function(){s.$setViewValue(a.readValue())})}),t.multiple&&(a.multiple=!0,a.readValue=function(){var t=[];return ue(r.find("option"),function(e){e.selected&&!e.disabled&&(e=e.value,t.push(e in a.selectValueMap?a.selectValueMap[e]:e))}),t},a.writeValue=function(n){ue(r.find("option"),function(e){var t=!!n&&(-1!==Array.prototype.indexOf.call(n,e.value)||-1!==Array.prototype.indexOf.call(n,a.selectValueMap[e.value]));t!==e.selected&&jn(Gn(e),t)})},o=NaN,e.$watch(function(){o!==s.$viewValue||Se(i,s.$viewValue)||(i=H(s.$viewValue),s.$render()),o=s.$viewValue}),s.$isEmpty=function(e){return!e||0===e.length})):a.registerOption=he},post:function(e,t,n,r){var i,o=r[1];o&&(i=r[0],o.$render=function(){i.writeValue(o.$viewValue)})}}}}zn.prototype={getOption:function(e){return this.$$options[e]},createChild:function(n){var r=!1;return ue(n=de({},n),function(e,t){"$inherit"===e?"*"===t?r=!0:(n[t]=this.$$options[t],"updateOn"===t&&(n.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===t&&(n.updateOnDefault=!1,n[t]=fr(e.replace(Uo,function(){return n.updateOnDefault=!0," "})))},this),r&&(delete n["*"],Vn(n,this.$$options)),Vn(n,Fo.$$options),new zn(n)}},Fo=new zn({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Vo,jo,qo,Wo=Sn({terminal:!0,priority:1e3}),Go=N("ngOptions"),Yo=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Ko=["$compile","$document","$parse",function(m,p,a){function g(e,t,c){function u(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function d(e){var t;if(!r&&_(e))t=e;else for(var n in t=[],e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n);return t}var s=e.match(Yo);if(!s)throw Go("iexp",e,Ee(t));var n=s[5]||s[7],r=s[6];e=/ as /.test(s[0])&&s[1];var f=s[9];t=a(s[2]?s[1]:n);function h(e,t){return p(e,w(e,t))}var m=e&&a(e)||t,i=f&&a(f),p=f?function(e,t){return i(c,t)}:function(e){return Oe(e)},g=a(s[2]||s[1]),v=a(s[3]||""),y=a(s[4]||""),b=a(s[8]),o={},w=r?function(e,t){return o[r]=t,o[n]=e,o}:function(e){return o[n]=e,o};return{trackBy:f,getTrackByValue:h,getWatchables:a(b,function(e){for(var t=[],n=d(e=e||[]),r=n.length,i=0;i<r;i++){var o=e[a=e===n?i:n[i]],a=w(o,a),o=p(o,a);t.push(o),(s[2]||s[1])&&(o=g(c,a),t.push(o)),s[4]&&(a=y(c,a),t.push(a))}return t}),getOptions:function(){for(var e=[],t={},n=b(c)||[],r=d(n),i=r.length,o=0;o<i;o++){var a=n===r?o:r[o],s=w(n[a],a),l=m(c,s),l=new u(a=p(l,s),l,g(c,s),v(c,s),s=y(c,s));e.push(l),t[a]=l}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[h(e)]},getViewValueFromOption:function(e){return f?A(e.viewValue):e.viewValue}}}}}var v=ce.document.createElement("option"),y=ce.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,r){r[0].registerOption=he},post:function(e,i,t,n){function r(e){var t=(e=d.getOptionFromViewValue(e))&&e.element;return t&&!t.selected&&(t.selected=!0),e}function o(e,t){(e.element=t).disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),t.value=e.selectValue}var a=n[0],s=n[1],l=t.multiple;n=0;for(var c=i.children(),u=c.length;n<u;n++)if(""===c[n].value){a.hasEmptyOption=!0,a.emptyOption=c.eq(n);break}i.empty(),n=!!a.emptyOption,Gn(v.cloneNode(!1)).val("?");var d,f=g(t.ngOptions,i,e),h=p[0].createDocumentFragment();a.generateUnknownOptionValue=function(e){return"?"},l?(a.writeValue=function(e){var t;d&&(t=e&&e.map(r)||[],d.items.forEach(function(e){e.element.selected&&-1===Array.prototype.indexOf.call(t,e)&&(e.element.selected=!1)}))},a.readValue=function(){var e=i.val()||[],t=[];return ue(e,function(e){(e=d.selectValueMap[e])&&!e.disabled&&t.push(d.getViewValueFromOption(e))}),t},f.trackBy&&e.$watchCollection(function(){if(ye(s.$viewValue))return s.$viewValue.map(function(e){return f.getTrackByValue(e)})},function(){s.$render()})):(a.writeValue=function(e){var t,n;d&&(t=i[0].options[i[0].selectedIndex],n=d.getOptionFromViewValue(e),t&&t.removeAttribute("selected"),n?(i[0].value!==n.selectValue&&(a.removeUnknownOption(),i[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):a.selectUnknownOrEmptyOption(e))},a.readValue=function(){var e=d.selectValueMap[i.val()];return e&&!e.disabled?(a.unselectEmptyOption(),a.removeUnknownOption(),d.getViewValueFromOption(e)):null},f.trackBy&&e.$watch(function(){return f.getTrackByValue(s.$viewValue)},function(){s.$render()})),n&&(m(a.emptyOption)(e),i.prepend(a.emptyOption),8===a.emptyOption[0].nodeType?(a.hasEmptyOption=!1,a.registerOption=function(e,t){""===t.val()&&(a.hasEmptyOption=!0,a.emptyOption=t,a.emptyOption.removeClass("ng-scope"),s.$render(),t.on("$destroy",function(){var e=a.$isEmptyOptionSelected();a.hasEmptyOption=!1,a.emptyOption=void 0,e&&s.$render()}))}):a.emptyOption.removeClass("ng-scope")),e.$watchCollection(f.getWatchables,function(){var e=d&&a.readValue();if(d)for(var t=d.items.length-1;0<=t;t--){var n=d.items[t];E(n.group)?se(n.element.parentNode):se(n.element)}d=f.getOptions();var r={};d.items.forEach(function(e){var t,n;E(e.group)?((t=r[e.group])||(t=y.cloneNode(!1),h.appendChild(t),t.label=null===e.group?"null":e.group,r[e.group]=t),n=v.cloneNode(!1),t.appendChild(n),o(e,n)):(t=v.cloneNode(!1),h.appendChild(t),o(e,t))}),i[0].appendChild(h),s.$render(),s.$isEmpty(e)||(t=a.readValue(),(f.trackBy||l?Se(e,t):e===t)||(s.$setViewValue(t),s.$render()))})}}}}],Xo=["$locale","$interpolate","$log",function(m,p,g){var v=/{}/g,y=/^when(Minus)?(.+)$/;return{link:function(r,i,o){function a(e){i.text(e||"")}var s,e=o.count,l=o.$attr.when&&i.attr(o.$attr.when),c=o.offset||0,u=r.$eval(l)||{},d={},t=p.startSymbol(),n=p.endSymbol(),f=t+e+"-"+c+n,h=ar.noop;ue(o,function(e,t){var n=y.exec(t);n&&(n=(n[1]?"-":"")+Zn(n[2]),u[n]=i.attr(o.$attr[t]))}),ue(u,function(e,t){d[t]=p(e.replace(v,f))}),r.$watch(e,function(e){var t=parseFloat(e),n=cr(t);(t=!(n||t in u)?m.pluralCat(t-c):t)===s||n&&cr(s)||(h(),pe(n=d[t])?(null!=e&&g.debug("ngPluralize: no rule defined for '"+t+"' in "+l),h=he,a()):h=r.$watch(n,a),s=t)})}}}],Jo=N("ngRef"),Zo=["$parse",function(t){return{priority:-1,restrict:"A",compile:function(e,i){var o=Ke($e(e)),a=t(i.ngRef),s=a.assign||function(){throw Jo("nonassign",i.ngRef)};return function(e,t,n){var r;if(n.hasOwnProperty("ngRefRead")){if("$element"===n.ngRefRead)r=t;else if(!(r=t.data("$"+n.ngRefRead+"Controller")))throw Jo("noctrl",n.ngRefRead,i.ngRef)}else r=t.data("$"+o+"Controller");s(e,r=r||t),t.on("$destroy",function(){a(e)===r&&s(e,null)})}}}}],Qo=["$parse","$animate","$compile",function(a,S,s){function k(e,t,n,r,i,o,a){e[n]=r,i&&(e[i]=o),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))}function E(e,t,n){return Oe(n)}function A(e,t){return t}var T=N("ngRepeat");return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(e,t){var v=t.ngRepeat,y=s.$$createComment("end ngRepeat",v),n=v.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!n)throw T("iexp",v);var r=n[1],i=n[2],b=n[3],t=n[4];if(!(n=r.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw T("iidexp",r);var w,o,x,$=n[3]||n[1],C=n[2];if(b&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(b)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(b)))throw T("badident",b);return t&&(w={$id:Oe},o=a(t),x=function(e,t,n,r){return C&&(w[C]=t),w[$]=n,w.$index=r,o(e,w)}),function(h,m,e,t,p){var g=Ne();h.$watchCollection(i,function(e){var n,t,r,i,o,a,s,l,c,u,d=m[0],f=Ne();if(b&&(h[b]=e),_(e))l=e,t=x||E;else for(u in t=x||A,l=[],e)Jn.call(e,u)&&"$"!==u.charAt(0)&&l.push(u);for(i=l.length,u=Array(i),n=0;n<i;n++)if(o=e===l?n:l[n],a=e[o],s=t(h,o,a,n),g[s])c=g[s],delete g[s],f[s]=c,u[n]=c;else{if(f[s])throw ue(u,function(e){e&&e.scope&&(g[e.id]=e)}),T("dupes",v,s,a);u[n]={id:s,scope:void 0,clone:void 0},f[s]=!0}for(r in w&&(w[$]=void 0),g){if(s=F((c=g[r]).clone),S.leave(s),s[0].parentNode)for(n=0,t=s.length;n<t;n++)s[n].$$NG_REMOVED=!0;c.scope.$destroy()}for(n=0;n<i;n++)if(o=e===l?n:l[n],a=e[o],(c=u[n]).scope){for(r=d;r=r.nextSibling,r&&r.$$NG_REMOVED;);c.clone[0]!==r&&S.move(F(c.clone),null,d),d=c.clone[c.clone.length-1],k(c.scope,n,$,a,C,o,i)}else p(function(e,t){c.scope=t;t=y.cloneNode(!1);e[e.length++]=t,S.enter(e,null,d),d=t,c.clone=e,f[c.id]=c,k(c.scope,n,$,a,C,o,i)});g=f})}}}}],ea=["$animate",function(r){return{restrict:"A",multiElement:!0,link:function(e,t,n){e.$watch(n.ngShow,function(e){r[e?"removeClass":"addClass"](t,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ta=["$animate",function(r){return{restrict:"A",multiElement:!0,link:function(e,t,n){e.$watch(n.ngHide,function(e){r[e?"addClass":"removeClass"](t,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],na=Sn(function(e,n,t){e.$watchCollection(t.ngStyle,function(e,t){t&&e!==t&&ue(t,function(e,t){n.css(t,"")}),e&&n.css(e)})}),ra=["$animate","$compile",function(c,u){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(e,t,n,i){var o,a=[],s=[],l=[];e.$watch(n.ngSwitch||n.on,function(e){for(var t,n;s.length;)c.cancel(s.pop());for(t=0,n=l.length;t<n;++t){var r=F(a[t].clone);l[t].$destroy(),(s[t]=c.leave(r)).done(function(t,n){return function(e){!1!==e&&t.splice(n,1)}}(s,t))}a.length=0,l.length=0,(o=i.cases["!"+e]||i.cases["?"])&&ue(o,function(n){n.transclude(function(e,t){l.push(t);t=n.element;e[e.length++]=u.$$createComment("end ngSwitchWhen"),a.push({clone:e}),c.enter(e,t.parent(),t)})})})}}}],ia=Sn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){ue(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(e,t,n){return n[t-1]!==e}),function(e){r.cases["!"+e]=r.cases["!"+e]||[],r.cases["!"+e].push({transclude:i,element:t})})}}),oa=Sn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),aa=N("ngTransclude"),sa=["$compile",function(t){return{restrict:"EAC",compile:function(e){var i=t(e.contents());return e.empty(),function(e,o,t,n,r){function a(){i(e,function(e){o.append(e)})}if(!r)throw aa("orphan",Ee(o));t.ngTransclude===t.$attr.ngTransclude&&(t.ngTransclude=""),r(function(e,t){var n;if(n=e.length)e:{n=0;for(var r=e.length;n<r;n++){var i=e[n];if(i.nodeType!==xr||i.nodeValue.trim()){n=!0;break e}}n=void 0}n?o.append(e):(a(),t.$destroy())},null,t=t.ngTransclude||t.ngTranscludeSlot),t&&!r.isSlotFilled(t)&&a()}}}}],la=["$templateCache",function(n){return{restrict:"E",terminal:!0,compile:function(e,t){"text/ng-template"===t.type&&n.put(t.id,e[0].text)}}}],ca={$setViewValue:he,$render:he},ua=["$element","$scope",function(n,t){function s(){e||(e=!0,t.$$postDigest(function(){e=!1,c.ngModelCtrl.$render()}))}function l(e){i||(i=!0,t.$$postDigest(function(){t.$$destroyed||(i=!1,c.ngModelCtrl.$setViewValue(c.readValue()),e&&c.ngModelCtrl.$render())}))}var c=this,r=new qr;c.selectValueMap={},c.ngModelCtrl=ca,c.multiple=!1,c.unknownOption=Gn(ce.document.createElement("option")),c.hasEmptyOption=!1,c.emptyOption=void 0,c.renderUnknownOption=function(e){e=c.generateUnknownOptionValue(e),c.unknownOption.val(e),n.prepend(c.unknownOption),jn(c.unknownOption,!0),n.val(e)},c.updateUnknownOption=function(e){e=c.generateUnknownOptionValue(e),c.unknownOption.val(e),jn(c.unknownOption,!0),n.val(e)},c.generateUnknownOptionValue=function(e){return"? "+Oe(e)+" ?"},c.removeUnknownOption=function(){c.unknownOption.parent()&&c.unknownOption.remove()},c.selectEmptyOption=function(){c.emptyOption&&(n.val(""),jn(c.emptyOption,!0))},c.unselectEmptyOption=function(){c.hasEmptyOption&&jn(c.emptyOption,!1)},t.$on("$destroy",function(){c.renderUnknownOption=he}),c.readValue=function(){var e=(e=n.val())in c.selectValueMap?c.selectValueMap[e]:e;return c.hasOption(e)?e:null},c.writeValue=function(e){var t=n[0].options[n[0].selectedIndex];t&&jn(Gn(t),!1),c.hasOption(e)?(c.removeUnknownOption(),t=Oe(e),n.val(t in c.selectValueMap?t:e),jn(Gn(n[0].options[n[0].selectedIndex]),!0)):c.selectUnknownOrEmptyOption(e)},c.addOption=function(e,t){8!==t[0].nodeType&&(L(e,'"option value"'),""===e&&(c.hasEmptyOption=!0,c.emptyOption=t),t=r.get(e)||0,r.set(e,t+1),s())},c.removeOption=function(e){var t=r.get(e);t&&(1===t?(r.delete(e),""===e&&(c.hasEmptyOption=!1,c.emptyOption=void 0)):r.set(e,t-1))},c.hasOption=function(e){return!!r.get(e)},c.$hasEmptyOption=function(){return c.hasEmptyOption},c.$isUnknownOptionSelected=function(){return n[0].options[0]===c.unknownOption[0]},c.$isEmptyOptionSelected=function(){return c.hasEmptyOption&&n[0].options[n[0].selectedIndex]===c.emptyOption[0]};var e=!(c.selectUnknownOrEmptyOption=function(e){null==e&&c.emptyOption?(c.removeUnknownOption(),c.selectEmptyOption()):c.unknownOption.parent().length?c.updateUnknownOption(e):c.renderUnknownOption(e)}),i=!1;c.registerOption=function(e,r,i,t,n){var o,a;i.$attr.ngValue?i.$observe("value",function(e){var t,n=r.prop("selected");E(a)&&(c.removeOption(o),delete c.selectValueMap[a],t=!0),a=Oe(e),o=e,c.selectValueMap[a]=e,c.addOption(e,r),r.attr("value",a),t&&n&&l()}):t?i.$observe("value",function(e){c.readValue();var t,n=r.prop("selected");E(o)&&(c.removeOption(o),t=!0),o=e,c.addOption(e,r),t&&n&&l()}):n?e.$watch(n,function(e,t){i.$set("value",e);var n=r.prop("selected");t!==e&&c.removeOption(t),c.addOption(e,r),t&&n&&l()}):c.addOption(i.value,r),i.$observe("disabled",function(e){("true"===e||e&&r.prop("selected"))&&(c.multiple?l(!0):(c.ngModelCtrl.$setViewValue(null),c.ngModelCtrl.$render()))}),r.on("$destroy",function(){var e=c.readValue(),t=i.value;c.removeOption(t),s(),(c.multiple&&e&&-1!==e.indexOf(t)||e===t)&&l(!0)})}}],da=["$interpolate",function(n){return{restrict:"E",priority:100,compile:function(e,t){var i,o;return E(t.ngValue)||(E(t.value)?i=n(t.value,!0):(o=n(e.text(),!0))||t.$set("value",e.text())),function(e,t,n){var r=t.parent();(r=r.data("$selectController")||r.parent().data("$selectController"))&&r.registerOption(e,t,n,i,o)}}}}],fa=["$parse",function(o){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){var i;r&&(i=n.hasOwnProperty("required")||o(n.ngRequired)(e),n.ngRequired||(n.required=!0),r.$validators.required=function(e,t){return!i||!r.$isEmpty(t)},n.$observe("required",function(e){i!==e&&(i=e,r.$validate())}))}}}],ha=["$parse",function(n){return{restrict:"A",require:"?ngModel",compile:function(e,t){var a,s;return t.ngPattern&&(a=t.ngPattern,s="/"===t.ngPattern.charAt(0)&&Xn.test(t.ngPattern)?function(){return t.ngPattern}:n(t.ngPattern)),function(e,n,t,r){var i,o;r&&(i=t.pattern,t.ngPattern?i=s(e):a=t.pattern,o=qn(i,a,n),t.$observe("pattern",function(e){var t=o;o=qn(e,a,n),(t&&t.toString())!==(o&&o.toString())&&r.$validate()}),r.$validators.pattern=function(e,t){return r.$isEmpty(t)||pe(o)||o.test(t)})}}}}],ma=["$parse",function(a){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){var i,o;r&&(i=n.maxlength||a(n.ngMaxlength)(e),o=Wn(i),n.$observe("maxlength",function(e){i!==e&&(o=Wn(e),i=e,r.$validate())}),r.$validators.maxlength=function(e,t){return o<0||r.$isEmpty(t)||t.length<=o})}}}],pa=["$parse",function(a){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){var i,o;r&&(i=n.minlength||a(n.ngMinlength)(e),o=Wn(i)||-1,n.$observe("minlength",function(e){i!==e&&(o=Wn(e)||-1,i=e,r.$validate())}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=o})}}}];function ga(e,t,n){return e[t]||(e[t]=n())}ce.angular.bootstrap?ce.console&&console.log("WARNING: Tried to load AngularJS more than once."):(wr||((nr=pe(nr=pr())?ce.jQuery:nr?ce[nr]:void 0)&&nr.fn.on?de((Gn=nr).fn,{scope:Lr.scope,isolateScope:Lr.isolateScope,controller:Lr.controller,injector:Lr.injector,inheritedData:Lr.inheritedData}):Gn=W,qo=Gn.cleanData,Gn.cleanData=function(e){for(var t,n,r=0;null!=(n=e[r]);r++)(t=(Gn._data(n)||{}).events)&&t.$destroy&&Gn(n).triggerHandler("$destroy");qo(e)},ar.element=Gn,wr=!0),de(wr=ar,{errorHandlingConfig:e,bootstrap:r,copy:A,extend:de,merge:t,equals:Se,element:Gn,forEach:ue,injector:Le,noop:he,bind:ke,toJson:i,fromJson:a,identity:me,isUndefined:pe,isDefined:E,isString:ve,isFunction:we,isObject:ge,isNumber:y,isElement:m,isArray:ye,version:$r,isDate:$,callbacks:{$$counter:0},getTestability:P,reloadWithDebugInfo:I,UNSAFE_restoreLegacyJqLiteXHTMLReplacement:O,$$minErr:N,$$csp:mr,$$encodeUriSegment:d,$$encodeUriQuery:p,$$lowercase:Zn,$$stringify:U,$$uppercase:Qn}),wr=ce,Vo=N("$injector"),jo=N("ng"),(wr=ga(wr,"angular",Object)).$$minErr=wr.$$minErr||N,(Yn=ga(wr,"module",function(){var e={};return function(s,l,c){var u={};if("hasOwnProperty"===s)throw jo("badname","module");return l&&e.hasOwnProperty(s)&&(e[s]=null),ga(e,s,function(){function e(e,t,n,r){return r=r||o,function(){return r[n||"push"]([e,t,arguments]),a}}function t(n,r,i){return i=i||o,function(e,t){return t&&we(t)&&(t.$$moduleName=s),i.push([n,r,arguments]),a}}if(!l)throw Vo("nomod",s);var o=[],n=[],r=[],i=e("$injector","invoke","push",n),a={_invokeQueue:o,_configBlocks:n,_runBlocks:r,info:function(e){if(E(e)){if(!ge(e))throw jo("aobj","value");return u=e,this}return u},requires:l,name:s,provider:t("$provide","provider"),factory:t("$provide","factory"),service:t("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:t("$provide","decorator",n),animation:t("$animateProvider","register"),filter:t("$filterProvider","register"),controller:t("$controllerProvider","register"),directive:t("$compileProvider","directive"),component:t("$compileProvider","component"),config:i,run:function(e){return r.push(e),this}};return c&&i(c),a})}}))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:jt}),e.provider("$compile",Ge).directive({a:Ji,input:po,textarea:po,form:eo,script:la,select:zo,option:da,ngBind:vo,ngBindHtml:bo,ngBindTemplate:yo,ngClass:xo,ngClassEven:Co,ngClassOdd:$o,ngCloak:So,ngController:ko,ngForm:to,ngHide:ta,ngIf:No,ngInclude:_o,ngInit:Do,ngNonBindable:Wo,ngPluralize:Xo,ngRef:Zo,ngRepeat:Qo,ngShow:ea,ngStyle:na,ngSwitch:ra,ngSwitchWhen:ia,ngSwitchDefault:oa,ngOptions:Ko,ngTransclude:sa,ngModel:Lo,ngList:To,ngChange:wo,pattern:ha,ngPattern:ha,required:fa,ngRequired:fa,minlength:pa,ngMinlength:pa,maxlength:ma,ngMaxlength:ma,ngValue:ho,ngModelOptions:Ho}).directive({ngInclude:Ro,input:fo}).directive(Zi).directive(Eo),e.provider({$anchorScroll:Ue,$animate:oi,$animateCss:ri,$$animateJs:Qr,$$animateQueue:ei,$$AnimateRunner:ni,$$animateAsyncRun:ti,$browser:je,$cacheFactory:qe,$controller:Ze,$document:Qe,$$isDocumentHidden:et,$exceptionHandler:tt,$filter:an,$$forceReflow:li,$interpolate:ft,$interval:ht,$$intervalFactory:mt,$http:ct,$httpParamSerializer:rt,$httpParamSerializerJQLike:it,$httpBackend:dt,$xhrFactory:ut,$jsonpCallbacks:wi,$location:kt,$log:Et,$parse:Ft,$rootScope:Vt,$q:Lt,$$q:Ut,$sce:Gt,$sceDelegate:Wt,$sniffer:Yt,$$taskTrackerFactory:Kt,$templateCache:We,$templateRequest:Jt,$$testability:Zt,$timeout:Qt,$window:nn,$$rAF:zt,$$jqLite:Pe,$$Map:Wr,$$cookieReader:on})}]).info({angularVersion:"1.8.2"}),ar.module("ngLocale",[],["$provide",function(e){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var n=0|e,r=t;return void 0===r&&(r=Math.min((t=e,-1==(e=(t+="").indexOf("."))?0:t.length-e-1),3)),Math.pow(10,r),1==n&&0==r?"one":"other"}})}]),Gn(function(){n(ce.document,r)}))}(window),window.angular.$$csp().noInlineStyle||window.angular.element(document.head).prepend(window.angular.element("<style>").text('@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}')),function(b,w){"use strict";var x,$,C,S,k,E,A,T,N,_,R=w.$$minErr("$sanitize");w.module("ngSanitize",[]).provider("$sanitize",function(){function e(e,t){return n(e.split(","),t)}function n(e,t){for(var n={},r=0;r<e.length;r++)n[t?E(e[r]):e[r]]=!0;return n}function t(e,t){t&&t.length&&$(e,n(t))}function s(e){return e.replace(/&/g,"&amp;").replace(o,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+((e=e.charCodeAt(1))-56320)+65536)+";"}).replace(a,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(e,t){e=t[e];if(e&&T.call(t,e))throw R("elclob",t.outerHTML||t.outerText);return e}var r=!1,i=!1;this.$get=["$$sanitizeUri",function(n){return r=!0,i&&$(p,h),function(e){var t=[];return N(e,_(t,function(e,t){return!/^unsafe:/.test(n(e,t))})),t.join("")}}],this.enableSvg=function(e){return k(e)?(i=e,this):i},this.addValidElements=function(e){return r||(S(e)&&(e={htmlElements:e}),t(h,e.svgElements),t(c,e.htmlVoidElements),t(p,e.htmlVoidElements),t(p,e.htmlElements)),this},this.addValidAttrs=function(e){return r||$(v,n(e,!0)),this},x=w.bind,$=w.extend,C=w.forEach,S=w.isArray,k=w.isDefined,E=w.$$lowercase,A=w.noop,N=function(e,t){null==e?e="":"string"!=typeof e&&(e=""+e);var n=y(e);if(!n)return"";var r,i=5;do{if(0===i)throw R("uinput")}while(i--,(e=n.innerHTML)!==(n=y(e)).innerHTML);for(i=n.firstChild;i;){switch(i.nodeType){case 1:t.start(i.nodeName.toLowerCase(),function(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];t[i.name]=i.value}return t}(i.attributes));break;case 3:t.chars(i.textContent)}if(!(r=i.firstChild)&&(1===i.nodeType&&t.end(i.nodeName.toLowerCase()),!(r=l("nextSibling",i))))for(;null==r&&(i=l("parentNode",i))!==n;)r=l("nextSibling",i),1===i.nodeType&&t.end(i.nodeName.toLowerCase());i=r}for(;i=n.firstChild;)n.removeChild(i)},_=function(e,o){var t=!1,a=x(e,e.push);return{start:function(i,e){i=E(i),(t=!t&&m[i]?i:t)||!0!==p[i]||(a("<"),a(i),C(e,function(e,t){var n=E(t),r="img"===i&&"src"===n||"background"===n;!0!==v[n]||!0===g[n]&&!o(e,r)||(a(" "),a(t),a('="'),a(s(e)),a('"'))}),a(">"))},end:function(e){e=E(e),t||!0!==p[e]||!0===c[e]||(a("</"),a(e),a(">")),e==t&&(t=!1)},chars:function(e){t||a(s(e))}}},T=b.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};var o=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/([^#-~ |!])/g,c=e("area,br,col,hr,img,wbr"),u=e("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),d=e("rp,rt"),f=$({},d,u),u=$({},u,e("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),d=$({},d,e("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),h=e("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),m=e("script,style"),p=$({},c,u,d,f),g=e("background,cite,href,longdesc,src,xlink:href,xml:base"),f=e("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),d=e("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),v=$({},g,d,f),y=function(n,t){function e(e){e="<remove></remove>"+e;try{var t=(new n.DOMParser).parseFromString(e,"text/html").body;return t.firstChild.remove(),t}catch(e){}}var r;try{r=!!e("")}catch(e){r=!1}if(r)return e;if(!t||!t.implementation)throw R("noinert");var i=((r=t.implementation.createHTMLDocument("inert")).documentElement||r.getDocumentElement()).querySelector("body");return function(e){return i.innerHTML=e,t.documentMode&&function e(t){for(;t;){if(t.nodeType===b.Node.ELEMENT_NODE)for(var n=t.attributes,r=0,i=n.length;r<i;r++){var o=n[r],a=o.name.toLowerCase();"xmlns:ns1"!==a&&0!==a.lastIndexOf("ns1:",0)||(t.removeAttributeNode(o),r--,i--)}(n=t.firstChild)&&e(n),t=l("nextSibling",t)}}(i),i}}(b,b.document)}).info({angularVersion:"1.8.2"}),w.module("ngSanitize").filter("linky",["$sanitize",function(c){var u=/((s?ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,d=/^mailto:/i,f=w.$$minErr("linky"),h=w.isDefined,m=w.isFunction,p=w.isObject,g=w.isString;return function(e,i,t){function o(e){var t;e&&l.push((t=e,_(e=[],A).chars(t),e.join("")))}if(null==e||""===e)return e;if(!g(e))throw f("notstring",e);for(var n,r,a=m(t)?t:p(t)?function(){return t}:function(){return{}},s=e,l=[];e=s.match(u);)n=e[0],e[2]||e[4]||(n=(e[3]?"http://":"mailto:")+n),r=e.index,o(s.substr(0,r)),function(e,t){var n,r=a(e);for(n in l.push("<a "),r)l.push(n+'="'+r[n]+'" ');!h(i)||"target"in r||l.push('target="',i,'" '),l.push('href="',e.replace(/"/g,"&quot;"),'">'),o(t),l.push("</a>")}(n,e[0].replace(d,"")),s=s.substring(r+e[0].length);return o(s),c(l.join(""))}}])}(window,window.angular),function(s,ge){"use strict";function r(e,t){for(var n,r=[],i=0;i<e.length;++i){if(!(n=l[e[i]]||function(e){for(var t=s,n=e.split(/[.\/]/),r=0;r<n.length;++r){if(!t[n[r]])return;t=t[n[r]]}return t}(e[i])))throw"module definition dependecy not found: "+e[i];r.push(n)}t.apply(null,r)}function e(e,t,n){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(t===ge)throw"invalid module definition, dependencies must be specified";if(n===ge)throw"invalid module definition, definition function must be specified";r(t,function(){l[e]=n.apply(null,arguments)})}var l={},t="tinymce/geom/Rect",n="tinymce/util/Promise",i="tinymce/util/Delay",o="tinymce/Env",a="tinymce/dom/EventUtils",c="tinymce/dom/Sizzle",u="tinymce/util/Arr",d="tinymce/util/Tools",f="tinymce/dom/DomQuery",h="tinymce/html/Styles",m="tinymce/dom/TreeWalker",p="tinymce/dom/Range",g="tinymce/html/Entities",v="tinymce/dom/StyleSheetLoader",y="tinymce/dom/DOMUtils",b="tinymce/dom/ScriptLoader",w="tinymce/AddOnManager",x="tinymce/dom/NodeType",$="tinymce/text/Zwsp",C="tinymce/caret/CaretContainer",S="tinymce/dom/RangeUtils",k="tinymce/NodeChange",E="tinymce/html/Node",A="tinymce/html/Schema",T="tinymce/html/SaxParser",N="tinymce/html/DomParser",_="tinymce/html/Writer",R="tinymce/html/Serializer",D="tinymce/dom/Serializer",M="tinymce/dom/TridentSelection",I="tinymce/util/VK",P="tinymce/dom/ControlSelection",O="tinymce/util/Fun",B="tinymce/caret/CaretCandidate",F="tinymce/geom/ClientRect",L="tinymce/text/ExtendingChar",U="tinymce/caret/CaretPosition",H="tinymce/caret/CaretBookmark",z="tinymce/dom/BookmarkManager",V="tinymce/dom/Selection",j="tinymce/dom/ElementUtils",q="tinymce/fmt/Preview",W="tinymce/fmt/Hooks",G="tinymce/Formatter",Y="tinymce/UndoManager",K="tinymce/EnterKey",X="tinymce/ForceBlocks",J="tinymce/caret/CaretUtils",Z="tinymce/caret/CaretWalker",Q="tinymce/InsertList",ee="tinymce/InsertContent",te="tinymce/EditorCommands",ne="tinymce/util/URI",re="tinymce/util/Class",ie="tinymce/util/EventDispatcher",oe="tinymce/data/Binding",ae="tinymce/util/Observable",se="tinymce/data/ObservableObject",le="tinymce/ui/Selector",ce="tinymce/ui/Collection",ue="tinymce/ui/DomUtils",de="tinymce/ui/BoxUtils",fe="tinymce/ui/ClassList",he="tinymce/ui/ReflowQueue",me="tinymce/ui/Control",pe="tinymce/ui/Factory",ve="tinymce/ui/KeyboardNavigation",ye="tinymce/ui/Container",be="tinymce/ui/DragHelper",we="tinymce/ui/Scrollable",xe="tinymce/ui/Panel",$e="tinymce/ui/Movable",Ce="tinymce/ui/Resizable",Se="tinymce/ui/FloatPanel",ke="tinymce/ui/Window",Ee="tinymce/ui/MessageBox",Ae="tinymce/WindowManager",Te="tinymce/ui/Tooltip",Ne="tinymce/ui/Widget",_e="tinymce/ui/Progress",Re="tinymce/ui/Notification",De="tinymce/NotificationManager",Me="tinymce/dom/NodePath",Ie="tinymce/util/Quirks",Pe="tinymce/EditorObservable",Oe="tinymce/Mode",Be="tinymce/Shortcuts",Fe="tinymce/file/Uploader",Le="tinymce/file/Conversions",Ue="tinymce/file/ImageScanner",He="tinymce/file/BlobCache",ze="tinymce/file/UploadStatus",Ve="tinymce/EditorUpload",je="tinymce/caret/FakeCaret",qe="tinymce/dom/Dimensions",We="tinymce/caret/LineWalker",Ge="tinymce/caret/LineUtils",Ye="tinymce/dom/MousePosition",Ke="tinymce/DragDropOverrides",Xe="tinymce/SelectionOverrides",Je="tinymce/util/Uuid",Ze="tinymce/Editor",Qe="tinymce/util/I18n",et="tinymce/FocusManager",tt="tinymce/EditorManager",nt="tinymce/util/XHR",rt="tinymce/util/JSON",it="tinymce/util/JSONRequest",ot="tinymce/util/JSONP",at="tinymce/util/LocalStorage",st="tinymce/Compat",lt="tinymce/ui/Layout",ct="tinymce/ui/AbsoluteLayout",ut="tinymce/ui/Button",dt="tinymce/ui/ButtonGroup",ft="tinymce/ui/Checkbox",ht="tinymce/ui/ComboBox",mt="tinymce/ui/ColorBox",pt="tinymce/ui/PanelButton",gt="tinymce/ui/ColorButton",vt="tinymce/util/Color",yt="tinymce/ui/ColorPicker",bt="tinymce/ui/Path",wt="tinymce/ui/ElementPath",xt="tinymce/ui/FormItem",$t="tinymce/ui/Form",Ct="tinymce/ui/FieldSet",St="tinymce/ui/FilePicker",kt="tinymce/ui/FitLayout",Et="tinymce/ui/FlexLayout",At="tinymce/ui/FlowLayout",Tt="tinymce/ui/FormatControls",Nt="tinymce/ui/GridLayout",_t="tinymce/ui/Iframe",Rt="tinymce/ui/InfoBox",Dt="tinymce/ui/Label",Mt="tinymce/ui/Toolbar",It="tinymce/ui/MenuBar",Pt="tinymce/ui/MenuButton",Ot="tinymce/ui/MenuItem",Bt="tinymce/ui/Throbber",Ft="tinymce/ui/Menu",Lt="tinymce/ui/ListBox",Ut="tinymce/ui/Radio",Ht="tinymce/ui/ResizeHandle",zt="tinymce/ui/SelectBox",Vt="tinymce/ui/Slider",jt="tinymce/ui/Spacer",qt="tinymce/ui/SplitButton",Wt="tinymce/ui/StackLayout",Gt="tinymce/ui/TabPanel",Yt="tinymce/ui/TextBox";e(t,[],function(){function a(e,t,n){var r=t.x,i=t.y,o=e.w,a=e.h,e=t.w,t=t.h;return"b"===(n=(n||"").split(""))[0]&&(i+=t),"r"===n[1]&&(r+=e),"c"===n[0]&&(i+=s(t/2)),"c"===n[1]&&(r+=s(e/2)),"b"===n[3]&&(i-=a),"r"===n[4]&&(r-=o),"c"===n[3]&&(i-=s(a/2)),"c"===n[4]&&(r-=s(o/2)),c(r,i,o,a)}function c(e,t,n,r){return{x:e,y:t,w:n,h:r}}var o=Math.min,u=Math.max,s=Math.round;return{inflate:function(e,t,n){return c(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:a,findBestRelativePosition:function(e,t,n,r){for(var i,o=0;o<r.length;o++)if((i=a(e,t,r[o])).x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return r[o];return null},intersect:function(e,t){var n=u(e.x,t.x),r=u(e.y,t.y),i=o(e.x+e.w,t.x+t.w),t=o(e.y+e.h,t.y+t.h);return i-n<0||t-r<0?null:c(n,r,i-n,t-r)},clamp:function(e,t,n){var r=e.x,i=e.y,o=e.x+e.w,a=e.y+e.h,s=t.x+t.w,l=t.y+t.h,e=u(0,t.x-r),t=u(0,t.y-i),s=u(0,o-s),l=u(0,a-l);return r+=e,i+=t,n&&(o+=e,a+=t,r-=s,i-=l),c(r,i,(o-=s)-r,(a-=l)-i)},create:c,fromClientRect:function(e){return c(e.left,e.top,e.width,e.height)}}}),e(n,[],function(){function n(e,t){return function(){e.apply(t,arguments)}}function e(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,n(r,this),n(i,this))}function o(n){var r=this;return null===this._state?void this._deferreds.push(n):void t(function(){var e,t=r._state?n.onFulfilled:n.onRejected;if(null!==t){try{e=t(r._value)}catch(e){return void n.reject(e)}n.resolve(e)}else(r._state?n.resolve:n.reject)(r._value)})}function r(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void l(n(t,e),n(r,this),n(i,this))}this._state=!0,this._value=e,a.call(this)}catch(e){i.call(this,e)}}function i(e){this._state=!1,this._value=e,a.call(this)}function a(){for(var e=0,t=this._deferreds.length;e<t;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function s(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function l(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}if(window.Promise)return window.Promise;var t=e.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.then=function(n,r){var i=this;return new e(function(e,t){o.call(i,new s(n,r,e,t))})},e.all=function(){var s=Array.prototype.slice.call(1===arguments.length&&c(arguments[0])?arguments[0]:arguments);return new e(function(i,o){if(0===s.length)return i([]);for(var a=s.length,e=0;e<s.length;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return r.call(e,function(e){t(n,e)},o),0}s[n]=e,0==--a&&i(s)}catch(e){o(e)}}(e,s[e])})},e.resolve=function(t){return t&&"object"==typeof t&&t.constructor===e?t:new e(function(e){e(t)})},e.reject=function(n){return new e(function(e,t){t(n)})},e.race=function(i){return new e(function(e,t){for(var n=0,r=i.length;n<r;n++)i[n].then(e,t)})},e}),e(i,[n],function(n){function r(e,t){for(var n=window.requestAnimationFrame,r=["ms","moz","webkit"],i=0;i<r.length&&!n;i++)n=window[r[i]+"RequestAnimationFrame"];(n=n||function(e){window.setTimeout(e,0)})(e,t)}function i(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)}function o(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)}var a;return{requestAnimationFrame:function(e,t){return a?void a.then(e):void(a=new n(function(e){r(e,t=t||document.body)}).then(e))},setTimeout:i,setInterval:o,setEditorTimeout:function(e,t,n){return i(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var r;return r=o(function(){e.removed?clearInterval(r):t()},n)},throttle:function(t,n){var r,e=function(){var e=arguments;clearTimeout(r),r=i(function(){t.apply(this,e)},n)};return e.stop=function(){clearTimeout(r)},e},clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}}}),e(o,[],function(){function e(e){return"matchMedia"in window&&matchMedia(e).matches}var t,n,r,i,o,a,s,l=navigator,c=l.userAgent,u=window.opera&&window.opera.buildNumber,d=/Android/.test(c),f=/WebKit/.test(c),h=!f&&!u&&/MSIE/gi.test(c)&&/Explorer/gi.test(l.appName);return h=h&&/MSIE (\w+)\./.exec(c)[1],s=-1!=c.indexOf("Trident/")&&(-1!=c.indexOf("rv:")||-1!=l.appName.indexOf("Netscape"))&&11,t=-1!=c.indexOf("Edge/")&&!h&&!s&&12,h=h||s||t,n=!f&&!s&&/Gecko/.test(c),r=-1!=c.indexOf("Mac"),i=/(iPad|iPhone)/.test(c),o="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,a=e("only screen and (max-device-width: 480px)")&&(d||i),l=e("only screen and (min-width: 800px)")&&(d||i),s=-1!=c.indexOf("Windows Phone"),{opera:u,webkit:f=t?!1:f,ie:h,gecko:n,mac:r,iOS:i,android:d,contentEditable:!i||o||534<=c.match(/AppleWebKit\/(\d*)/)[1],transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=h,range:window.getSelection&&"Range"in window,documentMode:h&&!t?document.documentMode||7:10,fileApi:o,ceFalse:!1===h||8<h,canHaveCSP:!1===h||11<h,desktop:!a&&!l,windowsPhone:s}}),e(a,[i,o],function(x,l){function $(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function C(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function S(e,t){function n(){return!1}function r(){return!0}var i,o,a,s=t||{};for(i in e)u[i]||(s[i]=e[i]);return s.target||(s.target=s.srcElement||document),l.experimentalShadowDom&&(s.target=(t=e,o=s.target,a=o,(o=t.path)&&0<o.length&&(a=o[0]),!t.deepPath||(o=t.deepPath())&&0<o.length&&(a=o[0]),a)),e&&c.test(e.type)&&void 0===e.pageX&&void 0!==e.clientX&&(a=(o=s.target.ownerDocument||document).documentElement,o=o.body,s.pageX=e.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0),s.pageY=e.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)),s.preventDefault=function(){s.isDefaultPrevented=r,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},s.stopPropagation=function(){s.isPropagationStopped=r,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},s.stopImmediatePropagation=function(){s.isImmediatePropagationStopped=r,s.stopPropagation()},s.isDefaultPrevented||(s.isDefaultPrevented=n,s.isPropagationStopped=n,s.isImmediatePropagationStopped=n),void 0===s.metaKey&&(s.metaKey=!1),s}function e(){function h(e,t){var n,r,i,o,t=p[t];if(n=t&&t[e.type])for(r=0,i=n.length;r<i;r++)if((o=n[r])&&!1===o.func.call(o.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}var m=this,p={},g="mce-data-"+(+new Date).toString(32),v="onmouseenter"in document.documentElement,y="onfocusin"in document.documentElement,b={mouseenter:"mouseover",mouseleave:"mouseout"},w=1;m.domLoaded=!1,m.events=p,m.bind=function(e,t,n,r){function i(e){h(S(e||f.event),o)}var o,a,s,l,c,u,d,f=window;if(e&&3!==e.nodeType&&8!==e.nodeType){for(e[g]?o=e[g]:(o=w++,e[g]=o,p[o]={}),r=r||e,s=(t=t.split(" ")).length;s--;)u=i,c=d=!1,"DOMContentLoaded"===(l=t[s])&&(l="ready"),m.domLoaded&&"ready"===l&&"complete"==e.readyState?n.call(r,S({type:l})):(v||(c=b[l])&&(u=function(e){var t=e.currentTarget,n=e.relatedTarget;if(n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=S(e||f.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,h(e,o))}),y||"focusin"!==l&&"focusout"!==l||(d=!0,c="focusin"===l?"focus":"blur",u=function(e){(e=S(e||f.event)).type="focus"===e.type?"focusin":"focusout",h(e,o)}),(a=p[o][l])?"ready"===l&&m.domLoaded?n({type:l}):a.push({func:n,scope:r}):(p[o][l]=a=[{func:n,scope:r}],a.fakeName=c,a.capture=d,a.nativeHandler=u,"ready"===l?function(e,t,n){function r(){n.domLoaded||(n.domLoaded=!0,t(o))}var i=e.document,o={type:"ready"};n.domLoaded?t(o):(i.addEventListener?"complete"===i.readyState?r():$(e,"DOMContentLoaded",r):($(i,"readystatechange",function e(){("complete"===i.readyState||"interactive"===i.readyState&&i.body)&&(C(i,"readystatechange",e),r())}),i.documentElement.doScroll&&e.self===e.top&&function t(){try{i.documentElement.doScroll("left")}catch(e){return void x.setTimeout(t)}r()}()),$(e,"load",r))}(e,u,m):$(e,c||l,u,d)));return e=a=0,n}},m.unbind=function(t,e,n){var r,i,o,a,s,l,c,u,d;if(!t||3===t.nodeType||8===t.nodeType)return m;if(r=t[g]){if(s=p[r],e){for(i=(e=e.split(" ")).length;i--;)if(d=s[a=e[i]]){if(n)for(o=d.length;o--;)d[o].func===n&&(l=d.nativeHandler,c=d.fakeName,u=d.capture,(d=d.slice(0,o).concat(d.slice(o+1))).nativeHandler=l,d.fakeName=c,d.capture=u,s[a]=d);n&&0!==d.length||(delete s[a],C(t,d.fakeName||a,d.nativeHandler,d.capture))}}else{for(a in s)d=s[a],C(t,d.fakeName||a,d.nativeHandler,d.capture);s={}}for(a in s)return m;delete p[r];try{delete t[g]}catch(e){t[g]=null}}return m},m.fire=function(e,t,n){var r;if(!e||3===e.nodeType||8===e.nodeType)return m;for(n=S(null,n),n.type=t,n.target=e;r=e[g],r&&h(n,r),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow,e&&!n.isPropagationStopped(););return m},m.clean=function(e){var t,n,r=m.unbind;if(!e||3===e.nodeType||8===e.nodeType)return m;if(e[g]&&r(e),(e=!e.getElementsByTagName?e.document:e)&&e.getElementsByTagName)for(r(e),t=(n=e.getElementsByTagName("*")).length;t--;)(e=n[t])[g]&&r(e);return m},m.destroy=function(){p={}},m.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var c=/^(?:mouse|contextmenu)|click/,u={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1};return(e.Event=new e).bind(window,"ready",function(){}),e}),e(c,[],function(){function w(e,t,n,r){var i,o,a,s,l,c,u,d,f;if((t?t.ownerDocument||t:O)!==T&&A(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=(t=t||T).nodeType)&&9!==a)return[];if(_&&!r){if(i=fe.exec(e))if(c=i[1]){if(9===a){if(!(o=t.getElementById(c))||!o.parentNode)return n;if(o.id===c)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(c))&&I(t,o)&&o.id===c)return n.push(o),n}else{if(i[2])return Y.apply(n,t.getElementsByTagName(e)),n;if((c=i[3])&&g.getElementsByClassName)return Y.apply(n,t.getElementsByClassName(c)),n}if(g.qsa&&(!R||!R.test(e))){if(u=c=P,d=t,f=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(l=v(e),(c=t.getAttribute("id"))?u=c.replace(me,"\\$&"):t.setAttribute("id",u),u="[id='"+u+"'] ",s=l.length;s--;)l[s]=u+m(l[s]);d=he.test(e)&&h(t.parentNode)||t,f=l.join(",")}if(f)try{return Y.apply(n,d.querySelectorAll(f)),n}catch(e){}finally{c||t.removeAttribute("id")}}}return C(e.replace(ne,"$1"),t,n,r)}function e(){function n(e,t){return r.push(e+" ")>$.cacheLength&&delete n[r.shift()],n[e+" "]=t}var r=[];return n}function n(e){return e[P]=!0,e}function t(e){var t=T.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var n=e.split("|"),r=e.length;r--;)$.attrHandle[n[r]]=t}function c(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function i(a){return n(function(o){return o=+o,n(function(e,t){for(var n,r=a([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function h(e){return e&&typeof e.getElementsByTagName!==V&&e}function o(){}function m(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function f(a,e,t){var s=e.dir,l=t&&"parentNode"===s,c=F++;return e.first?function(e,t,n){for(;e=e[s];)if(1===e.nodeType||l)return a(e,t,n)}:function(e,t,n){var r,i,o=[B,c];if(n){for(;e=e[s];)if((1===e.nodeType||l)&&a(e,t,n))return!0}else for(;e=e[s];)if(1===e.nodeType||l){if((r=(i=e[P]||(e[P]={}))[s])&&r[0]===B&&r[1]===c)return o[2]=r[2];if((i[s]=o)[2]=a(e,t,n))return!0}}}function p(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function x(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)));return a}function y(h,m,p,g,v,e){return g&&!g[P]&&(g=y(g)),v&&!v[P]&&(v=y(v,e)),n(function(e,t,n,r){var i,o,a,s=[],l=[],c=t.length,u=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)w(e,t[r],n);return n}(m||"*",n.nodeType?[n]:n,[]),d=!h||!e&&m?u:x(u,s,h,n,r),f=p?v||(e?h:c||g)?[]:t:d;if(p&&p(d,f,n,r),g)for(i=x(f,l),g(i,[],n,r),o=i.length;o--;)(a=i[o])&&(f[l[o]]=!(d[l[o]]=a));if(e){if(v||h){if(v){for(i=[],o=f.length;o--;)(a=f[o])&&i.push(d[o]=a);v(null,f=[],i,r)}for(o=f.length;o--;)(a=f[o])&&-1<(i=v?X.call(e,a):s[o])&&(e[i]=!(t[i]=a))}}else f=x(f===t?f.splice(c,f.length):f),v?v(null,t,f,r):Y.apply(t,f)})}function a(g,v){function e(e,t,n,r,i){var o,a,s,l=0,c="0",u=e&&[],d=[],f=S,h=e||b&&$.find.TAG("*",i),m=B+=null==f?1:Math.random()||.1,p=h.length;for(i&&(S=t!==T&&t);c!==p&&null!=(o=h[c]);c++){if(b&&o){for(a=0;s=g[a++];)if(s(o,t,n)){r.push(o);break}i&&(B=m)}y&&((o=!s&&o)&&l--,e&&u.push(o))}if(l+=c,y&&c!==l){for(a=0;s=v[a++];)s(u,d,t,n);if(e){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=W.call(r));d=x(d)}Y.apply(r,d),i&&!e&&0<d.length&&1<l+v.length&&w.uniqueSort(r)}return i&&(B=m,S=f),u}var y=0<v.length,b=0<g.length;return y?n(e):e}function d(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(65536+r):String.fromCharCode(r>>10|55296,1023&r|56320)}var s,g,$,l,u,v,b,C,S,k,E,A,T,N,_,R,D,M,I,P="sizzle"+-new Date,O=window.document,B=0,F=0,L=e(),U=e(),H=e(),z=function(e,t){return e===t&&(E=!0),0},V=typeof ge,j={}.hasOwnProperty,q=[],W=q.pop,G=q.push,Y=q.push,K=q.slice,X=q.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Z="[\\x20\\t\\r\\n\\f]",Q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ee="\\["+Z+"*("+Q+")(?:"+Z+"*([*^$|!~]?=)"+Z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Q+"))|)"+Z+"*\\]",te=":("+Q+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ee+")*)|.*)\\)|)",ne=new RegExp("^"+Z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Z+"+$","g"),re=new RegExp("^"+Z+"*,"+Z+"*"),ie=new RegExp("^"+Z+"*([>+~]|"+Z+")"+Z+"*"),oe=new RegExp("="+Z+"*([^\\]'\"]*?)"+Z+"*\\]","g"),ae=new RegExp(te),se=new RegExp("^"+Q+"$"),le={ID:new RegExp("^#("+Q+")"),CLASS:new RegExp("^\\.("+Q+")"),TAG:new RegExp("^("+Q+"|[*])"),ATTR:new RegExp("^"+ee),PSEUDO:new RegExp("^"+te),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Z+"*(even|odd|(([+-]|)(\\d*)n|)"+Z+"*(?:([+-]|)"+Z+"*(\\d+)|))"+Z+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+Z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Z+"*((?:-\\d)?\\d*)"+Z+"*\\)|)(?=[^-]|$)","i")},ce=/^(?:input|select|textarea|button)$/i,ue=/^h\d$/i,de=/^[^{]+\{\s*\[native \w/,fe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,he=/[+~]/,me=/'|\\/g,pe=new RegExp("\\\\([\\da-f]{1,6}"+Z+"?|("+Z+")|.)","ig");try{Y.apply(q=K.call(O.childNodes),O.childNodes),q[O.childNodes.length].nodeType}catch(e){Y={apply:q.length?function(e,t){G.apply(e,K.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}for(s in g=w.support={},u=w.isXML=function(e){e=e&&(e.ownerDocument||e).documentElement;return!!e&&"HTML"!==e.nodeName},A=w.setDocument=function(e){var l=e?e.ownerDocument||e:O,e=l.defaultView;return l!==T&&9===l.nodeType&&l.documentElement?(N=(T=l).documentElement,_=!u(l),e&&e!==function(e){try{return e.top}catch(e){}return null}(e)&&(e.addEventListener?e.addEventListener("unload",function(){A()},!1):e.attachEvent&&e.attachEvent("onunload",function(){A()})),g.attributes=t(function(e){return e.className="i",!e.getAttribute("className")}),g.getElementsByTagName=t(function(e){return e.appendChild(l.createComment("")),!e.getElementsByTagName("*").length}),g.getElementsByClassName=de.test(l.getElementsByClassName),g.getById=t(function(e){return N.appendChild(e).id=P,!l.getElementsByName||!l.getElementsByName(P).length}),g.getById?($.find.ID=function(e,t){if(typeof t.getElementById!==V&&_){e=t.getElementById(e);return e&&e.parentNode?[e]:[]}},$.filter.ID=function(e){var t=e.replace(pe,d);return function(e){return e.getAttribute("id")===t}}):(delete $.find.ID,$.filter.ID=function(e){var t=e.replace(pe,d);return function(e){e=typeof e.getAttributeNode!==V&&e.getAttributeNode("id");return e&&e.value===t}}),$.find.TAG=g.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==V?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[i++];)1===n.nodeType&&r.push(n);return r},$.find.CLASS=g.getElementsByClassName&&function(e,t){return _?t.getElementsByClassName(e):void 0},D=[],R=[],(g.qsa=de.test(l.querySelectorAll))&&(t(function(e){e.innerHTML="<select msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+Z+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||R.push("\\["+Z+"*(?:value|"+J+")"),e.querySelectorAll(":checked").length||R.push(":checked")}),t(function(e){var t=l.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&R.push("name"+Z+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),(g.matchesSelector=de.test(M=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&t(function(e){g.disconnectedMatch=M.call(e,"div"),M.call(e,"[s!='']:x"),D.push("!=",te)}),R=R.length&&new RegExp(R.join("|")),D=D.length&&new RegExp(D.join("|")),e=de.test(N.compareDocumentPosition),I=e||de.test(N.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},z=e?function(e,t){if(e===t)return E=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!g.sortDetached&&t.compareDocumentPosition(e)===n?e===l||e.ownerDocument===O&&I(O,e)?-1:t===l||t.ownerDocument===O&&I(O,t)?1:k?X.call(k,e)-X.call(k,t):0:4&n?-1:1)}:function(e,t){if(e===t)return E=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===l?-1:t===l?1:i?-1:o?1:k?X.call(k,e)-X.call(k,t):0;if(i===o)return c(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?c(a[r],s[r]):a[r]===O?-1:s[r]===O?1:0},l):T},w.matches=function(e,t){return w(e,null,null,t)},w.matchesSelector=function(e,t){if((e.ownerDocument||e)!==T&&A(e),t=t.replace(oe,"='$1']"),g.matchesSelector&&_&&(!D||!D.test(t))&&(!R||!R.test(t)))try{var n=M.call(e,t);if(n||g.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<w(t,T,null,[e]).length},w.contains=function(e,t){return(e.ownerDocument||e)!==T&&A(e),I(e,t)},w.attr=function(e,t){(e.ownerDocument||e)!==T&&A(e);var n=$.attrHandle[t.toLowerCase()],n=n&&j.call($.attrHandle,t.toLowerCase())?n(e,t,!_):ge;return n!==ge?n:g.attributes||!_?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},w.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},w.uniqueSort=function(e){var t,n=[],r=0,i=0;if(E=!g.detectDuplicates,k=!g.sortStable&&e.slice(0),e.sort(z),E){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return k=null,e},l=w.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=l(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=l(t);return n},($=w.selectors={cacheLength:50,createPseudo:n,match:le,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(pe,d),e[3]=(e[3]||e[4]||e[5]||"").replace(pe,d),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||w.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&w.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return le.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ae.test(n)&&(t=v(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(pe,d).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=L[e+" "];return t||(t=new RegExp("(^|"+Z+")"+e+"("+Z+"|$)"))&&L(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==V&&e.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(e){e=w.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(h,e,t,m,p){var g="nth"!==h.slice(0,3),v="last"!==h.slice(-4),y="of-type"===e;return 1===m&&0===p?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,l,c=g!=v?"nextSibling":"previousSibling",u=e.parentNode,d=y&&e.nodeName.toLowerCase(),f=!n&&!y;if(u){if(g){for(;c;){for(o=e;o=o[c];)if(y?o.nodeName.toLowerCase()===d:1===o.nodeType)return!1;l=c="only"===h&&!l&&"nextSibling"}return!0}if(l=[v?u.firstChild:u.lastChild],v&&f){for(s=(r=(i=u[P]||(u[P]={}))[h]||[])[0]===B&&r[1],a=r[0]===B&&r[2],o=s&&u.childNodes[s];o=++s&&o&&o[c]||(a=s=0)||l.pop();)if(1===o.nodeType&&++a&&o===e){i[h]=[B,s,a];break}}else if(f&&(r=(e[P]||(e[P]={}))[h])&&r[0]===B)a=r[1];else for(;(o=++s&&o&&o[c]||(a=s=0)||l.pop())&&((y?o.nodeName.toLowerCase()!==d:1!==o.nodeType)||!++a||(f&&((o[P]||(o[P]={}))[h]=[B,a]),o!==e)););return(a-=p)===m||a%m==0&&0<=a/m}}},PSEUDO:function(e,o){var t,a=$.pseudos[e]||$.setFilters[e.toLowerCase()]||w.error("unsupported pseudo: "+e);return a[P]?a(o):1<a.length?(t=[e,e,"",o],$.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=a(e,o),i=r.length;i--;)e[n=X.call(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:n(function(e){var r=[],i=[],s=b(e.replace(ne,"$1"));return s[P]?n(function(e,t,n,r){for(var i,o=s(e,null,r,[]),a=e.length;a--;)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),!i.pop()}}),has:n(function(t){return function(e){return 0<w(t,e).length}}),contains:n(function(t){return t=t.replace(pe,d),function(e){return-1<(e.textContent||e.innerText||l(e)).indexOf(t)}}),lang:n(function(n){return se.test(n||"")||w.error("unsupported lang: "+n),n=n.replace(pe,d).toLowerCase(),function(e){var t;do{if(t=_?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===N},focus:function(e){return e===T.activeElement&&(!T.hasFocus||T.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!$.pseudos.empty(e)},header:function(e){return ue.test(e.nodeName)},input:function(e){return ce.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:i(function(){return[0]}),last:i(function(e,t){return[t-1]}),eq:i(function(e,t,n){return[n<0?n+t:n]}),even:i(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:i(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:i(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:i(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=$.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})$.pseudos[s]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(s);for(s in{submit:!0,reset:!0})$.pseudos[s]=function(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}(s);return o.prototype=$.filters=$.pseudos,$.setFilters=new o,v=w.tokenize=function(e,t){var n,r,i,o,a,s,l,c=U[e+" "];if(c)return t?0:c.slice(0);for(a=e,s=[],l=$.preFilter;a;){for(o in n&&!(r=re.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=ie.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ne," ")}),a=a.slice(n.length)),$.filter)!(r=le[o].exec(a))||l[o]&&!(r=l[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?w.error(e):U(e,s).slice(0)},b=w.compile=function(e,t){var n,r=[],i=[],o=H[e+" "];if(!o){for(n=(t=t||v(e)).length;n--;)((o=function e(t){for(var r,n,i,o=t.length,a=$.relative[t[0].type],s=a||$.relative[" "],l=a?1:0,c=f(function(e){return e===r},s,!0),u=f(function(e){return-1<X.call(r,e)},s,!0),d=[function(e,t,n){return!a&&(n||t!==S)||((r=t).nodeType?c:u)(e,t,n)}];l<o;l++)if(n=$.relative[t[l].type])d=[f(p(d),n)];else{if((n=$.filter[t[l].type].apply(null,t[l].matches))[P]){for(i=++l;i<o&&!$.relative[t[i].type];i++);return y(1<l&&p(d),1<l&&m(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(ne,"$1"),n,l<i&&e(t.slice(l,i)),i<o&&e(t=t.slice(i)),i<o&&m(t))}d.push(n)}return p(d)}(t[n]))[P]?r:i).push(o);(o=H(e,a(i,r))).selector=e}return o},C=w.select=function(e,t,n,r){var i,o,a,s,l,c="function"==typeof e&&e,u=!r&&v(e=c.selector||e);if(n=n||[],1===u.length){if(2<(o=u[0]=u[0].slice(0)).length&&"ID"===(a=o[0]).type&&g.getById&&9===t.nodeType&&_&&$.relative[o[1].type]){if(!(t=($.find.ID(a.matches[0].replace(pe,d),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=le.needsContext.test(e)?0:o.length;i--&&(a=o[i],!$.relative[s=a.type]);)if((l=$.find[s])&&(r=l(a.matches[0].replace(pe,d),he.test(o[0].type)&&h(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&m(o)))return Y.apply(n,r),n;break}}return(c||b(e,u))(r,t,!_,n,he.test(e)&&h(t.parentNode)||t),n},g.sortStable=P.split("").sort(z).join("")===P,g.detectDuplicates=!!E,A(),g.sortDetached=t(function(e){return 1&e.compareDocumentPosition(T.createElement("div"))}),t(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),g.attributes&&t(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),t(function(e){return null==e.getAttribute("disabled")})||r(J,function(e,t,n){return n?void 0:!0===e[t]?t.toLowerCase():(t=e.getAttributeNode(t))&&t.specified?t.value:null}),w}),e(u,[],function(){function e(e,t,n){var r,i;if(!e)return 0;if(n=n||e,e.length!==ge){for(r=0,i=e.length;r<i;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1}function r(e,t,n){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e))return r;return-1}var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{isArray:i,toArray:function(e){var t,n,r=e;if(!i(e))for(r=[],t=0,n=e.length;t<n;t++)r[t]=e[t];return r},each:e,map:function(n,r){var i=[];return e(n,function(e,t){i.push(r(e,t,n))}),i},filter:function(n,r){var i=[];return e(n,function(e,t){r&&!r(e,t,n)||i.push(e)}),i},indexOf:function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,r){var i=0;for(arguments.length<3&&(n=e[0]);i<e.length;i++)n=t.call(r,n,e[i],i);return n},findIndex:r,find:function(e,t,n){return-1!==(n=r(e,t,n))?e[n]:ge},last:function(e){return e[e.length-1]}}}),e(d,[o,u],function(n,a){function r(e){return null===e||e===ge?"":(""+e).replace(t,"")}function i(e,t){return t?!("array"!=t||!a.isArray(e))||typeof e==t:e!==ge}var t=/^\s*|\s*$/g;return{trim:r,isArray:a.isArray,is:i,toArray:a.toArray,makeMap:function(e,t,n){var r;for(t=t||",",n=n||{},r=(e="string"==typeof(e=e||[])?e.split(t):e).length;r--;)n[e[r]]={};return n},each:a.each,map:a.map,grep:a.filter,inArray:a.indexOf,extend:function(e,t){for(var n,r,i=arguments,o=1,a=i.length;o<a;o++)for(n in t=i[o])t.hasOwnProperty(n)&&(r=t[n],r!==ge&&(e[n]=r));return e},create:function(e,t,n){var r,i,o,a,s,l=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],!(i=this.createNS(e[3].replace(/\.\w+$/,""),n))[o]){if("static"==e[2])return i[o]=t,void(this.onCreate&&this.onCreate(e[2],e[3],i[o]));t[o]||(t[o]=function(){},l=1),i[o]=t[o],this.extend(i[o].prototype,t),e[5]&&(r=this.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=i[o],i[o]=l?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],s.apply(this,arguments)},i[o].prototype[o]=i[o],this.each(r,function(e,t){i[o].prototype[t]=r[t]}),this.each(t,function(e,t){r[t]?i[o].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!=o&&(i[o].prototype[t]=e)})),this.each(t.static,function(e,t){i[o][t]=e})}},walk:function n(e,r,i,o){o=o||this,e&&(i&&(e=e[i]),a.each(e,function(e,t){return!1!==r.call(o,e,t,i)&&void n(e,r,i,o)}))},createNS:function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)t[r=e[n]]||(t[r]={}),t=t[r];return t},resolve:function(e,t){var n,r;for(t=t||window,n=0,r=(e=e.split(".")).length;n<r&&(t=t[e[n]]);n++);return t},explode:function(e,t){return!e||i(e,"array")?e:a.map(e.split(t||","),r)},_addCacheSuffix:function(e){var t=n.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}}}),e(f,[a,c,d,o],function(e,t,n,r){function s(e){return void 0!==e}function o(e){return"string"==typeof e}function a(e,t){var n,r=(t=t||w).createElement("div"),i=t.createDocumentFragment();for(r.innerHTML=e;n=r.firstChild;)i.appendChild(n);return i}function l(e,t,n,r){var i;if(o(t))t=a(t,m(e[0]));else if(t.length&&!t.nodeType){if(t=u.makeArray(t),r)for(i=t.length-1;0<=i;i--)l(e,t[i],n,r);else for(i=0;i<t.length;i++)l(e,t[i],n,r);return e}if(t.nodeType)for(i=e.length;i--;)n.call(e[i],t);return e}function c(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function i(e,t,n){var r,i;return t=u(t)[0],e.each(function(){n&&r==this.parentNode||(r=this.parentNode,i=t.cloneNode(!1),this.parentNode.insertBefore(i,this)),i.appendChild(this)}),e}function u(e,t){return new u.fn.init(e,t)}function d(e){return null===e||e===b?"":(""+e).replace(D,"")}function f(e,t){var n,r,i,o;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],!1===t.call(o,r,o)))break}else for(i=0;i<n&&(o=e[i],!1!==t.call(o,i,o));i++);return e}function h(e,n){var r=[];return f(e,function(e,t){n(t,e)&&r.push(t)}),r}function m(e){return e?9==e.nodeType?e:e.ownerDocument:w}function p(e,t,n){var r=[],i=e[t];for("string"!=typeof n&&n instanceof u&&(n=n[0]);i&&9!==i.nodeType;){if(n!==ge){if(i===n)break;if("string"==typeof n&&u(i).is(n))break}1===i.nodeType&&r.push(i),i=i[t]}return r}function g(e,t,n,r){var i=[];for(r instanceof u&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(r!==ge){if(e===r)break;if("string"==typeof r&&u(e).is(r))break}i.push(e)}return i}function v(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType==n)return e;return null}function y(n,r,e){f(e,function(e,t){n[e]=n[e]||{},n[e][r]=t})}var b,w=document,x=Array.prototype.push,$=Array.prototype.slice,C=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,S=e.Event,k=n.makeMap("children,contents,next,prev"),E=n.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),A=n.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),T={for:"htmlFor",class:"className",readonly:"readOnly"},N={float:"cssFloat"},_={},R={},D=/^\s*|\s*$/g;return u.fn=u.prototype={constructor:u,selector:"",context:null,length:0,init:function(e,t){var n,r,i=this;if(!e)return i;if(e.nodeType)return i.context=i[0]=e,i.length=1,i;if(t&&t.nodeType)i.context=t;else{if(t)return u(e).attr(t);i.context=t=document}if(o(e)){if(!(n="<"===(i.selector=e).charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:C.exec(e)))return u(t).find(e);if(n[1])for(r=a(e,m(t)).firstChild;r;)x.call(i,r),r=r.nextSibling;else{if(!(r=m(t).getElementById(n[2])))return i;if(r.id!==n[2])return i.find(e);i.length=1,i[0]=r}}else this.add(e,!1);return i},toArray:function(){return n.toArray(this)},add:function(e,t){var n,r;if(o(e))return this.add(u(e));if(!1!==t)for(n=u.unique(this.toArray().concat(u.makeArray(e))),this.length=n.length,r=0;r<n.length;r++)this[r]=n[r];else x.apply(this,u.makeArray(e));return this},attr:function(t,n){var e,r=this;if("object"==typeof t)f(t,function(e,t){r.attr(e,t)});else{if(!s(n)){if(r[0]&&1===r[0].nodeType){if((e=_[t])&&e.get)return e.get(r[0],t);if(A[t])return r.prop(t)?t:b;null===(n=r[0].getAttribute(t,2))&&(n=b)}return n}this.each(function(){var e;1===this.nodeType&&((e=_[t])&&e.set?e.set(this,n):null===n?this.removeAttribute(t,2):this.setAttribute(t,n,2))})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=T[e]||e))f(e,function(e,t){n.prop(e,t)});else{if(!s(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1==this.nodeType&&(this[e]=t)})}return n},css:function(t,n){function e(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})}function r(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})}var i,o,a=this;if("object"==typeof t)f(t,function(e,t){a.css(e,t)});else if(s(n))t=e(t),"number"!=typeof n||E[t]||(n+="px"),a.each(function(){var e=this.style;if((o=R[t])&&o.set)o.set(this,n);else{try{this.style[N[t]||t]=n}catch(e){}null!==n&&""!==n||(e.removeProperty?e.removeProperty(r(t)):e.removeAttribute(t))}});else{if(i=a[0],(o=R[t])&&o.get)return o.get(i);if(i.ownerDocument.defaultView)try{return i.ownerDocument.defaultView.getComputedStyle(i,null).getPropertyValue(r(t))}catch(e){return b}else if(i.currentStyle)return i.currentStyle[e(t)]}return a},remove:function(){for(var e,t=this.length;t--;)e=this[t],S.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(t){var n;if(s(t)){n=this.length;try{for(;n--;)this[n].innerHTML=t}catch(e){u(this[n]).empty().append(t)}return this}return this[0]?this[0].innerHTML:""},text:function(e){var t;if(s(e)){for(t=this.length;t--;)"innerText"in this[t]?this[t].innerText=e:this[0].textContent=e;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return l(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return l(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?l(this,arguments,function(e){this.parentNode.insertBefore(e,this)}):this},after:function(){return this[0]&&this[0].parentNode?l(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):this},appendTo:function(e){return u(e).append(this),this},prependTo:function(e){return u(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return i(this,e)},wrapAll:function(e){return i(this,e,!0)},wrapInner:function(e){return this.each(function(){u(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){u(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),u(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(i,o){var e=this;return"string"!=typeof i||(-1!==i.indexOf(" ")?f(i.split(" "),function(){e.toggleClass(this,o)}):e.each(function(e,t){var n,r=c(t,i);r!==o&&(n=t.className,r?t.className=d((" "+n+" ").replace(" "+i+" "," ")):t.className+=n?" "+i:i)})),e},hasClass:function(e){return c(this[0],e)},each:function(e){return f(this,e)},on:function(e,t){return this.each(function(){S.bind(this,e,t)})},off:function(e,t){return this.each(function(){S.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?S.fire(this,e.type,e):S.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new u($.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){for(var t=[],n=0,r=this.length;n<r;n++)u.find(e,this[n],t);return u(t)},filter:function(n){return u("function"==typeof n?h(this.toArray(),function(e,t){return n(t,e)}):u.filter(n,this.toArray()))},closest:function(n){var r=[];return n instanceof u&&(n=n[0]),this.each(function(e,t){for(;t;){if("string"==typeof n&&u(t).is(n)){r.push(t);break}if(t==n){r.push(t);break}t=t.parentNode}}),u(r)},offset:function(e){var t,n,r=0,i=0;return e?this.css(e):((n=this[0])&&(e=(t=n.ownerDocument).documentElement,n.getBoundingClientRect&&(r=(n=n.getBoundingClientRect()).left+(e.scrollLeft||t.body.scrollLeft)-e.clientLeft,i=n.top+(e.scrollTop||t.body.scrollTop)-e.clientTop)),{left:r,top:i})},push:x,sort:[].sort,splice:[].splice},n.extend(u,{extend:n.extend,makeArray:function(e){return(t=e)&&t==t.window||e.nodeType?[e]:n.toArray(e);var t},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},isArray:n.isArray,each:f,trim:d,grep:h,find:t,expr:t.selectors,unique:t.uniqueSort,text:t.getText,contains:t.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!=t[r].nodeType&&t.splice(r,1);return 1===t.length?u.find.matchesSelector(t[0],e)?[t[0]]:[]:u.find.matches(e,t)}}),f({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return p(e,"parentNode")},next:function(e){return v(e,"nextSibling",1)},prev:function(e){return v(e,"previousSibling",1)},children:function(e){return g(e.firstChild,"nextSibling",1)},contents:function(e){return n.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,r){u.fn[e]=function(t){var n=[];return this.each(function(){var e=r.call(n,this,t,n);e&&(u.isArray(e)?n.push.apply(n,e):n.push(e))}),1<this.length&&(k[e]||(n=u.unique(n)),0===e.indexOf("parents")&&(n=n.reverse())),n=u(n),t?n.filter(t):n}}),f({parentsUntil:function(e,t){return p(e,"parentNode",t)},nextUntil:function(e,t){return g(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return g(e,"previousSibling",1,t).slice(1)}},function(r,i){u.fn[r]=function(t,e){var n=[];return this.each(function(){var e=i.call(n,this,t,n);e&&(u.isArray(e)?n.push.apply(n,e):n.push(e))}),1<this.length&&(n=u.unique(n),0!==r.indexOf("parents")&&"prevUntil"!==r||(n=n.reverse())),n=u(n),e?n.filter(e):n}}),u.fn.is=function(e){return!!e&&0<this.filter(e).length},u.fn.init.prototype=u.fn,u.overrideDefaults=function(n){function r(e,t){return i=i||n(),0===arguments.length&&(e=i.element),t=t||i.context,new r.fn.init(e,t)}var i;return u.extend(r,this),r},r.ie&&r.ie<8&&(y(_,"get",{maxlength:function(e){e=e.maxLength;return 2147483647===e?b:e},size:function(e){e=e.size;return 20===e?b:e},class:function(e){return e.className},style:function(e){e=e.style.cssText;return 0===e.length?b:e}}),y(_,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),r.ie&&r.ie<9&&(N.float="styleFloat",y(R,"set",{opacity:function(e,t){e=e.style;null===t||""===t?e.removeAttribute("filter"):(e.zoom=1,e.filter="alpha(opacity="+100*t+")")}})),u.attrHooks=_,u.cssHooks=R,u}),e(h,[],function(){return function(v,e){function y(e,t,n,r){function i(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e}return"#"+i(t)+i(n)+i(r)}var b,t,c,u,w=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,x=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,$=/\s*([^:]+):\s*([^;]+);?/g,C=/\s+$/,S={},n="\ufeff";for(v=v||{},e&&(c=e.getValidStyles(),u=e.getInvalidStyles()),t=("\\\" \\' \\; \\: ; : "+n).split(" "),b=0;b<t.length;b++)S[t[b]]=n+b,S[n+b]=t[b];return{toHex:function(e){return e.replace(w,y)},parse:function(e){function t(e,t,n){var r,i,o,a=m[e+"-top"+t];if(a&&((r=m[e+"-right"+t])&&((i=m[e+"-bottom"+t])&&(o=m[e+"-left"+t])))){var s=[a,r,i,o];for(b=s.length-1;b--&&s[b]===s[b+1];);-1<b&&n||(m[e+t]=-1==b?s[0]:s.join(" "),delete m[e+"-top"+t],delete m[e+"-right"+t],delete m[e+"-bottom"+t],delete m[e+"-left"+t])}}function n(e){var t,n=m[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return;return m[e]=n[0],1}}function r(e){return c=!0,S[e]}function a(e,t){return c&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return S[e]})),e=!t?e.replace(/\\([\'\";:])/g,"$1"):e}function i(e,t,n,r,i,o){if(i=i||o)return"'"+(i=a(i)).replace(/\'/g,"\\'")+"'";if(t=a(t||n||r),!v.allow_script_urls){r=t.replace(/[\s\r\n]+/,"");if(/(java|vb)script:/i.test(r))return"";if(!v.allow_svg_data_urls&&/^data:image\/svg/i.test(r))return""}return"url('"+(t=p?p.call(g,t,"style"):t).replace(/\'/g,"\\'")+"')"}var o,s,l,c,u,d,f,h,m={},p=v.url_converter,g=v.url_converter_scope||this;if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,r).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,r)});o=$.exec(e);){if(s=o[1].replace(C,"").toLowerCase(),l=(l=o[2].replace(C,"")).replace(/\\[0-9a-f]+/g,function(e){return String.fromCharCode(parseInt(e.substr(1),16))}),s&&0<l.length){if(!v.allow_script_urls&&("behavior"==s||/expression\s*\(|\/\*|\*\//.test(l)))continue;"font-weight"===s&&"700"===l?l="bold":"color"!==s&&"background-color"!==s||(l=l.toLowerCase()),l=(l=l.replace(w,y)).replace(x,i),m[s]=c?a(l,!0):l}$.lastIndex=o.index+o[0].length}t("border","",!0),t("border","-width"),t("border","-color"),t("border","-style"),t("padding",""),t("margin",""),u="border",f="border-style",h="border-color",n(d="border-width")&&n(f)&&n(h)&&(m[u]=m[d]+" "+m[f]+" "+m[h],delete m[d],delete m[f],delete m[h]),"medium none"===m.border&&delete m.border,"none"===m["border-image"]&&delete m["border-image"]}return m},serialize:function(o,e){function t(e){var t,n,r,i;if(t=c[e])for(n=0,r=t.length;n<r;n++)e=t[n],void 0!==(i=o[e])&&0<i.length&&(l+=(0<l.length?" ":"")+e+": "+i+";")}var n,r,i,a,s,l="";if(e&&c)t("*"),t(e);else for(n in o)r=o[n],void 0!==r&&0<r.length&&(u&&(i=n,a=e,s=void 0,s=u["*"],s&&s[i]||(s=u[a])&&s[i])||(l+=(0<l.length?" ":"")+n+": "+r+";"));return l}}}}),e(m,[],function(){return function(e,a){function t(e,t,n,r){var i,o;if(e){if(!r&&e[t])return e[t];if(e!=a){if(i=e[n])return i;for(o=e.parentNode;o&&o!=a;o=o.parentNode)if(i=o[n])return i}}}var n=e;this.current=function(){return n},this.next=function(e){return n=t(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=t(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=function(e,t,n,r){var i,o;if(e&&(i=e[n],!a||i!==a)){if(i){if(!r)for(o=i[t];o;o=o[t])if(!o[t])return o;return i}return(e=e.parentNode)&&e!==a?e:void 0}}(n,"lastChild","previousSibling",e)}}}),e(p,[d],function(T){function N(u){function d(){return y.createDocumentFragment()}function t(e,t){o(x,e,t)}function n(e,t){o($,e,t)}function r(e){t(e.parentNode,A(e))}function i(e){n(e.parentNode,A(e)+1)}function e(){return a(b)}function f(e,t){var n;if(3==e.nodeType)return e;if(t<0)return e;for(n=e.firstChild;n&&0<t;)--t,n=n.nextSibling;return n||e}function c(e,t,n,r){var i,o,a,s,l,c;if(e==n)return t==r?0:t<r?-1:1;for(i=n;i&&i.parentNode!=e;)i=i.parentNode;if(i){for(o=0,a=e.firstChild;a!=i&&o<t;)o++,a=a.nextSibling;return t<=o?-1:1}for(i=e;i&&i.parentNode!=n;)i=i.parentNode;if(i){for(o=0,a=n.firstChild;a!=i&&o<r;)o++,a=a.nextSibling;return o<r?-1:1}for(s=u.findCommonAncestor(e,n),l=e;l&&l.parentNode!=s;)l=l.parentNode;for(l=l||s,c=n;c&&c.parentNode!=s;)c=c.parentNode;if(l==(c=c||s))return 0;for(a=s.firstChild;a;){if(a==l)return-1;if(a==c)return 1;a=a.nextSibling}}function o(e,t,n){var r,i;for(e?(v[S]=t,v[C]=n):(v[k]=t,v[E]=n),r=v[k];r.parentNode;)r=r.parentNode;for(i=v[S];i.parentNode;)i=i.parentNode;(i!=r||0<c(v[S],v[C],v[k],v[E]))&&v.collapse(e),v.collapsed=v[S]==v[k]&&v[C]==v[E],v.commonAncestorContainer=u.findCommonAncestor(v[S],v[k])}function a(e){var t,n,r,i,o,a,s,l=0,c=0;if(v[S]==v[k])return function(e){var t,n,r,i,o,a,s,l;if(e!=w&&(t=d()),v[C]==v[E])return t;if(3==v[S].nodeType)return l=v[S].nodeValue,n=l.substring(v[C],v[E]),e!=b&&(r=v[S],s=v[C],l=v[E]-v[C],0===s&&l>=r.nodeValue.length-1?r.parentNode.removeChild(r):r.deleteData(s,l),v.collapse(x)),e==w?void 0:(0<n.length&&t.appendChild(y.createTextNode(n)),t);for(r=f(v[S],v[C]),i=v[E]-v[C];r&&0<i;)o=r.nextSibling,a=g(r,e),t&&t.appendChild(a),--i,r=o;return e!=b&&v.collapse(x),t}(e);for(n=(t=v[k]).parentNode;n;n=(t=n).parentNode){if(n==v[S])return function(e,t){var n,r,i,o,a,s;if(t!=w&&(n=d()),r=h(e,t),n&&n.appendChild(r),i=A(e),(o=i-v[C])<=0)return t!=b&&(v.setEndBefore(e),v.collapse($)),n;for(r=e.previousSibling;0<o;)a=r.previousSibling,s=g(r,t),n&&n.insertBefore(s,n.firstChild),--o,r=a;return t!=b&&(v.setEndBefore(e),v.collapse($)),n}(t,e);++l}for(n=(t=v[S]).parentNode;n;n=(t=n).parentNode){if(n==v[k])return function(e,t){var n,r,i,o,a,s;for(t!=w&&(n=d()),i=m(e,t),n&&n.appendChild(i),r=A(e),++r,o=v[E]-r,i=e.nextSibling;i&&0<o;)a=i.nextSibling,s=g(i,t),n&&n.appendChild(s),--o,i=a;return t!=b&&(v.setStartAfter(e),v.collapse(x)),n}(t,e);++c}for(r=c-l,i=v[S];0<r;)i=i.parentNode,r--;for(o=v[k];r<0;)o=o.parentNode,r++;for(a=i.parentNode,s=o.parentNode;a!=s;a=a.parentNode,s=s.parentNode)i=a,o=s;return function(e,t,n){var r,i,o,a,s,l,c;for(n!=w&&(i=d()),r=m(e,n),i&&i.appendChild(r),o=A(e),a=A(t),s=a-++o,l=e.nextSibling;0<s;)c=l.nextSibling,r=g(l,n),i&&i.appendChild(r),l=c,--s;return r=h(t,n),i&&i.appendChild(r),n!=b&&(v.setStartAfter(e),v.collapse(x)),i}(i,o,e)}function h(e,t){var n,r,i,o,a,s=f(v[k],v[E]-1),l=s!=v[k];if(s==e)return p(s,l,$,t);for(r=p(n=s.parentNode,$,$,t);n;){for(;s;)i=s.previousSibling,o=p(s,l,$,t),t!=w&&r.insertBefore(o,r.firstChild),l=x,s=i;if(n==e)return r;s=n.previousSibling,a=p(n=n.parentNode,$,$,t),t!=w&&a.appendChild(r),r=a}}function m(e,t){var n,r,i,o,a,s=f(v[S],v[C]),l=s!=v[S];if(s==e)return p(s,l,x,t);for(r=p(n=s.parentNode,$,x,t);n;){for(;s;)i=s.nextSibling,o=p(s,l,x,t),t!=w&&r.appendChild(o),l=x,s=i;if(n==e)return r;s=n.nextSibling,a=p(n=n.parentNode,$,x,t),t!=w&&a.appendChild(r),r=a}}function p(e,t,n,r){var i,o;return t?g(e,r):3==e.nodeType?(t=e.nodeValue,o=n?(o=v[C],i=t.substring(o),t.substring(0,o)):(o=v[E],i=t.substring(0,o),t.substring(o)),r!=b&&(e.nodeValue=o),r==w?void 0:((o=u.clone(e,$)).nodeValue=i,o)):r!=w?u.clone(e,$):void 0}function g(e,t){return t!=w?t==b?u.clone(e,x):e:void e.parentNode.removeChild(e)}var v=this,y=u.doc,s=0,b=1,w=2,x=!0,$=!1,C="startOffset",S="startContainer",k="endContainer",E="endOffset",l=T.extend,A=u.nodeIndex;return l(v,{startContainer:y,startOffset:0,endContainer:y,endOffset:0,collapsed:x,commonAncestorContainer:y,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:t,setEnd:n,setStartBefore:r,setStartAfter:function(e){t(e.parentNode,A(e)+1)},setEndBefore:function(e){n(e.parentNode,A(e))},setEndAfter:i,collapse:function(e){e?(v[k]=v[S],v[E]=v[C]):(v[S]=v[k],v[C]=v[E]),v.collapsed=x},selectNode:function(e){r(e),i(e)},selectNodeContents:function(e){t(e,0),n(e,(1===e.nodeType?e.childNodes:e.nodeValue).length)},compareBoundaryPoints:function(e,t){var n=v[S],r=v[C],i=v[k],o=v[E],a=t.startContainer,s=t.startOffset,l=t.endContainer,t=t.endOffset;return 0===e?c(n,r,a,s):1===e?c(i,o,a,s):2===e?c(i,o,l,t):3===e?c(n,r,l,t):void 0},deleteContents:function(){a(w)},extractContents:function(){return a(s)},cloneContents:e,insertNode:function(e){var t,n=this[S],r=this[C];3!==n.nodeType&&4!==n.nodeType||!n.nodeValue?(t=0<n.childNodes.length?n.childNodes[r]:t)?n.insertBefore(e,t):3==n.nodeType?u.insertAfter(e,n):n.appendChild(e):r?r>=n.nodeValue.length?u.insertAfter(e,n):(r=n.splitText(r),n.parentNode.insertBefore(e,r)):n.parentNode.insertBefore(e,n)},surroundContents:function(e){var t=v.extractContents();v.insertNode(e),e.appendChild(t),v.selectNode(e)},cloneRange:function(){return l(new N(u),{startContainer:v[S],startOffset:v[C],endContainer:v[k],endOffset:v[E],collapsed:v.collapsed,commonAncestorContainer:v.commonAncestorContainer})},toStringIE:function(){return u.create("body",null,e()).outerText}}),v}return N.prototype.toString=function(){return this.toStringIE()},N}),e(g,[d],function(e){function t(e,t){var n,r,i,o={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),l[r]||(i="&"+e[n+1]+";",o[r]=i,o[i]=r);return o}}var r=e.makeMap,i=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,o=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,n=/[<>&\"\']/g,a=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,s={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},l={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},c={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},u=t("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),d={encodeRaw:function(e,t){return e.replace(t?i:o,function(e){return l[e]||e})},encodeAllRaw:function(e){return(""+e).replace(n,function(e){return l[e]||e})},encodeNumeric:function(e,t){return e.replace(t?i:o,function(e){return 1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":l[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||u,e.replace(t?i:o,function(e){return l[e]||n[e]||e})},getEncodeFunc:function(e,n){return n=t(n)||u,(e=r(e.replace(/\+/g,","))).named&&e.numeric?function(e,t){return e.replace(t?i:o,function(e){return l[e]||n[e]||"&#"+e.charCodeAt(0)+";"||e})}:e.named?n?function(e,t){return d.encodeNamed(e,t,n)}:d.encodeNamed:e.numeric?d.encodeNumeric:d.encodeRaw},decode:function(e){return e.replace(a,function(e,t){return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):s[t]||String.fromCharCode(t):c[e]||u[e]||(t=e,(e=document.createElement("div")).innerHTML=t,e.textContent||e.innerText||t)})}};return d}),e(v,[d,i],function(g,v){return function(d,e){function f(e){d.getElementsByTagName("head")[0].appendChild(e)}var h=0,m={},p=(e=e||{}).maxLoadTime||5e3;this.load=function(e,t,n){function r(){for(var e=u.passed,t=e.length;t--;)e[t]();u.status=2,u.passed=[],u.failed=[]}function i(){for(var e=u.failed,t=e.length;t--;)e[t]();u.status=3,u.passed=[],u.failed=[]}function o(e,t){e()||((new Date).getTime()-c<p?v.setTimeout(t):i())}function a(){o(function(){for(var e,t=d.styleSheets,n=t.length;n--;)if((e=(e=t[n]).ownerNode||e.owningElement)&&e.id===s.id)return r(),1},a)}var s,l,c,u;if(e=g._addCacheSuffix(e),m[e]?u=m[e]:(u={passed:[],failed:[]},m[e]=u),t&&u.passed.push(t),n&&u.failed.push(n),1!=u.status)if(2!=u.status)if(3!=u.status){if(u.status=1,(s=d.createElement("link")).rel="stylesheet",s.type="text/css",s.id="u"+h++,s.async=!1,s.defer=!1,c=(new Date).getTime(),"onload"in s&&!((n=navigator.userAgent.match(/WebKit\/(\d*)/))&&n[1]<536))s.onload=a,s.onerror=i;else{if(0<navigator.userAgent.indexOf("Firefox"))return(l=d.createElement("style")).textContent='@import "'+e+'"',function e(){o(function(){try{var e=l.sheet.cssRules;return r(),e}catch(e){}},e)}(),void f(l);a()}f(s),s.href=e}else i();else r()}}}),e(y,[c,f,h,a,m,p,g,o,d,v],function(i,c,u,d,l,t,e,r,o,f){function a(e,t){var n=t.attr("style");n=(n=e.serializeStyle(e.parseStyle(n),t[0].nodeName))||null,t.attr("data-mce-style",n)}function n(e,t){var n,r,i=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!=r||r!=n&&e.nodeValue.length)&&(i++,n=r);return i}function s(e,t){var n,r,i,o,a,s,l=this;l.doc=e,l.win=window,l.files={},l.counter=0,l.stdMode=!v||8<=e.documentMode,l.boxModel=!v||"CSS1Compat"==e.compatMode||l.stdMode,l.styleSheetLoader=new f(e),l.boundEvents=[],l.settings=t=t||{},l.schema=t.schema,l.styles=new u({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),l.fixDoc(e),l.events=t.ownEvents?new d(t.proxy):d.Event,l.attrHooks=(r=l,o={},a=(i=t).keep_values,s={set:function(e,t,n){i.url_converter&&(t=i.url_converter.call(i.url_converter_scope||r,t,n,e[0])),e.attr("data-mce-"+n,t).attr(n,t)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},o={style:{set:function(e,t){return null!==t&&"object"==typeof t?void e.css(t):(a&&e.attr("data-mce-style",t),void e.attr("style",t))},get:function(e){var t=e.attr("data-mce-style")||e.attr("style");return r.serializeStyle(r.parseStyle(t),e[0].nodeName)}}},a&&(o.href=o.src=s),o),n=t.schema?t.schema.getBlockElements():{},l.$=c.overrideDefaults(function(){return{context:e,element:l.getRoot()}}),l.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!n[e.nodeName]):!!n[e]}}var h=o.each,m=o.is,p=o.grep,g=o.trim,v=r.ie,y=/^([a-z0-9],?)+$/i,b=/^[ \t\r\n]*$/;return s.prototype={$$:function(e){return"string"==typeof e&&(e=this.get(e)),this.$(e)},root:null,fixDoc:function(t){var e,n=this.settings;if(v&&n.schema)for(e in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(e){t.createElement(e)}),n.schema.getCustomElements())t.createElement(e)},clone:function(t,e){var n,r,i=this;return!v||1!==t.nodeType||e?t.cloneNode(e):(r=i.doc,e?n.firstChild:(n=r.createElement(t.nodeName),h(i.getAttribs(t),function(e){i.setAttrib(n,e.nodeName,i.getAttrib(t,e.nodeName))}),n))},getRoot:function(){return this.settings.root_element||this.doc.body},getViewPort:function(e){var t=(e=e||this.win).document,t=this.boxModel?t.documentElement:t.body;return{x:e.pageXOffset||t.scrollLeft,y:e.pageYOffset||t.scrollTop,w:e.innerWidth||t.clientWidth,h:e.innerHeight||t.clientHeight}},getRect:function(e){var t;return e=this.get(e),t=this.getPos(e),e=this.getSize(e),{x:t.x,y:t.y,w:e.w,h:e.h}},getSize:function(e){var t,n;return e=this.get(e),t=this.getStyle(e,"width"),n=this.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,n,r){var i,o=this,a=[];for(e=o.get(e),r=r===ge,n=n||("BODY"!=o.getRoot().nodeName?o.getRoot().parentNode:null),m(t,"string")&&(t="*"===(i=t)?function(e){return 1==e.nodeType}:function(e){return o.is(e,i)});e&&e!=n&&e.nodeType&&9!==e.nodeType;){if(!t||t(e)){if(!r)return e;a.push(e)}e=e.parentNode}return r?a:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,(e=this.doc.getElementById(e))&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(e,t){return i(e,this.get(t)||this.settings.root_element||this.doc,[])},is:function(e,t){var n;if(e.length===ge){if("*"===t)return 1==e.nodeType;if(y.test(t)){for(t=t.toLowerCase().split(/,/),e=e.nodeName.toLowerCase(),n=t.length-1;0<=n;n--)if(t[n]==e)return!0;return!1}}if(e.nodeType&&1!=e.nodeType)return!1;var r=e.nodeType?[e]:e;return 0<i(t,r[0].ownerDocument||r[0],null,r).length},add:function(e,n,r,i,o){var a=this;return this.run(e,function(e){var t=m(n,"string")?a.doc.createElement(n):n;return a.setAttribs(t,r),i&&(i.nodeType?t.appendChild(i):a.setHTML(t,i)),o?t:e.appendChild(t)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r,i="";for(r in i+="<"+e,t)t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(i+=" "+r+'="'+this.encode(t[r])+'"');return void 0!==n?i+">"+n+"</"+e+">":i+" />"},createFragment:function(e){var t,n=this.doc,r=n.createElement("div"),i=n.createDocumentFragment();for(e&&(r.innerHTML=e);t=r.firstChild;)i.appendChild(t);return i},remove:function(e,t){return e=this.$$(e),(t?e.each(function(){for(var e;e=this.firstChild;)3==e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}):e).remove(),1<e.length?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n),this.settings.update_styles&&a(this,e)},getStyle:function(e,t,n){return e=this.$$(e),n?e.css(t):("float"==(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=r.ie&&r.ie<12?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[t]:ge)},setStyles:function(e,t){e=this.$$(e).css(t),this.settings.update_styles&&a(this,e)},removeAllAttribs:function(e){return this.run(e,function(e){for(var t=e.attributes,n=t.length-1;0<=n;n--)e.removeAttributeNode(t.item(n))})},setAttrib:function(e,t,n){var r,i,o=this.settings;""===n&&(n=null),r=(e=this.$$(e)).attr(t),e.length&&((i=this.attrHooks[t])&&i.set?i.set(e,n,t):e.attr(t,n),r!=n&&o.onSetAttrib&&o.onSetAttrib({attrElm:e,attrName:t,attrValue:n}))},setAttribs:function(e,t){var r=this;r.$$(e).each(function(e,n){h(t,function(e,t){r.setAttrib(n,t,e)})})},getAttrib:function(e,t,n){var r,i;return i=void 0===(i=(e=this.$$(e)).length?(r=this.attrHooks[t])&&r.get?r.get(e,t):e.attr(t):i)?n||"":i},getPos:function(e,t){var n,r,i=0,o=0,a=this.doc,s=a.body;if(t=t||s,e=this.get(e)){if(t===s&&e.getBoundingClientRect&&"static"===c(s).css("position"))return r=e.getBoundingClientRect(),t=this.boxModel?a.documentElement:s,{x:i=r.left+(a.documentElement.scrollLeft||s.scrollLeft)-t.clientLeft,y:o=r.top+(a.documentElement.scrollTop||s.scrollTop)-t.clientTop};for(n=e;n&&n!=t&&n.nodeType;)i+=n.offsetLeft||0,o+=n.offsetTop||0,n=n.offsetParent;for(n=e.parentNode;n&&n!=t&&n.nodeType;)i-=n.scrollLeft||0,o-=n.scrollTop||0,n=n.parentNode}return{x:i,y:o}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n=this.doc;if(this!==s.DOM&&n===document){var r=s.DOM.addedStyles;if((r=r||[])[e])return;r[e]=!0,s.DOM.addedStyles=r}(t=n.getElementById("mceDefaultStyles"))||((t=n.createElement("style")).id="mceDefaultStyles",t.type="text/css",(r=n.getElementsByTagName("head")[0]).firstChild?r.insertBefore(t,r.firstChild):r.appendChild(t)),t.styleSheet?t.styleSheet.cssText+=e:t.appendChild(n.createTextNode(e))},loadCSS:function(e){var n,r=this,i=r.doc;return r!==s.DOM&&i===document?void s.DOM.loadCSS(e):(e=e||"",n=i.getElementsByTagName("head")[0],void h(e.split(","),function(e){var t;e=o._addCacheSuffix(e),r.files[e]||(r.files[e]=!0,t=r.create("link",{rel:"stylesheet",href:e}),v&&i.documentMode&&i.recalc&&(t.onload=function(){i.recalc&&i.recalc(),t.onload=null}),n.appendChild(t))}))},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,n){this.$$(e).toggleClass(t,n).each(function(){""===this.className&&c(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"==this.$$(e).css("display")},uniqueId:function(e){return(e||"mce_")+this.counter++},setHTML:function(e,n){e=this.$$(e),v?e.each(function(e,t){if(!1!==t.canHaveHTML){for(;t.firstChild;)t.removeChild(t.firstChild);try{t.innerHTML="<br>"+n,t.removeChild(t.firstChild)}catch(e){c("<div>").html("<br>"+n).contents().slice(1).appendTo(t)}return n}}):e.html(n)},getOuterHTML:function(e){return 1==(e=this.get(e)).nodeType&&"outerHTML"in e?e.outerHTML:c("<div>").append(c(e).clone()).html()},setOuterHTML:function(e,t){var n=this;n.$$(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}n.remove(c(this).html(t),!0)})},decode:e.decode,encode:e.encodeAllRaw,insertAfter:function(e,r){return r=this.get(r),this.run(e,function(e){var t=r.parentNode,n=r.nextSibling;return n?t.insertBefore(e,n):t.appendChild(e),e})},replace:function(t,e,n){return this.run(e,function(e){return m(e,"array")&&(t=t.cloneNode(!0)),n&&h(p(e.childNodes),function(e){t.appendChild(e)}),e.parentNode.replaceChild(t,e)})},rename:function(t,e){var n,r=this;return t.nodeName!=e.toUpperCase()&&(n=r.create(e),h(r.getAttribs(t),function(e){r.setAttrib(n,e.nodeName,r.getAttrib(t,e.nodeName))}),r.replace(n,t,1)),n||t},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!=n;)n=n.parentNode;if(r==n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return this.styles.toHex(o.trim(e))},run:function(e,n,r){var i,o=this;return!!(e="string"==typeof e?o.get(e):e)&&(r=r||this,e.nodeType||!e.length&&0!==e.length?n.call(r,e):(i=[],h(e,function(e,t){e&&("string"==typeof e&&(e=o.get(e)),i.push(n.call(r,e,t)))}),i))},getAttribs:function(e){var t;if(!(e=this.get(e)))return[];if(v){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});return e.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n,r,i,o,a,s=0;if(e=e.firstChild){o=new l(e,e.parentNode),t=t||(this.schema?this.schema.getNonEmptyElements():null);do{if(1===(i=e.nodeType)){if(e.getAttribute("data-mce-bogus"))continue;if(a=e.nodeName.toLowerCase(),t&&t[a]){if("br"!==a)return!1;s++;continue}for(n=(r=this.getAttribs(e)).length;n--;)if("name"===(a=r[n].nodeName)||"data-mce-bookmark"===a)return!1}if(8==i)return!1;if(3===i&&!b.test(e.nodeValue))return!1}while(e=o.next())}return s<=1},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new t(this)},nodeIndex:n,split:function(e,t,n){function s(e){var t,n,r,i=e.childNodes,o=e.nodeType;if(1!=o||"bookmark"!=e.getAttribute("data-mce-type")){for(t=i.length-1;0<=t;t--)s(i[t]);if(9!=o){if(3==o&&0<e.nodeValue.length){var a=g(e.nodeValue).length;if(!l.isBlock(e.parentNode)||0<a||0===a&&(r=(n=e).previousSibling&&"SPAN"==n.previousSibling.nodeName,n=n.nextSibling&&"SPAN"==n.nextSibling.nodeName,r&&n))return}else if(1==o&&(1==(i=e.childNodes).length&&i[0]&&1==i[0].nodeType&&"bookmark"==i[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(i[0],e),i.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;l.remove(e)}return e}}var r,i,l=this,o=l.createRng();return e&&t?(o.setStart(e.parentNode,l.nodeIndex(e)),o.setEnd(t.parentNode,l.nodeIndex(t)),r=o.extractContents(),(o=l.createRng()).setStart(t.parentNode,l.nodeIndex(t)+1),o.setEnd(e.parentNode,l.nodeIndex(e)+1),i=o.extractContents(),(o=e.parentNode).insertBefore(s(r),e),n?o.insertBefore(n,e):o.insertBefore(t,e),o.insertBefore(s(i),e),l.remove(e),n||t):void 0},bind:function(e,t,n,r){if(o.isArray(e)){for(var i=e.length;i--;)e[i]=this.bind(e[i],t,n,r);return e}return!this.settings.collect||e!==this.doc&&e!==this.win||this.boundEvents.push([e,t,n,r]),this.events.bind(e,t,n,r||this)},unbind:function(e,t,n){var r;if(o.isArray(e)){for(r=e.length;r--;)e[r]=this.unbind(e[r],t,n);return e}if(this.boundEvents&&(e===this.doc||e===this.win))for(r=this.boundEvents.length;r--;){var i=this.boundEvents[r];e!=i[0]||t&&t!=i[1]||n&&n!=i[2]||this.events.unbind(i[0],i[1],i[2])}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e&&1==e.nodeType?(t=e.getAttribute("data-mce-contenteditable"))&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null:null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t&&null===(n=this.getContentEditable(e));e=e.parentNode);return n},destroy:function(){if(this.boundEvents){for(var e=this.boundEvents.length;e--;){var t=this.boundEvents[e];this.events.unbind(t[0],t[1],t[2])}this.boundEvents=null}i.setDocument&&i.setDocument(),this.win=this.doc=this.root=this.events=this.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this,i=t;if(e)for("string"==typeof i&&(i=function(e){return r.is(e,t)}),e=e[n];e;e=e[n])if(i(e))return e;return null}},s.DOM=new s(document),s.nodeIndex=n,s}),e(b,[y,d],function(e,d){function t(){var c={},r=[],i={},o=[],u=0;this.isDone=function(e){return 2==c[e]},this.markDone=function(e){c[e]=2},this.add=this.load=function(e,t,n){null==c[e]&&(r.push(e),c[e]=0),t&&(i[e]||(i[e]=[]),i[e].push({func:t,scope:n||this}))},this.remove=function(e){delete c[e],delete i[e]},this.loadQueue=function(e,t){this.loadScripts(r,e,t)},this.loadScripts=function(t,e,n){function s(e){a(i[e],function(e){e.func.call(e.scope)}),i[e]=void 0}var l;o.push({func:e,scope:n||this}),(l=function(){var e=h(t);t.length=0,a(e,function(e){return 2==c[e]?void s(e):void(1!=c[e]&&(c[e]=1,u++,n=e,r=function(){c[e]=2,u--,s(e),l()},o=(i=f).uniqueId(),(a=document.createElement("script")).id=o,a.type="text/javascript",a.src=d._addCacheSuffix(n),"onreadystatechange"in a?a.onreadystatechange=function(){/loaded|complete/.test(a.readyState)&&t()}:a.onload=t,a.onerror=function(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+n)},(document.getElementsByTagName("head")[0]||document.body).appendChild(a)));function t(){i.remove(o),a&&(a.onreadystatechange=a.onload=a=null),r()}var n,r,i,o,a}),u||(a(o,function(e){e.func.call(e.scope)}),o.length=0)})()}}var f=e.DOM,a=d.each,h=d.grep;return t.ScriptLoader=new t,t}),e(w,[b,d],function(s,e){function l(){this.items=[],this.urls={},this.lookup={}}var c=e.each;return l.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:ge},dependencies:function(e){var t;return(t=this.lookup[e]?this.lookup[e].dependencies:t)||[]},requireLangPack:function(e,t){var n=l.language;if(n&&!1!==l.languageLoad){if(t)if(-1!=(t=","+t+",").indexOf(","+n.substr(0,2)+","))n=n.substr(0,2);else if(-1==t.indexOf(","+n+","))return;s.ScriptLoader.add(this.urls[e]+"/langs/"+n+".js")}},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},remove:function(e){delete this.urls[e],delete this.lookup[e]},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(e,t){var n=this.urls[e];c(t,function(e){s.ScriptLoader.add(n+"/"+e)})},load:function(t,n,r,i){function e(){var e=o.dependencies(t);c(e,function(e){e=o.createUrl(n,e);o.load(e.resource,e,ge,ge)}),r&&(i?r.call(i):r.call(s))}var o=this,a=n;o.urls[t]||(0!==(a="object"==typeof n?n.prefix+n.resource+n.suffix:a).indexOf("/")&&-1==a.indexOf("://")&&(a=l.baseURL+"/"+a),o.urls[t]=a.substring(0,a.lastIndexOf("/")),o.lookup[t]?e():s.ScriptLoader.add(a,e,i))}},l.PluginManager=new l,l.ThemeManager=new l,l}),e(x,[],function(){function e(t){return function(e){return!!e&&e.nodeType==t}}function t(r){return r=r.toLowerCase().split(" "),function(e){var t,n;if(e&&e.nodeType)for(n=e.nodeName.toLowerCase(),t=0;t<r.length;t++)if(n===r[t])return!0;return!1}}function n(t){return function(e){if(i(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}}var i=e(1);return{isText:e(3),isElement:i,isComment:e(8),isBr:t("br"),isContentEditableTrue:n("true"),isContentEditableFalse:n("false"),matchNodeNames:t,hasPropValue:function(t,n){return function(e){return i(e)&&e[t]===n}},hasAttributeValue:function(t,n){return function(e){return i(e)&&e.getAttribute(t)===n}},matchStyleValues:function(n,r){return r=r.toLowerCase().split(" "),function(e){var t;if(i(e))for(t=0;t<r.length;t++)if(getComputedStyle(e,null).getPropertyValue(n)===r[t])return!0;return!1}},isBogus:function(e){return i(e)&&e.hasAttribute("data-mce-bogus")}}}),e($,[],function(){var t="\ufeff";return{isZwsp:function(e){return e==t},ZWSP:t,trim:function(e){return e.replace(new RegExp(t,"g"),"")}}}),e(C,[x,$],function(e,o){function t(e){return c(e)&&(e=e.parentNode),i(e)&&e.hasAttribute("data-mce-caret")}function n(e){return c(e)&&o.isZwsp(e.data)}function a(e){return t(e)||n(e)}function r(e){var t=e.parentNode;t&&t.removeChild(e)}function s(e){return c(e)&&e.data[0]==o.ZWSP}function l(e){return c(e)&&e.data[e.data.length-1]==o.ZWSP}var i=e.isElement,c=e.isText;return{isCaretContainer:a,isCaretContainerBlock:t,isCaretContainerInline:n,insertInline:function(e,t){var n,r=e.ownerDocument.createTextNode(o.ZWSP),i=e.parentNode;if(t){if(n=e.previousSibling,c(n)){if(a(n))return n;if(l(n))return n.splitText(n.data.length-1)}i.insertBefore(r,e)}else{if(n=e.nextSibling,c(n)){if(a(n))return n;if(s(n))return n.splitText(1),n}e.nextSibling?i.insertBefore(r,e.nextSibling):i.appendChild(r)}return r},insertBlock:function(e,t,n){var r=t.ownerDocument;return(e=r.createElement(e)).setAttribute("data-mce-caret",n?"before":"after"),e.setAttribute("data-mce-bogus","all"),e.appendChild(r.createTextNode(" ")),r=t.parentNode,n?r.insertBefore(e,t):t.nextSibling?r.insertBefore(e,t.nextSibling):r.appendChild(e),e},remove:function(e){var t;i(e)&&a(e)&&("&nbsp;"!=e.innerHTML?e.removeAttribute("data-mce-caret"):r(e)),c(e)&&(t=o.trim(function(e){try{return e.nodeValue}catch(e){return""}}(e)),e=e,0===(t=t).length?r(e):e.nodeValue=t)},startsWithCaretContainer:s,endsWithCaretContainer:l}}),e(S,[d,m,x,p,C],function(o,y,e,t,n){function r(v){this.walk=function(e,i){function o(e){var t=e[0];return 3===t.nodeType&&t===r&&c>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===d&&0<e.length&&t===u&&3===t.nodeType&&e.splice(e.length-1,1),e}function a(e,t,n){for(var r=[];e&&e!=n;e=e[t])r.push(e);return r}function t(e,t){do{if(e.parentNode==t)return e}while(e=e.parentNode)}function n(e,t,n){var r=n?"nextSibling":"previousSibling";for((p=e).parentNode;p&&p!=t;p=s)s=p.parentNode,(l=a(p==e?p:p[r],r)).length&&(n||l.reverse(),i(o(l)))}var s,l,r=e.startContainer,c=e.startOffset,u=e.endContainer,d=e.endOffset,e=v.select("td[data-mce-selected],th[data-mce-selected]");if(0<e.length)g(e,function(e){i([e])});else{if(1==r.nodeType&&r.hasChildNodes()&&(r=r.childNodes[c]),1==u.nodeType&&u.hasChildNodes()&&(h=d,e=(f=u).childNodes,--h>e.length-1?h=e.length-1:h<0&&(h=0),u=e[h]||f),r==u)return i(o([r]));for(var f,h,m=v.findCommonAncestor(r,u),p=r;p;p=p.parentNode){if(p===u)return n(r,m,!0);if(p===m)break}for(p=u;p;p=p.parentNode){if(p===r)return n(u,m);if(p===m)break}h=t(r,m)||r,f=t(u,m)||u,n(r,h,!0),(l=a(h==r?h:h.nextSibling,"nextSibling",f==u?f.nextSibling:f)).length&&i(o(l)),n(u,f)}},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,r=e.startOffset,i=e.endContainer,e=e.endOffset;return n==i&&3==n.nodeType?0<r&&r<n.nodeValue.length&&(n=(i=t(n,r)).previousSibling,r<e?(n=i=t(i,e-=r).previousSibling,e=i.nodeValue.length,r=0):e=0):(3==n.nodeType&&0<r&&r<n.nodeValue.length&&(n=t(n,r),r=0),3==i.nodeType&&0<e&&e<i.nodeValue.length&&(e=(i=t(i,e).previousSibling).nodeValue.length)),{startContainer:n,startOffset:r,endContainer:i,endOffset:e}},this.normalize=function(m){function e(e){function t(e,t){for(var n=new y(e,v.getParent(e.parentNode,v.isBlock)||l);e=n[t?"prev":"next"]();)if("BR"===e.nodeName)return 1}function n(e,t){var n,r,i;if(t=t||c,i=v.getParent(t.parentNode,v.isBlock)||l,e&&"BR"==t.nodeName&&d&&v.isEmpty(i))return c=t.parentNode,u=v.nodeIndex(t),p=!0,0;for(n=new y(t,i);o=n[e?"prev":"next"]();){if("false"===v.getContentEditableParent(o)||w(o))return;if(3===o.nodeType&&0<o.nodeValue.length)return c=o,u=e?o.nodeValue.length:0,p=!0,0;if(v.isBlock(o)||f[o.nodeName.toLowerCase()])return;r=o}g&&r&&(c=r,p=!0,u=0)}var r,o,i,a,s,l=v.getRoot(),c=m[(e?"start":"end")+"Container"],u=m[(e?"start":"end")+"Offset"],d=1==c.nodeType&&u===c.childNodes.length,f=v.schema.getNonEmptyElements(),h=e;if(!w(c)){if(1==c.nodeType&&u>c.childNodes.length-1&&(h=!1),9===c.nodeType&&(c=v.getRoot(),u=0),c===l){if(h&&(o=c.childNodes[0<u?u-1:0])){if(w(o))return;if(f[o.nodeName]||"TABLE"==o.nodeName)return}if(c.hasChildNodes()){if(u=Math.min(!h&&0<u?u-1:u,c.childNodes.length-1),c=c.childNodes[u],u=0,!g&&c===l.lastChild&&"TABLE"===c.nodeName)return;if(function(e){for(;e&&e!=l;){if(b(e))return 1;e=e.parentNode}}(c)||w(c))return;if(c.hasChildNodes()&&!/TABLE/.test(c.nodeName)){r=new y(o=c,l);do{if(b(o)||w(o)){p=!1;break}if(3===o.nodeType&&0<o.nodeValue.length){u=h?0:o.nodeValue.length,c=o,p=!0;break}if(f[o.nodeName.toLowerCase()]&&(!(s=o)||!/^(TD|TH|CAPTION)$/.test(s.nodeName))){u=v.nodeIndex(o),c=o.parentNode,"IMG"!=o.nodeName||h||u++,p=!0;break}}while(o=h?r.next():r.prev())}}}g&&(3===c.nodeType&&0===u&&n(!0),1===c.nodeType&&(!(o=(o=c.childNodes[u])||c.childNodes[u-1])||"BR"!==o.nodeName||(a="A",(i=o).previousSibling&&i.previousSibling.nodeName==a)||t(o)||t(o,!0)||n(!0,o))),h&&!g&&3===c.nodeType&&u===c.nodeValue.length&&n(!1),p&&m["set"+(e?"Start":"End")](c,u)}}var p,g=m.collapsed;return e(!0),g||e(),p&&g&&m.collapse(!0),p}}var g=o.each,b=e.isContentEditableFalse,w=n.isCaretContainer;return r.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},r.getCaretRangeFromPoint=function(t,n,r){var i,e;if(r.caretPositionFromPoint)e=r.caretPositionFromPoint(t,n),(i=r.createRange()).setStart(e.offsetNode,e.offset),i.collapse(!0);else if(r.caretRangeFromPoint)i=r.caretRangeFromPoint(t,n);else if(r.body.createTextRange){i=r.body.createTextRange();try{i.moveToPoint(t,n),i.collapse(!0)}catch(e){i=function(e,n,t){var r=t.elementFromPoint(e,n),i=t.body.createTextRange();if(r&&"HTML"!=r.tagName||(r=t.body),i.moveToElementText(r),0<(r=(r=o.toArray(i.getClientRects())).sort(function(e,t){return(e=Math.abs(Math.max(e.top-n,e.bottom-n)))-(t=Math.abs(Math.max(t.top-n,t.bottom-n)))})).length){n=(r[0].bottom+r[0].top)/2;try{return i.moveToPoint(e,n),i.collapse(!0),i}catch(e){}}return null}(t,n,r)}}return i},r.getSelectedNode=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset==n+1?t.childNodes[n]:null},r.getNode=function(e,t){return 1==e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},r}),e(k,[S,o,i],function(i,t,a){return function(o){var n,r=[];"onselectionchange"in o.getDoc()||o.on("NodeChange Click MouseUp KeyUp Focus",function(e){var t=o.selection.getRng(),t={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset};"nodechange"!=e.type&&i.compareRanges(t,n)||o.fire("SelectionChange"),n=t}),o.on("contextmenu",function(){o.fire("SelectionChange")}),o.on("SelectionChange",function(){var e=o.selection.getStart(!0);!t.range&&o.selection.isCollapsed()||!function(e){var t,n=o.$(e).parentsUntil(o.getBody()).add(e);if(n.length===r.length){for(t=n.length;0<=t&&n[t]===r[t];t--);if(-1===t)return r=n,1}return r=n,0}(e)&&o.dom.isChildOf(e,o.getBody())&&o.nodeChanged({selectionChange:!0})}),o.on("MouseUp",function(e){e.isDefaultPrevented()||("IMG"==o.selection.getNode().nodeName?a.setEditorTimeout(o,function(){o.nodeChanged()}):o.nodeChanged())}),this.nodeChanged=function(e){var t,n,r,i=o.selection;o.initialized&&i&&!o.settings.disable_nodechange&&!o.readonly&&(r=o.getBody(),"IMG"==(t=(t=i.getStart()||r).ownerDocument!=o.getDoc()||!o.dom.isChildOf(t,r)?r:t).nodeName&&i.isCollapsed()&&(t=t.parentNode),n=[],o.dom.getParent(t,function(e){return e===r||void n.push(e)}),(e=e||{}).element=t,e.parents=n,o.fire("NodeChange",e))}}}),e(E,[],function(){function i(e,t,n){var r,i,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(r=e[a])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[a])return r}}function a(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}var o=/^[ \t\r\n]*$/,s={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return a.prototype={replace:function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},attr:function(e,t){var n,r;if("string"!=typeof e){for(r in e)this.attr(r,e[r]);return this}if(n=this.attributes){if(void 0===t)return n.map[e];if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),this;return this}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,this}},clone:function(){var e,t,n,r,i,o=new a(this.name,this.type);if(n=this.attributes){for((i=[]).map={},e=0,t=n.length;e<t;e++)"id"!==(r=n[e]).name&&(i[i.length]={name:r.name,value:r.value},i.map[r.name]=r.value);o.attributes=i}return o.value=this.value,o.shortEnded=this.shortEnded,o},wrap:function(e){return this.parent.insert(e,this),e.append(this),this},unwrap:function(){for(var e,t=this.firstChild;t;)e=t.next,this.insert(t,this,!0),t=e;this.remove()},remove:function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):n.next=t,e.lastChild===this?(e.lastChild=n)&&(n.next=null):t.prev=n,this.parent=this.next=this.prev=null),this},append:function(e){var t;return e.parent&&e.remove(),(t=this.lastChild)?((t.next=e).prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},insert:function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,(e.next=t).prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,(e.prev=t).next=e),e.parent=r,e},getAll:function(e){for(var t=[],n=this.firstChild;n;n=i(n,this))n.name===e&&t.push(n);return t},empty:function(){var e,t,n;if(this.firstChild){for(e=[],n=this.firstChild;n;n=i(n,this))e.push(n);for(t=e.length;t--;)(n=e[t]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return this.firstChild=this.lastChild=null,this},isEmpty:function(e){var t,n,r=this.firstChild;if(r)do{if(1===r.type){if(r.attributes.map["data-mce-bogus"])continue;if(e[r.name])return!1;for(t=r.attributes.length;t--;)if("name"===(n=r.attributes[t].name)||0===n.indexOf("data-mce-bookmark"))return!1}if(8===r.type)return!1;if(3===r.type&&!o.test(r.value))return!1}while(r=i(r,this));return!0},walk:function(e){return i(this,null,e)}},a.create=function(e,t){var n,r=new a(e,s[e]||1);if(t)for(n in t)r.attr(n,t[n]);return r},a}),e(A,[d],function(e){function O(e,t){return e?e.split(t||" "):[]}function B(e,n){var r;return e&&(r={},H(e="string"==typeof e?{"*":e}:e,function(e,t){r[t]=r[t.toUpperCase()]=("map"==n?U:V)(e,/[, ]/)})),r}var F={},L={},U=e.makeMap,H=e.each,z=e.extend,V=e.explode,j=e.inArray;return function(i){function e(e,t,n){var r=i[e];return r?r=U(r,/[, ]/,U(r.toUpperCase(),/[, ]/)):(r=F[e])||(r=U(t," ",U(t.toUpperCase()," ")),r=z(r,n),F[e]=r),r}function C(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function t(e){var t,n,r,i,o,a,s,l,c,u,d,f,h,m,p,g,v,y,b,w=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,x=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,$=/[*?+]/;if(e)for(e=O(e,","),N["@"]&&(g=N["@"].attributes,v=N["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(o=w.exec(e[t])){if(m=o[1],c=o[2],p=o[3],l=o[5],a={attributes:f={},attributesOrder:h=[]},"#"===m&&(a.paddEmpty=!0),"-"===m&&(a.removeEmpty=!0),"!"===o[4]&&(a.removeEmptyAttrs=!0),g){for(y in g)f[y]=g[y];h.push.apply(h,v)}if(l)for(r=0,i=(l=O(l,"|")).length;r<i;r++)if(o=x.exec(l[r])){if(s={},d=o[1],u=o[2].replace(/::/g,":"),m=o[3],b=o[4],"!"===d&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(u),s.required=!0),"-"===d){delete f[u],h.splice(j(h,u),1);continue}m&&("="===m&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:u,value:b}),s.defaultValue=b),":"===m&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:u,value:b}),s.forcedValue=b),"<"===m&&(s.validValues=U(b,"?"))),$.test(u)?(a.attributePatterns=a.attributePatterns||[],s.pattern=C(u),a.attributePatterns.push(s)):(f[u]||h.push(u),f[u]=s)}g||"@"!=c||(g=f,v=h),p&&(a.outputName=c,N[p]=a),$.test(c)?(a.pattern=C(c),R.push(a)):N[c]=a}}function n(e){N={},R=[],t(e),H(c,function(e,t){_[t]=e.children})}function r(e){var i=/^(~)?(.+)$/;e&&(F.text_block_elements=F.block_elements=null,H(O(e,","),function(e){var t=i.exec(e),e="~"===t[1],n=e?"span":"div",r=t[2];_[r]=_[n],D[r]=n,e||(p[r.toUpperCase()]={},p[r]={}),N[r]||(e=N[n],delete(e=z({},e)).removeEmptyAttrs,delete e.removeEmpty,N[r]=e),H(_,function(e,t){e[n]&&(_[t]=e=z({},_[t]),e[r]=e[n])})}))}function o(e){var r=/^([+\-]?)(\w+)\[([^\]]+)\]$/;F[i.schema]=null,e&&H(O(e,","),function(e){var t,n,e=r.exec(e);e&&(n=e[1],t=n?_[e[2]]:_[e[2]]={"#comment":{}},t=_[e[2]],H(O(e[3],"|"),function(e){"-"===n?delete t[e]:t[e]={}}))})}function a(e){var t,n=N[e];if(n)return n;for(t=R.length;t--;)if((n=R[t]).pattern.test(e))return n}var s,l,c,u,d,f,h,m,p,g,v,y,b,w,x,$,S,k,E,A,T=this,N={},_={},R=[],D={},M={};function I(e,t,n){function r(e,t){for(var n={},r=0,i=e.length;r<i;r++)n[e[r]]=t||{};return n}var i,o,a,s=arguments;for(t=t||"","string"==typeof(n=n||[])&&(n=O(n)),o=3;o<s.length;o++)"string"==typeof s[o]&&(s[o]=O(s[o])),n.push.apply(n,s[o]);for(i=(e=O(e)).length;i--;)a=[].concat(x,O(t)),A[e[i]]={attributes:r(a),attributesOrder:a,children:r(n,L)}}function P(e,t){var n,r,i,o=(e=O(e)).length;for(t=O(t);o--;)for(n=A[e[o]],r=0,i=t.length;r<i;r++)n.attributes[t[r]]={},n.attributesOrder.push(t[r])}w=(i=i||{}).schema,A={},c=F[w]||(x=O("id accesskey class dir lang style tabindex title"),$=O("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),S=O("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=w&&(x.push.apply(x,O("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),$.push.apply($,O("article aside details dialog figure header footer hgroup section nav")),S.push.apply(S,O("audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"))),"html5-strict"!=w&&(x.push("xml:lang"),E=O("acronym applet basefont big font strike tt"),S.push.apply(S,E),H(E,function(e){I(e,"",S)}),E=O("center dir isindex noframes"),$.push.apply($,E),k=[].concat($,S),H(E,function(e){I(e,"",k)})),k=k||[].concat($,S),I("html","manifest","head body"),I("head","","base command link meta noscript script style title"),I("title hr noscript br"),I("base","href target"),I("link","href rel media hreflang type sizes hreflang"),I("meta","name http-equiv content charset"),I("style","media type scoped"),I("script","src async defer type charset"),I("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",k),I("address dt dd div caption","",k),I("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",S),I("blockquote","cite",k),I("ol","reversed start type","li"),I("ul","","li"),I("li","value",k),I("dl","","dt dd"),I("a","href target rel media hreflang type",S),I("q","cite",S),I("ins del","cite datetime",k),I("img","src sizes srcset alt usemap ismap width height"),I("iframe","src name width height",k),I("embed","src type width height"),I("object","data type typemustmatch name usemap form width height",k,"param"),I("param","name value"),I("map","name",k,"area"),I("area","alt coords shape href target rel media hreflang type"),I("table","border","caption colgroup thead tfoot tbody tr"+("html4"==w?" col":"")),I("colgroup","span","col"),I("col","span"),I("tbody thead tfoot","","tr"),I("tr","","td th"),I("td","colspan rowspan headers",k),I("th","colspan rowspan headers scope abbr",k),I("form","accept-charset action autocomplete enctype method name novalidate target",k),I("fieldset","disabled form name",k,"legend"),I("label","form for",S),I("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),I("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==w?k:S),I("select","disabled form multiple name required size","option optgroup"),I("optgroup","disabled label","option"),I("option","disabled label selected value"),I("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),I("menu","type label",k,"li"),I("noscript","",k),"html4"!=w&&(I("wbr"),I("ruby","",S,"rt rp"),I("figcaption","",k),I("mark rt rp summary bdi","",S),I("canvas","width height",k),I("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",k,"track source"),I("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",k,"track source"),I("picture","","img source"),I("source","src srcset type media sizes"),I("track","kind src srclang label default"),I("datalist","",S,"option"),I("article section nav aside header footer","",k),I("hgroup","","h1 h2 h3 h4 h5 h6"),I("figure","",k,"figcaption"),I("time","datetime",S),I("dialog","open",k),I("command","type label icon disabled checked radiogroup command"),I("output","for form name",S),I("progress","value max",S),I("meter","value min max low high optimum",S),I("details","open",k,"summary"),I("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=w&&(P("script","language xml:space"),P("style","xml:space"),P("object","declare classid code codebase codetype archive standby align border hspace vspace"),P("embed","align name hspace vspace"),P("param","valuetype type"),P("a","charset name rev shape coords"),P("br","clear"),P("applet","codebase archive code object alt name width height align hspace vspace"),P("img","name longdesc align border hspace vspace"),P("iframe","longdesc frameborder marginwidth marginheight scrolling align"),P("font basefont","size color face"),P("input","usemap align"),P("select","onchange"),P("textarea"),P("h1 h2 h3 h4 h5 h6 div p legend caption","align"),P("ul","type compact"),P("li","type"),P("ol dl menu dir","compact"),P("pre","width xml:space"),P("hr","align noshade size width"),P("isindex","prompt"),P("table","summary width frame rules cellspacing cellpadding align bgcolor"),P("col","width align char charoff valign"),P("colgroup","width align char charoff valign"),P("thead","align char charoff valign"),P("tr","align char charoff valign bgcolor"),P("th","axis align char charoff valign nowrap bgcolor width height"),P("form","accept"),P("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),P("tfoot","align char charoff valign"),P("tbody","align char charoff valign"),P("area","nohref"),P("body","background bgcolor text link vlink alink")),"html4"!=w&&(P("input button select textarea","autofocus"),P("input textarea","placeholder"),P("a","download"),P("link script img","crossorigin"),P("iframe","sandbox seamless allowfullscreen")),H(O("a form meter progress dfn"),function(e){A[e]&&delete A[e].children[e]}),delete A.caption.children.table,delete A.script,F[w]=A),!1===i.verify_html&&(i.valid_elements="*[*]"),s=B(i.valid_styles),l=B(i.invalid_styles,"map"),m=B(i.valid_classes,"map"),u=e("whitespace_elements","pre script noscript style textarea video audio iframe object"),d=e("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),f=e("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=e("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),g=e("non_empty_elements","td th iframe video audio object script",f),v=e("move_caret_before_on_enter_elements","table",g),y=e("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),p=e("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",y),b=e("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),H((i.special||"script noscript style textarea").split(" "),function(e){M[e]=new RegExp("</"+e+"[^>]*>","gi")}),i.valid_elements?n(i.valid_elements):(H(c,function(e,t){N[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},_[t]=e.children}),"html5"!=i.schema&&H(O("strong/b em/i"),function(e){e=O(e,"/"),N[e[1]].outputName=e[0]}),H(O("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){N[e]&&(N[e].removeEmpty=!0)}),H(O("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){N[e].paddEmpty=!0}),H(O("span"),function(e){N[e].removeEmptyAttrs=!0})),r(i.custom_elements),o(i.valid_children),t(i.extended_valid_elements),o("+ol[ul|ol],+ul[ul|ol]"),i.invalid_elements&&H(V(i.invalid_elements),function(e){N[e]&&delete N[e]}),a("span")||t("span[!data-mce-type|*]"),T.children=_,T.getValidStyles=function(){return s},T.getInvalidStyles=function(){return l},T.getValidClasses=function(){return m},T.getBoolAttrs=function(){return h},T.getBlockElements=function(){return p},T.getTextBlockElements=function(){return y},T.getTextInlineElements=function(){return b},T.getShortEndedElements=function(){return f},T.getSelfClosingElements=function(){return d},T.getNonEmptyElements=function(){return g},T.getMoveCaretBeforeOnEnterElements=function(){return v},T.getWhiteSpaceElements=function(){return u},T.getSpecialElements=function(){return M},T.isValidChild=function(e,t){e=_[e];return!(!e||!e[t])},T.isValid=function(e,t){var n,r,i=a(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},T.getElementRule=a,T.getCustomElements=function(){return D},T.addValidElements=t,T.setValidElements=n,T.addCustomElements=r,T.addValidChildren=o,T.elements=N}}),e(T,[A,g,d],function(e,H,z){function V(e,t,n){var r,i,o=1,a=e.getShortEndedElements(),s=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g;for(s.lastIndex=r=n;i=s.exec(t);){if(r=s.lastIndex,"/"===i[1])o--;else if(!i[1]){if(i[2]in a)continue;o++}if(0===o)break}return r}function t(L,U){function t(){}var n=this;L=L||{},n.schema=U=U||new e,!1!==L.fix_self_closing&&(L.fix_self_closing=!0),r("comment cdata text start end pi doctype".split(" "),function(e){e&&(n[e]=L[e]||t)}),n.parse=function(e){function t(e){for(var t,n=S.length;n--&&S[n].name!==e;);if(0<=n){for(t=S.length-1;n<=t;t--)(e=S[t]).valid&&$.end(e.name);S.length=n}}function n(e,t,n,r,i){var o,a;if(n=(t=t.toLowerCase())in I?t:E(n||r||i||""),P&&!u&&0!==t.indexOf("data-")){if(!(o=g[t])&&v){for(a=v.length;a--&&!(o=v[a]).pattern.test(t););-1===a&&(o=null)}if(!o)return;if(o.validValues&&!(n in o.validValues))return}if(A[t]&&!L.allow_script_urls){var s=n.replace(/[\s\u0000-\u001F]+/g,"");try{s=decodeURIComponent(s)}catch(e){s=unescape(s)}if(T.test(s))return;if(!L.allow_html_data_urls&&N.test(s)&&!/^data:image\//i.test(s))return}l.map[t]=n,l.push({name:t,value:n})}for(var r,i,o,l,a,s,c,u,d,f,h,m,p,g,v,y,b,w,x,$=this,C=0,S=[],k=0,E=H.decode,A=z.makeMap("src,href,data,background,formaction,poster"),T=/((java|vb)script|mhtml):/i,N=/^data:/i,_=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),R=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,D=U.getShortEndedElements(),M=L.self_closing_elements||U.getSelfClosingElements(),I=U.getBoolAttrs(),P=L.validate,O=L.remove_internals,B=L.fix_self_closing,F=U.getSpecialElements();r=_.exec(e);){if(C<r.index&&$.text(E(e.substr(C,r.index-C))),i=r[6])t(i=":"===(i=i.toLowerCase()).charAt(0)?i.substr(1):i);else if(i=r[7]){if(d=(i=":"===(i=i.toLowerCase()).charAt(0)?i.substr(1):i)in D,B&&M[i]&&0<S.length&&S[S.length-1].name===i&&t(i),!P||(f=U.getElementRule(i))){if(h=!0,P&&(g=f.attributes,v=f.attributePatterns),(p=r[8])?((u=-1!==p.indexOf("data-mce-type"))&&O&&(h=!1),(l=[]).map={},p.replace(R,n)):(l=[]).map={},P&&!u){if(y=f.attributesRequired,b=f.attributesDefault,w=f.attributesForced,f.removeEmptyAttrs&&!l.length&&(h=!1),w)for(a=w.length;a--;)c=(m=w[a]).name,"{$uid}"===(x=m.value)&&(x="mce_"+k++),l.map[c]=x,l.push({name:c,value:x});if(b)for(a=b.length;a--;)(c=(m=b[a]).name)in l.map||("{$uid}"===(x=m.value)&&(x="mce_"+k++),l.map[c]=x,l.push({name:c,value:x}));if(y){for(a=y.length;a--&&!(y[a]in l.map););-1===a&&(h=!1)}if(m=l.map["data-mce-bogus"]){if("all"===m){C=V(U,e,_.lastIndex),_.lastIndex=C;continue}h=!1}}h&&$.start(i,l,d)}else h=!1;if(o=F[i]){o.lastIndex=C=r.index+r[0].length,C=(r=o.exec(e))?(h&&(s=e.substr(C,r.index-C)),r.index+r[0].length):(s=e.substr(C),e.length),h&&(0<s.length&&$.text(s,!0),$.end(i)),_.lastIndex=C;continue}d||(p&&p.indexOf("/")==p.length-1?h&&$.end(i):S.push({name:i,valid:h}))}else(i=r[1])?(">"===i.charAt(0)&&(i=" "+i),L.allow_conditional_comments||"[if"!==i.substr(0,3)||(i=" "+i),$.comment(i)):(i=r[2])?$.cdata(i):(i=r[3])?$.doctype(i):(i=r[4])&&$.pi(i,r[5]);C=r.index+r[0].length}for(C<e.length&&$.text(E(e.substr(C))),a=S.length-1;0<=a;a--)(i=S[a]).valid&&$.end(i.name)}}var r=z.each;return t.findEndTag=V,t}),e(N,[E,A,T,d],function(M,e,I,t){var P=t.makeMap,r=t.each,i=t.explode,O=t.extend;return function(E,A){var T=this,N={},_=[],R={},D={};(E=E||{}).validate=!("validate"in E)||E.validate,E.root_name=E.root_name||"body",T.schema=A=A||new e,T.filterNode=function(e){var t,n,r;n in N&&((r=R[n])?r.push(e):R[n]=[e]),t=_.length;for(;t--;)(n=_[t].name)in e.attributes.map&&((r=D[n])?r.push(e):D[n]=[e]);return e},T.addNodeFilter=function(e,n){r(i(e),function(e){var t=N[e];t||(N[e]=t=[]),t.push(n)})},T.addAttributeFilter=function(e,n){r(i(e),function(e){for(var t=0;t<_.length;t++)if(_[t].name===e)return void _[t].callbacks.push(n);_.push({name:e,callbacks:[n]})})},T.parse=function(e,t){function s(e,t){var n=new M(e,t);return e in N&&((t=R[e])?t.push(n):R[e]=[n]),n}function l(e){for(var t,n=A.getBlockElements(),r=e.prev;r&&3===r.type;){if(0<(t=r.value.replace(y,"")).length)return r.value=t,0;if(t=r.next){if(3==t.type&&t.value.length){r=r.prev;continue}if(!n[t.name]&&"script"!=t.name&&"style"!=t.name){r=r.prev;continue}}t=r.prev,r.remove(),r=t}}var n,i,c,r,o,a,u,d,f,h,m,p,g,v,y,b,w,x,$,C,S,k=[];if(t=t||{},R={},D={},p=O(P("script,style,head,html,body,title,meta,param"),A.getBlockElements()),C=A.getNonEmptyElements(),$=A.children,m=E.validate,S=("forced_root_block"in t?t:E).forced_root_block,x=A.getWhiteSpaceElements(),g=/^[ \t\r\n]+/,y=/[ \t\r\n]+$/,b=/[ \t\r\n]+/g,w=/^[ \t\r\n]+$/,n=new I({validate:m,allow_script_urls:E.allow_script_urls,allow_conditional_comments:E.allow_conditional_comments,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}(A.getSelfClosingElements()),cdata:function(e){c.append(s("#cdata",4)).value=e},text:function(e,t){var n;v||(e=e.replace(b," "),c.lastChild&&p[c.lastChild.name]&&(e=e.replace(g,""))),0!==e.length&&((n=s("#text",3)).raw=!!t,c.append(n).value=e)},comment:function(e){c.append(s("#comment",8)).value=e},pi:function(e,t){c.append(s(e,7)).value=t,l(c)},doctype:function(e){c.append(s("#doctype",10)).value=e,l(c)},start:function(e,t,n){var r,i,o,a;if(a=m?A.getElementRule(e):{}){for((r=s(a.outputName||e,1)).attributes=t,r.shortEnded=n,c.append(r),(a=$[c.name])&&$[r.name]&&!a[r.name]&&k.push(r),i=_.length;i--;)(o=_[i].name)in t.map&&((f=D[o])?f.push(r):D[o]=[r]);p[e]&&l(r),n||(c=r),!v&&x[e]&&(v=!0)}},end:function(e){var t,n,r,i;if(i=m?A.getElementRule(e):{}){if(p[e]&&!v){if((t=c.firstChild)&&3===t.type)if(0<(n=t.value.replace(g,"")).length)t.value=n,t=t.next;else for(r=t.next,t.remove(),t=r;t&&3===t.type;)n=t.value,r=t.next,0!==n.length&&!w.test(n)||(t.remove(),t=r),t=r;if((t=c.lastChild)&&3===t.type)if(0<(n=t.value.replace(y,"")).length)t.value=n,t=t.prev;else for(r=t.prev,t.remove(),t=r;t&&3===t.type;)n=t.value,r=t.prev,0!==n.length&&!w.test(n)||(t.remove(),t=r),t=r}if(v&&x[e]&&(v=!1),(i.removeEmpty||i.paddEmpty)&&c.isEmpty(C))if(i.paddEmpty)c.empty().append(new M("#text","3")).value=" ";else if(!c.attributes.map.name&&!c.attributes.map.id)return i=c.parent,p[c.name]?c.empty().remove():c.unwrap(),void(c=i);c=c.parent}}},A),i=c=new M(t.context||E.root_name,11),n.parse(e),m&&k.length&&(t.context?t.invalid=!0:function(e){for(var t,n,r,i,o,a,s,l,c,u,d=P("tr,td,th,tbody,thead,tfoot,table"),f=A.getNonEmptyElements(),h=A.getTextBlockElements(),m=A.getSpecialElements(),p=0;p<e.length;p++)if((t=e[p]).parent&&!t.fixed)if(h[t.name]&&"li"==t.parent.name){for(c=t.next;c&&h[c.name];)c.name="li",c.fixed=!0,t.parent.insert(c,t.parent),c=c.next;t.unwrap(t)}else{for(r=[t],n=t.parent;n&&!A.isValidChild(n.name,t.name)&&!d[n.name];n=n.parent)r.push(n);if(n&&1<r.length){for(r.reverse(),i=o=T.filterNode(r[0].clone()),l=0;l<r.length-1;l++){for(A.isValidChild(o.name,r[l].name)?(a=T.filterNode(r[l].clone()),o.append(a)):a=o,s=r[l].firstChild;s&&s!=r[l+1];)u=s.next,a.append(s),s=u;o=a}i.isEmpty(f)?n.insert(t,r[0],!0):(n.insert(i,r[0],!0),n.insert(t,i)),((n=r[0]).isEmpty(f)||n.firstChild===n.lastChild&&"br"===n.firstChild.name)&&n.empty().remove()}else if(t.parent){if("li"===t.name){if((c=t.prev)&&("ul"===c.name||"ul"===c.name)){c.append(t);continue}if((c=t.next)&&("ul"===c.name||"ul"===c.name)){c.insert(t,c.firstChild,!0);continue}t.wrap(T.filterNode(new M("ul",1)));continue}A.isValidChild(t.parent.name,"div")&&A.isValidChild("div",t.name)?t.wrap(T.filterNode(new M("div",1))):m[t.name]?t.empty().remove():t.unwrap()}}}(k)),S&&("body"==i.name||t.isRootContent)&&function(){function e(e){e&&((r=e.firstChild)&&3==r.type&&(r.value=r.value.replace(g,"")),(r=e.lastChild)&&3==r.type&&(r.value=r.value.replace(y,"")))}var t,n,r=i.firstChild;if(A.isValidChild(i.name,S.toLowerCase())){for(;r;)t=r.next,3==r.type||1==r.type&&"p"!==r.name&&!p[r.name]&&!r.attr("data-mce-type")?(n||((n=s(S,1)).attr(E.forced_root_block_attrs),i.insert(n,r)),n.append(r)):(e(n),n=null),r=t;e(n)}}(),!t.invalid){for(h in R){for(f=N[h],u=(r=R[h]).length;u--;)r[u].parent||r.splice(u,1);for(o=0,a=f.length;o<a;o++)f[o](r,h,t)}for(o=0,a=_.length;o<a;o++)if((f=_[o]).name in D){for(u=(r=D[f.name]).length;u--;)r[u].parent||r.splice(u,1);for(u=0,d=f.callbacks.length;u<d;u++)f.callbacks[u](r,f.name,t)}}return i},E.remove_trailing_brs&&T.addNodeFilter("br",function(e){var t,n,r,i,o,a,s,l=e.length,c=O({},A.getBlockElements()),u=A.getNonEmptyElements();for(c.body=1,t=0;t<l;t++)if(r=(n=e[t]).parent,c[n.parent.name]&&n===r.lastChild){for(o=n.prev;o;){if("span"!==(a=o.name)||"bookmark"!==o.attr("data-mce-type")){if("br"!==a)break;if("br"===a){n=null;break}}o=o.prev}n&&(n.remove(),r.isEmpty(u)&&((s=A.getElementRule(r.name))&&(s.removeEmpty?r.remove():s.paddEmpty&&(r.empty().append(new M("#text",3)).value=" "))))}else{for(i=n;r&&r.firstChild===i&&r.lastChild===i&&!c[(i=r).name];)r=r.parent;i===r&&((s=new M("#text",3)).value=" ",n.replace(s))}}),E.allow_html_in_named_anchor||T.addAttributeFilter("id,name",function(e){for(var t,n,r,i,o=e.length;o--;)if("a"===(i=e[o]).name&&i.firstChild&&!i.attr("href"))for(r=i.parent,t=i.lastChild;n=t.prev,r.insert(t,i),t=n,t;);}),E.validate&&A.getValidClasses()&&T.addAttributeFilter("class",function(e){for(var t,n,r,i,o,a,s,l=e.length,c=A.getValidClasses();l--;){for(n=(t=e[l]).attr("class").split(" "),o="",r=0;r<n.length;r++)i=n[r],s=!1,(a=c["*"])&&a[i]&&(s=!0),a=c[t.name],(s=!s&&a&&a[i]?!0:s)&&(o&&(o+=" "),o+=i);o.length||(o=null),t.attr("class",o)}})}}),e(_,[g,d],function(t,e){var n=e.makeMap;return function(e){var s=[],l=(e=e||{}).indent,c=n(e.indent_before||""),u=n(e.indent_after||""),d=t.getEncodeFunc(e.entity_encoding||"raw",e.entities),f="html"==e.element_format;return{start:function(e,t,n){var r,i,o,a;if(l&&c[e]&&0<s.length&&(0<(a=s[s.length-1]).length&&"\n"!==a&&s.push("\n")),s.push("<",e),t)for(r=0,i=t.length;r<i;r++)o=t[r],s.push(" ",o.name,'="',d(o.value,!0),'"');s[s.length]=!n||f?">":" />",n&&l&&u[e]&&0<s.length&&(0<(a=s[s.length-1]).length&&"\n"!==a&&s.push("\n"))},end:function(e){s.push("</",e,">"),l&&u[e]&&0<s.length&&(0<(e=s[s.length-1]).length&&"\n"!==e&&s.push("\n"))},text:function(e,t){0<e.length&&(s[s.length]=t?e:d(e))},cdata:function(e){s.push("<![CDATA[",e,"]]>")},comment:function(e){s.push("\x3c!--",e,"--\x3e")},pi:function(e,t){t?s.push("<?",e," ",d(t),"?>"):s.push("<?",e,"?>"),l&&s.push("\n")},doctype:function(e){s.push("<!DOCTYPE",e,">",l?"\n":"")},reset:function(){s.length=0},getContent:function(){return s.join("").replace(/\n$/,"")}}}}),e(R,[_,A],function(e,n){return function(t,h){var m=new e(t);(t=t||{}).validate=!("validate"in t)||t.validate,this.schema=h=h||new n,this.writer=m,this.serialize=function(e){function u(e){var t,n,r,i,o,a,s,l,c=f[e.type];if(c)c(e);else{if(t=e.name,c=e.shortEnded,n=e.attributes,d&&n&&1<n.length&&((o=[]).map={},l=h.getElementRule(e.name))){for(a=0,s=l.attributesOrder.length;a<s;a++)(r=l.attributesOrder[a])in n.map&&(i=n.map[r],o.map[r]=i,o.push({name:r,value:i}));for(a=0,s=n.length;a<s;a++)(r=n[a].name)in o.map||(i=n.map[r],o.map[r]=i,o.push({name:r,value:i}));n=o}if(m.start(e.name,n,c),!c){if(e=e.firstChild)for(;u(e),e=e.next;);m.end(t)}}}var d=t.validate,f={3:function(e){m.text(e.value,e.raw)},8:function(e){m.comment(e.value)},7:function(e){m.pi(e.name,e.value)},10:function(e){m.doctype(e.value)},4:function(e){m.cdata(e.value)},11:function(e){if(e=e.firstChild)for(;u(e),e=e.next;);}};return m.reset(),1!=e.type||t.inner?f[11](e):u(e),m.getContent()}}}),e(D,[y,N,T,g,R,E,A,o,d,$],function(e,t,h,r,m,n,i,p,o,g){var v=o.each,y=o.trim,a=e.DOM,b=["data-mce-selected"];return function(l,s){function c(e){var t=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[​\ufeff]+<\\/span>","\\s?("+b.join("|")+')="[^"]+"'].join("|"),"gi");return g.trim(e.replace(t,""))}var u,d,f;return s&&(u=s.dom,d=s.schema),u=u||a,d=d||new i(l),l.entity_encoding=l.entity_encoding||"named",l.remove_trailing_brs=!("remove_trailing_brs"in l)||l.remove_trailing_brs,(f=new t(l,d)).addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)(n=e[r]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),f.addAttributeFilter("src,href,style",function(e,t){for(var n,r,i=e.length,o="data-mce-"+t,a=l.url_converter,s=l.url_converter_scope;i--;)void 0!==(r=(n=e[i]).attributes.map[o])?(n.attr(t,0<r.length?r:null),n.attr(o,null)):(r=n.attributes.map[t],"style"===t?r=u.serializeStyle(u.parseStyle(r),n.name):a&&(r=a.call(s,r,t,n.name)),n.attr(t,0<r.length?r:null))}),f.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)(t=e[r]).attr("class")&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",0<n.length?n:null))}),f.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,i=e.length;i--;)"bookmark"!==(r=e[i]).attributes.map["data-mce-type"]||n.cleanup||r.remove()}),f.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=r.decode(t.value))}),f.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var r,i,o,a=e.length;a--;)i=(r=e[a]).firstChild?r.firstChild.value:"","script"===t?((o=r.attr("type"))&&r.attr("type","mce-no/type"==o?null:o.replace(/^mce\-/,"")),0<i.length&&(r.firstChild.value="// <![CDATA[\n"+n(i)+"\n// ]]>")):0<i.length&&(r.firstChild.value="\x3c!--\n"+n(i)+"\n--\x3e")}),f.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),f.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)7===(n=e[r]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),l.fix_list_elements&&f.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)"ul"!==(n=(t=e[r]).parent).name&&"ol"!==n.name||t.prev&&"li"===t.prev.name&&t.prev.append(t)}),f.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:d,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:function(e,t){var n,r,i,o;return p.ie&&0<u.select("script,style,select,map").length?(i=e.innerHTML,e=e.cloneNode(!1),u.setHTML(e,i)):e=e.cloneNode(!0),(o=document.implementation).createHTMLDocument&&(n=o.createHTMLDocument(""),v("BODY"==e.nodeName?e.childNodes:[e],function(e){n.body.appendChild(n.importNode(e,!0))}),e="BODY"!=e.nodeName?n.body.firstChild:n.body,r=u.doc,u.doc=n),(t=t||{}).format=t.format||"html",t.selection&&(t.forced_root_block=""),t.no_events||(t.node=e,this.onPreProcess(t)),i=f.parse(y(t.getInner?e.innerHTML:u.getOuterHTML(e)),t),!a(e=(o=i).lastChild)||a(o=e.prev)&&(e.remove(),o.remove()),o=new m(l,d),t.content=o.serialize(i),t.cleanup||(t.content=g.trim(t.content),t.content=t.content.replace(/\uFEFF/g,"")),t.no_events||this.onPostProcess(t),r&&(u.doc=r),t.node=null,t.content;function a(e){return e&&"br"===e.name}},addRules:function(e){d.addValidElements(e)},setRules:function(e){d.setValidElements(e)},onPreProcess:function(e){s&&s.fire("PreProcess",e)},onPostProcess:function(e){s&&s.fire("PostProcess",e)},addTempAttr:function(e){-1===o.inArray(b,e)&&(f.addAttributeFilter(e,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),b.push(e))},trimHtml:c,getTrimmedContent:function(){for(var e,t,n,r=s.getBody().innerHTML,i=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,o=s.schema,r=c(r),a=o.getShortEndedElements();n=i.exec(r);)e=i.lastIndex,t=n[0].length,n=a[n[1]]?e:h.findEndTag(o,r,e),r=r.substring(0,e-t)+r.substring(n),i.lastIndex=e-t;return y(r)}}}}),e(M,[],function(){return function(h){function c(e,t){var n,r,i,o,a,s,l,c=0,u=-1,d=e.duplicate();if(d.collapse(t),(l=d.parentElement()).ownerDocument===h.dom.doc){for(;"false"===l.contentEditable;)l=l.parentNode;if(!l.hasChildNodes())return{node:l,inside:1};for(n=(i=l.children).length-1;c<=n;)if(o=i[s=Math.floor((c+n)/2)],d.moveToElementText(o),0<(u=d.compareEndPoints(t?"StartToStart":"EndToEnd",e)))n=s-1;else{if(!(u<0))return{node:o};c=s+1}if(u<0)for(o?d.collapse(!1):(d.moveToElementText(l),d.collapse(!0),o=l,r=!0),a=0;0!==d.compareEndPoints(t?"StartToStart":"StartToEnd",e)&&0!==d.move("character",1)&&l==d.parentElement();)a++;else for(d.collapse(!0),a=0;0!==d.compareEndPoints(t?"StartToStart":"StartToEnd",e)&&0!==d.move("character",-1)&&l==d.parentElement();)a++;return{node:o,position:u,offset:a,inside:r}}}var a=this,m=h.dom;this.getBookmark=function(e){function t(e){for(var t,n,r=[],i=e.parentNode,o=m.getRoot().parentNode;i!=o&&9!==i.nodeType;){for(n=(t=i.children).length;n--;)if(e===t[n]){r.push(n);break}i=(e=i).parentNode}return r}function n(e){e=c(r,e);return e?{position:e.position,offset:e.offset,indexes:t(e.node),inside:e.inside}:void 0}var r=h.getRng(),i={};return 2===e&&(r.item?i.start={ctrl:!0,indexes:t(r.item(0))}:(i.start=n(!0),h.isCollapsed()||(i.end=n()))),i},this.moveToBookmark=function(o){function a(e){for(var t,n,r=m.getRoot(),i=e.length-1;0<=i;i--)n=r.children,(t=e[i])<=n.length-1&&(r=n[t]);return r}function e(e){var t,n,r,i=o[e?"start":"end"];i&&(t=0<i.position,(n=l.createTextRange()).moveToElementText(a(i.indexes)),void 0!==(r=i.offset)?(n.collapse(i.inside||t),n.moveStart("character",t?-r:r)):n.collapse(e),s.setEndPoint(e?"StartToStart":"EndToStart",n),e&&s.collapse(!0))}var s,l=m.doc.body;o.start&&(o.start.ctrl?(s=l.createControlRange()).addElement(a(o.start.indexes)):(s=l.createTextRange(),e(!0),e()),s.select())},this.addRange=function(e){function t(e){var t,n=m.create("a"),r=e?l:u,i=e?c:d,o=f.duplicate();r!=a&&r!=a.documentElement||(r=s,i=0),3==r.nodeType?(r.parentNode.insertBefore(n,r),o.moveToElementText(n),o.moveStart("character",i),m.remove(n),f.setEndPoint(e?"StartToStart":"EndToEnd",o)):((t=r.childNodes).length?(i>=t.length?m.insertAfter(n,t[t.length-1]):r.insertBefore(n,t[i]),o.moveToElementText(n)):r.canHaveHTML&&(r.innerHTML="<span>&#xFEFF;</span>",n=r.firstChild,o.moveToElementText(n),o.collapse(!1)),f.setEndPoint(e?"StartToStart":"EndToEnd",o),m.remove(n))}var n,r,a=h.dom.doc,s=a.body,l=e.startContainer,c=e.startOffset,u=e.endContainer,d=e.endOffset,f=s.createTextRange();if(l==u&&1==l.nodeType){if(c==d&&!l.hasChildNodes()){if(l.canHaveHTML)return(e=l.previousSibling)&&!e.hasChildNodes()&&m.isBlock(e)?e.innerHTML="&#xFEFF;":e=null,l.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",f.moveToElementText(l.lastChild),f.select(),m.doc.selection.clear(),l.innerHTML="",void(e&&(e.innerHTML=""));c=m.nodeIndex(l),l=l.parentNode}if(c==d-1)try{if(r=l.childNodes[c],(n=s.createControlRange()).addElement(r),n.select(),(n=h.getRng()).item&&r===n.item(0))return}catch(e){}}t(!0),t(),f.select()},this.getRangeAt=function(){function t(e){var t,n,r=c(s,e),i=0,o=r.node,a=r.offset;if(r.inside&&!o.hasChildNodes())return l[e?"setStart":"setEnd"](o,0),0;if(void 0===a)return l[e?"setStartBefore":"setEndAfter"](o),0;if(r.position<0){if(!(t=r.inside?o.firstChild:o.nextSibling))return l[e?"setStartAfter":"setEndAfter"](o),0;if(!a)return 3==t.nodeType?l[e?"setStart":"setEnd"](t,0):l[e?"setStartBefore":"setEndBefore"](t),0;for(;t;){if(3==t.nodeType&&a<=(i+=(n=t.nodeValue).length)){o=t,i-=a,i=n.length-i;break}t=t.nextSibling}}else{if(!(t=o.previousSibling))return l[e?"setStartBefore":"setEndBefore"](o);if(!a)return 3==o.nodeType?l[e?"setStart":"setEnd"](t,o.nodeValue.length):l[e?"setStartAfter":"setEndAfter"](t),0;for(;t;){if(3==t.nodeType&&a<=(i+=t.nodeValue.length)){o=t,i-=a;break}t=t.previousSibling}}l[e?"setStart":"setEnd"](o,i)}var n,r,i,s=h.getRng(),l=m.createRng(),o=s.item?s.item(0):s.parentElement();if(o.ownerDocument!=m.doc)return l;if(n=h.isCollapsed(),s.item)return l.setStart(o.parentNode,m.nodeIndex(o)),l.setEnd(l.startContainer,l.startOffset+1),l;try{t(!0),n||t()}catch(e){if(-2147024809!=e.number)throw e;i=a.getBookmark(2),(r=s.duplicate()).collapse(!0),o=r.parentElement(),n||((r=s.duplicate()).collapse(!1),(r=r.parentElement()).innerHTML=r.innerHTML),o.innerHTML=o.innerHTML,a.moveToBookmark(i),s=h.getRng(),t(!0),n||t()}return l}}}),e(I,[o],function(t){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return t.mac?e.metaKey:e.ctrlKey&&!e.altKey}}}),e(P,[I,d,i,o,x],function(j,q,W,G,e){var Y=e.isContentEditableFalse,K=e.isContentEditableTrue;return function(r,l){function n(e){var t=l.settings.object_resizing;return!1!==t&&!G.iOS&&("string"!=typeof t&&(t="table,img,div"),"false"!==e.getAttribute("data-mce-resize")&&(e!=l.getBody()&&l.dom.is(e,t)))}function c(e){var t,n=e.screenX-C,r=e.screenY-S;R=n*x[2]+A,D=r*x[3]+T,R=R<5?5:R,D=D<5?5:D,("IMG"==y.nodeName&&!1!==l.settings.resize_img_proportional?!j.modifierPressed(e):j.modifierPressed(e)||"IMG"==y.nodeName&&x[2]*x[3]!=0)&&(U(n)>U(r)?(D=H(R*N),R=H(D/N)):(R=H(D/N),D=H(R*N))),P.setStyles(b,{width:R,height:D}),t=0<(t=x.startPos.x+n)?t:0,e=0<(e=x.startPos.y+r)?e:0,P.setStyles(w,{left:t,top:e,display:"block"}),w.innerHTML=R+" &times; "+D,x[2]<0&&b.clientWidth<=R&&P.setStyle(b,"left",k+(A-R)),x[3]<0&&b.clientHeight<=D&&P.setStyle(b,"top",E+(T-D)),(n=z.scrollWidth-M)+(r=z.scrollHeight-I)!==0&&P.setStyles(w,{left:t-n,top:e-r}),_||(l.fire("ObjectResizeStart",{target:y,width:A,height:T}),_=!0)}function u(){function e(e,t){t&&(y.style[e]||!l.schema.isValid(y.nodeName.toLowerCase(),e)?P.setStyle(y,e,t):P.setAttrib(y,e,t))}_=!1,e("width",R),e("height",D),P.unbind(B,"mousemove",c),P.unbind(B,"mouseup",u),F!=B&&(P.unbind(F,"mousemove",c),P.unbind(F,"mouseup",u)),P.remove(b),P.remove(w),L&&"TABLE"!=y.nodeName||d(y),l.fire("ObjectResized",{target:y,width:R,height:D}),P.setAttrib(y,"style",P.getAttrib(y,"style")),l.nodeChanged()}function d(e,i,o){var a,s,t;f(),p(),t=P.getPos(e,z),k=t.x,E=t.y,t=e.getBoundingClientRect(),a=t.width||t.right-t.left,s=t.height||t.bottom-t.top,y!=e&&(m(),y=e,R=D=0),t=l.fire("ObjectSelected",{target:e}),n(e)&&!t.isDefaultPrevented()?O(V,function(t,e){function n(e){C=e.screenX,S=e.screenY,A=y.clientWidth,T=y.clientHeight,N=T/A,(x=t).startPos={x:a*t[0]+k,y:s*t[1]+E},M=z.scrollWidth,I=z.scrollHeight,b=y.cloneNode(!0),P.addClass(b,"mce-clonedresizable"),P.setAttrib(b,"data-mce-bogus","all"),b.contentEditable=!1,b.unSelectabe=!0,P.setStyles(b,{left:k,top:E,margin:0}),b.removeAttribute("data-mce-selected"),z.appendChild(b),P.bind(B,"mousemove",c),P.bind(B,"mouseup",u),F!=B&&(P.bind(F,"mousemove",c),P.bind(F,"mouseup",u)),w=P.add(z,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},A+" &times; "+T)}var r;return i?void(e==i&&n(o)):((r=P.get("mceResizeHandle"+e))&&P.remove(r),r=P.add(z,"div",{id:"mceResizeHandle"+e,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+e+"-resize; margin:0; padding:0"}),G.ie&&(r.contentEditable=!1),P.bind(r,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),n(e)}),t.elm=r,void P.setStyles(r,{left:a*t[0]+k-r.offsetWidth/2,top:s*t[1]+E-r.offsetHeight/2}))}):f(),y.setAttribute("data-mce-selected","1")}function f(){var e,t;for(e in p(),y&&y.removeAttribute("data-mce-selected"),V)t=P.get("mceResizeHandle"+e),t&&(P.unbind(t),P.remove(t))}function i(e){function t(e,t){if(e)do{if(e===t)return 1}while(e=e.parentNode)}var n;if(!_&&!l.removed)return O(P.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),n="mousedown"==e.type?e.target:r.getNode(),t(n=P.$(n).closest(L?"table":"table,img,hr")[0],z)&&(g(),t(e=r.getStart(!0),n)&&t(r.getEnd(!0),n)&&(!L||n!=e&&"IMG"!==e.nodeName))?void d(n):void f()}function o(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function e(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function a(e){var t,n,r,i,o=e.srcElement,e=o.getBoundingClientRect(),a=$.clientX-e.left,s=$.clientY-e.top;for(t in V)if(n=V[t],r=o.offsetWidth*n[0],i=o.offsetHeight*n[1],U(r-a)<8&&U(i-s)<8){x=n;break}_=!0,l.fire("ObjectResizeStart",{target:y,width:y.clientWidth,height:y.clientHeight}),l.getDoc().selection.empty(),d(o,t,$)}function s(e){return Y(function(e,t){for(;t&&t!=e;){if(K(t)||Y(t))return t;t=t.parentNode}return null}(l.getBody(),e))}function h(e){var t,n=e.srcElement;s(n)?(t=e).preventDefault?t.preventDefault():t.returnValue=!1:n!=y&&(l.fire("ObjectSelected",{target:n}),m(),0!==n.id.indexOf("mceResizeHandle")?"IMG"!=n.nodeName&&"TABLE"!=n.nodeName||(f(),o(y=n,"resizestart",a)):e.returnValue=!1)}function m(){e(y,"resizestart",a)}function p(){for(var e in V){var t=V[e];t.elm&&(P.unbind(t.elm),delete t.elm)}}function g(){try{l.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function v(e){var t;if(L){t=B.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(e){}}}var y,b,w,x,$,C,S,k,E,A,T,N,_,R,D,M,I,P=l.dom,O=q.each,B=l.getDoc(),F=document,L=G.ie&&G.ie<11,U=Math.abs,H=Math.round,z=l.getBody(),V={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},t=".mce-content-body";return l.contentStyles.push(t+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: box-sizing;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+t+" .mce-resizehandle:hover {background: #000}"+t+" img[data-mce-selected],"+t+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+t+" .mce-clonedresizable {position: absolute;"+(G.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+t+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),l.on("init",function(){L?(l.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(f(),v(e.target))}),o(z,"controlselect",h),l.on("mousedown",function(e){$=e})):(g(),11<=G.ie&&(l.on("mousedown click",function(e){var t=e.target,n=t.nodeName;_||!/^(TABLE|IMG|HR)$/.test(n)||s(t)||(l.selection.select(t,"TABLE"==n),"mousedown"==e.type&&l.nodeChanged())}),l.dom.bind(z,"mscontrolselect",function(e){function t(e){W.setEditorTimeout(l,function(){l.selection.select(e)})}return s(e.target)?(e.preventDefault(),void t(e.target)):void(/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"==e.target.tagName&&t(e.target)))})));var t=W.throttle(function(e){l.composing||i(e)});l.on("nodechange ResizeEditor ResizeWindow drop",t),l.on("keyup compositionend",function(e){y&&"TABLE"==y.nodeName&&t(e)}),l.on("hide blur",f)}),l.on("remove",p),{isResizable:n,showResizeRect:d,hideResizeRect:f,updateResizeRect:i,controlSelect:v,destroy:function(){y=b=null,L&&(m(),e(z,"controlselect",h))}}}}),e(O,[],function(){function n(e){var t=r.call(arguments);return t.length-1>=e.length?e.apply(this,t.slice(1)):function(){var e=t.concat([].slice.call(arguments));return n.apply(this,e)}}var r=[].slice;return{constant:function(e){return function(){return e}},negate:function(t){return function(e){return!t(e)}},and:function(){var n=r.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}},or:function(){var n=r.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}},curry:n,compose:function(t,n){return function(e){return t(n(e))}}}}),e(B,[x,u,C],function(e,t,n){function r(e){return!f(e)&&(l(e)?!c(e.parentNode):u(e)||s(e)||d(e)||a(e))}function i(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode){if(a(e))return!1;if(o(e))return!0}return!0}var o=e.isContentEditableTrue,a=e.isContentEditableFalse,s=e.isBr,l=e.isText,c=e.matchNodeNames("script style textarea"),u=e.matchNodeNames("img input textarea hr iframe video audio object"),d=e.matchNodeNames("table"),f=n.isCaretContainer;return{isCaretCandidate:r,isInEditable:i,isAtomic:function(e){return u(e)||!!a(e=e)&&!0!==t.reduce(e.getElementsByTagName("*"),function(e,t){return e||o(t)},!1)},isEditableCaretCandidate:function(e,t){return r(e)&&i(e,t)}}}),e(F,[],function(){function n(e){return e?{left:t(e.left),top:t(e.top),bottom:t(e.bottom),right:t(e.right),width:t(e.width),height:t(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}}function r(e,t,n){return 0<=e&&e<=Math.min(t.height,n.height)/2}function i(e,t){return e.bottom<t.top||!(e.top>t.bottom)&&r(t.top-e.bottom,e,t)}function o(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&r(t.bottom-e.top,e,t)}function a(e,t){return e.left<t.left}function s(e,t){return e.right>t.right}var t=Math.round;return{clone:n,collapse:function(e,t){return e=n(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},isEqual:function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right},isAbove:i,isBelow:o,isLeft:a,isRight:s,compare:function(e,t){return i(e,t)?-1:o(e,t)?1:a(e,t)?-1:s(e,t)?1:0},containsXY:function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}}}),e(L,[],function(){var t=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]");return{isExtendingChar:function(e){return"string"==typeof e&&768<=e.charCodeAt(0)&&t.test(e)}}}),e(U,[O,x,y,S,B,F,L],function(i,e,t,n,r,s,l){function c(e){return"createRange"in e?e.createRange():t.DOM.createRng()}function o(e){return e&&/[\r\n\t ]/.test(e)}function u(e){var t=e.startContainer,n=e.startOffset;return o(e.toString())&&g(t.parentNode)&&(o((t=t.data)[n-1])||o(t[n+1]))}function a(e){function r(e){var t,n,r=e.getClientRects(),i=0<r.length?s.clone(r[0]):s.clone(e.getBoundingClientRect());return y(e)&&0===i.left?(n=(t=e).ownerDocument,r=c(n),e=n.createTextNode(" "),(n=t.parentNode).insertBefore(e,t),r.setStart(e,0),r.setEnd(e,1),r=s.clone(r.getBoundingClientRect()),n.removeChild(e),r):i}function i(e,t){return(e=s.collapse(e,t)).width=1,e.right=e.left+1,e}function o(e){0!==e.height&&(0<a.length&&s.isEqual(e,a[a.length-1])||a.push(e))}function t(e,t){var n=c(e.ownerDocument);if(t<e.data.length){if(l.isExtendingChar(e.data[t]))return a;if(l.isExtendingChar(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!u(n)))return o(i(r(n),!1)),a}0<t&&(n.setStart(e,t-1),n.setEnd(e,t),u(n)||o(i(r(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),u(n)||o(i(r(n),!0)))}var n,a=[];if(v(e.container()))return t(e.container(),e.offset()),a;if(f(e.container()))if(e.isAtEnd())n=w(e.container(),e.offset()),v(n)&&t(n,n.data.length),p(n)&&!y(n)&&o(i(r(n),!1));else{if(n=w(e.container(),e.offset()),v(n)&&t(n,0),p(n)&&e.isAtEnd())return o(i(r(n),!1)),a;e=w(e.container(),e.offset()-1),!p(e)||y(e)||!m(e)&&!m(n)&&p(n)||o(i(r(e),!1)),p(n)&&o(i(r(n),!0))}return a}function d(t,n,e){function r(){return e=e||a(new d(t,n))}return{container:i.constant(t),offset:i.constant(n),toRange:function(){var e=c(t.ownerDocument);return e.setStart(t,n),e.setEnd(t,n),e},getClientRects:r,isVisible:function(){return 0<r().length},isAtStart:function(){return v(t),0===n},isAtEnd:function(){return v(t)?n>=t.data.length:n>=t.childNodes.length},isEqual:function(e){return e&&t===e.container()&&n===e.offset()},getNode:function(e){return w(t,e?n-1:n)}}}var f=e.isElement,h=r.isCaretCandidate,m=e.matchStyleValues("display","block table"),r=e.matchStyleValues("float","left right"),p=i.and(f,h,i.negate(r)),g=i.negate(e.matchStyleValues("white-space","pre pre-line pre-wrap")),v=e.isText,y=e.isBr,b=t.nodeIndex,w=n.getNode;return d.fromRangeStart=function(e){return new d(e.startContainer,e.startOffset)},d.fromRangeEnd=function(e){return new d(e.endContainer,e.endOffset)},d.after=function(e){return new d(e.parentNode,b(e)+1)},d.before=function(e){return new d(e.parentNode,b(e))},d}),e(H,[x,y,O,u,U],function(a,e,s,l,o){function i(e){return e?l.reduce(e.childNodes,function(e,t){return f(t)&&"BR"!=t.nodeName?e=e.concat(i(t)):e.push(t),e},[]):[]}function c(t){return function(e){return t===e}}function t(e){var t,r=i(function e(t){t=t.parentNode;return f(t)?e(t):t}(e)),n=l.findIndex(r,c(e),e);return r=r.slice(0,n+1),t=l.reduce(r,function(e,t,n){return d(t)&&d(r[n-1])&&e++,e},0),r=l.filter(r,a.matchNodeNames(e.nodeName)),l.findIndex(r,c(e),e)-t}function u(e){return(d(e)?"text()":e.nodeName.toLowerCase())+"["+t(e)+"]"}var d=a.isText,f=a.isBogus,r=e.nodeIndex;return{create:function(e,t){var n,r=[],i=t.container(),o=t.offset();return d(i)?n=function(e,t){for(;(e=e.previousSibling)&&d(e);)t+=e.data.length;return t}(i,o):(o>=(t=i.childNodes).length?(n="after",o=t.length-1):n="before",i=t[o]),r.push(u(i)),i=function(e,t,n){var r=[];for(t=t.parentNode;!(t==e||n&&n(t));t=t.parentNode)r.push(t);return r}(e,i),i=l.filter(i,s.negate(a.isBogus)),(r=r.concat(l.map(i,u))).reverse().join("/")+","+n},resolve:function(e,t){var n;return t?(t=(n=t.split(","))[0].split("/"),n=1<n.length?n[1]:"before",(e=l.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),n=e,e=t[1],t=parseInt(t[2],10),r=i(n),r=l.filter(r,function(e,t){return!d(e)||!d(r[t-1])}),(r=l.filter(r,a.matchNodeNames(e)))[t]):null;var n,r},e))?d(e)?function(e,t){for(var n,r=e,i=0;d(r);){if(n=r.data.length,i<=t&&t<=i+n){e=r,t-=i;break}if(!d(r.nextSibling)){e=r,t=n;break}i+=n,r=r.nextSibling}return t>e.data.length&&(t=e.data.length),new o(e,t)}(e,parseInt(n,10)):(n="after"===n?r(e)+1:r(e),new o(e.parentNode,n)):null):null}}}),e(z,[o,d,C,H,U,x],function(f,w,x,$,C,S){function e(y){var b=y.dom;this.getBookmark=function(e,a){function t(e,t){var n=0;return w.each(b.select(e),function(e){return"all"!==e.getAttribute("data-mce-bogus")?e!=t&&void n++:void 0}),n}function n(i){function e(e){var t=e?"start":"end",n=i[t+"Container"],r=i[t+"Offset"];1!=n.nodeType||"TR"!=n.nodeName||(n=(t=n.childNodes)[Math.min(e?r:r-1,t.length-1)])&&(r=e?0:n.childNodes.length,i["set"+(e?"Start":"End")](n,r))}return e(!0),e(),i}var r,i,o,s,l,c,u,d,f,h,m,p="&#xFEFF;";if(2==e)return l=(c=y.getNode())?c.nodeName:null,r=y.getRng(),k(c)||"IMG"==l?{name:l,index:t(l,c)}:y.tridentSel?y.tridentSel.getBookmark(e):(c=v((m=r).startContainer)||v(m.endContainer))?{name:l=c.tagName,index:t(l,c)}:(d=r,f=b.getRoot(),(h={}).start=g(d,!0),y.isCollapsed()||(h.end=g(d)),h);function g(e,t){var n,r=e[t?"startContainer":"endContainer"],i=e[t?"startOffset":"endOffset"],o=[],e=0;if(3==r.nodeType){if(a)for(n=r.previousSibling;n&&3==n.nodeType;n=n.previousSibling)i+=n.nodeValue.length;o.push(i)}else i>=(t=r.childNodes).length&&t.length&&(e=1,i=Math.max(0,t.length-1)),o.push(b.nodeIndex(t[i],a)+e);for(;r&&r!=f;r=r.parentNode)o.push(b.nodeIndex(r,a));return o}function v(e){var t;if(x.isCaretContainer(e))return t=(e=S.isText(e)&&x.isCaretContainerBlock(e)?e.parentNode:e).previousSibling,k(t)?t:(t=e.nextSibling,k(t)?t:void 0)}if(3==e)return r=y.getRng(),{start:$.create(b.getRoot(),C.fromRangeStart(r)),end:$.create(b.getRoot(),C.fromRangeEnd(r))};if(e)return{rng:y.getRng()};if(r=y.getRng(),o=b.uniqueId(),s=y.isCollapsed(),u="overflow:hidden;line-height:0px",r.duplicate||r.item){if(r.item)return{name:l=(c=r.item(0)).nodeName,index:t(l,c)};i=r.duplicate();try{r.collapse(),r.pasteHTML('<span data-mce-type="bookmark" id="'+o+'_start" style="'+u+'">'+p+"</span>"),s||(i.collapse(!1),r.moveToElementText(i.parentElement()),0===r.compareEndPoints("StartToEnd",i)&&i.move("character",-1),i.pasteHTML('<span data-mce-type="bookmark" id="'+o+'_end" style="'+u+'">'+p+"</span>"))}catch(e){return null}}else{if("IMG"==(l=(c=y.getNode()).nodeName))return{name:l,index:t(l,c)};i=n(r.cloneRange()),s||(i.collapse(!1),i.insertNode(b.create("span",{"data-mce-type":"bookmark",id:o+"_end",style:u},p))),(r=n(r)).collapse(!0),r.insertNode(b.create("span",{"data-mce-type":"bookmark",id:o+"_start",style:u},p))}return y.moveToBookmark({id:o,keep:1}),{id:o}},this.moveToBookmark=function(a){function e(e){var t,n,r,i,o=a[e?"start":"end"];if(o){for(r=o[0],n=l,t=o.length-1;1<=t;t--){if(i=n.childNodes,o[t]>i.length-1)return;n=i[o[t]]}3===n.nodeType&&(r=Math.min(o[0],n.nodeValue.length)),1===n.nodeType&&(r=Math.min(o[0],n.childNodes.length)),e?s.setStart(n,r):s.setEnd(n,r)}return 1}function t(e){var t,n,r=b.get(a.id+"_"+e),i=a.keep;if(r&&(n=r.parentNode,"start"==e?(t=i?(n=r.firstChild,1):b.nodeIndex(r),o=c=n,u=d=t):(t=i?(n=r.firstChild,1):b.nodeIndex(r),c=n,d=t),!i)){for(n=r.previousSibling,i=r.nextSibling,w.each(w.grep(r.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});r=b.get(a.id+"_"+e);)b.remove(r,1);n&&i&&n.nodeType==i.nodeType&&3==n.nodeType&&!f.opera&&(t=n.nodeValue.length,n.appendData(i.nodeValue),b.remove(i),"start"==e?(o=c=n,u=d=t):(c=n,d=t))}}function n(e){return!b.isBlock(e)||e.innerHTML||f.ie||(e.innerHTML='<br data-mce-bogus="1" />'),e}var s,l,o,c,u,d,r,i;if(a)if(w.isArray(a.start)){if(s=b.createRng(),l=b.getRoot(),y.tridentSel)return y.tridentSel.moveToBookmark(a);e(!0)&&e()&&y.setRng(s)}else"string"==typeof a.start?y.setRng((r=b.createRng(),i=$.resolve(b.getRoot(),a.start),r.setStart(i.container(),i.offset()),i=$.resolve(b.getRoot(),a.end),r.setEnd(i.container(),i.offset()),r)):a.id?(t("start"),t("end"),o&&((s=b.createRng()).setStart(n(o),u),s.setEnd(n(c),d),y.setRng(s))):a.name?y.select(b.select(a.name)[a.index]):a.rng&&y.setRng(a.rng)}}var k=S.isContentEditableFalse;return e.isBookmarkNode=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},e}),e(V,[m,M,P,S,z,x,o,d,U],function(s,o,a,n,l,u,c,e,t){function r(e,t,n,r){var i=this;i.dom=e,i.win=t,i.serializer=n,i.editor=r,i.bookmarkManager=new l(i),i.controlSelection=new a(i,r),i.win.getSelection||(i.tridentSel=new o(i))}var d=e.each,f=e.trim,h=c.ie;return r.prototype={setCursorLocation:function(e,t){var n=this.dom.createRng();e?(n.setStart(e,t),n.setEnd(e,t),this.setRng(n),this.collapse(!1)):(this._moveEndPoint(n,this.editor.getBody(),!0),this.setRng(n))},getContent:function(e){var t,n=this.getRng(),r=this.dom.create("body"),i=this.getSel(),o=t="";return(e=e||{}).get=!0,e.format=e.format||"html",e.selection=!0,this.editor.fire("BeforeGetContent",e),"text"==e.format?this.isCollapsed()?"":n.text||(i.toString?i.toString():""):(n.cloneContents?(i=n.cloneContents())&&r.appendChild(i):n.item!==ge||n.htmlText!==ge?(r.innerHTML="<br>"+(n.item?n.item(0).outerHTML:n.htmlText),r.removeChild(r.firstChild)):r.innerHTML=n.toString(),/^\s/.test(r.innerHTML)&&(o=" "),/\s+$/.test(r.innerHTML)&&(t=" "),e.getInner=!0,e.content=this.isCollapsed()?"":o+this.serializer.serialize(r,e)+t,this.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n,r,i=this,o=i.getRng(),a=i.win.document;if((t=t||{format:"html"}).set=!0,t.selection=!0,t.content=e,t.no_events||i.editor.fire("BeforeSetContent",t),e=t.content,o.insertNode){e+='<span id="__caret">_</span>',o.startContainer==a&&o.endContainer==a?a.body.innerHTML=e:(o.deleteContents(),0===a.body.childNodes.length?a.body.innerHTML=e:o.createContextualFragment?o.insertNode(o.createContextualFragment(e)):(n=a.createDocumentFragment(),r=a.createElement("div"),n.appendChild(r),r.outerHTML=e,o.insertNode(n))),n=i.dom.get("__caret"),(o=a.createRange()).setStartBefore(n),o.setEndBefore(n),i.setRng(o),i.dom.remove("__caret");try{i.setRng(o)}catch(e){}}else o.item&&(a.execCommand("Delete",!1,null),o=i.getRng()),/^\s+/.test(e)?(o.pasteHTML('<span id="__mce_tmp">_</span>'+e),i.dom.remove("__mce_tmp")):o.pasteHTML(e);t.no_events||i.editor.fire("SetContent",t)},getStart:function(e){var t,n,r,i,o=this.getRng();if(o.duplicate||o.item){if(o.item)return o.item(0);for((r=o.duplicate()).collapse(1),(t=r.parentElement()).ownerDocument!==this.dom.doc&&(t=this.dom.getRoot()),n=i=o.parentElement();i=i.parentNode;)if(i==t){t=n;break}return t}return 1==(t=o.startContainer).nodeType&&t.hasChildNodes()&&(e&&o.collapsed||(t=t.childNodes[Math.min(t.childNodes.length-1,o.startOffset)])),t&&3==t.nodeType?t.parentNode:t},getEnd:function(e){var t,n,r=this.getRng();return r.duplicate||r.item?r.item?r.item(0):((r=r.duplicate()).collapse(0),(t=(t=r.parentElement()).ownerDocument!==this.dom.doc?this.dom.getRoot():t)&&"BODY"==t.nodeName&&t.lastChild||t):(t=r.endContainer,n=r.endOffset,1==t.nodeType&&t.hasChildNodes()&&(e&&r.collapsed||(t=t.childNodes[0<n?n-1:n])),t&&3==t.nodeType?t.parentNode:t)},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n=this.dom,r=n.createRng();if(this.lastFocusBookmark=null,e){if(!t&&this.controlSelection.controlSelect(e))return;n=n.nodeIndex(e),r.setStart(e.parentNode,n),r.setEnd(e.parentNode,n+1),t&&(this._moveEndPoint(r,e,!0),this._moveEndPoint(r,e)),this.setRng(r)}return e},isCollapsed:function(){var e=this.getRng(),t=this.getSel();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},collapse:function(e){var t,n=this.getRng();n.item&&(t=n.item(0),(n=this.win.document.body.createTextRange()).moveToElementText(t)),n.collapse(!!e),this.setRng(n)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){function t(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}}var n,r,i,o,a,s=this;if(!s.win)return null;if(o=s.win.document,!e&&s.lastFocusBookmark){var l=s.lastFocusBookmark;return l.startContainer?((r=o.createRange()).setStart(l.startContainer,l.startOffset),r.setEnd(l.endContainer,l.endOffset)):r=l,r}if(e&&s.tridentSel)return s.tridentSel.getRangeAt(0);try{(n=s.getSel())&&(r=0<n.rangeCount?n.getRangeAt(0):(n.createRange?n:o).createRange())}catch(e){}if((e=s.editor.fire("GetSelectionRange",{range:r})).range!==r)return e.range;if(h&&r&&r.setStart&&o.selection){try{a=o.selection.createRange()}catch(e){}a&&a.item&&(i=a.item(0),(r=o.createRange()).setStartBefore(i),r.setEndAfter(i))}return(r=r||(o.createRange?o.createRange():o.body.createTextRange())).setStart&&9===r.startContainer.nodeType&&r.collapsed&&(i=s.dom.getRoot(),r.setStart(i,0),r.setEnd(i,0)),s.selectedRange&&s.explicitRange&&(0===t(r.START_TO_START,r,s.selectedRange)&&0===t(r.END_TO_END,r,s.selectedRange)?r=s.explicitRange:(s.selectedRange=null,s.explicitRange=null)),r},setRng:function(e,t){var n;if(e)if(e.select){this.explicitRange=null;try{e.select()}catch(e){}}else if(this.tridentSel){if(e.cloneRange)try{this.tridentSel.addRange(e)}catch(e){}}else{if(n=this.getSel(),e=this.editor.fire("SetSelectionRange",{range:e}).range,n){this.explicitRange=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),this.selectedRange=0<n.rangeCount?n.getRangeAt(0):null}e.collapsed||e.startContainer!=e.endContainer||!n.setBaseAndExtent||c.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&((t=e.startContainer.childNodes[e.startOffset])&&"IMG"==t.tagName&&this.getSel().setBaseAndExtent(t,0,t,1))}},setNode:function(e){return this.setContent(this.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t,n,r,i,o,a=this.getRng(),s=this.dom.getRoot();return a?(n=a.startContainer,r=a.endContainer,i=a.startOffset,o=a.endOffset,a.setStart?(t=a.commonAncestorContainer,!a.collapsed&&(n==r&&o-i<2&&n.hasChildNodes()&&(t=n.childNodes[i]),3===n.nodeType&&3===r.nodeType&&(n=n.length===i?e(n.nextSibling,!0):n.parentNode,r=0===o?e(r.previousSibling,!1):r.parentNode,n&&n===r))?n:t&&3==t.nodeType?t.parentNode:t):t=(t=a.item?a.item(0):a.parentElement()).ownerDocument!==this.win.document?s:t):s},getSelectedBlocks:function(e,t){var n,r=this.dom,i=[],o=r.getRoot();if(e=r.getParent(e||this.getStart(),r.isBlock),t=r.getParent(t||this.getEnd(),r.isBlock),e&&e!=o&&i.push(e),e&&t&&e!=t)for(var a=new s(e,o);(n=a.next())&&n!=t;)r.isBlock(n)&&i.push(n);return t&&e!=t&&t!=o&&i.push(t),i},isForward:function(){var e,t=this.dom,n=this.getSel();return!(n&&n.anchorNode&&n.focusNode)||((e=t.createRng()).setStart(n.anchorNode,n.anchorOffset),e.collapse(!0),(t=t.createRng()).setStart(n.focusNode,n.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0)},normalize:function(){var e=this.getRng();return c.range&&new n(this.dom).normalize(e)&&this.setRng(e,this.isForward()),e},selectorChanged:function(e,t){var a,s=this;return s.selectorChangedData||(s.selectorChangedData={},a={},s.editor.on("NodeChange",function(e){var n=e.element,r=s.dom,i=r.getParents(n,null,r.getRoot()),o={};d(s.selectorChangedData,function(e,n){d(i,function(t){return r.is(t,n)?(a[n]||(d(e,function(e){e(!0,{node:t,selector:n,parents:i})}),a[n]=e),o[n]=e,!1):void 0})}),d(a,function(e,t){o[t]||(delete a[t],d(e,function(e){e(!1,{node:n,selector:t,parents:i})}))})})),s.selectorChangedData[e]||(s.selectorChangedData[e]=[]),s.selectorChangedData[e].push(t),s},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){function n(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}}var r,i,o,a=this.dom,s=a.getRoot(),l=0;if(u.isElement(e)){if(!1===t&&(l=e.offsetHeight),"BODY"!=s.nodeName){var c=this.getScrollContainer();if(c)return r=n(e).y-n(c).y+l,o=c.clientHeight,void((r<(i=c.scrollTop)||i+o<r+25)&&(c.scrollTop=r<i?r:r-o+25))}c=a.getViewPort(this.editor.getWin()),r=a.getPos(e).y+l,i=c.y,o=c.h,(r<c.y||i+o<r+25)&&this.editor.getWin().scrollTo(0,r<i?r:r-o+25)}},placeCaretAt:function(e,t){this.setRng(n.getCaretRangeFromPoint(e,t,this.editor.getDoc()))},_moveEndPoint:function(e,t,n){var r=t,i=new s(t,r),o=this.dom.schema.getNonEmptyElements();do{if(3==t.nodeType&&0!==f(t.nodeValue).length)return void(n?e.setStart(t,0):e.setEnd(t,t.nodeValue.length));if(o[t.nodeName]&&!/^(TD|TH)$/.test(t.nodeName))return void(n?e.setStartBefore(t):"BR"==t.nodeName?e.setEndBefore(t):e.setEndAfter(t));if(c.ie&&c.ie<11&&this.dom.isBlock(t)&&this.dom.isEmpty(t))return void(n?e.setStart(t,0):e.setEnd(t,0))}while(t=n?i.next():i.prev());"BODY"==r.nodeName&&(n?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},getBoundingClientRect:function(){var e=this.getRng();return e.collapsed?t.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){this.win=null,this.controlSelection.destroy()}},r}),e(j,[z,d],function(o,e){var a=e.each;return function(i){this.compare=function(e,t){function n(t){var n={};return a(i.getAttribs(t),function(e){e=e.nodeName.toLowerCase();0!==e.indexOf("_")&&"style"!==e&&0!==e.indexOf("data-")&&(n[e]=i.getAttrib(t,e))}),n}function r(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return;if(e[r]!=n)return;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return;return 1}return e.nodeName==t.nodeName&&(!(!r(n(e),n(t))||!r(i.parseStyle(i.getAttrib(e,"style")),i.parseStyle(i.getAttrib(t,"style"))))&&(!o.isBookmarkNode(e)&&!o.isBookmarkNode(t)))}}}),e(q,[d],function(e){var c=e.each;return{getCssText:function(n,e){function r(e){return e.replace(/%(\w+)/g,"")}var t,i,o,a=n.dom,s="",l=n.settings.preview_styles;if(!1===l)return"";if(l=l||"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow","string"==typeof e){if(!(e=n.formatter.get(e)))return;e=e[0]}return t=e.block||e.inline||"span",i=a.create(t),c(e.styles,function(e,t){(e=r(e))&&a.setStyle(i,t,e)}),c(e.attributes,function(e,t){(e=r(e))&&a.setAttrib(i,t,e)}),c(e.classes,function(e){e=r(e),a.hasClass(i,e)||a.addClass(i,e)}),n.fire("PreviewFormats"),a.setStyles(i,{position:"absolute",left:-65535}),n.getBody().appendChild(i),o=a.getStyle(n.getBody(),"fontSize",!0),o=/px$/.test(o)?parseInt(o,10):0,c(l.split(" "),function(e){var t=a.getStyle(i,e,!0);if(!("background-color"==e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=a.getStyle(n.getBody(),e,!0),"#ffffff"==a.toHex(t).toLowerCase())||"color"==e&&"#000000"==a.toHex(t).toLowerCase())){if("font-size"==e&&/em|%$/.test(t)){if(0===o)return;t=(t=parseFloat(t,10)/(/%$/.test(t)?100:1))*o+"px"}"border"==e&&t&&(s+="padding:0 2px;"),s+=e+":"+t+";"}}),n.fire("AfterPreviewFormats"),a.remove(i),s}}}),e(W,[u,x,f],function(i,o,a){var e,t,n=[],s=i.filter,l=i.each;return t=function(e){var t,n=e.selection.getRng(),r=o.matchNodeNames("pre");n.collapsed||(t=e.selection.getSelectedBlocks(),l(s(s(t,r),function(e){return r(e.previousSibling)&&-1!=i.indexOf(t,e.previousSibling)}),function(e){var t;t=e.previousSibling,a(e=e).remove(),a(t).append("<br><br>").append(e.childNodes)}))},n[e="pre"]||(n[e]=[]),n[e].push(t),{postProcess:function(e,t){l(n[e],function(e){e(t)})}}}),e(G,[m,S,z,j,d,q,W],function(re,e,t,l,u,i,d){return function(b){function w(e){return e.nodeType&&(e=e.nodeName),!!b.schema.getTextBlockElements()[e.toLowerCase()]}function h(e){return/^(TH|TD)$/.test(e.nodeName)}function p(e,t){return H.getParents(e,t,H.getRoot())}function x(e){return 1===e.nodeType&&"_mce_caret"===e.id}function $(e){return e?r[e]:r}function n(e,t){e&&("string"!=typeof e?ee(e,function(e,t){n(t,e)}):(t=t.length?t:[t],ee(t,function(e){e.deep===F&&(e.deep=!e.selector),e.split===F&&(e.split=!e.selector||e.inline),e.remove===F&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),r[e]=t))}function a(e,t){var n=$(t);if(n)for(var r=0;r<n.length;r++)if(!1===n[r].inherit&&H.is(e,n[r].selector))return 1}function m(e){var t;return b.dom.getParent(e,function(e){return(t=b.dom.getStyle(e,"text-decoration"))&&"none"!==t}),t}function c(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=m(e.parentNode),b.dom.getStyle(e,"color")&&t?b.dom.setStyle(e,"text-decoration",t):b.dom.getStyle(e,"text-decoration")===t&&b.dom.setStyle(e,"text-decoration",null))}function C(h,m,r){function p(n,e){var t;e=e||v,n&&(e.onformat&&e.onformat(n,e,m,r),ee(e.styles,function(e,t){H.setStyle(n,t,T(e,m))}),e.styles&&(t=H.getAttrib(n,"style"))&&n.setAttribute("data-mce-style",t),ee(e.attributes,function(e,t){H.setAttrib(n,t,T(e,m))}),ee(e.classes,function(e){e=T(e,m),H.hasClass(n,e)||H.addClass(n,e)}))}function e(e,t,l){var c=[],u=!0,d=v.inline||v.block,f=H.create(d);p(f),V.walk(e,function(e){var s;ee(e,function e(t){var n,r,i=u,o=t.nodeName.toLowerCase(),a=t.parentNode.nodeName.toLowerCase();return 1===t.nodeType&&Z(t)&&(i=u,u="true"===Z(t),r=!0),E(o,"br")?(s=0,void(v.block&&H.remove(t))):v.wrapper&&S(t,h,m)?void(s=0):u&&!r&&v.block&&!v.wrapper&&w(o)&&j(a,d)?(p(t=H.rename(t,d)),c.push(t),void(s=0)):v.selector&&(ee(g,function(e){return"collapsed"in e&&e.collapsed!==y||!H.is(t,e.selector)||x(t)?void 0:(p(t,e),!(n=!0))}),!v.inline||n)?void(s=0):void(!u||r||!j(d,o)||!j(a,d)||!l&&3===t.nodeType&&1===t.nodeValue.length&&65279===t.nodeValue.charCodeAt(0)||x(t)||v.inline&&q(t)?(s=0,ee(te(t.childNodes),e),r&&(u=i),s=0):(s||(s=H.clone(f,X),t.parentNode.insertBefore(s,t),c.push(s)),s.appendChild(t)))})}),!0===v.links&&ee(c,function(e){!function e(t){"A"===t.nodeName&&p(t,v),ee(te(t.childNodes),e)}(e)}),ee(c,function(n){var e,t,r,i,o,a;if(t=n,r=0,ee(t.childNodes,function(e){N(e)||Q(e)||r++}),e=r,!(1<c.length)&&q(n)||0!==e){if(v.inline||v.wrapper){if(v.exact||1!==e||(ee((i=n).childNodes,function(e){return 1!=e.nodeType||Q(e)||x(e)?void 0:(o=e,X)}),o&&!Q(o)&&k(o,v)&&(p(a=H.clone(o,X)),H.replace(a,i,J),H.remove(o,1)),n=a||i),ee(g,function(t){ee(H.select(t.inline,n),function(e){Q(e)||D(t,m,e,t.exact?e:null)})}),S(n.parentNode,h,m))return H.remove(n,1),n=0,J;v.merge_with_parents&&H.getParent(n.parentNode,function(e){return S(e,h,m)?(H.remove(n,1),n=0,J):void 0}),n&&!1!==v.merge_siblings&&(n=I(M(n),n),n=I(n,M(n,J)))}}else H.remove(n,1)})}var t,n,i,o,a,g=$(h),v=g[0],y=!r&&z.isCollapsed();if("false"!==Z(z.getNode()))v&&(r?r.nodeType?((t=H.createRng()).setStartBefore(r),t.setEndAfter(r),e(R(t,g),0,!0)):e(r,0,!0):y&&v.inline&&!H.select("td[data-mce-selected],th[data-mce-selected]").length?O("apply",h,m):(n=b.selection.getNode(),W||!g[0].defaultBlock||H.getParent(n,H.isBlock)||C(g[0].defaultBlock),b.selection.setRng((i=b.selection.getRng(),o=i.startContainer,a=i.endContainer,o!=a&&0===i.endOffset&&(a=(3==(o=function(e,t){var n=new re(t);for(r=n.prev2();r;r=n.prev2()){if(3==r.nodeType&&0<r.data.length)return r;if(1<r.childNodes.length||r==e||"BR"==r.tagName)return r}}(o,a)).nodeType?o.data:o.childNodes).length,i.setEnd(o,a)),i)),t=z.getBookmark(),e(R(z.getRng(J),g)),v.styles&&(v.styles.color||v.styles.textDecoration)&&(ne(n,c,"childNodes"),c(n)),z.moveToBookmark(t),B(z.getRng(J)),b.nodeChanged()),d.postProcess(h,b));else{r=z.getNode();for(var s=0,l=g.length;s<l;s++)if(g[s].ceFalseOverride&&H.is(r,g[s].selector))return void p(r,g[s])}}function v(r,u,e,i){function o(e){return function(e,t,n,r){var i,o,a,s,l,c;if(e){for(c=e.parentNode,i=t.parentNode;i&&i!=c;i=i.parentNode){for(o=H.clone(i,X),l=0;l<d.length;l++)if(D(d[l],u,o,o)){o=0;break}o&&(a&&o.appendChild(a),s=s||o,a=o)}!r||f.mixed&&q(e)||(t=H.split(e,t)),a&&(n.parentNode.insertBefore(a,n),s.appendChild(n))}return t}((ee(p(e.parentNode).reverse(),function(e){var t;n||"_start"==e.id||"_end"==e.id||(t=S(e,r,u,i))&&!1!==t.split&&(n=e)}),n),e,e,!0);var n}function a(e){var t=H.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return 3==(n=Q(n)?n[e?"firstChild":"lastChild"]:n).nodeType&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),H.remove(t,!0),n}function t(e){var t,n,r=e.commonAncestorContainer;if(e=R(e,d,J),f.split){if((t=P(e,J))!=(n=P(e))){if(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),r&&/^T(HEAD|BODY|FOOT|R)$/.test(r.nodeName)&&h(n)&&n.firstChild&&(n=n.firstChild||n),H.isChildOf(t,n)&&!q(n)&&!h(t)&&!h(n))return o(t=_(t,"span",{id:"_start","data-mce-type":"bookmark"})),void a(J);t=_(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=_(n,"span",{id:"_end","data-mce-type":"bookmark"}),o(t),o(n),t=a(J),n=a()}else t=n=o(t);e.startContainer=t.parentNode||t,e.startOffset=G(t),e.endContainer=n.parentNode||n,e.endOffset=G(n)+1}V.walk(e,function(e){ee(e,function(e){(function e(t){var n,r,i,o,a;if(1===t.nodeType&&Z(t)&&(o=s,s="true"===Z(t),a=!0),n=te(t.childNodes),s&&!a)for(r=0,i=d.length;r<i&&!D(d[r],u,t,t);r++);if(f.deep&&n.length){for(r=0,i=n.length;r<i;r++)e(n[r]);a&&(s=o)}})(e),1===e.nodeType&&"underline"===b.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===m(e.parentNode)&&D({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var n,d=$(r),f=d[0],s=!0;if(e)e.nodeType?((n=H.createRng()).setStartBefore(e),n.setEndAfter(e),t(n)):t(e);else if("false"!==Z(z.getNode()))z.isCollapsed()&&f.inline&&!H.select("td[data-mce-selected],th[data-mce-selected]").length?O("remove",r,u,i):(n=z.getBookmark(),t(z.getRng(J)),z.moveToBookmark(n),f.inline&&g(r,u,z.getStart())&&B(z.getRng(!0)),b.nodeChanged());else{e=z.getNode();for(var l=0,c=d.length;l<c&&(!d[l].ceFalseOverride||!D(d[l],u,e,e));l++);}}function S(e,t,s,l){function n(e,t,n){var r,i,o,a=t[n];if(t.onmatch)return t.onmatch(e,t,n);if(a)if(a.length===F){for(r in a)if(a.hasOwnProperty(r)){if(i="attributes"===n?H.getAttrib(e,r):y(e,r),l&&!i&&!t.exact)return;if((!l||t.exact)&&!E(i,A(T(a[r],s),r)))return}}else for(o=0;o<a.length;o++)if("attributes"===n?H.getAttrib(e,a[o]):y(e,a[o]))return t;return t}var r,i,o,a=$(t);if(a&&e)for(i=0;i<a.length;i++)if(k(e,r=a[i])&&n(e,r,"attributes")&&n(e,r,"styles")){if(o=r.classes)for(i=0;i<o.length;i++)if(!H.hasClass(e,o[i]))return;return r}}function g(n,r,e){function t(e){var t=H.getRoot();return e!==t&&(e=H.getParent(e,function(e){return!!a(e,n)||(e.parentNode===t||!!S(e,n,r,!0))}),S(e,n,r))}var i;return e?t(e):t(e=z.getNode())?J:(i=z.getStart())!=e&&t(i)?J:X}function k(e,t){return E(e,t.inline)||E(e,t.block)?J:t.selector&&(1==e.nodeType&&H.is(e,t.selector))}function E(e,t){return e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()==t.toLowerCase()}function y(e,t){return A(H.getStyle(e,t),t)}function A(e,t){return"color"!=t&&"backgroundColor"!=t||(e=H.toHex(e)),"fontWeight"==t&&700==e&&(e="bold"),""+(e="fontFamily"==t?e.replace(/[\'\"]/g,"").replace(/,\s+/g,","):e)}function T(e,n){return"string"!=typeof e?e=e(n):n&&(e=e.replace(/%(\w+)/g,function(e,t){return n[t]||e})),e}function N(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function _(e,t,n){n=H.create(t,n);return e.parentNode.insertBefore(n,e),n.appendChild(e),n}function R(a,s,l){function e(e){var t,n,r,i=t=e?d:h,o=e?"previousSibling":"nextSibling",a=H.getRoot();if(3==i.nodeType&&!N(i)&&(e?0<f:m<i.nodeValue.length))return i;for(;;){if(!s[0].block_expand&&q(t))return t;for(n=t[o];n;n=n[o])if(!Q(n)&&!N(n)&&("BR"!=(r=n).nodeName||!r.getAttribute("data-mce-bogus")||r.nextSibling))return t;if(t==a||t.parentNode==a){i=t;break}t=t.parentNode}return i}function t(e,t){for(t===F&&(t=(3===e.nodeType?e:e.childNodes).length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=(3===e.nodeType?e:e.childNodes).length);return{node:e,offset:t}}function n(e){for(var t=e;t;){if(1===t.nodeType&&Z(t))return"false"===Z(t)?t:e;t=t.parentNode}return e}function r(e,t,i){function n(e,t){var n,r,e=e.nodeValue;return void 0===t&&(t=i?e.length:0),i?(n=e.lastIndexOf(" ",t),-1===(n=(r=e.lastIndexOf(" ",t))<n?n:r)||l||n++):(n=e.indexOf(" ",t),r=e.indexOf(" ",t),n=-1!==n&&(-1===r||n<r)?n:r),n}var r,o,a,s;if(3===e.nodeType){if(-1!==(a=n(e,t)))return{container:e,offset:a};s=e}for(r=new re(e,H.getParent(e,q)||b.getBody());o=r[i?"prev":"next"]();)if(3===o.nodeType){if(-1!==(a=n(s=o)))return{container:o,offset:a}}else if(q(o))break;return s?{container:s,offset:t=i?0:s.length}:void 0}function i(e,t){for(var n,r,i=p(e=3==e.nodeType&&0===e.nodeValue.length&&e[t]?e[t]:e),o=0;o<i.length;o++)for(n=0;n<s.length;n++)if(!("collapsed"in(r=s[n])&&r.collapsed!==a.collapsed)&&H.is(i[o],r.selector))return i[o];return e}function o(e,t){var n,r=H.getRoot();if(!(n=(n=(n=!s[0].wrapper?H.getParent(e,s[0].block,r):n)||H.getParent(3==e.nodeType?e.parentNode:e,function(e){return e!=r&&w(e)}))&&s[0].wrapper?p(n,"ul,ol").reverse()[0]||n:n))for(n=e;n[t]&&!q(n[t])&&!E(n=n[t],"br"););return n||e}var c,u,d=a.startContainer,f=a.startOffset,h=a.endContainer,m=a.endOffset;if(1==d.nodeType&&d.hasChildNodes()&&(u=d.childNodes.length-1,3==(d=d.childNodes[u<f?u:f]).nodeType&&(f=0)),1==h.nodeType&&h.hasChildNodes()&&(u=h.childNodes.length-1,3==(h=h.childNodes[u<m?u:m-1]).nodeType&&(m=h.nodeValue.length)),d=n(d),h=n(h),(Q(d.parentNode)||Q(d))&&(3==(d=(d=Q(d)?d:d.parentNode).nextSibling||d).nodeType&&(f=0)),(Q(h.parentNode)||Q(h))&&(3==(h=(h=Q(h)?h:h.parentNode).previousSibling||h).nodeType&&(m=h.length)),s[0].inline&&(a.collapsed&&((u=r(d,f,!0))&&(d=u.container,f=u.offset),(u=r(h,m))&&(h=u.container,m=u.offset)),(c=t(h,m)).node)){for(;c.node&&0===c.offset&&c.node.previousSibling;)c=t(c.node.previousSibling);c.node&&0<c.offset&&3===c.node.nodeType&&" "===c.node.nodeValue.charAt(c.offset-1)&&1<c.offset&&(h=c.node).splitText(c.offset-1)}return(s[0].inline||s[0].block_expand)&&(s[0].inline&&3==d.nodeType&&0!==f||(d=e(!0)),s[0].inline&&3==h.nodeType&&m!==h.nodeValue.length||(h=e())),s[0].selector&&s[0].expand!==X&&!s[0].inline&&(d=i(d,"previousSibling"),h=i(h,"nextSibling")),(s[0].block||s[0].selector)&&(d=o(d,"previousSibling"),h=o(h,"nextSibling"),s[0].block&&(q(d)||(d=e(!0)),q(h)||(h=e()))),1==d.nodeType&&(f=G(d),d=d.parentNode),1==h.nodeType&&(m=G(h)+1,h=h.parentNode),{startContainer:d,startOffset:f,endContainer:h,endOffset:m}}function D(n,r,i,o){var e,t,a,s,l,c,u;if(!k(i,n)&&(u=i,!n.links||"A"!=u.tagName))return X;if("all"!=n.remove)for(ee(n.styles,function(e,t){e=A(T(e,r),t),"number"==typeof t&&(t=e,o=0),!n.remove_similar&&o&&!E(y(o,t),e)||H.setStyle(i,t,""),a=1}),a&&""===H.getAttrib(i,"style")&&(i.removeAttribute("style"),i.removeAttribute("data-mce-style")),ee(n.attributes,function(e,t){var n;e=T(e,r),"number"==typeof t&&(t=e,o=0),o&&!E(H.getAttrib(o,t),e)||("class"==t&&(e=H.getAttrib(i,t))&&(n="",ee(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(n+=(n?" ":"")+e)}),n)?H.setAttrib(i,t,n):("class"==t&&i.removeAttribute("className"),K.test(t)&&i.removeAttribute("data-mce-"+t),i.removeAttribute(t)))}),ee(n.classes,function(e){e=T(e,r),o&&!H.hasClass(o,e)||H.removeClass(i,e)}),t=H.getAttribs(i),e=0;e<t.length;e++){var d=t[e].nodeName;if(0!==d.indexOf("_")&&0!==d.indexOf("data-"))return X}return"none"!=n.remove&&(l=n,u=(s=i).parentNode,l.block&&(W?u==H.getRoot()&&(l.list_block&&E(s,l.list_block)||ee(te(s.childNodes),function(e){j(W,e.nodeName.toLowerCase())?c?c.appendChild(e):(c=_(e,W),H.setAttribs(c,b.settings.forced_root_block_attrs)):c=0})):q(s)&&!q(u)&&(f(s,X)||f(s.firstChild,J,1)||s.insertBefore(H.create("br"),s.firstChild),f(s,J)||f(s.lastChild,X,1)||s.appendChild(H.create("br")))),l.selector&&l.inline&&!E(l.inline,s)||H.remove(s,1),J);function f(e,t,n){return!(e=M(e,t,n))||"BR"==e.nodeName||q(e)}}function M(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!N(e))return e}function I(t,e){function n(e,t){for(r=e;r;r=r[t]){if(3==r.nodeType&&0!==r.nodeValue.length)return e;if(1==r.nodeType&&!Q(r))return r}return e}var r,i,o=new l(H);if(t&&e&&(t=n(t,"previousSibling"),e=n(e,"nextSibling"),o.compare(t,e))){for(r=t.nextSibling;r&&r!=e;)r=(i=r).nextSibling,t.appendChild(i);return H.remove(e),ee(te(e.childNodes),function(e){t.appendChild(e)}),t}return e}function P(e,t){var n=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"];return 1==n.nodeType&&(e=n.childNodes.length-1,!t&&r&&r--,n=n.childNodes[e<r?e:r]),n=3===(n=3===n.nodeType&&t&&r>=n.nodeValue.length?new re(n,b.getBody()).next()||n:n).nodeType&&!t&&0===r?new re(n,b.getBody()).prev()||n:n}function O(e,c,u,d){function f(e){var t=H.create("span",{id:p,"data-mce-bogus":!0,style:g?"color:red":""});return e&&t.appendChild(b.getDoc().createTextNode(Y)),t}function r(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==Y||1<e.childNodes.length)return;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return 1}function i(e){for(;e;){if(e.id===p)return e;e=e.parentNode}}function o(e){var t;if(e)for(e=(t=new re(e,e)).current();e;e=t.next())if(3===e.nodeType)return e}function a(e,t){var n;if(e)n=z.getRng(!0),r(e)?(!1!==t&&(n.setStartBefore(e),n.setEndBefore(e)),H.remove(e)):((t=o(e)).nodeValue.charAt(0)===Y&&(t.deleteData(0,1),n.startContainer==t&&0<n.startOffset&&n.setStart(t,n.startOffset-1),n.endContainer==t&&0<n.endOffset&&n.setEnd(t,n.endOffset-1)),H.remove(e,1)),z.setRng(n);else if(!(e=i(z.getStart())))for(;e=H.get(p);)a(e,!1)}function t(){var e=i(z.getStart());e&&!H.isEmpty(e)&&ne(e,function(e){1!=e.nodeType||e.id===p||H.isEmpty(e)||H.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var n,s,l,h,m,p="_mce_caret",g=b.settings.caret_debug;b._hasCaretEvents||(U=function(){var e,t=[];if(r(i(z.getStart()),t))for(e=t.length;e--;)H.setAttrib(t[e],"data-mce-bogus","1")},L=function(e){e=e.keyCode;a(),8==e&&z.isCollapsed()&&z.getStart().innerHTML==Y&&a(i(z.getStart())),37!=e&&39!=e||a(i(z.getStart())),t()},b.on("SetContent",function(e){e.selection&&t()}),b._hasCaretEvents=!0),"apply"==e?(s=z.getRng(!0),l=s.startOffset,h=s.startContainer.nodeValue,(m=i(z.getStart()))&&(n=o(m)),h&&0<l&&l<h.length&&/\w/.test(h.charAt(l))&&/\w/.test(h.charAt(l-1))?(h=z.getBookmark(),s.collapse(!0),s=R(s,$(c)),s=V.split(s),C(c,u,s),z.moveToBookmark(h)):(m&&n.nodeValue===Y||(n=(m=f(!0)).firstChild,s.insertNode(m),l=1),C(c,u,m),z.setCursorLocation(n,l))):function(){var e,t,n,r=z.getRng(!0),i=[],o=r.startContainer,a=r.startOffset,s=o;for(3==o.nodeType&&(a!=o.nodeValue.length&&(e=!0),s=s.parentNode);s;){if(S(s,c,u,d)){t=s;break}s.nextSibling&&(e=!0),i.push(s),s=s.parentNode}if(t)if(e)l=z.getBookmark(),r.collapse(!0),r=R(r,$(c),!0),r=V.split(r),v(c,u,r),z.moveToBookmark(l);else{for(s=r=f(),n=i.length-1;0<=n;n--)s.appendChild(H.clone(i[n],!1)),s=s.firstChild;s.appendChild(H.doc.createTextNode(Y)),s=s.firstChild;var l=H.getParent(t,w);l&&H.isEmpty(l)?t.parentNode.replaceChild(r,t):H.insertAfter(r,t),z.setCursorLocation(s,1),H.isEmpty(t)&&H.remove(t)}}()}function B(e){var t,n,r,i,o,a=e.startContainer,s=e.startOffset;if(!(e.startContainer==e.endContainer&&((o=e.startContainer.childNodes[e.startOffset])&&/^(IMG)$/.test(o.nodeName))||(3==a.nodeType&&s>=a.nodeValue.length&&(s=G(a),a=a.parentNode,t=!0),1!=a.nodeType)))for(a=(o=a.childNodes)[Math.min(s,o.length-1)],n=new re(a,H.getParent(a,H.isBlock)),(s>o.length-1||t)&&n.next(),r=n.current();r;r=n.next())if(3==r.nodeType&&!N(r))return i=H.create("a",{"data-mce-bogus":"all"},Y),r.parentNode.insertBefore(i,r),e.setStart(r,0),z.setRng(e),H.remove(i),0}var s,F,L,U,r={},H=b.dom,z=b.selection,V=new e(H),j=b.schema.isValidChild,q=H.isBlock,W=b.settings.forced_root_block,G=H.nodeIndex,Y="\ufeff",K=/^(src|href|style)$/,X=!1,J=!0,Z=H.getContentEditable,Q=t.isBookmarkNode,ee=u.each,te=u.grep,ne=u.walk;(0,u.extend)(this,{get:$,register:n,unregister:function(e){return e&&r[e]&&delete r[e],r},apply:C,remove:v,toggle:function(e,t,n){var r=$(e);(!g(e,t,n)||"toggle"in r[0]&&!r[0].toggle?C:v)(e,t,n)},match:g,matchAll:function(r,i){var o=[],a={},e=z.getStart();return H.getParent(e,function(e){for(var t,n=0;n<r.length;n++)t=r[n],!a[t]&&S(e,t,i)&&(a[t]=!0,o.push(t))},H.getRoot()),o},matchNode:S,canApply:function(e){var t,n,r,i,o=$(e);if(o)for(t=p(z.getStart()),r=o.length-1;0<=r;r--){if(!(i=o[r].selector)||o[r].defaultBlock)return J;for(n=t.length-1;0<=n;n--)if(H.is(t[n],i))return J}return X},formatChanged:function(e,t,n){var o;return s||(s={},o={},b.on("NodeChange",function(n){var r=p(n.element),i={},r=u.grep(r,function(e){return 1==e.nodeType&&!e.getAttribute("data-mce-bogus")});ee(s,function(e,n){ee(r,function(t){return S(t,n,{},e.similar)?(o[n]||(ee(e,function(e){e(!0,{node:t,format:n,parents:r})}),o[n]=e),i[n]=e,!1):!a(t,n)&&void 0})}),ee(o,function(e,t){i[t]||(delete o[t],ee(e,function(e){e(!1,{node:n.element,format:t,parents:r})}))})})),ee(e.split(","),function(e){s[e]||(s[e]=[],s[e].similar=n),s[e].push(t)}),this},getCssText:function(e){return i.getCssText(b,e)}}),n({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(n,e,t){ee(t,function(e,t){H.setAttrib(n,t,e)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),ee("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){n(e,{block:e,remove:"all"})}),n(b.settings.formats),function(){b.addShortcut("meta+b","bold_desc","Bold"),b.addShortcut("meta+i","italic_desc","Italic"),b.addShortcut("meta+u","underline_desc","Underline");for(var e=1;e<=6;e++)b.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);b.addShortcut("access+7","",["FormatBlock",!1,"p"]),b.addShortcut("access+8","",["FormatBlock",!1,"div"]),b.addShortcut("access+9","",["FormatBlock",!1,"address"])}(),b.on("BeforeGetContent",function(e){U&&"raw"!=e.format&&U()}),b.on("mouseup keydown",function(e){L&&L(e)})}}),e(Y,[I,o],function(e,n){return function(o){function a(){return o.serializer.getTrimmedContent()}function s(e){o.setDirty(e)}function r(e){c.typing=!1,c.add({},e)}var l,i,c=this,u=0,d=[],f=0;return o.on("init",function(){c.add()}),o.on("BeforeExecCommand",function(e){e=e.command;"Undo"!=e&&"Redo"!=e&&"mceRepaint"!=e&&c.beforeChange()}),o.on("ExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&r(e)}),o.on("ObjectResizeStart Cut",function(){c.beforeChange()}),o.on("SaveContent ObjectResized blur",r),o.on("DragEnd",r),o.on("KeyUp",function(e){var t=e.keyCode;e.isDefaultPrevented()||((33<=t&&t<=36||37<=t&&t<=40||45==t||13==t||e.ctrlKey)&&(r(),o.nodeChanged()),46!=t&&8!=t&&(!n.mac||91!=t&&93!=t)||o.nodeChanged(),i&&c.typing&&(o.isDirty()||(s(d[0]&&a()!=d[0].content),o.isDirty()&&o.fire("change",{level:d[0],lastLevel:null})),o.fire("TypingUndo"),i=!1,o.nodeChanged()))}),o.on("KeyDown",function(e){var t,n=e.keyCode;e.isDefaultPrevented()||(33<=n&&n<=36||37<=n&&n<=40||45==n?c.typing&&r(e):(t=e.ctrlKey&&!e.altKey||e.metaKey,!(n<16||20<n)||224==n||91==n||c.typing||t||(c.beforeChange(),c.typing=!0,c.add({},e),i=!0)))}),o.on("MouseDown",function(e){c.typing&&r(e)}),o.addShortcut("meta+z","","Undo"),o.addShortcut("meta+y,meta+shift+z","","Redo"),o.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||o.nodeChanged()}),c={data:d,typing:!1,beforeChange:function(){f||(l=o.selection.getBookmark(2,!0))},add:function(e,t){var n,r,i=o.settings;if((e=e||{}).content=a(),f||o.removed)return null;if(r=d[u],o.fire("BeforeAddUndo",{level:e,lastLevel:r,originalEvent:t}).isDefaultPrevented())return null;if(r&&r.content==e.content)return null;if(d[u]&&(d[u].beforeBookmark=l),i.custom_undo_redo_levels&&d.length>i.custom_undo_redo_levels){for(n=0;n<d.length-1;n++)d[n]=d[n+1];d.length--,u=d.length}e.bookmark=o.selection.getBookmark(2,!0),u<d.length-1&&(d.length=u+1),d.push(e),u=d.length-1;t={level:e,lastLevel:r,originalEvent:t};return o.fire("AddUndo",t),0<u&&(s(!0),o.fire("change",t)),e},undo:function(){var e;return c.typing&&(c.add(),c.typing=!1),0<u&&(e=d[--u],o.setContent(e.content,{format:"raw"}),o.selection.moveToBookmark(e.beforeBookmark),s(!0),o.fire("undo",{level:e})),e},redo:function(){var e;return u<d.length-1&&(e=d[++u],o.setContent(e.content,{format:"raw"}),o.selection.moveToBookmark(e.bookmark),s(!0),o.fire("redo",{level:e})),e},clear:function(){d=[],u=0,c.typing=!1,c.data=d,o.fire("ClearUndos")},hasUndo:function(){return 0<u||c.typing&&d[0]&&a()!=d[0].content},hasRedo:function(){return u<d.length-1&&!this.typing},transact:function(e){c.beforeChange();try{f++,e()}finally{f--}return c.add()},extra:function(e,t){var n;c.transact(e)&&(n=d[u].bookmark,e=d[u-1],o.setContent(e.content,{format:"raw"}),o.selection.moveToBookmark(e.beforeBookmark),c.transact(t)&&(d[u-1].beforeBookmark=n))}}}}),e(K,[m,S,o],function(B,F,L){var U=L.ie&&L.ie<11;return function(N){function t(e){function c(e){return e&&_.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==_.getContentEditable(e)}function t(e){var t;_.isBlock(e)&&(t=R.getRng(),e.appendChild(_.create("span",null," ")),R.select(e),e.lastChild.outerHTML="",R.setRng(t))}function n(e){var t,n,r,i,o,a=e;if(e){if(L.ie&&L.ie<9&&h&&h.firstChild&&h.firstChild==h.lastChild&&"BR"==h.firstChild.tagName&&_.remove(h.firstChild),/^(LI|DT|DD)$/.test(e.nodeName)&&(o=function(e){for(;e;){if(1==e.nodeType||3==e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(e.firstChild))&&/^(UL|OL|DL)$/.test(o.nodeName)&&e.insertBefore(_.doc.createTextNode(" "),e.firstChild),r=_.createRng(),L.ie||e.normalize(),e.hasChildNodes()){for(t=new B(e,e);n=t.current();){if(3==n.nodeType){r.setStart(n,0),r.setEnd(n,0);break}if(O[n.nodeName.toLowerCase()]){r.setStartBefore(n),r.setEndBefore(n);break}a=n,n=t.next()}n||(r.setStart(a,0),r.setEnd(a,0))}else"BR"==e.nodeName?e.nextSibling&&_.isBlock(e.nextSibling)?((!m||m<9)&&(i=_.create("br"),e.parentNode.insertBefore(i,e)),r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)):(r.setStart(e,0),r.setEnd(e,0));R.setRng(r),_.remove(i),R.scrollIntoView(e)}}function u(e){var t=D.forced_root_block;t&&t.toLowerCase()===e.tagName.toLowerCase()&&_.setAttribs(e,D.forced_root_block_attrs)}function r(e){var t,n,r,i=l,o=I.getTextInlineElements();if(e||"TABLE"==b?u(t=_.create(e||x)):t=h.cloneNode(!1),r=t,!1!==D.keep_styles)do{if(o[i.nodeName]){if("_mce_caret"==i.id)continue;n=i.cloneNode(!1),_.setAttrib(n,"id",""),t.hasChildNodes()?n.appendChild(t.firstChild):r=n,t.appendChild(n)}}while((i=i.parentNode)&&i!=d);return U||(r.innerHTML='<br data-mce-bogus="1">'),t}function i(e){var t,n,r;if(3!=l.nodeType||!(e?0<f:f<l.nodeValue.length)){if(l.parentNode==h&&$&&!e)return 1;if(e&&1==l.nodeType&&l==h.firstChild)return 1;if("TABLE"===l.nodeName||l.previousSibling&&"TABLE"==l.previousSibling.nodeName)return $&&!e||!$&&e;for(t=new B(l,h),3==l.nodeType&&(e&&0===f?t.prev():e||f!=l.nodeValue.length||t.next());n=t.current();){if(1===n.nodeType){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),P[r]&&"br"!==r))return}else if(3===n.nodeType&&!/^[ \t\r\n]*$/.test(n.nodeValue))return;e?t.prev():t.next()}return 1}}function o(){N.execCommand("InsertLineBreak",!1,e)}function a(){g=/^(H[1-6]|PRE|FIGURE)$/.test(b)&&"HGROUP"!=w?r(x):r(),D.end_container_on_empty_block&&c(y)&&_.isEmpty(h)?g=_.split(y,h):_.insertAfter(g,h),n(g)}var s,d,l,f,h,m,p,g,v,y,b,w,x,$,C,S,k,E=R.getRng(!0);if(!e.isDefaultPrevented())if(E.collapsed){if(new F(_).normalize(E),l=E.startContainer,f=E.startOffset,x=(x=(D.force_p_newlines?"p":"")||D.forced_root_block)?x.toUpperCase():"",m=_.doc.documentMode,p=e.shiftKey,1==l.nodeType&&l.hasChildNodes()&&($=f>l.childNodes.length-1,l=l.childNodes[Math.min(f,l.childNodes.length-1)]||l,f=$&&3==l.nodeType?l.nodeValue.length:0),d=function(e){for(var t,n=_.getRoot(),r=e;r!==n&&"false"!==_.getContentEditable(r);)"true"===_.getContentEditable(r)&&(t=r),r=r.parentNode;return r!==n?t:n}(l))if(M.beforeChange(),_.isBlock(d)||d==_.getRoot()){if((x&&!p||!x&&p)&&(l=function(e,t){var n,r,i,o,a,s=x||"P",l=_.getParent(e,_.isBlock);if(!l||!c(l)){if(a=((l=l||d)==N.getBody()||(a=l)&&/^(TD|TH|CAPTION)$/.test(a.nodeName)?l:l.parentNode).nodeName.toLowerCase(),!l.hasChildNodes())return u(n=_.create(s)),l.appendChild(n),E.setStart(n,0),E.setEnd(n,0),n;for(i=e;i.parentNode!=l;)i=i.parentNode;for(;i&&!_.isBlock(i);)i=(r=i).previousSibling;if(r&&I.isValidChild(a,s.toLowerCase())){for(u(n=_.create(s)),r.parentNode.insertBefore(n,r),i=r;i&&!_.isBlock(i);)o=i.nextSibling,n.appendChild(i),i=o;E.setStart(e,t),E.setEnd(e,t)}}return e}(l,f)),h=_.getParent(l,_.isBlock),y=h?_.getParent(h.parentNode,_.isBlock):null,b=h?h.nodeName.toUpperCase():"","LI"!=(w=y?y.nodeName.toUpperCase():"")||e.ctrlKey||(h=y,b=w),/^(LI|DT|DD)$/.test(b)){if(!x&&p)return void o();if(_.isEmpty(h))return void(y!=N.getBody()&&(k=y.parentNode.nodeName,/^(OL|UL|LI)$/.test(k)&&(x="LI"),g=x?r(x):_.create("BR"),A(!0)&&A()?"LI"==k?_.insertAfter(g,T()):_.replace(g,y):A(!0)?"LI"==k?(_.insertAfter(g,T()),g.appendChild(_.doc.createTextNode(" ")),g.appendChild(y)):y.parentNode.insertBefore(g,y):A()?(_.insertAfter(g,T()),t(g)):(y=T(),(s=E.cloneRange()).setStartAfter(h),s.setEndAfter(y),v=s.extractContents(),"LI"==x&&"LI"==v.firstChild.nodeName?(g=v.firstChild,_.insertAfter(v,y)):(_.insertAfter(v,y),_.insertAfter(g,y))),_.remove(h),n(g),M.add()))}if("PRE"==b&&!1!==D.br_in_pre){if(!p)return void o()}else if(!x&&!p&&"LI"!=b||x&&p)return void o();x&&h===N.getBody()||(x=x||"P",i()?a():i(!0)?(t(g=h.parentNode.insertBefore(r(),h)),n(h)):((s=E.cloneRange()).setEndAfter(h),function(e){for(;3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild,e;);}(v=s.extractContents()),g=v.firstChild,_.insertAfter(v,h),function(){var e,t=g,n=[];if(t){for(;t=t.firstChild;){if(_.isBlock(t))return;1!=t.nodeType||P[t.nodeName.toLowerCase()]||n.push(t)}for(e=n.length;e--;)(!(t=n[e]).hasChildNodes()||t.firstChild==t.lastChild&&""===t.firstChild.nodeValue||"A"==t.nodeName&&" "===(t.innerText||t.textContent))&&_.remove(t)}}(),C=h,U||(C.normalize(),(S=C.lastChild)&&!/^(left|right)$/gi.test(_.getStyle(S,"float",!0))||_.add(C,"br")),_.isEmpty(h)&&(h.innerHTML=U?"":'<br data-mce-bogus="1">'),g.normalize(),_.isEmpty(g)?(_.remove(g),a()):n(g)),_.setAttrib(g,"id",""),N.fire("NewBlock",{newBlock:g}),M.add())}else x&&!p||o()}else N.execCommand("Delete");function A(e){for(var t=y[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===h}function T(){var e=y.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:y}}var _=N.dom,R=N.selection,D=N.settings,M=N.undoManager,I=N.schema,P=I.getNonEmptyElements(),O=I.getMoveCaretBeforeOnEnterElements();N.on("keydown",function(e){13==e.keyCode&&!1!==t(e)&&e.preventDefault()})}}),e(X,[],function(){return function(m){var p=m.settings,g=m.dom,v=m.selection,y=m.schema,b=y.getBlockElements();p.forced_root_block&&m.on("NodeChange",function(){var e,t,n,r,i,o,a,s,l,c,u,d=v.getStart(),f=m.getBody(),h=p.forced_root_block;if(d&&1===d.nodeType&&h){for(;d&&d!=f;){if(b[d.nodeName])return;d=d.parentNode}if((e=v.getRng()).setStart){t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;try{l=m.getDoc().activeElement===f}catch(e){}}else e.item&&(d=e.item(0),(e=m.getDoc().body.createTextRange()).moveToElementText(d)),l=e.parentElement().ownerDocument===m.getDoc(),(c=e.duplicate()).collapse(!0),n=-1*c.move("character",-16777215),c.collapsed||((c=e.duplicate()).collapse(!1),i=-1*c.move("character",-16777215)-n);for(d=f.firstChild,u=f.nodeName.toLowerCase();d;)if((3===d.nodeType||1==d.nodeType&&!b[d.nodeName])&&y.isValidChild(u,h.toLowerCase())){if(3===d.nodeType&&0===d.nodeValue.length){d=(a=d).nextSibling,g.remove(a);continue}o||(o=g.create(h,m.settings.forced_root_block_attrs),d.parentNode.insertBefore(o,d),s=!0),d=(a=d).nextSibling,o.appendChild(a)}else o=null,d=d.nextSibling;if(s&&l){if(e.setStart)e.setStart(t,n),e.setEnd(r,i),v.setRng(e);else try{(e=m.getDoc().body.createTextRange()).moveToElementText(f),e.collapse(!0),e.moveStart("character",n),0<i&&e.moveEnd("character",i),e.select()}catch(e){}m.nodeChanged()}}})}}),e(J,[O,m,x,U,C,B],function(e,a,l,t,c,n){function r(e){return 0<e}function i(e){return e<0}function o(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode)if(h(e))return e;return t}function s(e,t){for(;e&&e!=t;){if(p(e))return e;e=e.parentNode}return null}function u(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n}function d(e,t,n){for(var r,i,o,a=e?"previousSibling":"nextSibling";n&&n!=t;){if(r=n[a],g(r)&&(r=r[a]),m(r)){if(o=n,s(r,i=t)==s(o,i))return r;break}if(b(r))break;n=n.parentNode}return null}function f(e,t){return m((n=e,(e=t)?(t=e.container(),e=e.offset(),y(t)?t.childNodes[e+n]:null):null));var n}var h=l.isContentEditableTrue,m=l.isContentEditableFalse,p=l.matchStyleValues("display","block table table-cell table-caption"),g=c.isCaretContainer,v=e.curry,y=l.isElement,b=n.isCaretCandidate,w=v(u,!0),x=v(u,!1);return{isForwards:r,isBackwards:i,findNode:function(e,t,n,r,i){var o=new a(e,r);if(t<0){if(m(e)&&n(e=o.prev(!0)))return e;for(;e=o.prev(i);)if(n(e))return e}if(0<t){if(m(e)&&n(e=o.next(!0)))return e;for(;e=o.next(i);)if(n(e))return e}return null},getEditingHost:o,getParentBlock:s,isInSameBlock:function(e,t,n){return s(e.container(),n)==s(t.container(),n)},isInSameEditingHost:function(e,t,n){return o(e.container(),n)==o(t.container(),n)},isBeforeContentEditableFalse:v(f,0),isAfterContentEditableFalse:v(f,-1),normalizeRange:function(e,t,n){var r,i=v(d,!0,t),o=v(d,!1,t),a=n.startContainer,s=n.startOffset;if(c.isCaretContainerBlock(a)){if("before"==(t=(a=!y(a)?a.parentNode:a).getAttribute("data-mce-caret"))&&(r=a.nextSibling,m(r)))return w(r);if("after"==t&&(r=a.previousSibling,m(r)))return x(r)}if(!n.collapsed)return n;if(l.isText(a)){if(g(a)){if(1===e){if(r=o(a))return w(r);if(r=i(a))return x(r)}if(-1===e){if(r=i(a))return x(r);if(r=o(a))return w(r)}return n}if(c.endsWithCaretContainer(a)&&s>=a.data.length-1)return 1===e&&(r=o(a))?w(r):n;if(c.startsWithCaretContainer(a)&&s<=1)return-1===e&&(r=i(a))?x(r):n;if(s===a.data.length)return(r=o(a))?w(r):n;if(0===s)return(r=i(a))?x(r):n}return n}}}),e(Z,[x,B,U,J,u,O],function(u,e,d,f,h,m){function p(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null}function g(e,t){if(x(e)){if(C(t.previousSibling)&&!b(t.previousSibling))return d.before(t);if(b(t))return d(t,0)}if($(e)){if(C(t.nextSibling)&&!b(t.nextSibling))return d.after(t);if(b(t))return d(t,t.data.length)}return!$(e)||n(t)?d.before(t):d.after(t)}function v(e,t,n){var r,i,o,a,s,l,c;if(!w(n)||!t)return null;if(r=(s=t).container(),c=s.offset(),b(r)){if($(e)&&0<c)return d(r,--c);if(x(e)&&c<r.length)return d(r,++c);i=r}else{if($(e)&&0<c&&(o=p(r,c-1),C(o)))return!S(o)&&(a=f.findNode(o,e,k,o))?b(a)?d(a,a.data.length):d.after(a):b(o)?d(o,o.data.length):d.before(o);if(x(e)&&c<r.childNodes.length&&(o=p(r,c),C(o)))return l=o,t=n,u.isBr(l)&&((c=v(1,d.after(l),t))&&!f.isInSameBlock(d.before(l),d.before(c),t))?v(e,d.after(o),n):!S(o)&&(a=f.findNode(o,e,k,o))?b(a)?d(a,0):d.before(a):b(o)?d(o,0):d.after(o);i=s.getNode()}return(x(e)&&s.isAtEnd()||$(e)&&s.isAtStart())&&(i=f.findNode(i,e,m.constant(!0),n,!0),k(i))?g(e,i):(o=f.findNode(i,e,k,n),!(n=h.last(h.filter(function(e,t){for(var n=[];e&&e!=t;)n.push(e),e=e.parentNode;return n}(r,n),y)))||o&&n.contains(o)?o?g(e,o):null:x(e)?d.after(n):d.before(n))}var y=u.isContentEditableFalse,b=u.isText,w=u.isElement,n=u.isBr,x=f.isForwards,$=f.isBackwards,C=e.isCaretCandidate,S=e.isAtomic,k=e.isEditableCaretCandidate;return function(t){return{next:function(e){return v(1,e,t)},prev:function(e){return v(-1,e,t)}}}}),e(Q,[d,Z,U],function(d,f,h){function m(e){return d.grep(e.childNodes,function(e){return"LI"===e.nodeName})}function p(e){return 0<e.length&&!e[e.length-1].firstChild?e.slice(0,-1):e}function g(e,t){return(e=e.getParent(t,e.isBlock))&&"LI"===e.nodeName?e:null}function v(e,t){return e=h.after(e),(e=new f(t).prev(e))?e.toRange():null}function y(t,e,n){var r=t.parentNode;return d.each(e,function(e){r.insertBefore(e,t)}),function(e,t){e=h.before(e),e=new f(t).next(e);return e?e.toRange():null}(t,n)}return{isListFragment:function(e){var t=e.firstChild,e=e.lastChild;return t&&"meta"===t.name&&(t=t.next),e&&"mce_marker"===e.attr("id")&&(e=e.prev),!(!t||t!==e)&&("ul"===t.name||"ol"===t.name)},insertAtCaret:function(e,r,i,t){var n,o,a,s,l,c=function(e,t,n){t=t.serialize(n),n=e.createFragment(t);return t=(e=n).firstChild,n=e.lastChild,t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e}(r,e,t),u=g(r,i.startContainer),e=p(m(c.firstChild)),t=r.getRoot(),c=function(e){var t=h.fromRangeStart(i),n=new f(r.getRoot()),t=1===e?n.prev(t):n.next(t);return!t||g(r,t.getNode())!==u};return c(1)?y(u,e,t):c(2)?(a=u,s=e,l=t,r.insertAfter(s.reverse(),a),v(s[0],l)):(a=e,s=t,l=n=u,e=(t=e=i).cloneRange(),t=t.cloneRange(),e.setStartBefore(l),t.setEndAfter(l),t=[e.cloneContents(),t.cloneContents()],(o=n.parentNode).insertBefore(t[0],n),d.each(a,function(e){o.insertBefore(e,n)}),o.insertBefore(t[1],n),o.removeChild(n),v(a[a.length-1],s))},isParentBlockLi:function(e,t){return!!g(e,t)},trimListItems:p,listItems:m}}),e(ee,[o,d,R,Z,U,j,x,Q],function(E,A,T,N,_,R,e,D){function r(r,e,t){var n,i,o,a,s,l,c,u,d,f,h,m=r.schema.getTextInlineElements(),p=r.selection,g=r.dom;function v(e){return h[e]&&3==h[e].nodeType}/^ | $/.test(e)&&(y=e,h=(x=p.getRng(!0)).startContainer,x=x.startOffset,3==h.nodeType&&(0<x?y=y.replace(/^&nbsp;/," "):v("previousSibling")||(y=y.replace(/^ /,"&nbsp;")),x<h.length?y=y.replace(/&nbsp;(<br>|)$/," "):v("nextSibling")||(y=y.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e=y),n=r.parser,$=t.merge,i=new T({validate:r.settings.validate},r.schema),f='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',s={content:e,format:"html",selection:!0},r.fire("BeforeSetContent",s),-1==(e=s.content).indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,f);var y,b,w=(c=p.getRng()).startContainer||(c.parentElement?c.parentElement():null),x=r.getBody();w===x&&p.isCollapsed()&&g.isBlock(x.firstChild)&&((b=x.firstChild)&&!r.schema.getShortEndedElements()[b.nodeName])&&g.isEmpty(x.firstChild)&&((c=g.createRng()).setStart(x.firstChild,0),c.setEnd(x.firstChild,0),p.setRng(c)),p.isCollapsed()||(r.selection.setRng(r.selection.getRng()),r.getDoc().execCommand("Delete",!1,null),y=p.getRng(!0),b=y.startContainer,x=y.startOffset,3==b.nodeType&&y.collapsed&&(" "===b.data[x]?(b.deleteData(x,1),/[\u00a0| ]$/.test(e)||(e+=" ")):" "===b.data[x-1]&&(b.deleteData(x-1,1),/[\u00a0| ]$/.test(e)||(e=" "+e))));var $,C,S,w={context:(o=p.getNode()).nodeName.toLowerCase(),data:t.data},k=n.parse(e,w);if(!0===t.paste&&D.isListFragment(k)&&D.isParentBlockLi(g,o))return c=D.insertAtCaret(i,g,r.selection.getRng(!0),k),r.selection.setRng(c),r.fire("SetContent",s),0;if(function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(k),"mce_marker"==(u=k.lastChild).attr("id"))for(u=(l=u).prev;u;u=u.walk(!0))if(3==u.type||!g.isBlock(u.name)){r.schema.isValidChild(u.parent.name,"span")&&u.parent.insert(l,u,"br"===u.name);break}if(r._selectionOverrides.showBlockCaretContainer(o),w.invalid){for(p.setContent(f),o=p.getNode(),a=r.getBody(),9==o.nodeType?o=u=a:u=o;u!==a;)u=(o=u).parentNode;e=o==a?a.innerHTML:g.getOuterHTML(o),e=i.serialize(n.parse(e.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return i.serialize(k)}))),o==a?g.setHTML(a,e):g.setOuterHTML(o,e)}else e=i.serialize(k),u=o.firstChild,d=o.lastChild,!u||u===d&&"BR"===u.nodeName?g.setHTML(o,e):p.setContent(e);$&&(C=r.getBody(),S=new R(g),A.each(g.select("*[data-mce-fragment]"),function(e){for(var t=e.parentNode;t&&t!=C;t=t.parentNode)m[e.nodeName.toLowerCase()]&&S.compare(t,e)&&g.remove(e,!0)})),function(e){var t,n;if(e){if(p.scrollIntoView(e),t=function(e){for(var t=r.getBody();e&&e!==t;e=e.parentNode)if("false"===r.dom.getContentEditable(e))return e;return null}(e))return g.remove(e),p.select(t);c=g.createRng(),(u=e.previousSibling)&&3==u.nodeType?(c.setStart(u,u.nodeValue.length),E.ie||(d=e.nextSibling)&&3==d.nodeType&&(u.appendData(d.data),d.parentNode.removeChild(d))):(c.setStartBefore(e),c.setEndBefore(e)),t=g.getParent(e,g.isBlock),g.remove(e),t&&g.isEmpty(t)&&(r.$(t).empty(),c.setStart(t,0),c.setEnd(t,0),!M(t)&&!t.getAttribute("data-mce-fragment")&&(n=c,n=_.fromRangeStart(n),n=(n=new N(r.getBody()).next(n))?n.toRange():void 0)?(c=n,g.remove(t)):g.add(t,g.create("br",{"data-mce-bogus":"1"}))),p.setRng(c)}}(g.get("mce_marker")),$=r.getBody(),A.each($.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")}),r.fire("SetContent",s),r.addVisual()}var M=e.matchNodeNames("td th");return{insertAtCaret:function(e,t){var n,n="string"!=typeof(n=t)?(t=A.extend({paste:n.paste,data:{paste:n.paste}},n),{content:n.content,details:t}):{content:n,details:{}};r(e,n.content,n.details)}}}),e(te,[o,d,S,m,ee],function(d,e,p,g,v){var y=e.each,b=e.extend,w=e.map,x=e.inArray,$=e.explode,C=d.ie&&d.ie<11;return function(f){function t(e){var t;if(!f.quirks.isHidden()){if(e=e.toLowerCase(),t=c.state[e])return t(e);try{return f.getDoc().queryCommandState(e)}catch(e){}return!1}}function e(e,n){n=n||"exec",y(e,function(t,e){y(e.toLowerCase().split(","),function(e){c[n][e]=t})})}function a(e,t,n){return t===ge&&(t=!1),n===ge&&(n=null),f.getDoc().execCommand(e,t,n)}function n(e){return s.match(e)}function o(e,t){s.toggle(e,t?{value:t}:ge),f.nodeChanged()}function r(e){l=m.getBookmark(e)}function i(){m.moveToBookmark(l)}var h,m,s,l,c={state:{},exec:{},value:{}},u=f.settings;f.on("PreInit",function(){h=f.dom,m=f.selection,u=f.settings,s=f.formatter}),b(this,{execCommand:function(t,n,r,e){var i,o=0;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||e&&e.skip_focus||f.focus(),(e=f.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return!1;if(i=t.toLowerCase(),e=c.exec[i])return e(i,n,r),f.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(y(f.plugins,function(e){return e.execCommand&&e.execCommand(t,n,r)?(f.fire("ExecCommand",{command:t,ui:n,value:r}),!(o=!0)):void 0}),o)return o;if(f.theme&&f.theme.execCommand&&f.theme.execCommand(t,n,r))return f.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{o=f.getDoc().execCommand(t,n,r)}catch(e){}return!!o&&(f.fire("ExecCommand",{command:t,ui:n,value:r}),!0)},queryCommandState:t,queryCommandValue:function(e){var t;if(!f.quirks.isHidden()){if(e=e.toLowerCase(),t=c.value[e])return t(e);try{return f.getDoc().queryCommandValue(e)}catch(e){}}},queryCommandSupported:function(e){if(e=e.toLowerCase(),c.exec[e])return!0;try{return f.getDoc().queryCommandSupported(e)}catch(e){}return!1},addCommands:e,addCommand:function(e,i,o){e=e.toLowerCase(),c.exec[e]=function(e,t,n,r){return i.call(o||f,t,n,r)}},addQueryStateHandler:function(e,t,n){e=e.toLowerCase(),c.state[e]=function(){return t.call(n||f)}},addQueryValueHandler:function(e,t,n){e=e.toLowerCase(),c.value[e]=function(){return t.call(n||f)}},hasCustomCommand:function(e){return e=e.toLowerCase(),!!c.exec[e]}}),e({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){f.undoManager.add()},"Cut,Copy,Paste":function(e){var t,n=f.getDoc();try{a(e)}catch(e){t=!0}!(t="paste"===e&&!n.queryCommandEnabled(e)||t)&&n.queryCommandSupported(e)||(n=f.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),d.mac&&(n=n.replace(/Ctrl\+/g,"⌘+")),f.notificationManager.open({text:n,type:"error"}))},unlink:function(){var e;m.isCollapsed()?"A"==(e=m.getNode()).tagName&&f.dom.remove(e,!0):s.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"==t&&(t="justify"),y("left,center,right,justify".split(","),function(e){t!=e&&s.remove("align"+e)}),"none"!=t&&o("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var t;a(e),(t=h.getParent(m.getNode(),"ol,ul"))&&(e=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(e.nodeName)&&(r(),h.split(e,t),i()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){o(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){o(e,n)},FontSize:function(e,t,n){var r,i;1<=n&&n<=7&&(i=$(u.font_size_style_values),n=(r=$(u.font_size_classes))?r[n-1]||n:i[n-1]||n),o(e,n)},RemoveFormat:function(e){s.remove(e)},mceBlockQuote:function(){o("blockquote")},FormatBlock:function(e,t,n){return o(n||"p")},mceCleanup:function(){var e=m.getBookmark();f.setContent(f.getContent({cleanup:!0}),{cleanup:!0}),m.moveToBookmark(e)},mceRemoveNode:function(e,t,n){n=n||m.getNode();n!=f.getBody()&&(r(),f.dom.remove(n,!0),i())},mceSelectNodeDepth:function(e,t,n){var r=0;h.getParent(m.getNode(),function(e){return 1==e.nodeType&&r++==n?(m.select(e),!1):void 0},f.getBody())},mceSelectNode:function(e,t,n){m.select(n)},mceInsertContent:function(e,t,n){v.insertAtCaret(f,n)},mceInsertRawHTML:function(e,t,n){m.setContent("tiny_mce_marker"),f.setContent(f.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){o(n)},mceSetContent:function(e,t,n){f.setContent(n)},"Indent,Outdent":function(n){var r,i=u.indentation,o=/[a-z%]+$/i.exec(i);i=parseInt(i,10),t("InsertUnorderedList")||t("InsertOrderedList")?a(n):(u.forced_root_block||h.getParent(m.getNode(),h.isBlock)||s.apply("div"),y(m.getSelectedBlocks(),function(e){var t;"false"!==h.getContentEditable(e)&&"LI"!=e.nodeName&&(t=f.getParam("indent_use_margin",!1)?"margin":"padding",t+="rtl"==h.getStyle(e,"direction",!0)?"Right":"Left","outdent"==n?(r=Math.max(0,parseInt(e.style[t]||0,10)-i),h.setStyle(e,t,r?r+o:"")):(r=parseInt(e.style[t]||0,10)+i+o,h.setStyle(e,t,r)))}))},mceRepaint:function(){},InsertHorizontalRule:function(){f.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){f.hasVisual=!f.hasVisual,f.addVisual()},mceReplaceContent:function(e,t,n){f.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,m.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;"string"==typeof n&&(n={href:n}),r=h.getParent(m.getNode(),"a"),n.href=n.href.replace(" ","%20"),r&&n.href||s.remove("link"),n.href&&s.apply("link",n,r)},selectAll:function(){var e,t=h.getRoot();m.getRng().setStart?((e=h.createRng()).setStart(t,0),e.setEnd(t,t.childNodes.length),m.setRng(e)):(e=m.getRng()).item||(e.moveToElementText(t),e.select())},delete:function(){a("Delete");var e=f.getBody();h.isEmpty(e)&&(f.setContent(""),e.firstChild&&h.isBlock(e.firstChild)?f.selection.setCursorLocation(e.firstChild,0):f.selection.setCursorLocation(e,0))},mceNewDocument:function(){f.setContent("")},InsertLineBreak:function(e,t,n){var r,i,o=n,a=m.getRng(!0);new p(h).normalize(a);var s=a.startOffset,l=a.startContainer;1==l.nodeType&&l.hasChildNodes()&&(d=s>l.childNodes.length-1,l=l.childNodes[Math.min(s,l.childNodes.length-1)]||l,s=d&&3==l.nodeType?l.nodeValue.length:0);var c=h.getParent(l,h.isBlock),u=c?c.nodeName.toUpperCase():"",n=c?h.getParent(c.parentNode,h.isBlock):null,d=n?n.nodeName.toUpperCase():"",o=o&&o.ctrlKey;"LI"!=d||o||(c=n,u=d),l&&3==l.nodeType&&s>=l.nodeValue.length&&(C||function(){for(var e,t=new g(l,c),n=f.schema.getNonEmptyElements();e=t.next();)if(n[e.nodeName.toLowerCase()]||0<e.length)return 1}()||(r=h.create("br"),a.insertNode(r),a.setStartAfter(r),a.setEndAfter(r),i=!0)),r=h.create("br"),a.insertNode(r);var s=h.doc.documentMode;return C&&"PRE"==u&&(!s||s<8)&&r.parentNode.insertBefore(h.doc.createTextNode("\r"),r),s=h.create("span",{},"&nbsp;"),r.parentNode.insertBefore(s,r),m.scrollIntoView(s),h.remove(s),i?(a.setStartBefore(r),a.setEndBefore(r)):(a.setStartAfter(r),a.setEndAfter(r)),m.setRng(a),f.undoManager.add(),!0}}),e({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),e=m.isCollapsed()?[h.getParent(m.getNode(),h.isBlock)]:m.getSelectedBlocks(),e=w(e,function(e){return!!s.matchNode(e,t)});return-1!==x(e,!0)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n,mceBlockQuote:function(){return n("blockquote")},Outdent:function(){var e;if(u.inline_styles){if((e=h.getParent(m.getStart(),h.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0;if((e=h.getParent(m.getEnd(),h.isBlock))&&0<parseInt(e.style.paddingLeft,10))return!0}return t("InsertUnorderedList")||t("InsertOrderedList")||!u.inline_styles&&!!h.getParent(m.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=h.getParent(m.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),e({"FontSize,FontName":function(e){var t,n=0;return n=(t=h.getParent(m.getNode(),"span"))?"fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase():n}},"value"),e({Undo:function(){f.undoManager.undo()},Redo:function(){f.undoManager.redo()}})}}),e(ne,[d],function(e){function a(n,e){var t,r,i,o=this;n=l(n),t=(e=o.settings=e||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)?o.source=n:(i=0===n.indexOf("//"),0!==n.indexOf("/")||i||(n=(t&&t.protocol||"http")+"://mce_host"+n),/^[\w\-]*:?\/\//.test(n)||(r=e.base_uri?e.base_uri.path:new a(location.href).directory,n=""===e.base_uri.protocol?"//mce_host"+o.toAbsPath(r,n):(n=/([^#?]*)([#?]?.*)/.exec(n),(t&&t.protocol||"http")+"://mce_host"+o.toAbsPath(r,n[1])+n[2])),n=n.replace(/@@/g,"(mce_at)"),n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n),s(c,function(e,t){t=(t=n[t])&&t.replace(/\(mce_at\)/g,"@@");o[e]=t}),t&&(o.protocol||(o.protocol=t.protocol),o.userInfo||(o.userInfo=t.userInfo),o.port||"mce_host"!==o.host||(o.port=t.port),o.host&&"mce_host"!==o.host||(o.host=t.host),o.source=""),i&&(o.protocol=""))}var s=e.each,l=e.trim,c="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),n={ftp:21,http:80,https:443,mailto:25};return a.prototype={setPath:function(e){e=/^(.*?)\/?(\w+)?$/.exec(e),this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},toRelative:function(e){if("./"===e)return e;if("mce_host"!=(e=new a(e,{base_uri:this})).host&&this.host!=e.host&&e.host||this.port!=e.port||this.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var t=this.getURI(),n=e.getURI();return t==n||"/"==t.charAt(t.length-1)&&t.substr(0,t.length-1)==n?t:(t=this.toRelPath(this.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return(e=new a(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=n[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,i,o=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(r=0,i=e.length;r<i;r++)if(r>=n.length||e[r]!=n[r]){o=r+1;break}if(e.length<n.length)for(r=0,i=n.length;r<i;r++)if(r>=e.length||e[r]!=n[r]){o=r+1;break}if(1===o)return t;for(r=0,i=e.length-(o-1);r<i;r++)a+="../";for(r=o-1,i=n.length;r<i;r++)a+=r!=o-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var n,r=0,i=[],o=/\/$/.test(t)?"/":"";for(e=e.split("/"),t=t.split("/"),s(e,function(e){e&&i.push(e)}),e=i,n=t.length-1,i=[];0<=n;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?0<r?r--:i.push(t[n]):r++);return 0!==(e=(n=e.length-r)<=0?i.reverse().join("/"):e.slice(0,n).join("/")+"/"+i.reverse().join("/")).indexOf("/")&&(e="/"+e),o&&e.lastIndexOf("/")!==e.length-1&&(e+=o),e},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},a.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),{type:t=(n=/data:([^;]+)/.exec(e[0]))?n[1]:t,data:e[1]}},a.getDocumentBaseUrl=function(e){e=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname;return/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/")),e},a}),e(re,[d],function(e){function t(){}var s,l,c=e.each,u=e.extend;return t.extend=s=function(n){function r(){var e,t,n;if(!l&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(this,arguments)}function t(){return this}var e,i,o,a=this.prototype;for(i in l=!0,e=new this,l=!1,n.Mixins&&(c(n.Mixins,function(e){for(var t in e)"init"!==t&&(n[t]=e[t])}),a.Mixins&&(n.Mixins=a.Mixins.concat(n.Mixins))),n.Methods&&c(n.Methods.split(","),function(e){n[e]=t}),n.Properties&&c(n.Properties.split(","),function(e){var t="_"+e;n[e]=function(e){return void 0!==e?(this[t]=e,this):this[t]}}),n.Statics&&c(n.Statics,function(e,t){r[t]=e}),n.Defaults&&a.Defaults&&(n.Defaults=u({},a.Defaults,n.Defaults)),n)o=n[i],"function"==typeof o&&a[i]?e[i]=function(n,r){return function(){var e,t=this._super;return this._super=a[n],e=r.apply(this,arguments),this._super=t,e}}(i,o):e[i]=o;return r.prototype=e,(r.constructor=r).extend=s,r},t}),e(ie,[d],function(m){function e(a){function s(){return!1}function l(){return!0}function r(e,t,n,r){var i,o,a;if(t=!1===t?s:t)for(t={func:t},r&&m.extend(t,r),a=(o=e.toLowerCase().split(" ")).length;a--;)e=o[a],(i=d[e])||(i=d[e]=[],h(e,!0)),n?i.unshift(t):i.push(t);return u}function c(e,t){var n,r,i,o,a;if(e)for(n=(o=e.toLowerCase().split(" ")).length;n--;){if(e=o[n],r=d[e],!e){for(i in d)h(i,!1),delete d[i];return u}if(r){if(t)for(a=r.length;a--;)r[a].func===t&&(r=r.slice(0,a).concat(r.slice(a+1)),d[e]=r);else r.length=0;r.length||(h(e,!1),delete d[e])}}else{for(e in d)h(e,!1);d={}}return u}var u=this,d={},f=(a=a||{}).scope||u,h=a.toggleEvent||s;u.fire=function(e,t){var n,r,i,o;if(e=e.toLowerCase(),(t=t||{}).type=e,t.target||(t.target=f),t.preventDefault||(t.preventDefault=function(){t.isDefaultPrevented=l},t.stopPropagation=function(){t.isPropagationStopped=l},t.stopImmediatePropagation=function(){t.isImmediatePropagationStopped=l},t.isDefaultPrevented=s,t.isPropagationStopped=s,t.isImmediatePropagationStopped=s),a.beforeFire&&a.beforeFire(t),n=d[e])for(r=0,i=n.length;r<i;r++){if((o=n[r]).once&&c(e,o.func),t.isImmediatePropagationStopped())return t.stopPropagation(),t;if(!1===o.func.call(f,t))return t.preventDefault(),t}return t},u.on=r,u.off=c,u.once=function(e,t,n){return r(e,t,n,{once:!0})},u.has=function(e){return e=e.toLowerCase(),!(!d[e]||0===d[e].length)}}var t=m.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," ");return e.isNative=function(e){return!!t[e.toLowerCase()]},e}),e(oe,[],function(){function e(e){this.create=e.create}return e.create=function(i,o){return new e({create:function(t,n){function e(e){t.set(n,e.value)}var r;return t.on("change:"+n,function(e){i.set(o,e.value)}),i.on("change:"+o,e),(r=t._bindings)||(r=t._bindings=[],t.on("destroy",function(){for(var e=r.length;e--;)r[e]()})),r.push(function(){i.off("change:"+o,e)}),i.get(o)}})},e}),e(ae,[ie],function(r){function i(n){return n._eventDispatcher||(n._eventDispatcher=new r({scope:n,toggleEvent:function(e,t){r.isNative(e)&&n.toggleNativeEvent&&n.toggleNativeEvent(e,t)}})),n._eventDispatcher}return{fire:function(e,t,n){if(this.removed&&"remove"!==e)return t;if(t=i(this).fire(e,t,n),!1!==n&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},on:function(e,t,n){return i(this).on(e,t,n)},off:function(e,t){return i(this).off(e,t)},once:function(e,t){return i(this).once(e,t)},hasEventListeners:function(e){return i(this).has(e)}}}),e(se,[oe,ae,re,d],function(i,e,t,o){function a(e){return 0<e.nodeType}return t.extend({Mixins:[e],init:function(e){var t,n;for(t in e=e||{})n=e[t],n instanceof i&&(e[t]=n.create(this,t));this.data=e},set:function(e,t){var n,r=this.data[e];if(t instanceof i&&(t=t.create(this,e)),"object"!=typeof e)return function e(t,n){var r,i;if(t===n)return 1;if(null===t||null===n)return t===n;if("object"!=typeof t||"object"!=typeof n)return t===n;if(o.isArray(n)){if(t.length!==n.length)return;for(r=t.length;r--;)if(!e(t[r],n[r]))return}if(a(t)||a(n))return t===n;for(r in i={},n){if(!e(t[r],n[r]))return;i[r]=!0}for(r in t)if(!i[r]&&!e(t[r],n[r]))return;return 1}(r,t)||(this.data[e]=t,r={target:this,name:e,value:t,oldValue:r},this.fire("change:"+e,r),this.fire("change",r)),this;for(n in e)this.set(n,e[n]);return this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return i.create(this,e)},destroy:function(){this.fire("destroy")}})}),e(le,[re],function(e){var i,m=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,s=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,p=/^\s*|\s*$/g,o=e.extend({init:function(e){function a(e,t,n){function r(e){e&&t.push(e)}var i,o,a,s,l,c,u,d,e=m.exec(e.replace(p,""));return r((d=e[1])?(d=d.toLowerCase(),function(e){return"*"===d||e.type===d}):void 0),r((u=e[2])?function(e){return e._name===u}:void 0),r((c=e[3])?(c=c.split("."),function(e){for(var t=c.length;t--;)if(!e.classes.contains(c[t]))return!1;return!0}):void 0),r((a=e[4],s=e[5],l=e[6],a?function(e){e=e[a]?e[a]():"";return s?"="===s?e===l:"*="===s?0<=e.indexOf(l):"~="===s?0<=(" "+e+" ").indexOf(" "+l+" "):"!="===s?e!=l:"^="===s?0===e.indexOf(l):"$="===s&&e.substr(e.length-l.length)===l:!!l}:void 0)),r((i=e[7])?(i=/(?:not\((.+)\))|(.+)/i.exec(i))[1]?(o=f(i[1],[]),function(e){return!h(e,o)}):(i=i[2],function(e,t,n){return"first"===i?0===t:"last"===i?t===n-1:"even"===i?t%2==0:"odd"===i?t%2==1:!!e[i]&&e[i]()}):void 0),t.pseudo=!!e[7],t.direct=n,t}function f(e,t){var n,r,i,o=[];do{if(s.exec(""),(r=s.exec(e))&&(e=r[3],o.push(r[1]),r[2])){n=r[3];break}}while(r);for(n&&f(n,t),e=[],i=0;i<o.length;i++)">"!=o[i]&&e.push(a(o[i],[],">"===o[i-1]));return t.push(e),t}var h=this.match;this._selectors=f(e,[])},match:function(e,t){for(var n,r,i,o,a,s,l,c,u,d,f,h=0,m=(t=t||this._selectors).length;h<m;h++){for(f=e,d=0,n=(r=(i=t[h]).length)-1;0<=n;n--)for(s=i[n];f;){if(s.pseudo)for(l=c=(u=f.parent().items()).length;l--&&u[l]!==f;);for(o=0,a=s.length;o<a;o++)if(!s[o](f,l,c)){o=a+1;break}if(o===a){d++;break}if(n===r-1)break;f=f.parent()}if(d===r)return!0}return!1},find:function(e){var t,n,u=[],r=this._selectors;if(e.items){for(t=0,n=r.length;t<n;t++)!function e(t,n,r){for(var i,o,a,s=n[r],l=0,c=t.length;l<c;l++){for(a=t[l],i=0,o=s.length;i<o;i++)if(!s[i](a,l,c)){i=o+1;break}if(i===o)r==n.length-1?u.push(a):a.items&&e(a.items(),n,r+1);else if(s.direct)return;a.items&&e(a.items(),n,r)}}(e.items(),r[t],0);1<n&&(u=function(e){for(var t,n=[],r=e.length;r--;)(t=e[r]).__checked||(n.push(t),t.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}(u))}return new(i=i||o.Collection)(u)}});return o}),e(ce,[d,le,re],function(r,a,e){var s,t=Array.prototype.push,n=Array.prototype.slice,i={length:0,init:function(e){e&&this.add(e)},add:function(e){return r.isArray(e)?t.apply(this,e):e instanceof s?this.add(e.toArray()):t.call(this,e),this},set:function(e){var t,n=this.length;for(this.length=0,this.add(e),t=this.length;t<n;t++)delete this[t];return this},filter:function(t){for(var e,n=[],r="string"==typeof t?(t=new a(t),function(e){return t.match(e)}):t,i=0,o=this.length;i<o;i++)r(e=this[i])&&n.push(e);return new s(n)},slice:function(){return new s(n.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(e){return r.each(this,e),this},toArray:function(){return r.toArray(this)},indexOf:function(e){for(var t=this.length;t--&&this[t]!==e;);return t},reverse:function(){return new s(r.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(t,n){var e;return void 0!==n?(this.each(function(e){e[t]&&e[t](n)}),this):(e=this[0])&&e[t]?e[t]():void 0},exec:function(t){var n=r.toArray(arguments).slice(1);return this.each(function(e){e[t]&&e[t].apply(e,n)}),this},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(t){return this.each(function(e){e.classes.add(t)})},removeClass:function(t){return this.each(function(e){e.classes.remove(t)})}};return r.each("fire on off show hide append prepend before after reflow".split(" "),function(n){i[n]=function(){var t=r.toArray(arguments);return this.each(function(e){n in e&&e[n].apply(e,t)}),this}}),r.each("text name disabled active selected checked visible parent value data".split(" "),function(t){i[t]=function(e){return this.prop(t,e)}}),s=e.extend(i),a.Collection=s}),e(ue,[o,d,y],function(e,i,o){var t=0,n={id:function(){return"mceu_"+t++},create:function(e,t,n){var r=document.createElement(e);return o.DOM.setAttribs(r,t),"string"==typeof n?r.innerHTML=n:i.each(n,function(e){e.nodeType&&r.appendChild(e)}),r},createFragment:function(e){return o.DOM.createFragment(e)},getWindowSize:function(){return o.DOM.getViewPort()},getSize:function(e){var t,n;return e=e.getBoundingClientRect?(t=e.getBoundingClientRect(),n=Math.max(t.width||t.right-t.left,e.offsetWidth),Math.max(t.height||t.bottom-t.bottom,e.offsetHeight)):(n=e.offsetWidth,e.offsetHeight),{width:n,height:e}},getPos:function(e,t){return o.DOM.getPos(e,t||n.getContainer())},getContainer:function(){return e.container||document.body},getViewPort:function(e){return o.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,t){return o.DOM.addClass(e,t)},removeClass:function(e,t){return o.DOM.removeClass(e,t)},hasClass:function(e,t){return o.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return o.DOM.toggleClass(e,t,n)},css:function(e,t,n){return o.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return o.DOM.getStyle(e,t,!0)},on:function(e,t,n,r){return o.DOM.bind(e,t,n,r)},off:function(e,t,n){return o.DOM.unbind(e,t,n)},fire:function(e,t,n){return o.DOM.fire(e,t,n)},innerHtml:function(e,t){o.DOM.setHTML(e,t)}};return n}),e(de,[],function(){return{parseBox:function(e){var t;if(e)return"number"==typeof e?{top:e=e||0,left:e,bottom:e,right:e}:(1===(t=(e=e.split(" ")).length)?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0})},measureBox:function(n,e){function t(e){var t,t=parseFloat((t=e,(e=document.defaultView)?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),e.getComputedStyle(n,null).getPropertyValue(t)):n.currentStyle[t]),10);return isNaN(t)?0:t}return{top:t(e+"TopWidth"),right:t(e+"RightWidth"),bottom:t(e+"BottomWidth"),left:t(e+"LeftWidth")}}}}),e(fe,[d],function(e){function t(){}function n(e){this.cls=[],this.cls._map={},this.onchange=e||t,this.prefix=""}return e.extend(n.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){for(var t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),n.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)0<t&&(e+=" "),e+=this.prefix+this.cls[t];return e},n}),e(he,[i],function(t){var n,r={};return{add:function(e){e=e.parent();e&&e._layout&&!e._layout.isNative()&&(r[e._id]||(r[e._id]=e),n||(n=!0,t.requestAnimationFrame(function(){var e,t;for(e in n=!1,r)t=r[e],t.state.get("rendered")&&t.reflow();r={}},document.body)))},remove:function(e){r[e._id]&&delete r[e._id]}}}),e(me,[re,d,ie,se,ce,ue,f,de,fe,he],function(e,o,r,a,i,h,f,m,s,l){function c(n){return n._eventDispatcher||(n._eventDispatcher=new r({scope:n,toggleEvent:function(e,t){t&&r.isNative(e)&&(n._nativeEvents||(n._nativeEvents={}),n._nativeEvents[e]=!0,n.state.get("rendered")&&u(n))}})),n._eventDispatcher}function u(s){function e(e){var t=s.getParentCtrl(e.target);t&&t.fire(e.type,e)}function t(){var e=l._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),l._lastHoverCtrl=null)}function n(e){var t,n,r,i=s.getParentCtrl(e.target),o=l._lastHoverCtrl,a=0;if(i!==o){if((n=(l._lastHoverCtrl=i).parents().toArray().reverse()).push(i),o){for((r=o.parents().toArray().reverse()).push(o),a=0;a<r.length&&n[a]===r[a];a++);for(t=r.length-1;a<=t;t--)(o=r[t]).fire("mouseleave",{target:o.getEl()})}for(t=a;t<n.length;t++)(i=n[t]).fire("mouseenter",{target:i.getEl()})}}function r(e){e.preventDefault(),"mousewheel"==e.type?(e.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-.025*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=s.fire("wheel",e)}var i,o,a,l,c,u;if(c=s._nativeEvents){for((a=s.parents().toArray()).unshift(s),i=0,o=a.length;!l&&i<o;i++)l=a[i]._eventsRoot;for(l=l||(a[a.length-1]||s),s._eventsRoot=l,o=i,i=0;i<o;i++)a[i]._eventsRoot=l;var d=(d=l._delegates)||(l._delegates={});for(u in c){if(!c)return;"wheel"!==u||g?("mouseenter"===u||"mouseleave"===u?l._hasMouseEnter||(f(l.getEl()).on("mouseleave",t).on("mouseover",n),l._hasMouseEnter=1):d[u]||(f(l.getEl()).on(u,e),d[u]=!0),c[u]=!1):p?f(s.getEl()).on("mousewheel",r):f(s.getEl()).on("DOMMouseScroll",r)}}}var d,p="onmousewheel"in document,g=!1,v=0,n={Statics:{classPrefix:"mce-"},isRtl:function(){return d.rtl},classPrefix:"mce-",init:function(t){function e(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)i.classes.add(e[t])}var n,r,i=this;i.settings=t=o.extend({},i.Defaults,t),i._id=t.id||"mceu_"+v++,i._aria={role:t.role},i._elmCache={},i.$=f,i.state=new a({visible:!0,active:!1,disabled:!1,value:""}),i.data=new a(t.data),i.classes=new s(function(){i.state.get("rendered")&&(i.getEl().className=this.toString())}),i.classes.prefix=i.classPrefix,(n=t.classes)&&(!i.Defaults||(r=i.Defaults.classes)&&n!=r&&e(r),e(n)),o.each("title text name visible disabled active value".split(" "),function(e){e in t&&i[e](t[e])}),i.on("click",function(){return!i.disabled()&&void 0}),i.settings=t,i.borderBox=m.parseBox(t.border),i.paddingBox=m.parseBox(t.padding),i.marginBox=m.parseBox(t.margin),t.hidden&&i.hide()},Properties:"parent,name",getContainerElm:function(){return h.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,r,i,o,a,s=this,l=s.settings,c=s.getEl(),u=s.borderBox=s.borderBox||m.measureBox(c,"border");s.paddingBox=s.paddingBox||m.measureBox(c,"padding"),s.marginBox=s.marginBox||m.measureBox(c,"margin"),f=h.getSize(c),o=l.minWidth,a=l.minHeight,n=o||f.width,r=a||f.height,e=l.width,t=l.height,i=void 0!==(i=l.autoResize)?i:!e&&!t,e=e||n,t=t||r;var d=u.left+u.right,c=u.top+u.bottom,f=l.maxWidth||65535,u=l.maxHeight||65535;return s._layoutRect=i={x:l.x||0,y:l.y||0,w:e,h:t,deltaW:d,deltaH:c,contentW:e-d,contentH:t-c,innerW:e-d,innerH:t-c,startMinWidth:o||0,startMinHeight:a||0,minW:Math.min(n,f),minH:Math.min(r,u),maxW:f,maxH:u,autoResize:i,scrollW:0},s._lastLayoutRect={},i},layoutRect:function(e){var t,n,r,i,o=(o=this._layoutRect)||this.initLayoutRect();return e?(n=o.deltaW,r=o.deltaH,e.x!==i&&(o.x=e.x),e.y!==i&&(o.y=e.y),e.minW!==i&&(o.minW=e.minW),e.minH!==i&&(o.minH=e.minH),(t=e.w)!==i&&(t=(t=t<o.minW?o.minW:t)>o.maxW?o.maxW:t,o.w=t,o.innerW=t-n),(t=e.h)!==i&&(t=(t=t<o.minH?o.minH:t)>o.maxH?o.maxH:t,o.h=t,o.innerH=t-r),(t=e.innerW)!==i&&(t=(t=t<o.minW-n?o.minW-n:t)>o.maxW-n?o.maxW-n:t,o.innerW=t,o.w=t+n),(t=e.innerH)!==i&&(t=(t=t<o.minH-r?o.minH-r:t)>o.maxH-r?o.maxH-r:t,o.innerH=t,o.h=t+r),e.contentW!==i&&(o.contentW=e.contentW),e.contentH!==i&&(o.contentH=e.contentH),(i=this._lastLayoutRect).x===o.x&&i.y===o.y&&i.w===o.w&&i.h===o.h||((e=d.repaintControls)&&e.map&&!e.map[this._id]&&(e.push(this),e.map[this._id]=!0),i.x=o.x,i.y=o.y,i.w=o.w,i.h=o.h),this):o},repaint:function(){var e,t,n,r=this,i=document.createRange?function(e){return e}:Math.round,o=r.getEl().style,a=r._layoutRect,s=r._lastRepaintRect||{},l=r.borderBox,c=l.left+l.right,l=l.top+l.bottom;a.x!==s.x&&(o.left=i(a.x)+"px",s.x=a.x),a.y!==s.y&&(o.top=i(a.y)+"px",s.y=a.y),a.w!==s.w&&(n=i(a.w-c),o.width=(0<=n?n:0)+"px",s.w=a.w),a.h!==s.h&&(n=i(a.h-l),o.height=(0<=n?n:0)+"px",s.h=a.h),r._hasBody&&a.innerW!==s.innerW&&(n=i(a.innerW),(t=r.getEl("body"))&&((e=t.style).width=(0<=n?n:0)+"px"),s.innerW=a.innerW),r._hasBody&&a.innerH!==s.innerH&&(n=i(a.innerH),(t=t||r.getEl("body"))&&((e=e||t.style).height=(0<=n?n:0)+"px"),s.innerH=a.innerH),r._lastRepaintRect=s,r.fire("repaint",{},!1)},updateLayoutRect:function(){this.parent()._lastRect=null,h.css(this.getEl(),{width:"",height:""}),this._layoutRect=this._lastRepaintRect=this._lastLayoutRect=null,this.initLayoutRect()},on:function(e,t){var n,r,i,o=this;return c(o).on(e,"string"!=typeof(n=t)?n:function(e){return r||o.parentsAndSelf().each(function(e){var t=e.settings.callbacks;return t&&(r=t[n])?(i=e,!1):void 0}),r?r.call(i,e):(e.action=n,void this.fire("execute",e))}),o},off:function(e,t){return c(this).off(e,t),this},fire:function(e,t,n){if((t=t||{}).control||(t.control=this),t=c(this).fire(e,t),!1!==n&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},hasEventListeners:function(e){return c(this).has(e)},parents:function(e){for(var t=new i,n=this.parent();n;n=n.parent())t.add(n);return t=e?t.filter(e):t},parentsAndSelf:function(e){return new i(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){e=e?this._id+"-"+e:this._id;return this._elmCache[e]||(this._elmCache[e]=f("#"+e)[0]),this._elmCache[e]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this.getEl(this.ariaTarget);return void 0===t?this._aria[e]:(this._aria[e]=t,this.state.get("rendered")&&n.setAttribute("role"==e?e:"aria-"+e,t),this)},encode:function(e,t){return((e=!1!==t?this.translate(e):e)||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return d.translate?d.translate(e):e},before:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this),!0),this},after:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this)),this},remove:function(){var t,n=this,e=n.getEl(),r=n.parent();if(n.items)for(var i=n.items().toArray(),o=i.length;o--;)i[o].remove();r&&r.items&&(t=[],r.items().each(function(e){e!==n&&t.push(e)}),r.items().set(t),r._lastRect=null),n._eventsRoot&&n._eventsRoot==n&&f(e).off();r=n.getRoot().controlIdLookup;return r&&delete r[n._id],e&&e.parentNode&&e.parentNode.removeChild(e),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(e){return f(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return f(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,r,i=this,o=i.settings;for(n in i.$el=f(i.getEl()),i.state.set("rendered",!0),o)0===n.indexOf("on")&&i.on(n.substr(2),o[n]);if(i._eventsRoot){for(t=i.parent();!r&&t;t=t.parent())r=t._eventsRoot;if(r)for(n in r._nativeEvents)i._nativeEvents[n]=!0}u(i),!o.style||(e=i.getEl())&&(e.setAttribute("style",o.style),e.style.cssText=o.style),i.settings.border&&(s=i.borderBox,i.$el.css({"border-top-width":s.top,"border-right-width":s.right,"border-bottom-width":s.bottom,"border-left-width":s.left}));var a,s=i.getRoot();for(a in s.controlIdLookup||(s.controlIdLookup={}),(s.controlIdLookup[i._id]=i)._aria)i.aria(a,i._aria[a]);!1===i.state.get("visible")&&(i.getEl().style.display="none"),i.bindStates(),i.state.on("change:visible",function(e){var t=e.value;i.state.get("rendered")&&(i.getEl().style.display=!1===t?"none":"",i.getEl().getBoundingClientRect()),(e=i.parent())&&(e._lastRect=null),i.fire(t?"show":"hide"),l.add(i)}),i.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){var t=this.getEl(),n=t.parentNode,r=function(e,t){for(var n,r=e,i=n=0;r&&r!=t&&r.nodeType;)i+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:i,y:n}}(t,n),i=r.x,o=r.y,a=t.offsetWidth,s=t.offsetHeight,r=n.clientWidth,t=n.clientHeight;return"end"==e?(i-=r-a,o-=t-s):"center"==e&&(i-=r/2-a/2,o-=t/2-s/2),n.scrollLeft=i,n.scrollTop=o,this},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),t=(e=t).parent()}e=e||this;for(var r=n.length;r--;)n[r].rootControl=e;return e},reflow:function(){l.remove(this);var e=this.parent();return e._layout&&!e._layout.isNative()&&e.reflow(),this}};return o.each("text title visible disabled active value".split(" "),function(t){n[t]=function(e){return 0===arguments.length?this.state.get(t):(void 0!==e&&this.state.set(t,e),this)}}),d=e.extend(n)}),e(pe,[],function(){var o,a={};return{add:function(e,t){a[e.toLowerCase()]=t},has:function(e){return!!a[e.toLowerCase()]},create:function(e,t){var n,r,i;if(!o){for(r in i=tinymce.ui)a[r.toLowerCase()]=i[r];o=!0}if("string"==typeof e?(t=t||{}).type=e:e=(t=e).type,e=e.toLowerCase(),!(n=a[e]))throw new Error("Could not find control by type: "+e);return(n=new n(t)).type=e,n}}}),e(ve,[],function(){return function(e){function t(e){return e&&1===e.nodeType}function o(e){return t(e=e||v)?e.getAttribute("role"):null}function i(e){for(var t,n=e||v;n=n.parentNode;)if(t=o(n))return t}function n(e){return t(v)&&v.getAttribute("aria-"+e)}function a(e){e=e.tagName.toUpperCase();return"INPUT"==e||"TEXTAREA"==e||"SELECT"==e}function s(e){var i=[];return function e(t){if(1==t.nodeType&&"none"!=t.style.display){(a(r=t)&&!r.hidden||/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(o(r)))&&i.push(t);for(var n=0;n<t.childNodes.length;n++)e(t.childNodes[n])}var r}(e||r.getEl()),i}function l(e){var t,n;(n=(e=e||y).parents().toArray()).unshift(e);for(var r=0;r<n.length&&!(t=n[r]).settings.ariaRoot;r++);return t}function c(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function u(e,t){var n=-1,r=l();t=t||s(r.getEl());for(var i=0;i<t.length;i++)t[i]===v&&(n=i);n+=e,r.lastAriaIndex=c(n,t)}function d(){"tablist"==i()?u(-1,s(v.parentNode)):y.parent().submenu?p():u(-1)}function f(){var e=o(),t=i();"tablist"==t?u(1,s(v.parentNode)):"menuitem"==e&&"menu"==t&&n("haspopup")?g():u(1)}function h(){u(-1)}function m(){var e=o(),t=i();"menuitem"==e&&"menubar"==t?g():"button"==e&&n("haspopup")?g({key:"down"}):u(1)}function p(){y.fire("cancel")}function g(e){e=e||{},y.fire("click",{target:v,aria:e})}var v,y,r=e.root;try{v=document.activeElement}catch(e){v=document.body}return y=r.getParentCtrl(v),r.on("keydown",function(e){function t(e,t){a(v)||"slider"!==o(v)&&!1!==t(e)&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,d);break;case 39:t(e,f);break;case 38:t(e,h);break;case 40:t(e,m);break;case 27:p();break;case 14:case 13:case 32:t(e,g);break;case 9:n=e,"tablist"==i()?(r=s(y.getEl("body"))[0])&&r.focus():u(n.shiftKey?-1:1),e.preventDefault()}var n,r}),r.on("focusin",function(e){v=e.target,y=e.control}),{focusFirst:function(e){var t=l(e),e=s(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?c(t.lastAriaIndex,e):c(0,e)}}}}),e(ye,[me,ce,le,pe,ve,d,f,fe,he],function(i,n,t,o,r,a,s,l,c){var u={};return i.extend({init:function(e){var t=this;t._super(e),(e=t.settings).fixed&&t.state.set("fixed",!0),t._items=new n,t.isRtl()&&t.classes.add("rtl"),t.bodyClasses=new l(function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())}),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls&&t.classes.add(e.containerCls),t._layout=o.create((e.layout||"")+"layout"),t.settings.items?t.add(t.settings.items):t.add(t.render()),t._hasBody=!0},items:function(){return this._items},find:function(e){return(e=u[e]=u[e]||new t(e)).find(this)},add:function(e){return this.items().add(this.create(e)).parent(this),this},focus:function(e){var t,n;return e&&(n=this.keyboardNav||this.parents().eq(-1)[0].keyboardNav)?void n.focusFirst(this):(n=this.find("*"),this.statusbar&&n.add(this.statusbar.items()),n.each(function(e){return e.settings.autofocus?(t=null,!1):void(e.canFocus&&(t=t||e))}),t&&t.focus(),this)},replace:function(e,t){for(var n,r=this.items(),i=r.length;i--;)if(r[i]===e){r[i]=t;break}0<=i&&((n=t.getEl())&&n.parentNode.removeChild(n),(n=e.getEl())&&n.parentNode.removeChild(n)),t.parent(this)},create:function(e){var t,n=this,r=[];return a.isArray(e)||(e=[e]),a.each(e,function(e){e&&(e instanceof i||("string"==typeof e&&(e={type:e}),t=a.extend({},n.settings.defaults,e),e.type=t.type=t.type||e.type||n.settings.defaultType||(t.defaults?t.defaults.type:null),e=o.create(t)),r.push(e))}),r},renderNew:function(){var r=this;return r.items().each(function(e,t){var n;e.parent(r),e.state.get("rendered")||((n=r.getEl("body")).hasChildNodes()&&t<=n.childNodes.length-1?s(n.childNodes[t]).before(e.renderHtml()):s(n).append(e.renderHtml()),e.postRender(),c.add(e))}),r._layout.applyClasses(r.items().filter(":visible")),r._lastRect=null,r},append:function(e){return this.add(e).renderNew()},prepend:function(e){return this.items().set(this.create(e).concat(this.items().toArray())),this.renderNew()},insert:function(e,t,n){var r;return e=this.create(e),r=this.items(),!n&&t<r.length-1&&(t+=1),0<=t&&t<r.length&&(n=r.slice(0,t).toArray(),t=r.slice(t).toArray(),r.set(n.concat(e,t))),this.renderNew()},fromJSON:function(e){for(var t in e)this.find("#"+t).value(e[t]);return this},toJSON:function(){var n={};return this.find("*").each(function(e){var t=e.name(),e=e.value();t&&void 0!==e&&(n[t]=e)}),n},renderHtml:function(){var e=this._layout,t=this.settings.role;return this.preRender(),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"'+(t?' role="'+this.settings.role+'"':"")+'><div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t.state.set("rendered",!0),t.settings.style&&t.$el.css(t.settings.style),t.settings.border&&(e=t.borderBox,t.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=new r({root:t})),t},initLayoutRect:function(){var e=this._super();return this._layout.recalc(this),e},recalc:function(){var e=this._layoutRect,t=this._lastRect;return t&&t.w==e.w&&t.h==e.h?void 0:(this._layout.recalc(this),e=this.layoutRect(),this._lastRect={x:e.x,y:e.y,w:e.w,h:e.h},!0)},reflow:function(){var e;if(c.remove(this),this.visible()){for(i.repaintControls=[],i.repaintControls.map={},this.recalc(),e=i.repaintControls.length;e--;)i.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),i.repaintControls=[]}return this}})}),e(be,[f],function(y){function b(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}return function(e,c){function u(){return v.getElementById(c.handle||e)}var d,f,t,h,m,p,g,v=c.document||document;c=c||{},t=function(e){var t,n,r,i,o,a,s,l,t=(t=v,n=Math.max,r=t.documentElement,i=t.body,o=n(r.scrollWidth,i.scrollWidth),a=n(r.clientWidth,i.clientWidth),s=n(r.offsetWidth,i.offsetWidth),l=n(r.scrollHeight,i.scrollHeight),t=n(r.clientHeight,i.clientHeight),{width:o<s?a:o,height:l<n(r.offsetHeight,i.offsetHeight)?t:l});b(e),e.preventDefault(),f=e.button,l=u(),p=e.screenX,g=e.screenY,l=window.getComputedStyle?window.getComputedStyle(l,null).getPropertyValue("cursor"):l.runtimeStyle.cursor,d=y("<div>").css({position:"absolute",top:0,left:0,width:t.width,height:t.height,zIndex:2147483647,opacity:1e-4,cursor:l}).appendTo(v.body),y(v).on("mousemove touchmove",m).on("mouseup touchend",h),c.start(e)},m=function(e){return b(e),e.button!==f?h(e):(e.deltaX=e.screenX-p,e.deltaY=e.screenY-g,e.preventDefault(),void c.drag(e))},h=function(e){b(e),y(v).off("mousemove touchmove",m).off("mouseup touchend",h),d.remove(),c.stop&&c.stop(e)},this.destroy=function(){y(u()).off()},y(u()).on("mousedown touchstart",t)}}),e(we,[f,be],function(h,r){return{init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){function n(){function e(e,t,n,r,i,o){var a,s,l;if(a=d.getEl("scroll"+e)){if(s=t.toLowerCase(),l=n.toLowerCase(),h(d.getEl("absend")).css(s,d.layoutRect()[r]-1),!i)return h(a).css("display","none"),0;h(a).css("display","block"),r=d.getEl("body"),i=d.getEl("scroll"+e+"t"),e=r["client"+n]-2*f,o=(e-=c&&u?a["client"+o]:0)/r["scroll"+n],(n={})[s]=r["offset"+t]+f,n[l]=e,h(a).css(n),(n={})[s]=r["scroll"+t]*o,n[l]=e*o,h(i).css(n)}}var t=d.getEl("body"),c=t.scrollWidth>t.clientWidth,u=t.scrollHeight>t.clientHeight;e("h","Left","Width","contentW",c,"Height"),e("v","Top","Height","contentH",u,"Width")}var d=this,f=2;function e(i,o,a,s,l){var c,e=d._id+"-scroll"+i,t=d.classPrefix;h(d.getEl()).append('<div id="'+e+'" class="'+t+"scrollbar "+t+"scrollbar-"+i+'"><div id="'+e+'t" class="'+t+'scrollbar-thumb"></div></div>'),d.draghelper=new r(e+"t",{start:function(){c=d.getEl("body")["scroll"+o],h("#"+e).addClass(t+"active")},drag:function(e){var t=d.layoutRect(),n=t.contentW>t.innerW,r=t.contentH>t.innerH,t=d.getEl("body")["client"+a]-2*f,t=(t-=n&&r?d.getEl("scroll"+i)["client"+l]:0)/d.getEl("body")["scroll"+a];d.getEl("body")["scroll"+o]=c+e["delta"+s]/t},stop:function(){h("#"+e).removeClass(t+"active")}})}d.settings.autoScroll&&(d._hasScroll||(d._hasScroll=!0,d.classes.add("scroll"),e("v","Top","Height","Y","Width"),e("h","Left","Width","X","Height"),d.on("wheel",function(e){var t=d.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),h(d.getEl("body")).on("scroll",n)),n())}}}),e(xe,[ye,we],function(e,t){return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),void 0===n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}})}),e($e,[ue],function(s){function o(e,t,n){var r=s.getViewPort(),i=s.getPos(t),o=i.x,a=i.y;return e.state.get("fixed")&&"static"==s.getRuntimeStyle(document.body,"position")&&(o-=r.x,a-=r.y),i=e.getEl(),e=(r=s.getSize(i)).width,i=r.height,t=(r=s.getSize(t)).width,r=r.height,"b"===(n=(n||"").split(""))[0]&&(a+=r),"r"===n[1]&&(o+=t),"c"===n[0]&&(a+=Math.round(r/2)),"c"===n[1]&&(o+=Math.round(t/2)),"b"===n[3]&&(a-=i),"r"===n[4]&&(o-=e),"c"===n[3]&&(a-=Math.round(i/2)),"c"===n[4]&&(o-=Math.round(e/2)),{x:o,y:a,w:e,h:i}}return{testMoveRel:function(e,t){for(var n=s.getViewPort(),r=0;r<t.length;r++){var i=o(this,e,t[r]);if(this.state.get("fixed")){if(0<i.x&&i.x+i.w<n.w&&0<i.y&&i.y+i.h<n.h)return t[r]}else if(i.x>n.x&&i.x+i.w<n.w+n.x&&i.y>n.y&&i.y+i.h<n.h+n.y)return t[r]}return t[0]},moveRel:function(e,t){"string"!=typeof t&&(t=this.testMoveRel(e,t));t=o(this,e,t);return this.moveTo(t.x,t.y)},moveBy:function(e,t){var n=this.layoutRect();return this.moveTo(n.x+e,n.y+t),this},moveTo:function(e,t){function n(e,t,n){return e<0?0:t<e+n?(e=t-n)<0?0:e:e}var r,i;return this.settings.constrainToViewport&&(r=s.getViewPort(window),i=this.layoutRect(),e=n(e,r.w+r.x,i.w),t=n(t,r.h+r.y,i.h)),this.state.get("rendered")?this.layoutRect({x:e,y:t}).repaint():(this.settings.x=e,this.settings.y=t),this.fire("move",{x:e,y:t}),this}}}),e(Ce,[ue],function(r){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,t){var n;return(e<=1||t<=1)&&(n=r.getWindowSize(),e=e<=1?e*n.w:e,t=t<=1?t*n.h:t),this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this.layoutRect();return this.resizeTo(n.w+e,n.h+t)}}}),e(Se,[xe,$e,Ce,ue,f,i],function(e,t,n,r,o,a){function s(e){for(var t=m.length;t--;){var n=m[t],r=n.getParentCtrl(e.target);n.settings.autohide&&(r&&(function(e,t){for(;e;){if(e==t)return 1;e=e.parent()}}(r,n)||n.parent()===r)||(e=n.fire("autohide",{target:e.target})).isDefaultPrevented()||n.hide())}}function l(i){function e(e,t){for(var n,r=0;r<m.length;r++)if(m[r]!=i)for(n=m[r].parent();n=n&&n.parent();)n==i&&m[r].fixed(e).moveBy(0,t).repaint()}var t=r.getViewPort().y;i.settings.autofix&&(i.state.get("fixed")?i._autoFixY>t&&(i.fixed(!1).layoutRect({y:i._autoFixY}).repaint(),e(!1,i._autoFixY-t)):(i._autoFixY=i.layoutRect().y,i._autoFixY<t&&(i.fixed(!0).layoutRect({y:0}).repaint(),e(!0,t-i._autoFixY))))}function c(e,t){var n,r,i=g.zIndex||65535;if(e)p.push(t);else for(n=p.length;n--;)p[n]===t&&p.splice(n,1);if(p.length)for(n=0;n<p.length;n++)p[n].modal&&(i++,r=p[n]),p[n].getEl().style.zIndex=i,p[n].zIndex=i,i++;e=o("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];r?o(e).css("z-index",r.zIndex-1):e&&(e.parentNode.removeChild(e),h=!1),g.currentZIndex=i}function i(e){for(var t=m.length;t--;)m[t]===e&&m.splice(t,1);for(t=p.length;t--;)p[t]===e&&p.splice(t,1)}var u,d,f,h,m=[],p=[],g=e.extend({Mixins:[t,n],init:function(e){var t,n,r,i=this;i._super(e),(i._eventsRoot=i).classes.add("floatpanel"),e.autohide&&(u||(u=function(e){2!=e.button&&s(e)},o(document).on("click touchstart",u)),f||(t=document.documentElement,n=t.clientWidth,r=t.clientHeight,f=function(){document.all&&n==t.clientWidth&&r==t.clientHeight||(n=t.clientWidth,r=t.clientHeight,g.hideAll())},o(window).on("resize",f)),m.push(i)),e.autofix&&(d||(d=function(){for(var e=m.length;e--;)l(m[e])},o(window).on("scroll",d)),i.on("move",function(){l(this)})),i.on("postrender show",function(e){var t,n;e.control==i&&(n=i.classPrefix,i.modal&&!h&&((t=o("#"+n+"modal-block",i.getContainerElm()))[0]||(t=o('<div id="'+n+'modal-block" class="'+n+"reset "+n+'fade"></div>').appendTo(i.getContainerElm())),a.setTimeout(function(){t.addClass(n+"in"),o(i.getEl()).addClass(n+"in")}),h=!0),c(!0,i))}),i.on("show",function(){i.parents().each(function(e){return e.state.get("fixed")?(i.fixed(!0),!1):void 0})}),e.popover&&(i._preBodyHtml='<div class="'+i.classPrefix+'arrow"></div>',i.classes.add("popover").add("bottom").add(i.isRtl()?"end":"start")),i.aria("label",e.ariaLabel),i.aria("labelledby",i._id),i.aria("describedby",i.describedBy||i._id+"-none")},fixed:function(e){var t;return this.state.get("fixed")!=e&&(this.state.get("rendered")&&(t=r.getViewPort(),e?this.layoutRect().y-=t.y:this.layoutRect().y+=t.y),this.classes.toggle("fixed",e),this.state.set("fixed",e)),this},show:function(){for(var e=this._super(),t=m.length;t--&&m[t]!==this;);return-1===t&&m.push(this),e},hide:function(){return i(this),c(!1,this),this._super()},hideAll:function(){g.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),c(!1,this)),this},remove:function(){i(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});return g.hideAll=function(){for(var e=m.length;e--;){var t=m[e];t&&t.settings.autohide&&(t.hide(),m.splice(e,1))}},g}),e(ke,[Se,xe,ue,f,be,de,o,i],function(e,t,a,s,r,l,i,c){function o(e){var t,n=s("meta[name=viewport]")[0];!1!==i.overrideViewPort&&(n||((n=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n)),(t=n.getAttribute("content"))&&void 0!==d&&(d=t),n.setAttribute("content",e?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":d))}var n,u=[],d="",e=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;n._super(e),n.isRtl()&&n.classes.add("rtl"),n.classes.add("window"),n.bodyClasses.add("window-body"),n.state.set("fixed",!0),e.buttons&&(n.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:n.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),n.statusbar.classes.add("foot"),n.statusbar.parent(n)),n.on("click",function(e){var t=n.classPrefix+"close";(a.hasClass(e.target,t)||a.hasClass(e.target.parentNode,t))&&n.close()}),n.on("cancel",function(){n.close()}),n.aria("describedby",n.describedBy||n._id+"-none"),n.aria("label",e.title),n._fullscreen=!1},recalc:function(){var e,t,n,r,i=this,o=i.statusbar;i._fullscreen&&(i.layoutRect(a.getWindowSize()),i.layoutRect().contentH=i.layoutRect().innerH),i._super(),e=i.layoutRect(),!i.settings.title||i._fullscreen||(t=e.headerW)>e.w&&(n=e.x-Math.max(0,t/2),i.layoutRect({w:t,x:n}),r=!0),o&&(o.layoutRect({w:i.layoutRect().innerW}).recalc(),(t=o.layoutRect().minW+e.deltaW)>e.w&&(n=e.x-Math.max(0,t-e.w),i.layoutRect({w:t,x:n}),r=!0)),r&&i.recalc()},initLayoutRect:function(){var e,t=this._super(),n=0;this.settings.title&&!this._fullscreen&&(e=this.getEl("head"),e=a.getSize(e),t.headerW=e.width,t.headerH=e.height,n+=t.headerH),this.statusbar&&(n+=this.statusbar.layoutRect().h),t.deltaH+=n,t.minH+=n,t.h+=n;n=a.getWindowSize();return t.x=this.settings.x||Math.max(0,n.w/2-t.w/2),t.y=this.settings.y||Math.max(0,n.h/2-t.h/2),t},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,i=e.settings,o="",a="",s=i.html;return e.preRender(),t.preRender(e),i.title&&(o='<div id="'+n+'-head" class="'+r+'window-head"><div id="'+n+'-title" class="'+r+'title">'+e.encode(i.title)+'</div><div id="'+n+'-dragh" class="'+r+'dragh"></div><button type="button" class="'+r+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),void 0===(s=i.url?'<iframe src="'+i.url+'" tabindex="-1"></iframe>':s)&&(s=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+o+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+s+"</div>"+a+"</div></div>"},fullscreen:function(e){var n,t,r=this,i=document.documentElement,o=r.classPrefix;return e!=r._fullscreen&&(s(window).on("resize",function(){var e,t;r._fullscreen&&(n?r._timer||(r._timer=c.setTimeout(function(){var e=a.getWindowSize();r.moveTo(0,0).resizeTo(e.w,e.h),r._timer=0},50)):(e=(new Date).getTime(),t=a.getWindowSize(),r.moveTo(0,0).resizeTo(t.w,t.h),50<(new Date).getTime()-e&&(n=!0)))}),t=r.layoutRect(),(r._fullscreen=e)?(r._initial={x:t.x,y:t.y,w:t.w,h:t.h},r.borderBox=l.parseBox("0"),r.getEl("head").style.display="none",t.deltaH-=t.headerH+2,s([i,document.body]).addClass(o+"fullscreen"),r.classes.add("fullscreen"),e=a.getWindowSize(),r.moveTo(0,0).resizeTo(e.w,e.h)):(r.borderBox=l.parseBox(r.settings.border),r.getEl("head").style.display="",t.deltaH+=t.headerH,s([i,document.body]).removeClass(o+"fullscreen"),r.classes.remove("fullscreen"),r.moveTo(r._initial.x,r._initial.y).resizeTo(r._initial.w,r._initial.h))),r.reflow()},postRender:function(){var t,n=this;setTimeout(function(){n.classes.add("in"),n.fire("open")},0),n._super(),n.statusbar&&n.statusbar.postRender(),n.focus(),this.dragHelper=new r(n._id+"-dragh",{start:function(){t={x:n.layoutRect().x,y:n.layoutRect().y}},drag:function(e){n.moveTo(t.x+e.deltaX,t.y+e.deltaY)}}),n.on("submit",function(e){e.isDefaultPrevented()||n.close()}),u.push(n),o(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e;for(this.dragHelper.destroy(),this._super(),this.statusbar&&this.statusbar.remove(),e=u.length;e--;)u[e]===this&&u.splice(e,1);o(0<u.length),function(e){for(var t=0;t<u.length;t++)if(u[t]._fullscreen)return;s([document.documentElement,document.body]).removeClass(e+"fullscreen")}(this.classPrefix)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});return i.desktop||(n={w:window.innerWidth,h:window.innerHeight},c.setInterval(function(){var e=window.innerWidth,t=window.innerHeight;n.w==e&&n.h==t||(n={w:e,h:t},s(window).trigger("resize"))},100)),s(window).on("resize",function(){for(var e,t=a.getWindowSize(),n=0;n<u.length;n++)e=u[n].layoutRect(),u[n].moveTo(u[n].settings.x||Math.max(0,t.w/2-e.w/2),u[n].settings.y||Math.max(0,t.h/2-e.h/2))}),e}),e(Ee,[ke],function(i){var o=i.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(e){function t(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),r(t)}}}var n,r=e.callback||function(){};switch(e.buttons){case o.OK_CANCEL:n=[t("Ok",!0,!0),t("Cancel",!1)];break;case o.YES_NO:case o.YES_NO_CANCEL:n=[t("Yes",1,!0),t("No",0)],e.buttons==o.YES_NO_CANCEL&&n.push(t("Cancel",-1));break;default:n=[t("Ok",!0,!0)]}return new i({padding:20,x:e.x,y:e.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:n,title:e.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:e.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:e.onClose,onCancel:function(){r(!1)}}).renderTo(document.body).reflow()},alert:function(e,t){return(e="string"==typeof e?{text:e}:e).callback=t,o.msgBox(e)},confirm:function(e,t){return(e="string"==typeof e?{text:e}:e).callback=t,e.buttons=o.OK_CANCEL,o.msgBox(e)}}});return o}),e(Ae,[ke,Ee],function(s,l){return function(i){function t(){return r.length?r[r.length-1]:void 0}function o(e){i.fire("OpenWindow",{win:e})}function a(e){i.fire("CloseWindow",{win:e})}var r=[];this.windows=r,i.on("remove",function(){for(var e=r.length;e--;)r[e].close()}),this.open=function(n,e){var t;return i.editorManager.setActive(i),n.title=n.title||" ",n.url=n.url||n.file,n.url&&(n.width=parseInt(n.width||320,10),n.height=parseInt(n.height||240,10)),n.body&&(n.items={defaults:n.defaults,type:n.bodyType||"form",items:n.body,data:n.data,callbacks:n.commands}),n.url||n.buttons||(n.buttons=[{text:"Ok",subtype:"primary",onclick:function(){t.find("form")[0].submit()}},{text:"Cancel",onclick:function(){t.close()}}]),t=new s(n),r.push(t),t.on("close",function(){for(var e=r.length;e--;)r[e]===t&&r.splice(e,1);r.length||i.focus(),a(t)}),n.data&&t.on("postRender",function(){this.find("*").each(function(e){var t=e.name();t in n.data&&e.value(n.data[t])})}),t.features=n||{},t.params=e||{},1===r.length&&i.nodeChanged(),o(t=t.renderTo().reflow()),t},this.alert=function(e,t,n){var r=l.alert(e,function(){t?t.call(n||this):i.focus()});r.on("close",function(){a(r)}),o(r)},this.confirm=function(e,t,n){var r=l.confirm(e,function(e){t.call(n||this,e)});r.on("close",function(){a(r)}),o(r)},this.close=function(){t()&&t().close()},this.getParams=function(){return t()?t().params:null},this.setParams=function(e){t()&&(t().params=e)},this.getWindows=function(){return r}}}),e(Te,[me,$e],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'" role="presentation"><div class="'+e+'tooltip-arrow"></div><div class="'+e+'tooltip-inner">'+this.encode(this.state.get("text"))+"</div></div>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().lastChild.innerHTML=t.encode(e.value)}),t._super()},repaint:function(){var e=this.getEl().style,t=this._layoutRect;e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}})}),e(Ne,[me,Te],function(e,t){var n,i=e.extend({init:function(n){var r=this;r._super(n),n=r.settings,r.canFocus=!0,n.tooltip&&!1!==i.tooltips&&(r.on("mouseenter",function(e){var t=r.tooltip().moveTo(-65535);e.control==r?(e=t.text(n.tooltip).show().testMoveRel(r.getEl(),["bc-tc","bc-tl","bc-tr"]),t.classes.toggle("tooltip-n","bc-tc"==e),t.classes.toggle("tooltip-nw","bc-tl"==e),t.classes.toggle("tooltip-ne","bc-tr"==e),t.moveRel(r.getEl(),e)):t.hide()}),r.on("mouseleave mousedown click",function(){r.tooltip().hide()})),r.aria("label",n.ariaLabel||n.tooltip)},tooltip:function(){return n||(n=new t({type:"tooltip"})).renderTo(),n},postRender:function(){var e=this.settings;this._super(),this.parent()||!e.width&&!e.height||(this.initLayoutRect(),this.repaint()),e.autofocus&&this.focus()},bindStates:function(){function t(e){r.aria("disabled",e),r.classes.toggle("disabled",e)}function n(e){r.aria("pressed",e),r.classes.toggle("active",e)}var r=this;return r.state.on("change:disabled",function(e){t(e.value)}),r.state.on("change:active",function(e){n(e.value)}),r.state.get("disabled")&&t(!0),r.state.get("active")&&n(!0),r._super()},remove:function(){this._super(),n&&(n.remove(),n=null)}});return i}),e(_e,[Ne],function(e){return e.extend({Defaults:{value:0},init:function(e){this._super(e),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div class="'+t+'bar-container"><div class="'+t+'bar"></div></div><div class="'+t+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){function t(e){e=n.settings.filter(e),n.getEl().lastChild.innerHTML=e+"%",n.getEl().firstChild.firstChild.style.width=e+"%"}var n=this;return n.state.on("change:value",function(e){t(e.value)}),t(n.state.get("value")),n._super()}})}),e(Re,[me,$e,_e,i],function(e,t,n,r){return e.extend({Mixins:[t],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||0<e.timeout)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new n),t.on("click",function(e){-1!=e.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var e=this,t=e.classPrefix,n="",r="",i="",o="";return e.icon&&(n='<i class="'+t+"ico "+t+"i-"+e.icon+'"></i>'),e.color&&(o=' style="background-color: '+e.color+'"'),e.closeButton&&(r='<button type="button" class="'+t+'close" aria-hidden="true">×</button>'),e.progressBar&&(i=e.progressBar.renderHtml()),'<div id="'+e._id+'" class="'+e.classes+'"'+o+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+e.state.get("text")+"</div>"+i+r+"</div>"},postRender:function(){var e=this;return r.setTimeout(function(){e.$el.addClass(e.classPrefix+"in")}),e._super()},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl().childNodes[1].innerHTML=e.value}),t.progressBar&&t.progressBar.bindStates(),t._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var e=this.getEl().style,t=this._layoutRect;e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}})}),e(De,[Re,i],function(o,t){return function(r){function e(){return i.length?i[i.length-1]:void 0}function n(){if(0<i.length){var e=i.slice(0,1)[0],t=r.inline?r.getElement():r.getContentAreaContainer();if(e.moveRel(t,"tc-tc"),1<i.length)for(var n=1;n<i.length;n++)i[n].moveRel(i[n-1].getEl(),"bc-tc")}}var i=[];this.notifications=i,r.on("remove",function(){for(var e=i.length;e--;)i[e].close()}),r.on("ResizeEditor",n),r.on("ResizeWindow",function(){t.requestAnimationFrame(function(){(function(){for(var e=0;e<i.length;e++)i[e].moveTo(0,0)})(),n()})}),this.open=function(e){var t;return r.editorManager.setActive(r),t=new o(e),i.push(t),0<e.timeout&&(t.timer=setTimeout(function(){t.close()},e.timeout)),t.on("close",function(){var e=i.length;for(t.timer&&r.getWin().clearTimeout(t.timer);e--;)i[e]===t&&i.splice(e,1);n()}),t.renderTo(),n(),t},this.close=function(){e()&&e().close()},this.getNotifications=function(){return i},r.on("SkinLoaded",function(){var e=r.settings.service_message;e&&r.notificationManager.open({text:e,type:"warning",timeout:0,icon:""})})}}),e(Me,[y],function(i){return{create:function(e,t,n){for(var r=[];t&&t!=e;t=t.parentNode)r.push(i.nodeIndex(t,n));return r},resolve:function(e,t){for(var n,r=e,i=t.length-1;0<=i;i--){if(n=r.childNodes,t[i]>n.length-1)return null;r=n[t[i]]}return r}}}),e(Ie,[I,S,m,Me,E,g,o,d,i,C,U,Z],function(X,J,Z,Q,ee,te,ne,re,ie,oe,ae,se){return function(f){function e(e,t){try{f.getDoc().execCommand(e,!1,t)}catch(e){}}function t(){var e=f.getDoc().documentMode;return e||6}function a(e){return e.isDefaultPrevented()}function n(e){var t;e.dataTransfer&&(f.selection.isCollapsed()&&"IMG"==e.target.tagName&&R.select(e.target),0<(t=f.selection.getContent()).length&&(t=F+escape(f.id)+","+escape(t),e.dataTransfer.setData(L,t)))}function r(e){var t;return e.dataTransfer&&((t=e.dataTransfer.getData(L))&&0<=t.indexOf(F))?(t=t.substr(F.length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null}function i(e){f.queryCommandSupported("mceInsertClipboardContent")?f.execCommand("mceInsertClipboardContent",!1,{content:e}):f.execCommand("mceInsertContent",!1,e)}function o(){f.shortcuts.add("meta+a",null,"SelectAll")}function s(){f.on("keydown",function(e){if(!a(e)&&e.keyCode===T&&f.getBody().getElementsByTagName("hr").length&&R.isCollapsed()&&0===R.getRng(!0).startOffset){var t=R.getNode(),n=t.previousSibling;if("HR"==t.nodeName)return _.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(_.remove(n),e.preventDefault())}})}function l(){f.on("keydown",function(e){if(!a(e)&&e.keyCode===T&&R.isCollapsed()&&0===R.getRng(!0).startOffset){var t=R.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function c(){f.inline||(f.contentStyles.push("body {min-height: 150px}"),f.on("click",function(e){"HTML"==e.target.nodeName&&(11<ne.ie?f.getBody().focus():(e=f.selection.getRng(),f.getBody().focus(),f.selection.setRng(e),f.selection.normalize(),f.nodeChanged()))}))}function u(){var e,t;d()&&((t=(e=f.getBody()).parentNode).removeChild(e),t.appendChild(e),e.focus())}function d(){var e;return P?!(e=f.selection.getSel())||!e.rangeCount||0===e.rangeCount:0}function h(){function n(e){var t=new se(e.getBody()),n=e.selection.getRng(),r=ae.fromRangeStart(n),n=ae.fromRangeEnd(n);return!e.selection.isCollapsed()&&!t.prev(r)&&!t.next(n)}f.on("keypress",function(e){!a(e)&&!R.isCollapsed()&&31<e.charCode&&!X.metaKeyPressed(e)&&n(f)&&(e.preventDefault(),f.setContent(String.fromCharCode(e.charCode)),f.selection.select(f.getBody(),!0),f.selection.collapse(!1),f.nodeChanged())}),f.on("keydown",function(e){var t=e.keyCode;a(e)||t!=N&&t!=T||n(f)&&(e.preventDefault(),f.setContent(""),f.nodeChanged())})}var m,p,g,v,y,b,w,x,$,C,S,k,E=re.each,A=f.$,T=X.BACKSPACE,N=X.DELETE,_=f.dom,R=f.selection,D=f.settings,M=f.parser,I=f.serializer,P=ne.gecko,O=ne.ie,B=ne.webkit,F="data:text/mce-internal,",L=O?"Text":"URL";return f.on("keydown",function(e){var t,n,r,i;if(!a(e)&&e.keyCode==X.BACKSPACE&&(n=(t=R.getRng()).startContainer,e=t.startOffset,r=_.getRoot(),i=n,t.collapsed&&0===e)){for(;i&&i.parentNode&&i.parentNode.firstChild==i&&i.parentNode!=r;)i=i.parentNode;"BLOCKQUOTE"===i.tagName&&(f.formatter.toggle("blockquote",null,i),(t=_.createRng()).setStart(n,0),t.setEnd(n,0),R.setRng(t))}}),f.on("keydown",function(e){var t,n=e.keyCode;a(e)||n!=N&&n!=T||(t=f.selection.isCollapsed(),n=f.getBody(),t&&!_.isEmpty(n)||(t||function(e){if(e.setStart)return t=K(e),(e=_.createRng()).selectNode(f.getBody()),t===K(e);if(e.item)return;var t=e.duplicate();return t.moveToElementText(f.getBody()),J.compareRanges(e,t)}(f.selection.getRng()))&&(e.preventDefault(),f.setContent(""),n.firstChild&&_.isBlock(n.firstChild)?f.selection.setCursorLocation(n.firstChild,0):f.selection.setCursorLocation(n,0),f.nodeChanged()))}),ne.windowsPhone||f.on("keyup focusin mouseup",function(e){65==e.keyCode&&X.metaKeyPressed(e)||R.normalize()},!0),B&&(h(),$=f.getDoc(),C=f.dom,S=f.selection,(k=window.MutationObserver)||(w=!0,k=function(){function t(e){e=e.relatedNode||e.target;i.push({target:e,addedNodes:[e]})}function n(e){var t=e.relatedNode||e.target;i.push({target:t,attributeName:e.attrName})}var r,i=[];this.observe=function(e){(r=e).addEventListener("DOMSubtreeModified",t,!1),r.addEventListener("DOMNodeInsertedIntoDocument",t,!1),r.addEventListener("DOMNodeInserted",t,!1),r.addEventListener("DOMAttrModified",n,!1)},this.disconnect=function(){r.removeEventListener("DOMSubtreeModified",t,!1),r.removeEventListener("DOMNodeInsertedIntoDocument",t,!1),r.removeEventListener("DOMNodeInserted",t,!1),r.removeEventListener("DOMAttrModified",n,!1)},this.takeRecords=function(){return i}}),f.on("keydown",function(e){var t,n,r,i=e.keyCode==N,o=e.ctrlKey||e.metaKey;a(e)||!i&&e.keyCode!=T||(n=(t=f.selection.getRng()).startContainer,r=t.startOffset,i&&e.shiftKey||(!function(e,n){function t(e,t){return d=A(t).parents().filter(function(e,t){return!!f.schema.getTextInlineElements()[t.nodeName]}),a=e.cloneNode(!1),(d=re.map(d,function(e){return e=e.cloneNode(!1),a.hasChildNodes()&&e.appendChild(a.firstChild),a.appendChild(e),a.appendChild(e),e})).length?(u=C.create("br"),d[0].appendChild(u),C.replace(a,e),n.setStartBefore(u),n.setEndBefore(u),f.selection.setRng(n),u):null}function r(e){return e&&f.schema.getTextBlockElements()[e.tagName]}var i,o,a,s,l,c,u,d;if(n.collapsed&&(l=n.startContainer,c=n.startOffset,r(o=C.getParent(l,C.isBlock)))){if(1==l.nodeType)return(!(l=l.childNodes[c])||"BR"==l.tagName)&&(s=e?o.nextSibling:o.previousSibling,C.isEmpty(o)&&r(s)&&C.isEmpty(s)&&t(o,l)&&(C.remove(s),1));if(3==l.nodeType){if(i=Q.create(o,l),s=o.cloneNode(!0),l=Q.resolve(s,i),e){if(c>=l.data.length)return;l.deleteData(c,1)}else{if(c<=0)return;l.deleteData(c-1,1)}return C.isEmpty(s)?t(o,l):void 0}}}(i,t)?!o&&t.collapsed&&3==n.nodeType&&(i?r<n.data.length:0<r)||(e.preventDefault(),o&&f.selection.getSel().modify("extend",i?"forward":"backward",e.metaKey?"lineboundary":"word"),Y(i)):e.preventDefault()))}),f.on("keypress",function(e){var n,r,t,i;!a(e)&&!S.isCollapsed()&&31<e.charCode&&!X.metaKeyPressed(e)&&(t=f.selection.getRng(),i=String.fromCharCode(e.charCode),e.preventDefault(),e=A(t.startContainer).parents().filter(function(e,t){return!!f.schema.getTextInlineElements()[t.nodeName]}),Y(!0),(e=e.filter(function(e,t){return!A.contains(f.getBody(),t)})).length?(n=C.createFragment(),e.each(function(e,t){t=t.cloneNode(!1),n.hasChildNodes()?t.appendChild(n.firstChild):r=t,n.appendChild(t),n.appendChild(t)}),r.appendChild(f.getDoc().createTextNode(i)),e=C.getParent(t.startContainer,C.isBlock),C.isEmpty(e)?A(e).empty().append(n):t.insertNode(n),t.setStart(r.firstChild,1),t.setEnd(r.firstChild,1),f.selection.setRng(t)):f.selection.setContent(i))}),f.addCommand("Delete",function(){Y()}),f.addCommand("ForwardDelete",function(){Y(!0)}),w||(f.on("dragstart",function(e){x=S.getRng(),n(e)}),f.on("drop",function(t){var n;a(t)||(n=r(t))&&(t.preventDefault(),ie.setEditorTimeout(f,function(){var e=J.getCaretRangeFromPoint(t.x,t.y,$);x&&(S.setRng(x),x=null),Y(),S.setRng(e),i(n.html)}))}),f.on("cut",function(e){a(e)||!e.clipboardData||f.selection.isCollapsed()||(e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/html",f.selection.getContent()),e.clipboardData.setData("text/plain",f.selection.getContent({format:"text"})),ie.setEditorTimeout(f,function(){Y(!0)}))})),f.settings.content_editable||_.bind(f.getDoc(),"mousedown mouseup",function(e){var t;e.target==f.getDoc().documentElement&&(t=R.getRng(),f.getBody().focus(),"mousedown"==e.type?oe.isCaretContainer(t.startContainer)||R.placeCaretAt(e.clientX,e.clientY):R.setRng(t))}),f.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==_.getContentEditableParent(t)&&(e.preventDefault(),R.getSel().setBaseAndExtent(t,0,t,1),f.nodeChanged()),"A"==t.nodeName&&_.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),R.select(t))}),D.forced_root_block&&f.on("init",function(){e("DefaultParagraphSeparator",D.forced_root_block)}),f.on("init",function(){f.dom.bind(f.getBody(),"submit",function(e){e.preventDefault()})}),l(),M.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"==e[t].attr("class")&&e[t].remove()}),ne.iOS?(f.inline||f.on("keydown",function(){document.activeElement==document.body&&f.getWin().focus()}),c(),f.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),f.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):o()),O&&ne.ie<11&&(s(),document.body.setAttribute("role","application"),7<t()||(e("RespectVisibilityInDesign",!0),f.contentStyles.push(".mceHideBrInPre pre br {display: none}"),_.addClass(f.getBody(),"mceHideBrInPre"),M.addNodeFilter("pre",function(e){for(var t,n,r,i,o=e.length;o--;)for(n=(t=e[o].getAll("br")).length;n--;)(i=(r=t[n]).prev)&&3===i.type&&"\n"!=i.value.charAt(i.value-1)?i.value+="\n":r.parent.insert(new ee("#text",3),r,!0).value="\n"}),I.addNodeFilter("pre",function(e){for(var t,n,r,i=e.length;i--;)for(n=(t=e[i].getAll("br")).length;n--;)(r=t[n].prev)&&3==r.type&&(r.value=r.value.replace(/\r?\n$/,""))})),_.bind(f.getBody(),"mouseup",function(){var e,t=R.getNode();"IMG"==t.nodeName&&((e=_.getStyle(t,"width"))&&(_.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),_.setStyle(t,"width","")),(e=_.getStyle(t,"height"))&&(_.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),_.setStyle(t,"height","")))}),f.on("keydown",function(e){var t;a(e)||e.keyCode!=T||(t=f.getDoc().selection.createRange())&&t.item&&(e.preventDefault(),f.undoManager.beforeChange(),_.remove(t.item(0)),f.undoManager.add())}),10<=t()&&(b="",E("p div h1 h2 h3 h4 h5 h6".split(" "),function(e,t){b+=(0<t?",":"")+e+":empty"}),f.contentStyles.push(b+"{padding-right: 1px !important}")),t()<9&&(M.addNodeFilter("noscript",function(e){for(var t,n,r=e.length;r--;)(n=(t=e[r]).firstChild)&&t.attr("data-mce-innertext",n.value)}),I.addNodeFilter("noscript",function(e){for(var t,n,r,i=e.length;i--;)t=e[i],(n=e[i].firstChild)?n.value=te.decode(n.value):(r=t.attributes.map["data-mce-innertext"])&&(t.attr("data-mce-innertext",null),(n=new ee("#text",3)).value=r,n.raw=!0,t.append(n))})),v=_.doc,y=v.body,v.documentElement.unselectable=!0,_.bind(v,"mousedown contextmenu",function(e){"HTML"===e.target.nodeName&&(m&&j(),(g=v.documentElement).scrollHeight>g.clientHeight||(m=1,(p=z(e.x,e.y))&&(_.bind(v,"mouseup",j),_.bind(v,"mousemove",V),_.getRoot().focus(),p.select())))})),11<=ne.ie&&(c(),l()),ne.ie&&(o(),e("AutoUrlDetect",!1),f.on("dragstart",function(e){n(e)}),f.on("drop",function(e){var t;a(e)||(t=r(e))&&t.id!=f.id&&(e.preventDefault(),e=J.getCaretRangeFromPoint(e.x,e.y,f.getDoc()),R.setRng(e),i(t.html))})),P&&(h(),s(),window.Range.prototype.getClientRects||f.on("mousedown",function(e){var t;a(e)||"HTML"!==e.target.nodeName||((t=f.getBody()).blur(),ie.setEditorTimeout(f,function(){t.focus()}))}),f.on("keypress",function(e){var t;return a(e)||8!=e.keyCode&&46!=e.keyCode||!H()?void 0:(t=U(),f.getDoc().execCommand("delete",!1,null),t(),e.preventDefault(),!1)}),_.bind(f.getDoc(),"cut",function(e){var t;!a(e)&&H()&&(t=U(),ie.setEditorTimeout(f,function(){t()}))}),D.readonly||f.on("BeforeExecCommand MouseDown",function(){u(),e("StyleWithCSS",!1),e("enableInlineTableEditing",!1),D.object_resizing||e("enableObjectResizing",!1)}),f.on("SetContent ExecCommand",function(e){"setcontent"!=e.type&&"mceInsertLink"!==e.command||E(_.select("a"),function(e){var t=e.parentNode,n=_.getRoot();if(t.lastChild===e){for(;t&&!_.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}_.add(t,"br",{"data-mce-bogus":1})}})}),f.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),ne.mac&&f.on("keydown",function(e){!X.metaKeyPressed(e)||e.shiftKey||37!=e.keyCode&&39!=e.keyCode||(e.preventDefault(),f.selection.getSel().modify("move",37==e.keyCode?"backward":"forward","lineboundary"))}),l()),{refreshContentEditable:u,isHidden:d};function U(){var e=_.getAttribs(R.getStart().cloneNode(!1));return function(){var t=R.getStart();t!==f.getBody()&&(_.setAttrib(t,"style",null),E(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function H(){return!R.isCollapsed()&&_.getParent(R.getStart(),_.isBlock)!=_.getParent(R.getEnd(),_.isBlock)}function z(e,t){var n=y.createTextRange();try{n.moveToPoint(e,t)}catch(e){n=null}return n}function V(e){e.button?(e=z(e.x,e.y))&&(0<e.compareEndPoints("StartToStart",p)?e.setEndPoint("StartToStart",p):e.setEndPoint("EndToEnd",p),e.select()):j()}function j(){var e=v.selection.createRange();p&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&p.select(),_.unbind(v,"mouseup",j),_.unbind(v,"mousemove",V),p=m=0}function q(e,t){for(var n=e.nextSibling;n&&n!=t;n=n.nextSibling)if((3!=n.nodeType||0!==A.trim(n.data).length)&&n!==t)return;return n===t}function W(e,t,n){for(var r,i=C.schema.getNonEmptyElements(),o=new Z(n||e,e);r=o[t?"next":"prev"]();){if(i[r.nodeName]&&!function(e){var t=C.schema.getBlockElements(),n=f.getBody();if("BR"==e.nodeName){for(;e!=n&&!t[e.nodeName];e=e.parentNode)if(e.nextSibling)return;return 1}}(r))return r;if(3==r.nodeType&&0<r.data.length)return r}}function G(e){var t,n,r,i=function(e,t){var n,r,i,o;if(!e.collapsed)return e;if(i=e.startContainer,o=e.startOffset,3==i.nodeType)if(t){if(o<i.data.length)return e}else if(0<o)return e;if(n=J.getNode(e.startContainer,e.startOffset),r=C.getParent(n,C.isBlock),i=W(f.getBody(),t,n),o=C.getParent(i,C.isBlock),!n||!i)return e;if(o&&r!=o)if(t){if(!q(r,o))return e;1==n.nodeType?"BR"==n.nodeName?e.setStartBefore(n):e.setStartAfter(n):e.setStart(n,n.data.length),1==i.nodeType?e.setEnd(i,0):e.setEndBefore(i)}else{if(!q(o,r))return e;1==i.nodeType?"BR"==i.nodeName?e.setStartBefore(i):e.setStartAfter(i):e.setStart(i,i.data.length),1==n.nodeType?e.setEnd(n,0):e.setEndBefore(n)}return e}(i=S.getRng(),e);return!((e=i).collapsed||(t=C.getParent(J.getNode(e.startContainer,e.startOffset),C.isBlock),n=C.getParent(J.getNode(e.endContainer,e.endOffset),C.isBlock),r=f.schema.getTextBlockElements(),t==n||!r[t.nodeName]||!r[n.nodeName]||"false"===C.getContentEditable(t)||"false"===C.getContentEditable(n))||(e.deleteContents(),i=W(t,!1),r=W(n,!0),C.isEmpty(n)||A(t).append(n.childNodes),A(n).remove(),i?1==i.nodeType?"BR"==i.nodeName?(e.setStartBefore(i),e.setEndBefore(i)):(e.setStartAfter(i),e.setEndAfter(i)):(e.setStart(i,i.data.length),e.setEnd(i,i.data.length)):r&&(1==r.nodeType?(e.setStartBefore(r),e.setEndBefore(r)):(e.setStart(r,0),e.setEnd(r,0))),S.setRng(e),0))}function Y(e){var t,r,i;G(e)||(re.each(f.getBody().getElementsByTagName("*"),function(e){"SPAN"==e.tagName&&e.setAttribute("mce-data-marked",1),!e.hasAttribute("data-mce-style")&&e.hasAttribute("style")&&f.dom.setAttrib(e,"style",f.dom.getAttrib(e,"style"))}),(t=new k(function(){})).observe(f.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]}),f.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null),r=f.selection.getRng(),i=r.startContainer.parentNode,re.each(t.takeRecords(),function(e){var t;C.isChildOf(e.target,f.getBody())&&("style"==e.attributeName&&((t=e.target.getAttribute("data-mce-style"))?e.target.setAttribute("style",t):e.target.removeAttribute("style")),re.each(e.addedNodes,function(e){var t,n;"SPAN"!=e.nodeName||e.getAttribute("mce-data-marked")||(e==i&&(t=r.startOffset,n=e.firstChild),C.remove(e,!0),n&&(r.setStart(n,t),r.setEnd(n,t),f.selection.setRng(r)))}))}),t.disconnect(),re.each(f.dom.select("span[mce-data-marked]"),function(e){e.removeAttribute("mce-data-marked")}))}function K(e){var t=_.create("body"),e=e.cloneContents();return t.appendChild(e),R.serializer.serialize(t,{format:"html"})}}}),e(Pe,[ae,y,d],function(e,t,n){function r(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=c.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()}function i(o,a){function s(e){return!e.hidden&&!e.readonly}var e,t=r(o,a);o.delegates||(o.delegates={}),o.delegates[a]||(o.settings.event_root?(l||(l={},o.editorManager.on("removeEditor",function(){if(!o.editorManager.activeEditor&&l){for(var e in l)o.dom.unbind(r(o,e));l=null}})),l[a]||(e=function(e){for(var t=e.target,n=o.editorManager.editors,r=n.length;r--;){var i=n[r].getBody();(i===t||c.isChildOf(t,i))&&s(n[r])&&n[r].fire(a,e)}},l[a]=e,c.bind(t,a,e))):(e=function(e){s(o)&&o.fire(a,e)},c.bind(t,a,e),o.delegates[a]=e))}var l,c=t.DOM,t={bindPendingEventDelegates:function(){var t=this;n.each(t._pendingNativeEvents,function(e){i(t,e)})},toggleNativeEvent:function(e,t){var n=this;"focus"!=e&&"blur"!=e&&(t?n.initialized?i(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(r(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this;if(t.delegates){for(e in t.delegates)t.dom.unbind(r(t,e),e,t.delegates[e]);delete t.delegates}t.inline||(t.getBody().onload=null,t.dom.unbind(t.getWin()),t.dom.unbind(t.getDoc())),t.dom.unbind(t.getBody()),t.dom.unbind(t.getContainer())}};return n.extend({},e,t)}),e(Oe,[],function(){function o(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}}function r(e,t){var n,r,i;e._clickBlocker&&(e._clickBlocker.unbind(),e._clickBlocker=null),t?(e._clickBlocker=(r=(n=e).getBody(),i=function(e){0<n.dom.getParents(e.target,"a").length&&e.preventDefault()},n.dom.bind(r,"click",i),{unbind:function(){n.dom.unbind(r,"click",i)}}),e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable=!1):(e.readonly=!1,e.getBody().contentEditable=!0,o(e,"StyleWithCSS",!1),o(e,"enableInlineTableEditing",!1),o(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())}return{setMode:function(e,t){var n=e.readonly?"readonly":"design";t!=n&&(e.initialized?r(e,"readonly"==t):e.on("init",function(){r(e,"readonly"==t)}),e.fire("SwitchMode",{mode:t}))}}}),e(Be,[d,o],function(c,u){var d=c.each,f=c.explode,h={f9:120,f10:121,f11:122},m=c.makeMap("alt,ctrl,shift,meta,access");return function(o){function i(e){var t,n,r={};for(n in d(f(e,"+"),function(e){e in m?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=h[e]||e.toUpperCase().charCodeAt(0))}),t=[r.keyCode],m)r[n]?t.push(n):r[n]=!1;return r.id=t.join(","),r.access&&(r.alt=!0,u.mac?r.ctrl=!0:r.shift=!0),r.meta&&(u.mac?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r}function a(e,t,n,r){e=c.map(f(e,">"),i);return e[e.length-1]=c.extend(e[e.length-1],{func:n,scope:r||o}),c.extend(e[0],{desc:o.translate(t),subpatterns:e.slice(1)})}function n(e,t){return t&&(t.ctrl==e.ctrlKey&&t.meta==e.metaKey&&(t.alt==e.altKey&&t.shift==e.shiftKey&&((e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode)&&(e.preventDefault(),1))))}function r(e){return e.func&&e.func.call(e.scope)}var s={},l=[];o.on("keyup keypress keydown",function(t){var e;!((e=t).altKey||e.ctrlKey||e.metaKey||112<=(e=t).keyCode&&e.keyCode<=123)||t.isDefaultPrevented()||(d(s,function(e){return n(t,e)?(l=e.subpatterns.slice(0),"keydown"==t.type&&r(e),!0):void 0}),n(t,l[0])&&(1===l.length&&"keydown"==t.type&&r(l[0]),l.shift()))}),this.add=function(e,t,n,r){var i=n;return"string"==typeof n?n=function(){o.execCommand(i,!1,null)}:c.isArray(i)&&(n=function(){o.execCommand(i[0],i[1],i[2])}),d(f(c.trim(e.toLowerCase())),function(e){e=a(e,t,n,r);s[e.id]=e}),!0},this.remove=function(e){e=a(e);return!!s[e.id]&&(delete s[e.id],!0)}}}),e(Fe,[n,d,O],function(p,s,g){return function(u,a){function d(e){var t={"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[e.blob().type.toLowerCase()]||"dat";return e.id()+"."+t}function n(e,n,r,t){var i,o=new XMLHttpRequest;o.open("POST",a.url),o.withCredentials=a.credentials,o.upload.onprogress=function(e){t(e.loaded/e.total*100)},o.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){var e,t;return 200!=o.status?void r("HTTP Error: "+o.status):(t=JSON.parse(o.responseText))&&"string"==typeof t.location?void n((e=a.basePath,t=t.location,e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t)):void r("Invalid JSON: "+o.responseText)},(i=new FormData).append("file",e.blob(),d(e)),o.send(i)}function f(e,t){return{url:t,blobInfo:e,status:!0}}function h(e,t){return{url:"",blobInfo:e,status:!1,error:t}}function m(e,t){s.each(o[e],function(e){e(t)}),delete o[e]}function r(s,l,c){return u.markPending(s.blobUri()),new p(function(t){function e(){}var n,r;try{var i=function(){n&&(n.close(),a=e)},o=function(){i(),u.removeFailed(s.blobUri()),m(s.blobUri(),h(s,o)),t(h(s,o))},a=function(e){e<0||100<e||(n=n||c()).progressBar.value(e)};l({id:(r=s).id,blob:r.blob,base64:r.base64,filename:g.constant(d(r))},function(e){i(),u.markUploaded(s.blobUri(),e),m(s.blobUri(),f(s,e)),t(f(s,e))},o,a)}catch(e){t(h(s,e.message))}})}function i(e,n){return e=s.grep(e,function(e){return!u.isUploaded(e.blobUri())}),p.all(s.map(e,function(e){return u.isPending(e.blobUri())?(t=e.blobUri(),new p(function(e){o[t]=o[t]||[],o[t].push(e)})):r(e,a.handler,n);var t}))}var o={};return a=s.extend({credentials:!1,handler:n},a),{upload:function(e,t){return a.url||a.handler!==n?i(e,t):new p(function(e){e([])})}}}}),e(Le,[n],function(t){function o(e){var t,n;return e=decodeURIComponent(e).split(","),{type:t=(n=/data:([^;]+)/.exec(e[0]))?n[1]:t,data:e[1]}}return{uriToBlob:function(e){return 0===e.indexOf("blob:")?(n=e,new t(function(e){var t=new XMLHttpRequest;t.open("GET",n,!0),t.responseType="blob",t.onload=function(){200==this.status&&e(this.response)},t.send()})):0===e.indexOf("data:")?(i=e,new t(function(t){var e,n,r;i=o(i);try{e=atob(i.data)}catch(e){return void t(new Blob([]))}for(n=new Uint8Array(e.length),r=0;r<n.length;r++)n[r]=e.charCodeAt(r);t(new Blob([n],{type:i.type}))})):null;var i,n},blobToDataUri:function(n){return new t(function(e){var t=new FileReader;t.onloadend=function(){e(t.result)},t.readAsDataURL(n)})},parseDataUri:o}}),e(Ue,[n,u,O,Le,o],function(t,o,s,l,c){var u=0;return function(r,a){var i={};return{findAll:function(e,n){return n=n||s.constant(!0),e=o.filter(e.getElementsByTagName("img"),function(e){var t=e.src;return!!c.fileApi&&(!e.hasAttribute("data-mce-bogus")&&(!e.hasAttribute("data-mce-placeholder")&&(!(!t||t==c.transparentSrc)&&(0===t.indexOf("blob:")?!r.isUploaded(t):0===t.indexOf("data:")&&n(e)))))}),e=o.map(e,function(o){var e;return i[o.src]?new t(function(t){i[o.src].then(function(e){t({image:o,blobInfo:e.blobInfo})})}):(e=new t(function(e){var n,r,i,t;r=e,0===(n=o).src.indexOf("blob:")?(t=a.getByUri(n.src))&&r({image:n,blobInfo:t}):(i=l.parseDataUri(n.src).data,(t=a.findFirst(function(e){return e.base64()===i}))?r({image:n,blobInfo:t}):l.uriToBlob(n.src).then(function(e){var t="blobid"+u++,e=a.create(t,e,i);a.add(e),r({image:n,blobInfo:e})}))}).then(function(e){return delete i[e.image.src],e}).catch(function(e){return delete i[o.src],e}),i[o.src]=e)}),t.all(e)}}}}),e(He,[u,O],function(i,o){return function(){function t(t){return e(function(e){return e.id()===t})}function e(e){return i.filter(n,e)[0]}var n=[],r=o.constant;return{create:function(e,t,n){return{id:r(e),blob:r(t),base64:r(n),blobUri:r(URL.createObjectURL(t))}},add:function(e){t(e.id())||n.push(e)},get:t,getByUri:function(t){return e(function(e){return e.blobUri()==t})},findFirst:e,removeByUri:function(t){n=i.filter(n,function(e){return e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1)})},destroy:function(){i.each(n,function(e){URL.revokeObjectURL(e.blobUri())}),n=[]}}}}),e(ze,[],function(){return function(){function n(e,t){return{status:e,resultUri:t}}function t(e){return e in r}var r={};return{hasBlobUri:t,getResultUri:function(e){return(e=r[e])?e.resultUri:null},isPending:function(e){return!!t(e)&&1===r[e].status},isUploaded:function(e){return!!t(e)&&2===r[e].status},markPending:function(e){r[e]=n(1,null)},markUploaded:function(e,t){r[e]=n(2,t)},removeFailed:function(e){delete r[e]},destroy:function(){r={}}}}}),e(Ve,[u,Fe,Ue,He,ze],function(p,g,v,y,b){return function(o){function n(t){return function(e){return o.selection?t(e):[]}}function a(e,t,n){for(var r=0;r=e.indexOf(t,r),-1!==r&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1),-1!==r;);return e}function s(r,i){p.each(o.undoManager.data,function(e){var t,n;e.content=(t=a(t=e.content,'src="'+(n=r)+'"','src="'+(e=i)+'"'),a(t,'data-mce-src="'+n+'"','data-mce-src="'+e+'"'))})}function r(){return o.notificationManager.open({text:o.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}function t(t){return u=u||new g(m,{url:h.images_upload_url,basePath:h.images_upload_base_path,credentials:h.images_upload_credentials,handler:h.images_upload_handler}),l().then(n(function(i){var e=p.map(i,function(e){return e.blobInfo});return u.upload(e,r).then(n(function(e){return e=p.map(e,function(e,t){var n,r=i[t].image;return e.status&&!1!==o.settings.images_replace_blob_uris&&(n=r,t=e.url,f.removeByUri(n.src),s(n.src,t),o.$(n).attr({src:t,"data-mce-src":o.convertURL(t,"src")})),{element:r,status:e.status}}),t&&t(e),e}))}))}function e(e){return!1!==h.automatic_uploads?t(e):void 0}function i(e){return!h.images_dataimg_filter||h.images_dataimg_filter(e)}function l(){return(d=d||new v(m,f)).findAll(o.getBody(),i).then(n(function(e){return p.each(e,function(e){s(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),e}))}function c(e){return e.replace(/src="(blob:[^"]+)"/g,function(e,n){var t=m.getResultUri(n);if(t)return'src="'+t+'"';t=f.getByUri(n);return(t=t||p.reduce(o.editorManager.editors,function(e,t){return e||t.editorUpload.blobCache.getByUri(n)},null))?'src="data:'+t.blob().type+";base64,"+t.base64()+'"':e})}var u,d,f=new y,h=o.settings,m=new b;return o.on("setContent",function(){(!1!==o.settings.automatic_uploads?e:l)()}),o.on("RawSaveContent",function(e){e.content=c(e.content)}),o.on("getContent",function(e){e.source_view||"raw"==e.format||(e.content=c(e.content))}),o.on("PostRender",function(){o.parser.addNodeFilter("img",function(e){p.each(e,function(e){var t=e.attr("src");f.getByUri(t)||(t=m.getResultUri(t))&&e.attr("src",t)})})}),{blobCache:f,uploadImages:t,uploadImagesAuto:e,scanForImages:l,destroy:function(){f.destroy(),m.destroy(),d=u=null}}}}),e(je,[C,U,x,S,f,F,i],function(m,e,t,n,p,g,v){var y=t.isContentEditableFalse;return function(l,c){function u(){(function(){for(var e,t,n,r=p("*[contentEditable=false]",l),i=0;i<r.length;i++)t=(e=r[i]).previousSibling,m.endsWithCaretContainer(t)&&(1==(n=t.data).length?t.parentNode.removeChild(t):t.deleteData(n.length-1,1)),t=e.nextSibling,m.startsWithCaretContainer(t)&&(1==(n=t.data).length?t.parentNode.removeChild(t):t.deleteData(0,1))})(),h&&(m.remove(h),h=null),f&&(f.remove(),f=null),clearInterval(d)}var d,f,h;return{show:function(e,t){var n,r,i,o,a,s;return u(),c(t)?(h=m.insertBlock("p",t,e),n=t,r=e,a=g.collapse(n.getBoundingClientRect(),r),s="BODY"==l.tagName?(i=l.ownerDocument.documentElement,o=l.scrollLeft||i.scrollLeft,l.scrollTop||i.scrollTop):(s=l.getBoundingClientRect(),o=l.scrollLeft-s.left,l.scrollTop-s.top),a.left+=o,a.right+=o,a.top+=s,a.bottom+=s,a.width=1,0<(n=n.offsetWidth-n.clientWidth)&&(r&&(n*=-1),a.left+=n,a.right+=n),n=a,p(h).css("top",n.top),f=p('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(n).appendTo(l),e&&f.addClass("mce-visual-caret-before"),d=v.setInterval(function(){p("div.mce-visual-caret",l).toggleClass("mce-visual-caret-hidden")},500),a=t.ownerDocument.createRange(),n=h.firstChild,a.setStart(n,0),a.setEnd(n,1)):(h=m.insertInline(t,e),a=t.ownerDocument.createRange(),y(h.nextSibling)?(a.setStart(h,0),a.setEnd(h,0)):(a.setStart(h,1),a.setEnd(h,1))),a},hide:u,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},destroy:function(){v.clearInterval(d)}}}}),e(qe,[u,x,F],function(i,o,a){return{getClientRects:function n(t){function e(e){return i.map(e,function(e){return(e=a.clone(e)).node=t,e})}if(i.isArray(t))return i.reduce(t,function(e,t){return e.concat(n(t))},[]);if(o.isElement(t))return e(t.getClientRects());if(o.isText(t)){var r=t.ownerDocument.createRange();return r.setStart(t,0),r.setEnd(t,t.data.length),e(r.getClientRects())}}}}),e(We,[O,u,qe,B,J,Z,U,F],function(e,h,d,f,m,p,g,v){function t(i,o,a,e,s,t){function n(e){var t,n,r=d.getClientRects(e);for(-1==i&&(r=r.reverse()),t=0;t<r.length;t++)if(n=r[t],!a(n,l)){if(0<u.length&&o(n,h.last(u))&&c++,n.line=c,s(n))return!0;u.push(n)}}var l,c=0,u=[];return(l=h.last(t.getClientRects()))&&(n(t=t.getNode()),function(e,t,n,r){for(;r=m.findNode(r,e,f.isEditableCaretCandidate,t);)if(n(r))return}(i,e,n,t)),u}e=e.curry;return{upUntil:e(t,-1,v.isAbove,v.isBelow),downUntil:e(t,1,v.isBelow,v.isAbove),positionsUntil:function(e,t,n,r){function i(e){return h.last(e.getClientRects())}var o,a,s,l,t=new p(t),c=[],u=0,d=1==e?(o=t.next,a=v.isBelow,s=v.isAbove,g.after(r)):(o=t.prev,a=v.isAbove,s=v.isBelow,g.before(r)),f=i(d);do{if(d.isVisible()&&!s(l=i(d),f)){if(0<c.length&&a(l,h.last(c))&&u++,(l=v.clone(l)).position=d,l.line=u,n(l))return c;c.push(l)}}while(d=o(d));return c},isAboveLine:e(function(e,t){return t.line>e}),isLine:e(function(e,t){return t.line===e})}}),e(Ge,[O,u,x,qe,F,J,B],function(e,a,t,i,o,n,s){function l(e,t){return Math.abs(e.left-t)}function c(e,t){return Math.abs(e.right-t)}function u(e,i){function o(e,t){return e>=t.left&&e<=t.right}return a.reduce(e,function(e,t){var n=Math.min(l(e,i),c(e,i)),r=Math.min(l(t,i),c(t,i));return o(i,t)||!o(i,e)&&(r==n&&h(t.node)||r<n)?t:e})}function d(e,t,n,r){for(;r=m(r,e,s.isEditableCaretCandidate,t);)if(n(r))return}function f(e,n){function t(t,e){e=a.filter(i.getClientRects(e),function(e){return!t(e,n)});return r=r.concat(e),0===e.length}var r=[];return r.push(n),d(-1,e,p(t,o.isAbove),n.node),d(1,e,p(t,o.isBelow),n.node),r}var h=t.isContentEditableFalse,m=n.findNode,p=e.curry;return{findClosestClientRect:u,findLineNodeRects:f,closestCaret:function(e,t,n){var r=i.getClientRects((r=e,a.filter(a.toArray(r.getElementsByTagName("*")),h)));return(r=u(r=a.filter(r,function(e){return n>=e.top&&n<=e.bottom}),t))&&((r=u(f(e,r),t))&&h(r.node))?(t=t,{node:(r=r).node,before:l(r,t)<c(r,t)}):null}}}),e(Ye,[],function(){function a(e){var t=e.getBoundingClientRect(),e=(n=e.ownerDocument).documentElement,n=n.defaultView;return{top:t.top+n.pageYOffset-e.clientTop,left:t.left+n.pageXOffset-e.clientLeft}}return{calc:function(e,t){return n=(i=e).inline?a(i.getBody()):{left:0,top:0},i=(r=e).getBody(),i=r.inline?{left:i.scrollLeft,top:i.scrollTop}:{left:0,top:0},{pageX:(t=function(e,t){if(t.target.ownerDocument===e.getDoc())return{left:t.pageX,top:t.pageY};var n,r,i=a(e.getContentAreaContainer()),o=(r=(n=e).getBody(),o=n.getDoc().documentElement,e={left:r.scrollLeft,top:r.scrollTop},o={left:r.scrollLeft||o.scrollLeft,top:r.scrollTop||o.scrollTop},n.inline?e:o);return{left:t.pageX-i.left+o.left,top:t.pageY-i.top+o.top}}(e,t)).left-n.left+i.left,pageY:t.top-n.top+i.top};var n,r,i}}}),e(Ke,[x,u,O,i,y,Ye],function(e,s,l,t,u,f){function c(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function d(o,a){return function(e){var t,n,r,i;0===e.button&&(t=s.find(a.dom.getParents(e.target),l.or(p,g)),p(t)&&(n=a.dom.getPos(t),r=a.getBody(),i=a.getDoc().documentElement,o.element=t,o.screenX=e.screenX,o.screenY=e.screenY,o.maxX=(a.inline?r.scrollWidth:i.offsetWidth)-2,o.maxY=(a.inline?r.scrollHeight:i.offsetHeight)-2,o.relX=e.pageX-n.x,o.relY=e.pageY-n.y,o.width=t.offsetWidth,o.height=t.offsetHeight,o.ghost=function(e,t,n,r){var i=t.cloneNode(!0);e.dom.setStyles(i,{width:n,height:r}),e.dom.setAttrib(i,"data-mce-selected",null);t=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(t,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(i,{margin:0,boxSizing:"border-box"}),t.appendChild(i),t}(a,t,o.width,o.height)))}}function h(c,u){var d=t.throttle(function(e,t){u._selectionOverrides.hideFakeCaret(),u.selection.placeCaretAt(e,t)},0);return function(e){var t,n,r,i,o,a,s,l=Math.max(Math.abs(e.screenX-c.screenX),Math.abs(e.screenY-c.screenY));if(c.element&&!c.dragging&&10<l){if(u.fire("dragstart",{target:c.element}).isDefaultPrevented())return;c.dragging=!0,u.focus()}c.dragging&&(a=c,r={pageX:(s=f.calc(u,e)).pageX-a.relX,pageY:s.pageY+5},i=c.ghost,o=u.getBody(),i.parentNode!==o&&o.appendChild(i),t=c.ghost,n=r,l=c.width,a=c.height,s=c.maxX,o=c.maxY,r=i=0,t.style.left=n.pageX+"px",t.style.top=n.pageY+"px",n.pageX+l>s&&(i=n.pageX+l-s),n.pageY+a>o&&(r=n.pageY+a-o),t.style.width=l-i+"px",t.style.height=a-r+"px",d(e.clientX,e.clientY))}}function m(o,a){return function(e){var t,n,r,i;!o.dragging||(r=(n=a).selection.getNode(),i=o.element,r===i||n.dom.isChildOf(r,i)||p(r))||(t=function(e){e=e.cloneNode(!0);return e.removeAttribute("data-mce-selected"),e}(o.element),(e=a.fire("drop",{targetClone:t,clientX:e.clientX,clientY:e.clientY})).isDefaultPrevented()||(t=e.targetClone,a.undoManager.transact(function(){c(o.element),a.insertContent(a.dom.getOuterHTML(t)),a._selectionOverrides.hideFakeCaret()}))),v(o)}}function r(e){var t,n,r,i={},o=u.DOM,a=document,s=d(i,e),l=h(i,e),c=m(i,e);n=i,t=function(){v(n),n.dragging&&r.fire("dragend")},(r=e).on("mousedown",s),e.on("mousemove",l),e.on("mouseup",c),o.bind(a,"mousemove",l),o.bind(a,"mouseup",t),e.on("remove",function(){o.unbind(a,"mousemove",l),o.unbind(a,"mouseup",t)})}var p=e.isContentEditableFalse,g=e.isContentEditableTrue,v=function(e){e.dragging=!1,e.element=null,c(e.ghost)};return{init:function(e){var n;r(e),(n=e).on("drop",function(e){var t=void 0!==e.clientX?n.getDoc().elementFromPoint(e.clientX,e.clientY):null;(p(t)||p(n.dom.getContentEditableParent(t)))&&e.preventDefault()})}}}),e(Xe,[o,Z,U,C,J,je,We,Ge,x,S,F,I,O,u,i,Ke,$],function(j,q,W,G,Y,K,X,J,Z,e,Q,ee,te,ne,re,ie,oe){function ae(e,t){for(;t=e(t);)if(t.isVisible())return t;return t}var se=te.curry,le=Z.isContentEditableTrue,ce=Z.isContentEditableFalse,ue=Z.isElement,de=Y.isAfterContentEditableFalse,fe=Y.isBeforeContentEditableFalse,he=e.getSelectedNode;return function(l){function c(e){return l.dom.isBlock(e)}function o(e){e&&l.selection.setRng(e)}function n(){return l.selection.getRng()}function r(e,t){l.selection.scrollIntoView(e,t)}function s(e,t,n){return l.fire("ShowCaret",{target:t,direction:e,before:n}).isDefaultPrevented()?null:(r(t,-1===e),O.show(n,t))}function u(e){var t;return O.hide(),l.fire("BeforeObjectSelected",{target:e}).isDefaultPrevented()?null:((e=(t=e).ownerDocument.createRange()).selectNode(t),e)}function d(e,t){return t=Y.normalizeRange(e,D,t),-1==e?W.fromRangeStart(t):W.fromRangeEnd(t)}function i(e,t,n,r){var i,o,a;return!r.collapsed&&(i=he(r),ce(i))?s(e,i,-1==e):(a=r,o=G.isCaretContainerBlock(a.startContainer),n(i=d(e,r))?u(i.getNode(-1==e)):(i=t(i))?n(i)?s(e,i.getNode(-1==e),1==e):n(a=t(i))&&(n=i,t=a,!(t=Y.isInSameBlock(n,t))&&Z.isBr(n.getNode())||t)?s(e,a.getNode(-1==e),1==e):o?m(i.toRange()):null:o?r:null)}function a(e,t){var n,r;t.collapsed&&l.settings.forced_root_block&&(n=l.dom.getParent(t.startContainer,"PRE"))&&((1==e?I:P)(W.fromRangeStart(t))||(r=l.dom.create(l.settings.forced_root_block),(!j.ie||11<=j.ie)&&(r.innerHTML='<br data-mce-bogus="1">'),t=r,1==e?l.$(n).after(t):l.$(n).before(t),l.selection.select(t,!0),l.selection.collapse()))}function e(e,t,n,r){return(n=i(e,t,n,r))?n:(n=a(e,r))||null}function t(e,t,n){return(t=function(e,t,n){var r=he(n),i=d(e,n),o=t(D,X.isAboveLine(1),i),n=ne.filter(o,X.isLine(1)),t=ne.last(i.getClientRects());if(fe(i)&&(r=i.getNode()),de(i)&&(r=i.getNode(!0)),!t)return null;if(o=t.left,(i=J.findClosestClientRect(n,o))&&ce(i.node))return t=Math.abs(o-i.left),n=Math.abs(o-i.right),s(e,i.node,t<n);if(r){r=X.positionsUntil(e,D,X.isAboveLine(1),r);return(i=J.findClosestClientRect(ne.filter(r,X.isLine(1)),o))?m(i.position.toRange()):(i=ne.last(ne.filter(r,X.isLine(0))))?m(i.position.toRange()):void 0}}(e,t,n))?t:(t=a(e,n))||null}function f(e){(e=F(e)).attr("data-mce-caret")&&(O.hide(),e.removeAttr("data-mce-caret"),e.removeAttr("data-mce-bogus"),e.removeAttr("style"),o(n()),r(e[0]))}function h(e){return e=Y.normalizeRange(1,D,e),e=W.fromRangeStart(e),ce(e.getNode())?s(1,e.getNode(),!e.isAtEnd()):ce(e.getNode(!0))?s(1,e.getNode(!0),!1):(e=l.dom.getParent(e.getNode(),te.or(ce,le)),ce(e)?s(1,e,!1):(O.hide(),null))}function m(e){return e&&e.collapsed?h(e)||e:e}function p(e){var t,n,r,i;return ce(e)?(ce(e.previousSibling)&&(r=e.previousSibling),(t=!(n=P(W.before(e)))?I(W.after(e)):t)&&ue(t.getNode())&&(i=t.getNode()),G.remove(e.previousSibling),G.remove(e.nextSibling),l.dom.remove(e),x(),l.dom.isEmpty(l.getBody())?(l.setContent(""),void l.focus()):r?W.after(r).toRange():i?W.before(i).toRange():n?n.toRange():t?t.toRange():null):null}function g(e){var t=l.schema.getTextBlockElements();return e.nodeName in t}function v(e){return l.dom.isEmpty(e)}function y(e,t,n){var r,i,o=l.dom,a=o.getParent(t.getNode(),o.isBlock),s=o.getParent(n.getNode(),o.isBlock);if(-1===e){if(i=n.getNode(!0),de(n)&&c(i))return g(a)?(v(a)&&o.remove(a),W.after(i).toRange()):p(n.getNode(!0))}else if(i=t.getNode(),fe(t)&&c(i))return g(s)?(v(s)&&o.remove(s),W.before(i).toRange()):p(t.getNode());if(a===s||!g(a)||!g(s))return null;for(;r=a.firstChild;)s.appendChild(r);return l.dom.remove(a),n.toRange()}function b(e,t,n,r){var i;return!r.collapsed&&(i=he(r),ce(i))?m(p(i)):n(i=d(e,r))&&G.isCaretContainerBlock(r.startContainer)?(n=-1==e?M.prev(i):M.next(i))?m(n.toRange()):r:t(i)?m(p(i.getNode(-1==e))):t(t=-1==e?M.prev(i):M.next(i))?-1===e?y(e,i,t):y(e,t,i):void 0}function w(e){var t,n,r,i,o=l.$,a=l.dom;if(!e)return x(),null;if(e.collapsed){if(x(),i=e,!G.isCaretContainer(i.startContainer)&&!G.isCaretContainer(i.endContainer)){if(r=d(1,e),ce(r.getNode()))return s(1,r.getNode(),!r.isAtEnd());if(ce(r.getNode(!0)))return s(1,r.getNode(!0),!1)}return null}return n=e.startContainer,i=e.startOffset,r=e.endOffset,3==n.nodeType&&0==i&&ce(n.parentNode)&&(n=n.parentNode,i=a.nodeIndex(n),n=n.parentNode),1!=n.nodeType?(x(),null):(r==i+1&&(t=n.childNodes[i]),ce(t)?(n=r=t.cloneNode(!0),(i=l.fire("ObjectSelected",{target:t,targetClone:n})).isDefaultPrevented()?(x(),null):(n=i.targetClone,0===(i=o("#"+B)).length&&(i=o('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",B)).appendTo(l.getBody()),e=l.dom.createRng(),n===r&&j.ie?(i.empty().append(oe.ZWSP).append(n).append(oe.ZWSP),e.setStart(i[0].firstChild,0),e.setEnd(i[0].lastChild,1)):(i.empty().append(" ").append(n).append(" "),e.setStart(i[0].firstChild,1),e.setEnd(i[0].lastChild,0)),i.css({top:a.getPos(t,l.getBody()).y}),i[0].focus(),(i=l.selection.getSel()).removeAllRanges(),i.addRange(e),l.$("*[data-mce-selected]").removeAttr("data-mce-selected"),t.setAttribute("data-mce-selected",1),$=t,e)):(x(),null))}function x(){$&&($.removeAttribute("data-mce-selected"),l.$("#"+B).remove(),$=null)}var $,C,S,k,E,A,T,N,_,R,D=l.getBody(),M=new q(D),I=se(ae,M.next),P=se(ae,M.prev),O=new K(l.getBody(),c),B="sel-"+l.dom.uniqueId(),F=l.$;return j.ceFalse&&(E=se(e,1,I,fe),A=se(e,-1,P,de),T=se(b,1,fe,de),N=se(b,-1,de,fe),_=se(t,-1,X.upUntil),R=se(t,1,X.downUntil),l.on("mouseup",function(){var e=n();e.collapsed&&o(h(e))}),l.on("click",function(e){var t=U(e.target);t&&ce(t)&&(e.preventDefault(),l.focus())}),k=!1,(S=l).on("touchstart",function(){k=!1}),S.on("touchmove",function(){k=!0}),S.on("touchend",function(e){var t=U(e.target);ce(t)?k||(e.preventDefault(),w(u(t))):x()}),l.on("mousedown",function(e){var t,n,r,i;(t=U(e.target))?ce(t)?(e.preventDefault(),w(u(t))):(x(),n=e.clientX,r=e.clientY,!(i=l.selection.getRng()).collapsed&&ne.reduce(i.getClientRects(),function(e,t){return e||Q.containsXY(t,n,r)},!1)||l.selection.placeCaretAt(e.clientX,e.clientY)):(x(),O.hide(),(i=J.closestCaret(D,e.clientX,e.clientY))&&(V(e.target,i.node)||(e.preventDefault(),l.getBody().focus(),o(s(1,i.node,i.before)))))}),l.on("keydown",function(e){if(!ee.modifierPressed(e))switch(e.keyCode){case ee.RIGHT:L(e,E);break;case ee.DOWN:L(e,R);break;case ee.LEFT:L(e,A);break;case ee.UP:L(e,_);break;case ee.DELETE:L(e,T);break;case ee.BACKSPACE:L(e,N);break;default:ce(l.selection.getNode())&&e.preventDefault()}}),l.on("keyup compositionstart",function(e){z(e),function(e){var t;switch(e.keyCode){case ee.DELETE:t=H();break;case ee.BACKSPACE:t=H()}t&&e.preventDefault()}(e)},!0),l.on("cut",function(){var e=l.selection.getNode();ce(e)&&re.setEditorTimeout(l,function(){o(m(p(e)))})}),l.on("getSelectionRange",function(e){var t=e.range;$&&($.parentNode?((t=t.cloneRange()).selectNode($),e.range=t):$=null)}),l.on("setSelectionRange",function(e){var t=w(e.range);t&&(e.range=t)}),l.on("focus",function(){re.setEditorTimeout(l,function(){l.selection.setRng(m(l.selection.getRng()))},0)}),l.on("copy",function(e){var t,n=e.clipboardData;e.isDefaultPrevented()||!e.clipboardData||j.ie||(t=(t=l.dom.get(B))&&t.getElementsByTagName("*")[0])&&(e.preventDefault(),n.clearData(),n.setData("text/html",t.outerHTML),n.setData("text/plain",t.outerText))}),ie.init(l),C=l.contentStyles,S=".mce-content-body",C.push(O.getCss()),C.push(S+" .mce-offscreen-selection {position: absolute;left: -9999999999px;}"+S+" *[contentEditable=false] {cursor: default;}"+S+" *[contentEditable=true] {cursor: text;}")),{showBlockCaretContainer:f,hideFakeCaret:function(){O.hide()},destroy:function(){O.destroy(),$=null}};function L(e,t){t=t(n());t&&!e.isDefaultPrevented()&&(e.preventDefault(),o(t))}function U(e){for(var t=l.getBody();e&&e!=t;){if(le(e)||ce(e))return e;e=e.parentNode}return null}function H(){var e,t=U(l.selection.getNode());le(t)&&c(t)&&l.dom.isEmpty(t)&&(e=l.dom.create("br",{"data-mce-bogus":"1"}),l.$(t).empty().append(e),l.selection.setRng(W.before(e).toRange()))}function z(e){var t=F("*[data-mce-caret]")[0];return t&&("compositionstart"==e.type?(e.preventDefault(),e.stopPropagation(),void f(t)):void("&nbsp;"!=t.innerHTML&&f(t)))}function V(e,t){var n=l.dom.getParent(e,l.dom.isBlock),e=l.dom.getParent(t,l.dom.isBlock);return n&&(t=n,e=e,!(l.dom.getParent(t,l.dom.isBlock)===l.dom.getParent(e,l.dom.isBlock)))&&function(e){var t=new q(e);if(!e.firstChild)return!1;e=W.before(e.firstChild),e=t.next(e);return e&&!fe(e)&&!de(e)}(n)}}}),e(Je,[],function(){var n=0;return{uuid:function(e){return e+n+++("s"+(new Date).getTime().toString(36)+t()+t()+t());function t(){return Math.round(4294967295*Math.random()).toString(36)}}}}),e(Ze,[y,f,w,k,E,D,R,V,G,Y,K,X,te,ne,b,a,Ae,De,A,N,Ie,o,d,i,Pe,Oe,Be,Ve,Xe,Je],function(o,s,l,a,c,u,d,f,h,m,p,g,v,y,b,e,w,x,$,C,S,k,E,A,t,n,T,N,_,i){function r(e,t,n){var r=this,i=r.documentBaseUrl=n.documentBaseURL,o=n.baseURI,a=n.defaultSettings;t=I({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:i,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:r.convertURL,url_converter_scope:r,ie7_compat:!0},a,t),a&&a.external_plugins&&t.external_plugins&&(t.external_plugins=I({},a.external_plugins,t.external_plugins)),r.settings=t,l.language=t.language||"en",l.languageLoad=t.language_load,l.baseURL=n.baseURL,r.id=t.id=e,r.setDirty(!1),r.plugins={},r.documentBaseURI=new y(t.document_base_url||i,{base_uri:o}),r.baseURI=o,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new T(r),r.loadedCSS={},r.editorCommands=new v(r),t.target&&(r.targetElm=t.target),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.settings.content_editable=r.inline,t.cache_suffix&&(k.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(k.overrideViewPort=!1),n.fire("SetupEditor",r),r.execCallback("setup",r),r.$=s.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})}var R=o.DOM,D=l.ThemeManager,M=l.PluginManager,I=E.extend,P=E.each,O=E.explode,B=E.inArray,F=E.trim,L=E.resolve,U=e.Event,H=k.gecko,z=k.ie;return r.prototype={render:function(){var e,t,n,r=this,i=r.settings,o=r.id,a=r.suffix;U.domLoaded?r.getElement()&&k.contentEditable&&(i.inline?r.inline=!0:(r.orgVisibility=r.getElement().style.visibility,r.getElement().style.visibility="hidden"),(e=r.getElement().form||R.getParent(o,"form"))&&(r.formElement=e,i.hidden_input&&!/TEXTAREA|INPUT/i.test(r.getElement().nodeName)&&(R.insertAfter(R.create("input",{type:"hidden",name:o}),o),r.hasHiddenInput=!0),r.formEventDelegate=function(e){r.fire(e.type,e)},R.bind(e,"submit reset",r.formEventDelegate),r.on("reset",function(){r.setContent(r.startContent,{format:"raw"})}),!i.submit_patch||e.submit.nodeType||e.submit.length||e._mceOldSubmit||(e._mceOldSubmit=e.submit,e.submit=function(){return r.editorManager.triggerSave(),r.setDirty(!1),e._mceOldSubmit(e)})),r.windowManager=new w(r),r.notificationManager=new x(r),"xml"==i.encoding&&r.on("GetContent",function(e){e.save&&(e.content=R.encode(e.content))}),i.add_form_submit_trigger&&r.on("submit",function(){r.initialized&&r.save()}),i.add_unload_trigger&&(r._beforeUnload=function(){!r.initialized||r.destroyed||r.isHidden()||r.save({format:"raw",no_events:!0,set_dirty:!1})},r.editorManager.on("BeforeUnload",r._beforeUnload)),r.editorManager.add(r),n=b.ScriptLoader,i.language&&"en"!=i.language&&!i.language_url&&(i.language_url=r.editorManager.baseURL+"/langs/"+i.language+".js"),i.language_url&&n.add(i.language_url),i.theme&&"function"!=typeof i.theme&&"-"!=i.theme.charAt(0)&&!D.urls[i.theme]&&(t=(t=i.theme_url)?r.documentBaseURI.toAbsolute(t):"themes/"+i.theme+"/theme"+a+".js",D.load(i.theme,t)),E.isArray(i.plugins)&&(i.plugins=i.plugins.join(" ")),P(i.external_plugins,function(e,t){M.load(t,e),i.plugins+=" "+t}),P(i.plugins.split(/[ ,]/),function(e){var t;(e=F(e))&&!M.urls[e]&&("-"==e.charAt(0)?(e=e.substr(1,e.length),t=M.dependencies(e),P(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+a+".js"};e=M.createUrl(t,e),M.load(e.resource,e)})):M.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+a+".js"}))}),n.loadQueue(function(){r.removed||r.init()})):R.bind(window,"ready",function e(){R.unbind(window,"ready",e),r.render()})},init:function(){var e,t,n,r,i,o,a,s=this,l=s.settings,c=s.getElement(),u=[];if(s.rtl=l.rtl_ui||s.editorManager.i18n.rtl,s.editorManager.i18n.setCode(l.language),l.aria_label=l.aria_label||R.getAttrib(c,"aria-label",s.getLang("aria.rich_text_area")),s.fire("ScriptsLoaded"),l.theme&&("function"!=typeof l.theme?(l.theme=l.theme.replace(/-/,""),n=D.get(l.theme),s.theme=new n(s,D.urls[l.theme]),s.theme.init&&s.theme.init(s,D.urls[l.theme]||s.documentBaseUrl.replace(/\/$/,""),s.$)):s.theme=l.theme),P(l.plugins.replace(/\-/g,"").split(/[ ,]/),function t(e){var n=M.get(e),r=M.urls[e]||s.documentBaseUrl.replace(/\/$/,"");e=F(e),n&&-1===B(u,e)&&(P(M.dependencies(e),function(e){t(e)}),s.plugins[e]||(n=new n(s,r,s.$),(s.plugins[e]=n).init&&(n.init(s,r),u.push(e))))}),l.render_ui&&s.theme&&(s.orgDisplay=c.style.display,"function"!=typeof l.theme?(i=l.width||c.style.width||c.offsetWidth,e=l.height||c.style.height||c.offsetHeight,f=l.min_height||100,(o=/^[0-9\.]+(|px)$/i).test(""+i)&&(i=Math.max(parseInt(i,10),100)),o.test(""+e)&&(e=Math.max(parseInt(e,10),f)),o=s.theme.renderUI({targetNode:c,width:i,height:e,deltaWidth:l.delta_width,deltaHeight:l.delta_height}),l.content_editable||(e=(o.iframeHeight||e)+("number"==typeof e?o.deltaHeight||0:""))<f&&(e=f)):((o=l.theme(s,c)).editorContainer.nodeType&&(o.editorContainer=o.editorContainer.id=o.editorContainer.id||s.id+"_parent"),o.iframeContainer.nodeType&&(o.iframeContainer=o.iframeContainer.id=o.iframeContainer.id||s.id+"_iframecontainer"),e=o.iframeHeight||c.offsetHeight),s.editorContainer=o.editorContainer),l.content_css&&P(O(l.content_css),function(e){s.contentCSS.push(s.documentBaseURI.toAbsolute(e))}),l.content_style&&s.contentStyles.push(l.content_style),l.content_editable)return c=t=o=null,s.initContentBody();if(s.iframeHTML=l.doctype+"<html><head>",l.document_base_url!=s.documentBaseUrl&&(s.iframeHTML+='<base href="'+s.documentBaseURI.getURI()+'" />'),!k.caretAfter&&l.ie7_compat&&(s.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),s.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',!/#$/.test(document.location.href))for(a=0;a<s.contentCSS.length;a++){var d=s.contentCSS[a];s.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+E._addCacheSuffix(d)+'" />',s.loadedCSS[d]=!0}-1!=(i=l.body_id||"tinymce").indexOf("=")&&(i=(i=s.getParam("body_id","","hash"))[s.id]||i),-1!=(f=l.body_class||"").indexOf("=")&&(f=(f=s.getParam("body_class","","hash"))[s.id]||""),l.content_security_policy&&(s.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+l.content_security_policy+'" />'),s.iframeHTML+='</head><body id="'+i+'" class="mce-content-body '+f+'" data-id="'+s.id+'"><br></body></html>';var f='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+s.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()';document.domain!=location.hostname&&k.ie&&k.ie<12&&(r=f);var h=R.create("iframe",{id:s.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:s.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:e,display:"block"}});if(h.onload=function(){h.onload=null,s.fire("load")},R.setAttrib(h,"src",r||'javascript:""'),s.contentAreaContainer=o.iframeContainer,s.iframeElement=h,t=R.add(o.iframeContainer,h),z)try{s.getDoc()}catch(e){t.src=r=f}o.editorContainer&&(R.get(o.editorContainer).style.display=s.orgDisplay,s.hidden=R.isHidden(o.editorContainer)),s.getElement().style.display="none",R.setAttrib(s.id,"aria-hidden",!0),r||s.initContentBody(),c=t=o=null},initContentBody:function(e){var t,s=this,n=s.settings,r=s.getElement(),i=s.getDoc();n.inline||(s.getElement().style.visibility=s.orgVisibility),e||n.content_editable||(i.open(),i.write(s.iframeHTML),i.close()),n.content_editable&&(s.on("remove",function(){var e=this.getBody();R.removeClass(e,"mce-content-body"),R.removeClass(e,"mce-edit-focus"),R.setAttrib(e,"contentEditable",null)}),R.addClass(r,"mce-content-body"),s.contentDocument=i=n.content_document||document,s.contentWindow=n.content_window||window,s.bodyElement=r,n.content_document=n.content_window=null,n.root_name=r.nodeName.toLowerCase()),(e=s.getBody()).disabled=!0,s.readonly=n.readonly,s.readonly||(s.inline&&"static"==R.getStyle(e,"position",!0)&&(e.style.position="relative"),e.contentEditable=s.getParam("content_editable_state",!0)),e.disabled=!1,s.editorUpload=new N(s),s.schema=new $(n),s.dom=new o(i,{keep_values:!0,url_converter:s.convertURL,url_converter_scope:s,hex_colors:n.force_hex_style_colors,class_filter:n.class_filter,update_styles:!0,root_element:s.inline?s.getBody():null,collect:n.content_editable,schema:s.schema,onSetAttrib:function(e){s.fire("SetAttrib",e)}}),s.parser=new C(n,s.schema),s.parser.addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,r,i,o=e.length,a=s.dom;o--;)if(r=(n=e[o]).attr(t),i="data-mce-"+t,!n.attributes.map[i]){if(0===r.indexOf("data:")||0===r.indexOf("blob:"))continue;"style"===t?((r=a.serializeStyle(a.parseStyle(r),n.name)).length||(r=null),n.attr(i,r),n.attr(t,r)):"tabindex"===t?(n.attr(i,r),n.attr(t,null)):n.attr(i,s.convertURL(r,t,n.name))}}),s.parser.addNodeFilter("script",function(e){for(var t,n,r=e.length;r--;)0!==(n=(t=e[r]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)}),s.parser.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)(t=e[n]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),s.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,r=s.schema.getNonEmptyElements();n--;)(t=e[n]).isEmpty(r)&&(t.append(new c("br",1)).shortEnded=!0)}),s.serializer=new u(n,s),s.selection=new f(s.dom,s.getWin(),s.serializer,s),s.formatter=new h(s),s.undoManager=new m(s),s.forceBlocks=new g(s),s.enterKey=new p(s),s._nodeChangeDispatcher=new a(s),s._selectionOverrides=new _(s),s.fire("PreInit"),n.browser_spellcheck||n.gecko_spellcheck||(i.body.spellcheck=!1,R.setAttrib(e,"spellcheck","false")),s.quirks=new S(s),s.fire("PostRender"),n.directionality&&(e.dir=n.directionality),n.nowrap&&(e.style.whiteSpace="nowrap"),n.protect&&s.on("BeforeSetContent",function(t){P(n.protect,function(e){t.content=t.content.replace(e,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),s.on("SetContent",function(){s.addVisual(s.getBody())}),n.padd_empty_editor&&s.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),s.load({initial:!0,format:"html"}),s.startContent=s.getContent({format:"raw"}),s.initialized=!0,s.bindPendingEventDelegates(),s.fire("init"),s.focus(!0),s.nodeChanged({initial:!0}),s.execCallback("init_instance_callback",s),s.on("compositionstart compositionend",function(e){s.composing="compositionstart"===e.type}),0<s.contentStyles.length&&(t="",P(s.contentStyles,function(e){t+=e+"\r\n"}),s.dom.addStyle(t)),P(s.contentCSS,function(e){s.loadedCSS[e]||(s.dom.loadCSS(e),s.loadedCSS[e]=!0)}),n.auto_focus&&A.setEditorTimeout(s,function(){var e=!0===n.auto_focus?s:s.editorManager.get(n.auto_focus);e.destroyed||e.focus()},100),r=i=e=null},focus:function(e){var t,n,r,i=this,o=i.selection,a=i.settings.content_editable,s=i.getDoc(),l=i.getBody();if(!e){if((t=o.getRng()).item&&(n=t.item(0)),i.quirks.refreshContentEditable(),r=o.getNode(),e=i.dom.getParent(r,function(e){return"true"===i.dom.getContentEditable(e)}),i.$.contains(l,e))return e.focus(),o.normalize(),void i.editorManager.setActive(i);if(a||(k.opera||i.getBody().focus(),i.getWin().focus()),H||a){if(l.setActive)try{l.setActive()}catch(e){l.focus()}else l.focus();a&&o.normalize()}n&&n.ownerDocument==s&&((t=s.body.createControlRange()).addElement(n),t.select())}i.editorManager.setActive(i)},execCallback:function(e){var t,n=this.settings[e];if(n)return this.callbackLookup&&(t=this.callbackLookup[e])&&(n=t.func,t=t.scope),"string"==typeof n&&(t=(t=n.replace(/\.\w+$/,""))?L(t):0,n=L(n),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[e]={func:n,scope:t}),n.apply(t||this,Array.prototype.slice.call(arguments,1))},translate:function(e){var n=this.settings.language||"en",r=this.editorManager.i18n;return e?(e=r.data[n+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,t){return r.data[n+"."+t]||"{#"+t+"}"}),this.editorManager.translate(e)):""},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(t!==ge?t:"{#"+e+"}")},getParam:function(e,t,n){var r,t=e in this.settings?this.settings[e]:t;return"hash"===n?(r={},"string"==typeof t?P(0<t.indexOf("=")?t.split(/[;,](?![^=;,]*(?:[;,]|$))/):t.split(","),function(e){1<(e=e.split("=")).length?r[F(e[0])]=F(e[1]):r[F(e[0])]=F(e)}):r=t,r):t},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return r.dom.is(e,n)}),r.contextToolbars.push({id:i.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(R.show(this.getContainer()),R.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(z&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(R.hide(e.getContainer()),R.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this.getElement();return n?((e=e||{}).load=!0,t=this.setContent(n.value!==ge?n.value:n.innerHTML,e),e.element=n,e.no_events||this.fire("LoadContent",e),e.element=n=null,t):void 0},save:function(e){var t,n,r=this,i=r.getElement();if(i&&r.initialized)return(e=e||{}).save=!0,e.element=i,e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"==e.format&&r.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(i.nodeName)?i.value=t:(r.inline||(i.innerHTML=t),(n=R.getParent(r.id,"form"))&&P(n.elements,function(e){return e.name==r.id?(e.value=t,!1):void 0})),e.element=i=null,!1!==e.set_dirty&&r.setDirty(!1),t},setContent:function(e,t){var n,r,i=this,o=i.getBody();return(t=t||{}).format=t.format||"html",t.set=!0,t.content=e,t.no_events||i.fire("BeforeSetContent",t),0===(e=t.content).length||/^\s+$/.test(e)?(r=z&&z<11?"":'<br data-mce-bogus="1">',"TABLE"==o.nodeName?e="<tr><td>"+r+"</td></tr>":/^(UL|OL)$/.test(o.nodeName)&&(e="<li>"+r+"</li>"),(n=i.settings.forced_root_block)&&i.schema.isValidChild(o.nodeName.toLowerCase(),n.toLowerCase())?(e=r,e=i.dom.createHTML(n,i.settings.forced_root_block_attrs,e)):z||e||(e='<br data-mce-bogus="1">'),i.dom.setHTML(o,e),i.fire("SetContent",t)):("raw"!==t.format&&(e=new d({validate:i.validate},i.schema).serialize(i.parser.parse(e,{isRootContent:!0}))),t.content=F(e),i.dom.setHTML(o,t.content),t.no_events||i.fire("SetContent",t)),t.content},getContent:function(e){var t=this.getBody();return(e=e||{}).format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||this.fire("BeforeGetContent",e),t="raw"==e.format?this.serializer.getTrimmedContent():"text"==e.format?t.innerText||t.textContent:this.serializer.serialize(t,e),"text"!=e.format?e.content=F(t):e.content=t,e.no_events||this.fire("GetContent",e),e.content},insertContent:function(e,t){t&&(e=I({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!=t&&this.fire("dirty")},setMode:function(e){n.setMode(this,e)},getContainer:function(){return this.container||(this.container=R.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=R.get(this.id)),this.targetElm},getWin:function(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow},getDoc:function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this.settings;return r.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?this.documentBaseURI.toRelative(e):this.documentBaseURI.toAbsolute(e,r.remove_script_host)},addVisual:function(e){var n,r=this,i=r.settings,o=r.dom;e=e||r.getBody(),r.hasVisual===ge&&(r.hasVisual=i.visual),P(o.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return n=i.visual_table_class||"mce-item-table",void((t=o.getAttrib(e,"border"))&&"0"!=t||!r.hasVisual?o.removeClass(e,n):o.addClass(e,n));case"A":return void(o.getAttrib(e,"href",!1)||(t=o.getAttrib(e,"name")||e.id,n=i.visual_anchor_class||"mce-item-anchor",t&&r.hasVisual?o.addClass(e,n):o.removeClass(e,n)))}}),r.fire("VisualAid",{element:e,hasVisual:r.hasVisual})},remove:function(){var e=this;e.removed||(e.save(),e.removed=1,e.unbindAllNativeEvents(),e.hasHiddenInput&&R.remove(e.getElement().nextSibling),e.inline||(z&&z<10&&e.getDoc().execCommand("SelectAll",!1,null),R.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null),e.fire("remove"),e.editorManager.remove(e),R.remove(e.getContainer()),e._selectionOverrides.destroy(),e.editorUpload.destroy(),e.destroy())},destroy:function(e){var t=this;t.destroyed||(e||t.removed?(e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),t.selection.destroy(),t.dom.destroy()),(e=t.formElement)&&(e._mceOldSubmit&&(e.submit=e._mceOldSubmit,e._mceOldSubmit=null),R.unbind(e,"submit reset",t.formEventDelegate)),t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null),t.destroyed=1):t.remove())},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},I(r.prototype,t),r}),e(Qe,[],function(){var i={},r="en";return{setCode:function(e){e&&(r=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return r},rtl:!1,add:function(e,t){var n,r=i[e];for(n in r||(i[e]=r={}),t)r[n]=t[n];this.setCode(e)},translate:function(e){var n,t=i[r];return t=t||{},void 0===e?e:"string"!=typeof e&&e.raw?e.raw:(e.push&&(n=e.slice(1),e=(t[e[0]]||e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return n[t]})),(t[e]||e).replace(/{context:\w+}$/,""))},data:i}}),e(et,[y,i,o],function(e,t,r){function i(o){function n(){try{return document.activeElement}catch(e){return document.body}}function a(e){return u.getParent(e,i.isEditorUIElement)}o.on("AddEditor",function(e){var i=e.editor;i.on("init",function(){(i.inline||r.ie)&&("onbeforedeactivate"in document&&r.ie<9?i.dom.bind(i.getBody(),"beforedeactivate",function(e){if(e.target==i.getBody())try{i.lastRng=i.selection.getRng()}catch(e){}}):i.on("nodechange mouseup keyup",function(e){var t=n();"nodechange"==e.type&&e.selectionChange||(t&&t.id==i.id+"_ifr"&&(t=i.getBody()),i.dom.isChildOf(t,i.getBody())&&(i.lastRng=i.selection.getRng()))}),r.webkit&&!s&&(s=function(){var e=o.activeEditor;e&&e.selection&&((e=e.selection.getRng())&&!e.collapsed&&(i.lastRng=e))},u.bind(document,"selectionchange",s)))}),i.on("setcontent",function(){i.lastRng=null}),i.on("mousedown",function(){i.selection.lastFocusBookmark=null}),i.on("focusin",function(){var e,t,n,r=o.focusedEditor;i.selection.lastFocusBookmark&&((t=(e=i).selection.lastFocusBookmark).startContainer?((n=e.getDoc().createRange()).setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset)):n=t,n=n,i.selection.lastFocusBookmark=null,i.selection.setRng(n)),r!=i&&(r&&r.fire("blur",{focusedEditor:i}),o.setActive(i),(o.focusedEditor=i).fire("focus",{blurredEditor:r}),i.focus(!0)),i.lastRng=null}),i.on("focusout",function(){t.setEditorTimeout(i,function(){var e=o.focusedEditor;a(n())||e!=i||(i.fire("blur",{focusedEditor:null}),o.focusedEditor=null,i.selection&&(i.selection.lastFocusBookmark=null))})}),l||(l=function(e){var t,n=o.activeEditor,r=e.target;n&&r.ownerDocument==document&&(n.selection&&r!=n.getBody()&&(n.selection.lastFocusBookmark=(t=n.dom,(e=n.lastRng)&&e.startContainer?t.isChildOf(e.startContainer,t.getRoot())&&t.isChildOf(e.endContainer,t.getRoot())?{startContainer:e.startContainer,startOffset:e.startOffset,endContainer:e.endContainer,endOffset:e.endOffset}:void 0:e)),r==document.body||a(r)||o.focusedEditor!=n||(n.fire("blur",{focusedEditor:null}),o.focusedEditor=null))},u.bind(document,"focusin",l)),i.inline&&!c&&(c=function(e){var t=o.activeEditor,n=t.dom;t.inline&&n&&!n.isChildOf(e.target,t.getBody())&&((e=t.selection.getRng()).collapsed||(t.lastRng=e))},u.bind(document,"mouseup",c))}),o.on("RemoveEditor",function(e){o.focusedEditor==e.editor&&(o.focusedEditor=null),o.activeEditor||(u.unbind(document,"selectionchange",s),u.unbind(document,"focusin",l),u.unbind(document,"mouseup",c),s=l=c=null)})}var s,l,c,u=e.DOM;return i.isEditorUIElement=function(e){return-1!==e.className.toString().indexOf("mce-")},i}),e(tt,[Ze,f,y,ne,o,d,n,ae,Qe,et],function(h,m,e,l,t,p,r,n,i,c){function o(t){b(d.editors,function(e){"scroll"===t.type?e.fire("ScrollWindow",t):e.fire("ResizeWindow",t)})}function a(e,t){t!==u&&(t?m(window).on("resize scroll",o):m(window).off("resize scroll",o),u=t)}function g(e){var t,n=d.editors;delete n[e.id];for(var r=0;r<n.length;r++)if(n[r]==e){n.splice(r,1),t=!0;break}return d.activeEditor==e&&(d.activeEditor=n[0]),d.focusedEditor==e&&(d.focusedEditor=null),t}var s,v=e.DOM,y=p.explode,b=p.each,w=p.extend,x=0,u=!1,d={$:m,majorVersion:"4",minorVersion:"4.3",releaseDate:"2016-09-01",editors:[],i18n:i,activeEditor:null,setup:function(){var e,t,n,r="",i=l.getDocumentBaseUrl(document.location);if(/^[^:]+:\/\/\/?[^\/]+\//.test(i)&&(i=i.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(i)||(i+="/")),t=window.tinymce||window.tinyMCEPreInit)e=t.base||t.baseURL,r=t.suffix;else{for(var o=document.getElementsByTagName("script"),a=0;a<o.length;a++){var s=(n=o[a].src).substring(n.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(n)){-1!=s.indexOf(".min")&&(r=".min"),e=n.substring(0,n.lastIndexOf("/"));break}}!e&&document.currentScript&&(-1!=(n=document.currentScript.src).indexOf(".min")&&(r=".min"),e=n.substring(0,n.lastIndexOf("/")))}this.baseURL=new l(i).toAbsolute(e),this.documentBaseURL=i,this.baseURI=new l(this.baseURL),this.suffix=r,this.focusManager=new c(this)},overrideDefaults:function(e){var t=e.base_url;t&&(this.baseURL=new l(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new l(this.baseURL)),t=e.suffix,e.suffix&&(this.suffix=t),this.defaultSettings=e},init:function(s){function l(e){var t=e.id;return t||(t=(t=e.name)&&!v.get(t)?e.name:v.uniqueId(),e.setAttribute("id",t)),t}function c(e,t){return t.constructor===RegExp?t.test(e.className):v.hasClass(e,t)}var n,u=this,d=p.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," "),f=function(e){n=e};return u.settings=s,v.bind(window,"ready",function e(){function r(e,t,n){t=new h(e,t,u),a.push(t),t.on("init",function(){++o===i.length&&f(a)}),t.targetElm=t.targetElm||n,t.render()}var i,o=0,a=[];return v.unbind(window,"ready",e),function(e){(e=s[e])&&e.apply(u,Array.prototype.slice.call(arguments,2))}("onpageload"),i=m.unique(function(t){var e,n=[];if(t.types)return b(t.types,function(e){n=n.concat(v.select(e.selector))}),n;if(t.selector)return v.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":0<(e=t.elements||"").length&&b(y(e),function(t){var e;(e=v.get(t))?n.push(e):b(document.forms,function(e){b(e.elements,function(e){e.name===t&&(t="mce_editor_"+x++,v.setAttrib(e,"id",t),n.push(e))})})});break;case"textareas":case"specific_textareas":b(v.select("textarea"),function(e){t.editor_deselector&&c(e,t.editor_deselector)||t.editor_selector&&!c(e,t.editor_selector)||n.push(e)})}return n}(s)),s.types?void b(s.types,function(t){p.each(i,function(e){return!v.is(e,t.selector)||(r(l(e),w({},s,t),e),!1)})}):(p.each(i,function(e){(e=u.get(e.id))&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(g(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null)}),i=p.grep(i,function(e){return!u.get(e.id)}),void b(i,function(e){var t,n;n=e,s.inline&&n.tagName.toLowerCase()in d?(t="Could not initialize inline editor on invalid inline target element",n=e,window.console&&!window.test&&window.console.log(t,n)):r(l(e),s,e)}))}),new r(function(t){n?t(n):f=function(e){t(e)}})},get:function(e){return arguments.length?e in this.editors?this.editors[e]:null:this.editors},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),a(0,!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),s||(s=function(){t.fire("BeforeUnload")},v.bind(window,"beforeunload",s)),e},createEditor:function(e,t){return this.add(new h(e,t,this))},remove:function(e){var t,n,r=this,i=r.editors;if(e)return"string"==typeof e?(e=e.selector||e,void b(v.select(e),function(e){(n=i[e.id])&&r.remove(n)})):i[(n=e).id]?(g(n)&&r.fire("RemoveEditor",{editor:n}),i.length||v.unbind(window,"beforeunload",s),n.remove(),a(0,0<i.length),n):null;for(t=i.length-1;0<=t;t--)r.remove(i[t])},execCommand:function(e,t,n){var r=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new h(n,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?r.isHidden()?r.show():r.hide():this.execCommand("mceAddEditor",0,n),!0}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){b(this.editors,function(e){e.save()})},addI18n:function(e,t){i.add(e,t)},translate:function(e){return i.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!=e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}};return w(d,n),d.setup(),window.tinymce=window.tinyMCE=d}),e("tinymce/LegacyInput",[tt,d],function(e,t){var s=t.each,l=t.explode;e.on("AddEditor",function(e){var a=e.editor;a.on("preInit",function(){function n(n,e){s(e,function(e,t){e&&i.setStyle(n,t,e)}),i.rename(n,"span")}var t,r,i,o=a.settings;o.inline_styles&&(r=l(o.font_size_legacy_values),t={font:function(e,t){n(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:r[parseInt(t.size,10)-1]})},u:function(e,t){"html4"===a.settings.schema&&n(t,{textDecoration:"underline"})},strike:function(e,t){n(t,{textDecoration:"line-through"})}},a.on("PreProcess SetContent",function(e){i=a.dom,o.convert_fonts_to_spans&&s(i.select("font,u,strike",e.node),function(e){t[e.nodeName.toLowerCase()](i,e)})}))})})}),e(nt,[ae,d],function(e,i){var o={send:function(e){function t(){!e.async||4==n.readyState||1e4<r++?(e.success&&r<1e4&&200==n.status?e.success.call(e.success_scope,""+n.responseText,n,e):e.error&&e.error.call(e.error_scope,1e4<r?"TIMED_OUT":"GENERAL",n,e),n=null):setTimeout(t,10)}var n,r=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",o.fire("beforeInitialize",{settings:e}),n=new XMLHttpRequest){if(n.overrideMimeType&&n.overrideMimeType(e.content_type),n.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(n.withCredentials=!0),e.content_type&&n.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&i.each(e.requestheaders,function(e){n.setRequestHeader(e.key,e.value)}),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),(n=o.fire("beforeSend",{xhr:n,settings:e}).xhr).send(e.data),!e.async)return t();setTimeout(t,10)}}};return i.extend(o,e),o}),e(rt,[],function(){return{serialize:function e(t,n){var r,i,o,a;if(n=n||'"',null===t)return"null";if("string"==(o=typeof t))return i="\bb\tt\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(r=i.indexOf(t))+1?"\\"+i.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+n;if("object"!=o)return""+t;if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(r=0,i="[";r<t.length;r++)i+=(0<r?",":"")+e(t[r],n);return i+"]"}for(a in i="{",t)t.hasOwnProperty(a)&&(i+="function"!=typeof t[a]?(1<i.length?","+n:n)+a+n+":"+e(t[a],n):"");return i+"}"},parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(e){}}}}),e(it,[rt,nt,d],function(o,e,t){function n(e){this.settings=a({},e),this.count=0}var a=t.extend;return n.sendRPC=function(e){return(new n).send(e)},n.prototype={send:function(n){var r=n.error,i=n.success;(n=a(this.settings,n)).success=function(e,t){(e=void 0===(e=o.parse(e))?{error:"JSON Parse error."}:e).error?r.call(n.error_scope||n.scope,e.error,t):i.call(n.success_scope||n.scope,e.result)},n.error=function(e,t){r&&r.call(n.error_scope||n.scope,e,t)},n.data=o.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",e.send(n)}},n}),e(ot,[y],function(e){return{callbacks:{},count:0,send:function(t){var n=this,r=e.DOM,i=(t.count!==ge?t:n).count,o="tinymce_jsonp_"+i;n.callbacks[i]=function(e){r.remove(o),delete n.callbacks[i],t.callback(e)},r.add(r.doc.body,"script",{id:o,src:t.url,type:"text/javascript"}),n.count++}}}),e(at,[],function(){function o(){for(var e in r=[],s)r.push(e);t.length=r.length}function n(){var e,t="";if(c){for(var n in s)e=s[n],t+=(t?",":"")+n.length.toString(32)+","+n+","+e.length.toString(32)+","+e;a.setAttribute(l,t);try{a.save(l)}catch(e){}o()}}var t,a,s,r,l,c;try{if(window.localStorage)return localStorage}catch(e){}return l="tinymce",a=document.documentElement,(c=!!a.addBehavior)&&a.addBehavior("#default#userData"),t={key:function(e){return r[e]},getItem:function(e){return e in s?s[e]:null},setItem:function(e,t){s[e]=""+t,n()},removeItem:function(e){delete s[e],n()},clear:function(){s={},n()}},function(){function e(e){var t=e!==ge?r+e:n.indexOf(",",r);return-1===t||t>n.length?null:(e=n.substring(r,t),r=t+1,e)}var t,n,r=0;if(s={},c){a.load(l),n=a.getAttribute(l)||"";do{var i=e();if(null===i)break;if(null!==(t=e(parseInt(i,32)||0))){if(null===(i=e()))break;i=e(parseInt(i,32)||0),t&&(s[t]=i)}}while(null!==t);o()}}(),t}),e(st,[y,a,b,w,d,o],function(e,t,n,r,i,o){var a=window.tinymce;return a.DOM=e.DOM,a.ScriptLoader=n.ScriptLoader,a.PluginManager=r.PluginManager,a.ThemeManager=r.ThemeManager,a.dom=a.dom||{},a.dom.Event=t.Event,i.each(i,function(e,t){a[t]=e}),i.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){a[e]=o[e.substr(2).toLowerCase()]}),{}}),e(lt,[re,d],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,r=this.settings,i=r.firstControlClass,o=r.lastControlClass;e.each(function(e){e.classes.remove(i).remove(o).add(r.controlClass),e.visible()&&(t=t||e,n=e)}),t&&t.classes.add(i),n&&n.classes.add(o)},renderHtml:function(e){var t="";return this.applyClasses(e.items()),e.items().each(function(e){t+=e.renderHtml()}),t},recalc:function(){},postRender:function(){},isNative:function(){return!1}})}),e(ct,[lt],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),e(ut,[Ne],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",function(e){e.preventDefault()}),n.on("touchstart",function(e){n.fire("click",e),e.preventDefault()}),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e=this.getEl().firstChild;e&&((e=e.style).width=e.height="100%"),this._super()},renderHtml:function(){var e=this._id,t=this.classPrefix,n=this.state.get("icon"),r=this.state.get("text"),i="",o=this.settings.image;return o=o?(n="none"," style=\"background-image: url('"+(o="string"!=typeof o?window.getSelection?o[0]:o[1]:o)+"')\""):"",r&&(this.classes.add("btn-has-text"),i='<span class="'+t+'txt">'+this.encode(r)+"</span>"),n=this.settings.icon?t+"ico "+t+"i-"+n:"",'<div id="'+e+'" class="'+this.classes+'" tabindex="-1" aria-labelledby="'+e+'"><button role="presentation" type="button" tabindex="-1">'+(n?'<i class="'+n+'"'+o+"></i>":"")+i+"</button></div>"},bindStates:function(){function r(e){var t=n("span."+o,i.getEl());e?(t[0]||(n("button:first",i.getEl()).append('<span class="'+o+'"></span>'),t=n("span."+o,i.getEl())),t.html(i.encode(e))):t.remove(),i.classes.toggle("btn-has-text",!!e)}var i=this,n=i.$,o=i.classPrefix+"txt";return i.state.on("change:text",function(e){r(e.value)}),i.state.on("change:icon",function(e){var t=e.value,n=i.classPrefix,t=(i.settings.icon=t)?n+"ico "+n+"i-"+i.settings.icon:"",e=i.getEl().firstChild,n=e.getElementsByTagName("i")[0];t?(n&&n==e.firstChild||(n=document.createElement("i"),e.insertBefore(n,e.firstChild)),n.className=t):n&&e.removeChild(n),r(i.state.get("text"))}),i._super()}})}),e(dt,[ye],function(e){return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this._layout;return this.classes.add("btn-group"),this.preRender(),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"}})}),e(ft,[Ne],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'" unselectable="on" aria-labelledby="'+e+'-al" tabindex="-1"><i class="'+t+"ico "+t+'i-checkbox"></i><span id="'+e+'-al" class="'+t+'label">'+this.encode(this.state.get("text"))+"</span></div>"},bindStates:function(){function t(e){r.classes.toggle("checked",e),r.aria("checked",e)}var r=this;return r.state.on("change:text",function(e){r.getEl("al").firstChild.data=r.translate(e.value)}),r.state.on("change:checked change:value",function(e){r.fire("change"),t(e.value)}),r.state.on("change:icon",function(e){var t=e.value,n=r.classPrefix;if(void 0===t)return r.settings.icon;t=(r.settings.icon=t)?n+"ico "+n+"i-"+r.settings.icon:"";e=r.getEl().firstChild,n=e.getElementsByTagName("i")[0];t?(n&&n==e.firstChild||(n=document.createElement("i"),e.insertBefore(n,e.firstChild)),n.className=t):n&&e.removeChild(n)}),r.state.get("checked")&&t(!0),r._super()}})}),e(ht,[Ne,pe,ue,f],function(e,n,i,o){return e.extend({init:function(r){var i=this;i._super(r),r=i.settings,i.classes.add("combobox"),i.subinput=!0,i.ariaTarget="inp",r.menu=r.menu||r.values,r.menu&&(r.icon="caret"),i.on("click",function(e){var t=e.target,n=i.getEl();if(o.contains(n,t)||t==n)for(;t&&t!=n;)t.id&&-1!=t.id.indexOf("-open")&&(i.fire("action"),r.menu&&(i.showMenu(),e.aria&&i.menu.items()[0].focus())),t=t.parentNode}),i.on("keydown",function(r){"INPUT"==r.target.nodeName&&13==r.keyCode&&i.parents().reverse().each(function(e){var t=i.state.get("value"),n=i.getEl("inp").value;return r.preventDefault(),i.state.set("value",n),t!=n&&i.fire("change"),e.hasEventListeners("submit")&&e.toJSON?(e.fire("submit",{data:e.toJSON()}),!1):void 0})}),i.on("keyup",function(e){"INPUT"==e.target.nodeName&&i.state.set("value",e.target.value)})},showMenu:function(){var t=this,e=t.settings;t.menu||((e=e.menu||[]).length?e={type:"menu",items:e}:e.type=e.type||"menu",t.menu=n.create(e).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){e.control===t.menu&&t.focus()}),t.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()==t.value())})}).fire("show"),t.menu.on("select",function(e){t.value(e.control.value())}),t.on("focusin",function(e){"INPUT"==e.target.tagName.toUpperCase()&&t.menu.hide()}),t.aria("expanded",!0)),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t=this.getEl(),n=this.getEl("open"),r=this.layoutRect(),n=n?r.w-i.getSize(n).width-10:r.w-10,r=document;return r.all&&(!r.documentMode||r.documentMode<=8)&&(e=this.layoutRect().h-2+"px"),o(t.firstChild).css({width:n,lineHeight:e}),this._super(),this},postRender:function(){var t=this;return o(this.getEl("inp")).on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)}),t._super()},renderHtml:function(){var e,t,n=this,r=n._id,i=n.settings,o=n.classPrefix,a=n.state.get("value")||"",s="",l="";return"spellcheck"in i&&(l+=' spellcheck="'+i.spellcheck+'"'),i.maxLength&&(l+=' maxlength="'+i.maxLength+'"'),i.size&&(l+=' size="'+i.size+'"'),i.subtype&&(l+=' type="'+i.subtype+'"'),n.disabled()&&(l+=' disabled="disabled"'),(e=i.icon)&&"caret"!=e&&(e=o+"ico "+o+"i-"+i.icon),t=n.state.get("text"),(e||t)&&(s='<div id="'+r+'-open" class="'+o+"btn "+o+'open" tabIndex="-1" role="button"><button id="'+r+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=e?'<i class="'+e+'"></i>':'<i class="'+o+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",n.classes.add("has-open")),'<div id="'+r+'" class="'+n.classes+'"><input id="'+r+'-inp" class="'+o+'textbox" value="'+n.encode(a,!1)+'" hidefocus="1"'+l+' placeholder="'+n.encode(i.placeholder)+'" />'+s+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.getEl("inp").value!=e.value&&(t.getEl("inp").value=e.value)}),t.state.on("change:disabled",function(e){t.getEl("inp").disabled=e.value}),t._super()},remove:function(){o(this.getEl("inp")).off(),this._super()}})}),e(mt,[ht],function(e){return e.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl().getElementsByTagName("i")[0];if(t)try{t.style.background=e}catch(e){}},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.state.get("rendered")&&t.repaintColor(e.value)}),t._super()}})}),e(pt,[ut,Se],function(e,r){return e.extend({showPanel:function(){var e,t=this,n=t.settings;t.active(!0),t.panel?t.panel.show():((e=(e=n.panel).type?{layout:"grid",items:e}:e).role=e.role||"dialog",e.popover=!0,e.autohide=!0,e.ariaRoot=!0,t.panel=new r(e).on("hide",function(){t.active(!1)}).on("cancel",function(e){e.stopPropagation(),t.focus(),t.hidePanel()}).parent(t).renderTo(t.getContainerElm()),t.panel.fire("show"),t.panel.reflow()),t.panel.moveRel(t.getEl(),n.popoverAlign||(t.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var t=this;return t.aria("haspopup",!0),t.on("click",function(e){e.control===t&&(t.panel&&t.panel.visible()?t.hidePanel():(t.showPanel(),t.panel.focus(!!e.aria)))}),t._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}})}),e(gt,[pt,y],function(e,t){var r=t.DOM;return e.extend({init:function(e){this._super(e),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("text"),i=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",o=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";return r&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(r)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+o+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var t=this,n=t.settings.onclick;return t.on("click",function(e){e.aria&&"down"==e.aria.key||e.control!=t||r.getParent(e.target,"."+t.classPrefix+"open")||(e.stopImmediatePropagation(),n.call(t,e))}),delete t.settings.onclick,t._super()}})}),e(vt,[],function(){var u=Math.min,d=Math.max,f=Math.round;return function(e){function t(e){var t;return"object"==typeof e?"r"in e?(s=e.r,l=e.g,c=e.b):"v"in e&&function(e,t,n){var r,i;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,n=parseInt(n,10)/100,t=d(0,u(t,1)),n=d(0,u(n,1)),0===t)return s=l=c=f(255*n);switch(e=e/60,i=(r=n*t)*(1-Math.abs(e%2-1)),n=n-r,Math.floor(e)){case 0:s=r,l=i,c=0;break;case 1:s=i,l=r,c=0;break;case 2:s=0,l=r,c=i;break;case 3:s=0,l=i,c=r;break;case 4:s=i,l=0,c=r;break;case 5:s=r,l=0,c=i;break;default:s=l=c=0}s=f(255*(s+n)),l=f(255*(l+n)),c=f(255*(c+n))}(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(s=parseInt(t[1],10),l=parseInt(t[2],10),c=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(s=parseInt(t[1],16),l=parseInt(t[2],16),c=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(s=parseInt(t[1]+t[1],16),l=parseInt(t[2]+t[2],16),c=parseInt(t[3]+t[3],16)),s=s<0?0:255<s?255:s,l=l<0?0:255<l?255:l,c=c<0?0:255<c?255:c,n}var n=this,s=0,l=0,c=0;e&&t(e),n.toRgb=function(){return{r:s,g:l,b:c}},n.toHsv=function(){return e=s,t=l,n=c,a=0,(r=u(e/=255,u(t/=255,n/=255)))==(i=d(e,d(t,n)))?{h:0,s:0,v:100*(a=r)}:(o=(i-r)/i,{h:f(60*((e==r?3:n==r?1:5)-(e==r?t-n:n==r?e-t:n-e)/((a=i)-r))),s:f(100*o),v:f(100*a)});var e,t,n,r,i,o,a},n.toHex=function(){function e(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e}return"#"+e(s)+e(l)+e(c)},n.parse=t}}),e(yt,[Ne,be,ue,vt],function(e,d,f,h){return e.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function t(e,t){var n=f.getPos(e),r=t.pageX-n.x,n=t.pageY-n.y;return{x:Math.max(0,Math.min(r/e.clientWidth,1)),y:Math.max(0,Math.min(n/e.clientHeight,1))}}function n(e,t){var n=(360-e.h)/360;f.css(l,{top:100*n+"%"}),t||f.css(u,{left:e.s+"%",top:100-e.v+"%"}),c.style.background=new h({s:100,v:100,h:e.h}).toHex(),o.color().parse({s:e.s,v:e.v,h:e.h})}function e(e){e=t(c,e);i.s=100*e.x,i.v=100*(1-e.y),n(i),o.fire("change")}function r(e){e=t(s,e);(i=a.toHsv()).h=360*(1-e.y),n(i,!0),o.fire("change")}var i,o=this,a=o.color(),s=o.getEl("h"),l=o.getEl("hp"),c=o.getEl("sv"),u=o.getEl("svp");o._repaint=function(){n(i=a.toHsv())},o._super(),o._svdraghelper=new d(o._id+"-sv",{start:e,drag:e}),o._hdraghelper=new d(o._id+"-h",{start:r,drag:r}),o._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){return arguments.length?(this.color().parse(e),void(this._rendered&&this._repaint())):this.color().toHex()},color:function(){return this._color||(this._color=new h),this._color},renderHtml:function(){var e=this._id,o=this.classPrefix,a="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",t='<div id="'+e+'-h" class="'+o+'colorpicker-h" style="'+("background: -ms-linear-gradient(top,"+a+");background: linear-gradient(to bottom,"+a+");")+'">'+function(){for(var e="",t="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",n=a.split(","),r=0,i=n.length-1;r<i;r++)e+='<div class="'+o+'colorpicker-h-chunk" style="height:'+100/i+"%;"+t+n[r]+",endColorstr="+n[r+1]+");-ms-"+t+n[r]+",endColorstr="+n[r+1]+')"></div>';return e}()+'<div id="'+e+'-hp" class="'+o+'colorpicker-h-marker"></div></div>';return'<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-sv" class="'+o+'colorpicker-sv"><div class="'+o+'colorpicker-overlay1"><div class="'+o+'colorpicker-overlay2"><div id="'+e+'-svp" class="'+o+'colorpicker-selector1"><div class="'+o+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}})}),e(bt,[Ne],function(e){return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){(e=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[e],index:e})}),t.row(t.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var t=this;return t.state.on("change:row",function(e){t.innerHtml(t._getDataPathHtml(e.value))}),t._super()},_getDataPathHtml:function(e){for(var t=e||[],n="",r=this.classPrefix,i=0,o=t.length;i<o;i++)n+=(0<i?'<div class="'+r+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+r+"path-item"+(i==o-1?" "+r+"last":"")+'" data-index="'+i+'" tabindex="-1" id="'+this._id+"-"+i+'" aria-level="'+i+'">'+t[i].name+"</div>";return n=n||'<div class="'+r+'path-item"> </div>'}})}),e(wt,[bt],function(e){return e.extend({postRender:function(){var o=this,a=o.settings.editor;return!1!==a.settings.elementpath&&(o.on("select",function(e){a.focus(),a.selection.select(this.row()[e.index].element),a.nodeChanged()}),a.on("nodeChange",function(e){for(var t=[],n=e.parents,r=n.length;r--;)if(1==n[r].nodeType&&!function(e){if(1===e.nodeType){if("BR"==e.nodeName||e.getAttribute("data-mce-bogus"))return 1;if("bookmark"===e.getAttribute("data-mce-type"))return 1}}(n[r])){var i=a.fire("ResolveName",{name:n[r].nodeName.toLowerCase(),target:n[r]});if(i.isDefaultPrevented()||t.push({name:i.name,element:n[r]}),i.isPropagationStopped())break}o.row(t)})),o._super()}})}),e(xt,[ye],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),e($t,[ye,xt,d],function(e,r,i){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var n=this,e=n.items();n.settings.formItemDefaults||(n.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),e.each(function(e){var t=e.settings.label;t&&((t=new r(i.extend({items:{type:"label",id:e._id+"-l",text:t,flex:0,forId:e._id,disabled:e.disabled()}},n.settings.formItemDefaults))).type="formitem",e.aria("labelledby",e._id+"-l"),void 0===e.settings.flex&&(e.settings.flex=1),n.replace(e,t),t.add(e))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){function e(){var e,t,n=0,r=[];if(!1!==i.settings.labelGapCalc)for(("children"==i.settings.labelGapCalc?i.find("formitem"):i.items()).filter("formitem").each(function(e){var t=e.items()[0],e=t.getEl().clientWidth;n=n<e?e:n,r.push(t)}),t=i.settings.labelGap||0,e=r.length;e--;)r[e].settings.minWidth=n+t}var i=this;i._super(),i.on("show",e),e()}})}),e(Ct,[$t],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}})}),e(St,[ht,d],function(e,s){return e.extend({init:function(t){var e,n,r,i=this,o=tinymce.activeEditor,a=o.settings;t.spellcheck=!1,(r=(r=a.file_picker_types||a.file_browser_callback_types)&&s.makeMap(r,/[, ]/))&&!r[t.filetype]||(!(n=a.file_picker_callback)||r&&!r[t.filetype]?!(n=a.file_browser_callback)||r&&!r[t.filetype]||(e=function(){n(i.getEl("inp").id,i.value(),t.filetype,window)}):e=function(){var e=i.fire("beforecall").meta,e=s.extend({filetype:t.filetype},e);n.call(o,function(e,t){i.value(e).fire("change",{meta:t})},i.value(),e)}),e&&(t.icon="browse",t.onaction=e),i._super(t)}})}),e(kt,[ct],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),e(Et,[ct],function(e){return e.extend({recalc:function(e){var t,n,r,i,o,a,s,l,c,u,d,f,h,m,p,g,v,y,b,w,x,$,C,S,k,E,A,T,N,_=[],R=Math.max,D=Math.min,M=e.items().filter(":visible"),I=e.layoutRect(),P=e.paddingBox,O=e.settings,B=e.isRtl()?O.direction||"row-reversed":O.direction,F=O.align,L=e.isRtl()?O.pack||"end":O.pack,U=O.spacing||0;for("row-reversed"!=B&&"column-reverse"!=B||(M=M.set(M.toArray().reverse()),B=B.split("-")[0]),B="column"==B?(g="y",m="h",p="minH",v="maxH",b="innerH",y="top",w="deltaH",x="contentH",E="left",S="w",$="x",C="innerW",k="minW",A="right",T="deltaW","contentW"):(g="x",m="w",p="minW",v="maxW",b="innerW",y="left",w="deltaW",x="contentW",E="top",S="h",$="y",C="innerH",k="minH",A="bottom",T="deltaH","contentH"),i=I[b]-P[y]-P[y],t=h=r=0,n=M.length;t<n;t++)a=(o=M[t]).layoutRect(),i-=t<n-1?U:0,0<(s=o.settings.flex)&&(r+=s,a[v]&&_.push(o),a.flex=s),i-=a[p],h<(l=P[E]+a[k]+P[A])&&(h=l);if((d={})[p]=i<0?I[p]-i+I[w]:I[b]-i+I[w],d[k]=h+I[T],d[x]=I[b]-i,d[B]=h,d.minW=D(d.minW,I.maxW),d.minH=D(d.minH,I.maxH),d.minW=R(d.minW,I.startMinWidth),d.minH=R(d.minH,I.startMinHeight),!I.autoResize||d.minW==I.minW&&d.minH==I.minH){for(u=i/r,t=0,n=_.length;t<n;t++)(c=(a=(o=_[t]).layoutRect())[v])<(l=a[p]+a.flex*u)?(i-=a[v]-a[p],r-=a.flex,a.flex=0,a.maxFlexSize=c):a.maxFlexSize=0;for(u=i/r,f=P[y],d={},0===r&&("end"==L?f=i+P[y]:"center"==L?(f=Math.round(I[b]/2-(I[b]-i)/2)+P[y])<0&&(f=P[y]):"justify"==L&&(f=P[y],U=Math.floor(i/(M.length-1)))),d[$]=P[E],t=0,n=M.length;t<n;t++)l=(a=(o=M[t]).layoutRect()).maxFlexSize||a[p],"center"===F?d[$]=Math.round(I[C]/2-a[S]/2):"stretch"===F?(d[S]=R(a[k]||0,I[C]-P[E]-P[A]),d[$]=P[E]):"end"===F&&(d[$]=I[C]-a[S]-P.top),0<a.flex&&(l+=a.flex*u),d[m]=l,d[g]=f,o.layoutRect(d),o.recalc&&o.recalc(),f+=l+U}else d.w=d.minW,d.h=d.minH,e.layoutRect(d),this.recalc(e),null===e._lastRect&&(N=e.parent())&&(N._lastRect=null,N.recalc())}})}),e(At,[lt],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}})}),e(Tt,[me,Ne,Se,d,y,tt,o],function(n,e,u,t,r,i,o){function a(a){function n(i,o){return function(){var t=this;a.on("nodeChange",function(e){var n=a.formatter,r=null;d(e.parents,function(t){return d(i,function(e){return o?n.matchNode(t,o,{value:e.value})&&(r=e.value):n.matchNode(t,e.value)&&(r=e.value),!r&&void 0}),!r&&void 0}),t.value(r)})}}function r(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}function i(e){return function(){var t=this;a.formatter?a.formatter.formatChanged(e,function(e){t.active(e)}):a.on("init",function(){a.formatter.formatChanged(e,function(e){t.active(e)})})}}function e(n){return function(){function e(){return a.undoManager&&a.undoManager[n]()}var t=this;n="redo"==n?"hasRedo":"hasUndo",t.disabled(!e()),a.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){t.disabled(a.readonly||!e())})}}function o(e){(e=e.control?e.control.value():e)&&a.execCommand("mceToggleFormat",!1,e)}var t,s,l,c;s=0,l=[],c=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],a.on("init",function(){d(l,function(e){a.formatter.register(e.name,e)})}),t={type:"menu",items:function r(e){var i=[];if(e)return d(e,function(e){var t,n={text:e.title,icon:e.icon};e.items?n.menu=r(e.items):(t=e.format||"custom"+s++,e.format||(e.name=t,l.push(e)),n.format=t,n.cmd=e.cmd),i.push(n)}),i}(a.settings.style_formats_merge?a.settings.style_formats?c.concat(a.settings.style_formats):c:a.settings.style_formats||c),onPostRender:function(e){a.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){return this.settings.format?a.formatter.getCssText(this.settings.format):void 0},onPostRender:function(){var t=this;t.parent().on("show",function(){var e=t.settings.format;e&&(t.disabled(!a.formatter.canApply(e)),t.active(a.formatter.match(e))),(e=t.settings.cmd)&&t.active(a.queryCommandState(e))})},onclick:function(){this.settings.format&&o(this.settings.format),this.settings.cmd&&a.execCommand(this.settings.cmd)}}},d({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(e,t){a.addButton(t,{tooltip:e,onPostRender:i(t),onclick:function(){o(t)}})}),d({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(e,t){a.addButton(t,{tooltip:e[0],cmd:e[1]})}),d({blockquote:["Blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bullet list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(e,t){a.addButton(t,{tooltip:e[0],cmd:e[1],onPostRender:i(t)})}),a.addButton("undo",{tooltip:"Undo",onPostRender:e("undo"),cmd:"undo"}),a.addButton("redo",{tooltip:"Redo",onPostRender:e("redo"),cmd:"redo"}),a.addMenuItem("newdocument",{text:"New document",icon:"newdocument",cmd:"mceNewDocument"}),a.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:e("undo"),cmd:"undo"}),a.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:e("redo"),cmd:"redo"}),a.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:function(){var t=this;a.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(a.hasVisual)},cmd:"mceToggleVisualAid"}),a.addButton("remove",{tooltip:"Remove",icon:"remove",cmd:"Delete"}),d({cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"],bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(e,t){a.addMenuItem(t,{text:e[0],icon:t,shortcut:e[2],cmd:e[1]})}),a.on("mousedown",function(){u.hideAll()}),a.addButton("styleselect",{type:"menubutton",text:"Formats",menu:t}),a.addButton("formatselect",function(){var t=[],e=r(a.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");return d(e,function(e){t.push({text:e[0],value:e[1],textStyle:function(){return a.formatter.getCssText(e[1])}})}),{type:"listbox",text:e[0][0],values:t,fixedWidth:!0,onselect:o,onPostRender:n(t)}}),a.addButton("fontselect",function(){var t=[],e=r(a.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return d(e,function(e){t.push({text:{raw:e[0]},value:e[1],textStyle:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:t,fixedWidth:!0,onPostRender:n(t,"fontname"),onselect:function(e){e.control.settings.value&&a.execCommand("FontName",!1,e.control.settings.value)}}}),a.addButton("fontsizeselect",function(){var r=[],e=a.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return d(e.split(" "),function(e){var t=e,n=e,e=e.split("=");1<e.length&&(t=e[0],n=e[1]),r.push({text:t,value:n})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:r,fixedWidth:!0,onPostRender:n(r,"fontsize"),onclick:function(e){e.control.settings.value&&a.execCommand("FontSize",!1,e.control.settings.value)}}}),a.addMenuItem("formats",{text:"Formats",menu:t})}var d=t.each;i.on("AddEditor",function(e){var t,e=e.editor;(t=e).on("ScriptsLoaded",function(){t.rtl&&(n.rtl=!0)}),a(e),(e=e).settings.ui_container&&(o.container=r.DOM.select(e.settings.ui_container)[0])}),n.translate=function(e){return i.translate(e)},e.tooltips=!o.iOS}),e(Nt,[ct],function(e){return e.extend({recalc:function(e){var t,n,r,i,o,a,s,l,c,u,d,f,h,m,p,g,v,y,b=[],w=[],x=e.settings,$=e.items().filter(":visible"),C=e.layoutRect(),S=x.columns||Math.ceil(Math.sqrt($.length)),k=Math.ceil($.length/S),E=x.spacingH||x.spacing||0,A=x.spacingV||x.spacing||0,T=x.alignH||x.align,N=x.alignV||x.align,_=e.paddingBox,R="reverseRows"in x?x.reverseRows:e.isRtl();for(T&&"string"==typeof T&&(T=[T]),N&&"string"==typeof N&&(N=[N]),P=0;P<S;P++)b.push(0);for(a=0;a<k;a++)w.push(0);for(a=0;a<k;a++)for(P=0;P<S&&(o=$[a*S+P]);P++)h=(i=o.layoutRect()).minW,m=i.minH,b[P]=h>b[P]?h:b[P],w[a]=m>w[a]?m:w[a];for(p=C.innerW-_.left-_.right,P=d=0;P<S;P++)d+=b[P]+(0<P?E:0),p-=(0<P?E:0)+b[P];for(g=C.innerH-_.top-_.bottom,a=f=0;a<k;a++)f+=w[a]+(0<a?A:0),g-=(0<a?A:0)+w[a];if(d+=_.left+_.right,f+=_.top+_.bottom,(r={}).minW=d+(C.w-C.innerW),r.minH=f+(C.h-C.innerH),r.contentW=r.minW-C.deltaW,r.contentH=r.minH-C.deltaH,r.minW=Math.min(r.minW,C.maxW),r.minH=Math.min(r.minH,C.maxH),r.minW=Math.max(r.minW,C.startMinWidth),r.minH=Math.max(r.minH,C.startMinHeight),!C.autoResize||r.minW==C.minW&&r.minH==C.minH){C.autoResize&&((r=e.layoutRect(r)).contentW=r.minW-C.deltaW,r.contentH=r.minH-C.deltaH),v="start"!=x.packV&&0<g?Math.floor(g/k):0;var D=0,M=x.flexWidths;if(M)for(P=0;P<M.length;P++)D+=M[P];else D=S;for(var I=p/D,P=0;P<S;P++)b[P]+=M?M[P]*I:I;for(l=_.top,a=0;a<k;a++){for(s=_.left,n=w[a]+v,P=0;P<S&&(o=$[R?a*S+S-1-P:a*S+P]);P++)c=o.settings,i=o.layoutRect(),t=Math.max(b[P],i.startMinWidth),i.x=s,i.y=l,"center"==(u=c.alignH||(T?T[P]||T[0]:null))?i.x=s+t/2-i.w/2:"right"==u?i.x=s+t-i.w:"stretch"==u&&(i.w=t),"center"==(u=c.alignV||(N?N[P]||N[0]:null))?i.y=l+n/2-i.h/2:"bottom"==u?i.y=l+n-i.h:"stretch"==u&&(i.h=n),o.layoutRect(i),s+=t+E,o.recalc&&o.recalc();l+=n+A}}else r.w=r.minW,r.h=r.minH,e.layoutRect(r),this.recalc(e),null===e._lastRect&&(y=e.parent())&&(y._lastRect=null,y.recalc())}})}),e(_t,[Ne,i],function(e,i){return e.extend({renderHtml:function(){return this.classes.add("iframe"),this.canFocus=!1,'<iframe id="'+this._id+'" class="'+this.classes+'" tabindex="-1" src="'+(this.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,t&&t()):i.setTimeout(function(){n.html(e)}),this}})}),e(Rt,[Ne],function(e){return e.extend({init:function(e){this._super(e),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+this.encode(this.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+e+"ico "+e+'i-help"></i></button></div></div>'},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.getEl("body").firstChild.data=t.encode(e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t.state.on("change:help",function(e){t.classes.toggle("has-help",e.value),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}})}),e(Dt,[Ne,ue],function(e,t){return e.extend({init:function(e){this._super(e),this.classes.add("widget").add("label"),this.canFocus=!1,e.multiline&&this.classes.add("autoscroll"),e.strong&&this.classes.add("strong")},initLayoutRect:function(){var e=this._super();return this.settings.multiline&&(t.getSize(this.getEl()).width>e.maxW&&(e.minW=e.maxW,this.classes.add("multiline")),this.getEl().style.width=e.minW+"px",e.startMinH=e.h=e.minH=Math.min(e.maxH,t.getSize(this.getEl()).height)),e},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t=this,n=t.settings.forId;return!n&&(e=t.settings.forName)&&((e=t.getRoot().find("#"+e)[0])&&(n=e._id)),n?'<label id="'+t._id+'" class="'+t.classes+'"'+(n?' for="'+n+'"':"")+">"+t.encode(t.state.get("text"))+"</label>":'<span id="'+t._id+'" class="'+t.classes+'">'+t.encode(t.state.get("text"))+"</span>"},bindStates:function(){var t=this;return t.state.on("change:text",function(e){t.innerHtml(t.encode(e.value)),t.state.get("rendered")&&t.updateLayoutRect()}),t._super()}})}),e(Mt,[ye],function(e){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){this._super(e),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(e){e.classes.add("toolbar-item")}),this._super()}})}),e(It,[Mt],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),e(Pt,[ut,pe,It],function(e,n,s){var i=e.extend({init:function(e){this._renderOpen=!0,this._super(e),e=this.settings,this.classes.add("menubtn"),e.fixedWidth&&this.classes.add("fixed-width"),this.aria("haspopup",!0),this.state.set("menu",e.menu||this.render())},showMenu:function(){var e,t=this;return t.menu&&t.menu.visible()?t.hideMenu():(t.menu||((e=t.state.get("menu")||[]).length?e={type:"menu",items:e}:e.type=e.type||"menu",e.renderTo?t.menu=e.parent(t).show().renderTo():t.menu=n.create(e).parent(t).renderTo(),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){e.control.parent()===t.menu&&(e.stopPropagation(),t.focus(),t.hideMenu())}),t.menu.on("select",function(){t.focus()}),t.menu.on("show hide",function(e){e.control==t.menu&&t.activeMenu("show"==e.type),t.aria("expanded","show"==e.type)}).fire("show")),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),void t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]))},hideMenu:function(){this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon,i=e.state.get("text"),o="",a=e.settings.image;return a=a?(r="none"," style=\"background-image: url('"+(a="string"!=typeof a?window.getSelection?a[0]:a[1]:a)+"')\""):"",i&&(e.classes.add("btn-has-text"),o='<span class="'+n+'txt">'+e.encode(i)+"</span>"),r=e.settings.icon?n+"ico "+n+"i-"+r:"",e.aria("role",e.parent()instanceof s?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+t+'"><button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+a+"></i>":"")+o+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var r=this;return r.on("click",function(e){e.control===r&&function(e,t){for(;e;){if(t===e)return 1;e=e.parentNode}}(e.target,r.getEl())&&(r.showMenu(),e.aria&&r.menu.items()[0].focus())}),r.on("mouseenter",function(e){var t,n=e.control,e=r.parent();n&&e&&n instanceof i&&n.parent()==e&&(e.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=n&&(e.menu&&e.menu.visible()&&(t=!0),e.hideMenu())}),t&&(n.focus(),n.showMenu()))}),r._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}});return i}),e(Ot,[Ne,pe,o,i],function(e,i,s,o){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t,n=this;n._super(e),e=n.settings,n.classes.add("menu-item"),e.menu&&n.classes.add("menu-item-expand"),e.preview&&n.classes.add("menu-item-preview"),"-"!==(t=n.state.get("text"))&&"|"!==t||(n.classes.add("menu-item-sep"),n.aria("role","separator"),n.state.set("text","-")),e.selectable&&(n.aria("role","menuitemcheckbox"),n.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||n.classes.add("menu-item-normal"),n.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&n.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var t,n=this,e=n.settings,r=n.parent();r.items().each(function(e){e!==n&&e.hideMenu()}),e.menu&&((t=n.menu)?t.show():((t=e.menu).length?t={type:"menu",items:t}:t.type=t.type||"menu",r.settings.itemDefaults&&(t.itemDefaults=r.settings.itemDefaults),(t=n.menu=i.create(t).parent(n).renderTo()).reflow(),t.on("cancel",function(e){e.stopPropagation(),n.focus(),t.hide()}),t.on("show hide",function(e){e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),t.on("hide",function(e){e.control===t&&n.classes.remove("selected")}),t.submenu=!0),t._parentMenu=r,t.classes.add("menu-sub"),r=t.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]),t.moveRel(n.getEl(),r),r="menu-sub-"+(t.rel=r),t.classes.remove(t._lastRel).add(r),t._lastRel=r,n.classes.add("selected"),n.aria("expanded",!0))},hideMenu:function(){return this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide(),this.aria("expanded",!1)),this},renderHtml:function(){var e=this._id,t=this.settings,n=this.classPrefix,r=this.encode(this.state.get("text")),i=this.settings.icon,o="",a=t.shortcut;return i&&this.parent().classes.add("menu-has-icons"),t.image&&(o=" style=\"background-image: url('"+t.image+"')\""),a=a&&function(e){var t,n,r=s.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"};for(e=e.split("+"),t=0;t<e.length;t++)(n=r[e[t].toLowerCase()])&&(e[t]=n);return e.join("+")}(a),i=n+"ico "+n+"i-"+(this.settings.icon||"none"),'<div id="'+e+'" class="'+this.classes+'" tabindex="-1">'+("-"!==r?'<i class="'+i+'"'+o+"></i> ":"")+("-"!==r?'<span id="'+e+'-text" class="'+n+'text">'+r+"</span>":"")+(a?'<div id="'+e+'-shortcut" class="'+n+'menu-shortcut">'+a+"</div>":"")+(t.menu?'<div class="'+n+'caret"></div>':"")+"</div>"},postRender:function(){var e,t=this,n=t.settings,r=n.textStyle;return(r="function"==typeof r?r.call(this):r)&&(e=t.getEl("text"))&&e.setAttribute("style",r),t.on("mouseenter click",function(e){e.control===t&&(n.menu||"click"!==e.type?(t.showMenu(),e.aria&&t.menu.focus(!0)):(t.fire("select"),o.requestAnimationFrame(function(){t.parent().hideAll()})))}),t._super(),t},hover:function(){return this.parent().items().each(function(e){e.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(e){return void 0!==e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),e(Bt,[f,me,i],function(c,e,u){return function(r,i){var o,a,s=this,l=e.classPrefix;s.show=function(e,t){function n(){o&&(c(r).append('<div class="'+l+"throbber"+(i?" "+l+"throbber-inline":"")+'"></div>'),t&&t())}return s.hide(),o=!0,e?a=u.setTimeout(n,e):n(),s},s.hide=function(){var e=r.lastChild;return u.clearTimeout(a),e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e),o=!1,s}}}),e(Ft,[Se,Ot,Bt,d],function(e,t,i,r){return e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var t=e.items,n=t.length;n--;)t[n]=r.extend({},e.itemDefaults,t[n]);this._super(e),this.classes.add("menu")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){function t(){r.throbber&&(r.throbber.hide(),r.throbber=null)}var n,r=this;r.settings.itemsFactory&&(r.throbber||(r.throbber=new i(r.getEl("body"),!0),0===r.items().length?(r.throbber.show(),r.fire("loading")):r.throbber.show(100,function(){r.items().remove(),r.fire("loading")}),r.on("hide close",t)),r.requestTime=n=(new Date).getTime(),r.settings.itemsFactory(function(e){return 0===e.length?void r.hide():void(r.requestTime===n&&(r.getEl().style.width="",r.getEl("body").style.width="",t(),r.items().remove(),r.getEl("body").innerHTML="",r.add(e),r.renderNew(),r.fire("loaded")))}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var t=this;return t.items().each(function(e){e=e.settings;return e.icon||e.image||e.selectable?!(t._hasIcons=!0):void 0}),t.settings.itemsFactory&&t.on("postrender",function(){t.settings.itemsFactory&&t.load()}),t._super()}})}),e(Lt,[Pt,Ft],function(e,r){return e.extend({init:function(r){var e,i,o,n,a=this;a._super(r),r=a.settings,a._values=e=r.values,e&&(void 0!==r.value&&function e(t){for(var n=0;n<t.length;n++){if(i=t[n].selected||r.value===t[n].value)return o=o||t[n].text,a.state.set("value",t[n].value),1;if(t[n].menu&&e(t[n].menu))return 1}}(e),!i&&0<e.length&&(o=e[0].text,a.state.set("value",e[0].value)),a.state.set("menu",e)),a.state.set("text",r.text||o),a.classes.add("listbox"),a.on("select",function(e){var t=e.control;n&&(e.lastControl=n),r.multiple?t.active(!t.active()):a.value(e.control.value()),n=t})},bindStates:function(){var n=this;return n.on("show",function(e){var t;e=e.control,t=n.value(),e instanceof r&&e.items().each(function(e){e.hasMenus()||e.active(e.value()===t)})}),n.state.on("change:value",function(e){e=function e(t,n){var r;if(t)for(var i=0;i<t.length;i++){if(t[i].value===n)return t[i];if(t[i].menu&&(r=e(t[i].menu,n)))return r}}(n.state.get("menu"),e.value);e?n.text(e.text):n.text(n.settings.text)}),n._super()}})}),e(Ut,[ft],function(e){return e.extend({Defaults:{classes:"radio",role:"radio"}})}),e(Ht,[Ne,be],function(e,n){return e.extend({renderHtml:function(){var e=this.classPrefix;return this.classes.add("resizehandle"),"both"==this.settings.direction&&this.classes.add("resizehandle-both"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><i class="'+e+"ico "+e+'i-resize"></i></div>'},postRender:function(){var t=this;t._super(),t.resizeDragHelper=new n(this._id,{start:function(){t.fire("ResizeStart")},drag:function(e){"both"!=t.settings.direction&&(e.deltaX=0),t.fire("Resize",e)},stop:function(){t.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),e(zt,[Ne],function(e){function n(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}return e.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var n=this;n._super(e),n.settings.size&&(n.size=n.settings.size),n.settings.options&&(n._options=n.settings.options),n.on("keydown",function(e){var t;13==e.keyCode&&(e.preventDefault(),n.parents().reverse().each(function(e){return e.toJSON?(t=e,!1):void 0}),n.fire("submit",{data:t.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e="",t=n(this._options);return this.size&&(e=' size = "'+this.size+'"'),'<select id="'+this._id+'" class="'+this.classes+'"'+e+">"+t+"</select>"},bindStates:function(){var t=this;return t.state.on("change:options",function(e){t.getEl().innerHTML=n(e.value)}),t._super()}})}),e(Vt,[Ne,be,ue],function(e,y,b){function w(e,t,n){return e=n<(e=e<t?t:e)?n:e}function a(e,t,n){e.setAttribute("aria-"+t,n)}function n(e,t){var n,r="v"==e.settings.orientation?(n="top",o="height","h"):(n="left",o="width","w"),i=e.getEl("handle"),o=((e.layoutRect()[r]||100)-b.getSize(i)[o])*((t-e._minValue)/(e._maxValue-e._minValue))+"px";i.style[n]=o,i.style.height=e.layoutRect().h+"px",a(i,"valuenow",t),a(i,"valuetext",""+e.settings.previewFilter(t)),a(i,"valuemin",e._minValue),a(i,"valuemax",e._maxValue)}return e.extend({init:function(e){e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),this._super(e),this.classes.add("slider"),"v"==e.orientation&&this.classes.add("vertical"),this._minValue=e.minValue||0,this._maxValue=e.maxValue||100,this._initValue=this.state.get("value")},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-handle" class="'+t+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e,t,n,r,i,o,a,s,l,c,u,d,f,h,m,p,g=this;function v(e){var t,n,r,i=g.value();i=w(((i+(r=t=m))/((n=p)-r)+.05*e)*(n-t)-t,m,p),g.value(i),g.fire("dragstart",{value:i}),g.fire("drag",{value:i}),g.fire("dragend",{value:i})}e=g._minValue,t=g._maxValue,o="v"==g.settings.orientation?(n="screenY",r="top",i="height","h"):(n="screenX",r="left",i="width","w"),g._super(),m=e,p=t,g.getEl("handle"),g.on("keydown",function(e){switch(e.keyCode){case 37:case 38:v(-1);break;case 39:case 40:v(1)}}),a=e,s=t,l=g.getEl("handle"),g._dragHelper=new y(g._id,{handle:g._id+"-handle",start:function(e){c=e[n],u=parseInt(g.getEl("handle").style[r],10),d=(g.layoutRect()[o]||100)-b.getSize(l)[i],g.fire("dragstart",{value:h})},drag:function(e){e=e[n]-c;f=w(u+e,0,d),l.style[r]=f+"px",h=a+f/d*(s-a),g.value(h),g.tooltip().text(""+g.settings.previewFilter(h)).show().moveRel(l,"bc tc"),g.fire("drag",{value:h})},stop:function(){g.tooltip().hide(),g.fire("dragend",{value:h})}})},repaint:function(){this._super(),n(this,this.value())},bindStates:function(){var t=this;return t.state.on("change:value",function(e){n(t,e.value)}),t._super()}})}),e(jt,[Ne],function(e){return e.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}})}),e(qt,[Pt,ue,f],function(e,r,i){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,t=this.getEl(),n=this.layoutRect();return this._super(),e=t.firstChild,t=t.lastChild,i(e).css({width:n.w-r.getSize(t).width,height:n.h-2}),i(t).css({height:n.h-2}),this},activeMenu:function(e){i(this.getEl().lastChild).toggleClass(this.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("icon"),i=e.state.get("text"),o="",a=e.settings.image;return a=a?(r="none"," style=\"background-image: url('"+(a="string"!=typeof a?window.getSelection?a[0]:a[1]:a)+"')\""):"",r=e.settings.icon?n+"ico "+n+"i-"+r:"",i&&(e.classes.add("btn-has-text"),o='<span class="'+n+'txt">'+e.encode(i)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(r?'<i class="'+r+'"'+a+"></i>":"")+o+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+(e._menuBtnText?(r?" ":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var n=this.settings.onclick;return this.on("click",function(e){var t=e.target;if(e.control==this)for(;t;){if(e.aria&&"down"!=e.aria.key||"BUTTON"==t.nodeName&&-1==t.className.indexOf("open"))return e.stopImmediatePropagation(),void(n&&n.call(this,e));t=t.parentNode}}),delete this.settings.onclick,this._super()}})}),e(Wt,[At],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}})}),e(Gt,[xe,f,ue],function(e,t,i){return e.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(n){var e;this.activeTabId&&(e=this.getEl(this.activeTabId),t(e).removeClass(this.classPrefix+"active"),e.setAttribute("aria-selected","false")),this.activeTabId="t"+n,(e=this.getEl("t"+n)).setAttribute("aria-selected","true"),t(e).addClass(this.classPrefix+"active"),this.items()[n].show().fire("showtab"),this.reflow(),this.items().each(function(e,t){n!=t&&e.hide()})},renderHtml:function(){var n=this,e=n._layout,r="",i=n.classPrefix;return n.preRender(),e.preRender(n),n.items().each(function(e,t){t=n._id+"-t"+t;e.aria("role","tabpanel"),e.aria("labelledby",t),r+='<div id="'+t+'" class="'+i+'tab" unselectable="on" role="tab" aria-controls="'+e._id+'" aria-selected="false" tabIndex="-1">'+n.encode(e.settings.title)+"</div>"}),'<div id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1"><div id="'+n._id+'-head" class="'+i+'tabs" role="tablist">'+r+'</div><div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+e.renderHtml(n)+"</div></div>"},postRender:function(){var r=this;r._super(),r.settings.activeTab=r.settings.activeTab||0,r.activateTab(r.settings.activeTab),this.on("click",function(e){var t=e.target.parentNode;if(e.target.parentNode.id==r._id+"-head")for(var n=t.childNodes.length;n--;)t.childNodes[n]==e.target&&r.activateTab(n)})},initLayoutRect:function(){var e,t,n=i.getSize(this.getEl("head")).width;n=n<0?0:n,t=0,this.items().each(function(e){n=Math.max(n,e.layoutRect().minW),t=Math.max(t,e.layoutRect().minH)}),this.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=n,e.settings.h=t,e.layoutRect({x:0,y:0,w:n,h:t})});var r=i.getSize(this.getEl("head")).height;return this.settings.minWidth=n,this.settings.minHeight=t+r,(e=this._super()).deltaH+=r,e.innerH=e.h-e.deltaH,e}})}),e(Yt,[Ne,d,ue],function(e,r,i){return e.extend({init:function(e){var n=this;n._super(e),n.classes.add("textbox"),e.multiline?n.classes.add("multiline"):(n.on("keydown",function(e){var t;13==e.keyCode&&(e.preventDefault(),n.parents().reverse().each(function(e){return e.toJSON?(t=e,!1):void 0}),n.fire("submit",{data:t.toJSON()}))}),n.on("keyup",function(e){n.state.set("value",e.target.value)}))},repaint:function(){var e,t=0,n=this.getEl().style,r=this._layoutRect,i=this._lastRepaintRect||{},o=document;return!this.settings.multiline&&o.all&&(!o.documentMode||o.documentMode<=8)&&(n.lineHeight=r.h-t+"px"),o=(e=this.borderBox).left+e.right+8,t=e.top+e.bottom+(this.settings.multiline?8:0),r.x!==i.x&&(n.left=r.x+"px",i.x=r.x),r.y!==i.y&&(n.top=r.y+"px",i.y=r.y),r.w!==i.w&&(n.width=r.w-o+"px",i.w=r.w),r.h!==i.h&&(n.height=r.h-t+"px",i.h=r.h),this._lastRepaintRect=i,this.fire("repaint",{},!1),this},renderHtml:function(){var e,t=this.settings,n={id:this._id,hidefocus:"1"};return r.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(e){n[e]=t[e]}),this.disabled()&&(n.disabled="disabled"),t.subtype&&(n.type=t.subtype),(e=i.create(t.multiline?"textarea":"input",n)).value=this.state.get("value"),e.className=this.classes,e.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var t=this;t.getEl().value=t.state.get("value"),t._super(),t.$el.on("change",function(e){t.state.set("value",e.target.value),t.fire("change",e)})},bindStates:function(){var t=this;return t.state.on("change:value",function(e){t.getEl().value!=e.value&&(t.getEl().value=e.value)}),t.state.on("change:disabled",function(e){t.getEl().disabled=e.value}),t._super()},remove:function(){this.$el.off(),this._super()}})}),e("tinymce/Register",[],function(){var e=this||window;return"function"==typeof e.define&&(e.define.amd||e.define("ephox/tinymce",[],function(){return e.tinymce})),{}}),function(e){for(var t,n,r,i,o=0;o<e.length;o++){t=s,r=(n=e[o]).split(/[.\/]/);for(var a=0;a<r.length-1;++a)t[r[a]]===ge&&(t[r[a]]={}),t=t[r[a]];t[r[r.length-1]]=l[n]}if(s.AMDLC_TESTS){for(n in i=s.privateModules||{},l)i[n]=l[n];for(o=0;o<e.length;o++)delete i[e[o]];s.privateModules=i}}([t,n,i,o,a,c,d,f,h,m,g,y,b,w,S,E,A,T,N,_,R,D,I,P,z,V,G,Y,te,ne,re,ie,ae,le,ce,he,me,pe,ve,ye,be,we,xe,$e,Ce,Se,ke,Ee,Ae,Te,Ne,_e,Re,De,Pe,Be,Ze,Qe,et,tt,nt,rt,it,ot,at,st,lt,ct,ut,dt,ft,ht,mt,pt,gt,vt,yt,bt,wt,xt,$t,Ct,St,kt,Et,At,Tt,Nt,_t,Rt,Dt,Mt,It,Pt,Ot,Bt,Ft,Lt,Ut,Ht,zt,Vt,jt,qt,Wt,Gt,Yt])}(this),function(){var s={},e=function(e,t,n){if("string"!=typeof e)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+e;if(void 0===n)throw"no definition function for "+e;s[e]={deps:t,defn:n,instance:void 0}},l=function(e){var t=s[e];if(void 0===t)throw"module ["+e+"] was undefined";return void 0===t.instance&&function(e){for(var t=s[e],n=t.deps,r=t.defn,i=n.length,o=new Array(i),a=0;a<i;++a)o[a]=l(n[a]);r=r.apply(null,o);if(void 0===r)throw"module ["+e+"] returned undefined";t.instance=r}(e),t.instance},n=e;(e=function(e,t){n(e,[],function(){return t})})("1",tinymce.ThemeManager),e("2",tinymce.util.Delay),e("c",tinymce.util.Tools),e("d",tinymce.ui.Factory),e("e",tinymce.DOM),n("j",[],function(){function e(t){return function(e){return typeof e===t}}function t(e){return Array.isArray(e)}function n(e){return null===e}var r;return{isString:e("string"),isNumber:e("number"),isBoolean:e("boolean"),isFunction:e("function"),isObject:(r=e("object"),function(e){return!n(e)&&!t(e)&&r(e)}),isNull:n,isArray:t}}),n("f",["c","d","j"],function(n,l,r){function i(i,o){return function(e,t){for(var n,r=t.parents.length;r--&&("OL"!=(n=t.parents[r].nodeName)&&"UL"!=n););i.active(e&&n==o)}}function c(e,t){function n(e,t){return{selector:e,handler:t}}return"bullist"==e?n("ul > li",i(t,"UL")):"numlist"==e?n("ol > li",i(t,"OL")):t.settings.stateSelector?n(t.settings.stateSelector,function(e){t.active(e)}):t.settings.disabledStateSelector?n(t.settings.disabledStateSelector,function(e){t.disabled(e)}):null}return{create:function(o,e,t){var a,s=[];if(t)return n.each((t=t,r.isArray(t)?t:r.isString(t)?t.split(/[ ,]/):[]),function(e){var t,n,r,i;"|"==e?a=null:l.has(e)?(e={type:e},s.push(e),a=null):o.buttons[e]&&(a||(a={type:"buttongroup",items:[]},s.push(a)),t=e,(e="function"==typeof(e=o.buttons[t])?e():e).type=e.type||"button",(e=l.create(e)).on("postRender",(n=o,r=t,i=e,function(){var e=c(r,i);null!==e&&n.selection.selectorChanged(e.selector,e.handler)})),a.items.push(e))}),l.create({type:"toolbar",layout:"flow",name:e,items:s})}}}),e("o",tinymce.util.Promise),n("p",[],function(){var n=0;return{uuid:function(e){return e+n+++("s"+Date.now().toString(36)+t()+t()+t());function t(){return Math.round(4294967295*Math.random()).toString(36)}}}}),n("u",[],function(){return{create:function(i,o){function e(e){var t,n=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];1==n.nodeType&&(t=i.create("span",{"data-mce-type":"bookmark"}),n.hasChildNodes()?(r=Math.min(r,n.childNodes.length-1),e?n.insertBefore(t,n.childNodes[r]):i.insertAfter(t,n.childNodes[r])):n.appendChild(t),n=t,r=0),a[e?"startContainer":"endContainer"]=n,a[e?"startOffset":"endOffset"]=r}var a={};return e(!0),o.collapsed||e(),a},resolve:function(i,o){function e(e){var t,n=t=o[e?"startContainer":"endContainer"],r=o[e?"startOffset":"endOffset"];n&&(1==n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t==e)return n;1==t.nodeType&&"bookmark"==t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,i.remove(t)),o[e?"startContainer":"endContainer"]=n,o[e?"startOffset":"endOffset"]=r)}e(!0),e();var t=i.createRng();return t.setStart(o.startContainer,o.startOffset),o.endContainer&&t.setEnd(o.endContainer,o.endOffset),t}}}),e("v",tinymce.dom.TreeWalker),e("w",tinymce.dom.RangeUtils),n("q",["u","c","v","w"],function(o,a,s,r){function i(e){return"A"===e.nodeName&&e.hasAttribute("href")}function l(e){var t=e.selection,n=e.dom,t=t.getRng(),n=function(e,t){e=e.getParent(t,i);return e||t}(n,r.getNode(t.startContainer,t.startOffset)),t=r.getNode(t.endContainer,t.endOffset),e=e.getBody();return a.grep(function(e,t,n){for(var r=[],i=new s(t,e),o=t;o&&(1===o.nodeType&&r.push(o),o!==n);o=i.next());return r}(e,n,t),i)}return{unlinkSelection:function(e){var t,n,r,i;n=l(t=e),r=t.dom,i=t.selection,e=o.create(r,i.getRng()),a.each(n,function(e){t.dom.remove(e,!0)}),i.setRng(o.resolve(r,e))}}}),n("m",["p","q"],function(i,t){function o(e){e.selection.collapse(!1)}function n(e){e.focus(),t.unlinkSelection(e),o(e)}function r(e,t){var n,r,i;(i=e.dom.getParent(e.selection.getStart(),"a[href]"))?(n=i,r=t,(i=e).focus(),i.dom.setAttrib(n,"href",r),o(i)):(t=t,(e=e).execCommand("mceInsertLink",!1,{href:t}),o(e))}return{insertTable:function(t,n,r){t.undoManager.transact(function(){var e;t.insertContent(function(e,t){var n,r,i='<table data-mce-id="mce" style="width: 100%">';for(i+="<tbody>",r=0;r<t;r++){for(i+="<tr>",n=0;n<e;n++)i+="<td><br></td>";i+="</tr>"}return(i+="</tbody>")+"</table>"}(n,r)),(e=t.dom.select("*[data-mce-id]")[0]).removeAttribute("data-mce-id"),e=t.dom.select("td,th",e),t.selection.setCursorLocation(e[0],0)})},formatBlock:function(e,t){e.execCommand("FormatBlock",!1,t)},insertBlob:function(e,t,n){var r=e.editorUpload.blobCache,t=r.create(i.uuid("mceu"),n,t);r.add(t),e.insertContent(e.dom.createHTML("img",{src:t.blobUri()}))},createLink:function(e,t){0===t.trim().length?n(e):r(e,t)},unlink:n}}),n("r",[],function(){return{isDomainLike:function(e){return/^www\.|\.(com|org|edu|gov|uk|net|ca|de|jp|fr|au|us|ru|ch|it|nl|se|no|es|mil)$/i.test(e.trim())},isAbsolute:function(e){return/^https?:\/\//.test(e.trim())}}}),n("g",["c","d","o","m","r"],function(o,a,i,s,l){function c(e,t){return!l.isAbsolute(t)&&l.isDomainLike(t)?(n=e,r=t,new i(function(t){n.windowManager.confirm("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){t(!0===e?"http://"+r:r)})})):i.resolve(t);var n,r}return{createQuickLinkForm:function(n,t){var e,r,i;return e="quicklink",r={items:[{type:"button",name:"unlink",icon:"unlink",onclick:function(){n.focus(),s.unlink(n),t()},tooltip:"Remove link"},{type:"textbox",name:"linkurl",placeholder:"Paste or type a link"},{type:"button",icon:"checkmark",subtype:"primary",tooltip:"Ok",onclick:"submit"}],onshow:function(){var e="",t=n.dom.getParent(n.selection.getStart(),"a[href]");t&&(e=n.dom.getAttrib(t,"href")),this.fromJSON({linkurl:e}),e=this.find("#unlink"),t?e.show():e.hide()},onsubmit:function(e){c(n,e.data.linkurl).then(function(e){s.createLink(n,e),t()})}},(i=a.create(o.extend({type:"form",layout:"flex",direction:"row",padding:5,name:e,spacing:3},r))).on("show",function(){i.find("textbox").eq(0).each(function(e){e.focus()})}),i}}}),e("s",tinymce.geom.Rect),n("t",[],function(){return{fromClientRect:function(e){return{x:e.left,y:e.top,w:e.width,h:e.height}},toClientRect:function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}}}}),n("h",["e","s","t"],function(n,e,t){function r(e){var t=n.getViewPort();return{x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}}function i(e){var t=e.getBoundingClientRect();return r({x:t.left,y:t.top,w:Math.max(e.clientWidth,e.offsetWidth),h:Math.max(e.clientHeight,e.offsetHeight)})}return{getElementRect:function(e,t){return i(t)},getPageAreaRect:function(e){return i(e.getElement().ownerDocument.body)},getContentAreaRect:function(e){return i(e.getContentAreaContainer()||e.getBody())},getSelectionRect:function(e){e=e.selection.getBoundingClientRect();return e?r(t.fromClientRect(e)):null}}}),n("i",["s","t"],function(s,i){function l(e,t){return{rect:e,position:t}}function c(e,t){return{x:t.x,y:t.y,w:e.w,h:e.h}}function r(e,t,n,r,i){var o,a,e=s.findBestRelativePosition(i,n,r,e);return n=s.clamp(n,r),e?(o=s.relativePosition(i,n,e),a=c(i,o),l(a,e)):(n=s.intersect(r,n))?(a=(e=s.findBestRelativePosition(i,n,r,t))?(o=s.relativePosition(i,n,e),c(i,o)):c(i,n),l(a,e)):null}return{calcInsert:function(e,t,n){return r(["cr-cl","cl-cr"],["bc-tc","bl-tl","br-tr"],e,t,n)},calc:function(e,t,n){return r(["tc-bc","bc-tc","tl-bl","bl-tl","tr-br","br-tr"],["bc-tc","bl-tl","br-tr"],e,t,n)},userConstrain:function(e,t,n,r){return"function"==typeof e?(n=e({elementRect:i.toClientRect(t),contentAreaRect:i.toClientRect(n),panelRect:i.toClientRect(r)}),i.fromClientRect(n)):r},defaultHandler:function(e){return e.panelRect}}}),n("a",["j"],function(i){function o(e,t){if(t(e))return 1;throw new Error("Default value doesn't match requested type.")}function e(r){return function(e,t,n){e=e.settings;return o(n,r),t in e&&r(e[t])?e[t]:n}}var a;return{getStringOr:e(i.isString),getBoolOr:e(i.isBoolean),getNumberOr:e(i.isNumber),getHandlerOr:e(i.isFunction),getToolbarItemsOr:(a=i.isArray,function(e,t,n){var r=t in e.settings?e.settings[t]:n;return o(n,a),e=r,t=n,i.isArray(e)?e:i.isString(e)?"string"==typeof(r=e)?(n=/[ ,]/,r.split(n).filter(function(e){return 0<e.length})):r:i.isBoolean(e)&&!1===e?[]:t})}}),n("3",["c","d","e","f","g","h","i","a"],function(m,p,g,v,y,b,w,x){return function(){function r(e){return 0<e.items().length}function a(e,t){var n,t=(n=e,t=t,m.map(t,function(e){return v.create(n,e.id,e.items)}).concat([v.create(e,"text",(t=e,x.getToolbarItemsOr(t,"selection_toolbar",i))),v.create(e,"insert",(t=e,x.getToolbarItemsOr(t,"insert_toolbar",o))),y.createQuickLinkForm(e,h)]));return p.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:m.grep(t,r),oncancel:function(){e.focus()}})}function s(e){e&&e.show()}function l(e,t){e.moveTo(t.x,t.y)}function c(n,r){r=r?r.substr(0,2):"",m.each({t:"down",b:"up",c:"center"},function(e,t){n.classes.toggle("arrow-"+e,t===r.substr(0,1))}),"cr"===r?(n.classes.toggle("arrow-left",!0),n.classes.toggle("arrow-right",!1)):"cl"===r?(n.classes.toggle("arrow-left",!0),n.classes.toggle("arrow-right",!0)):m.each({l:"left",r:"right"},function(e,t){n.classes.toggle("arrow-"+e,t===r.substr(1,1))})}function u(e,t){return 0<(t=e.items().filter("#"+t)).length&&(t[0].show(),e.reflow(),!0)}var d,f,i=["bold","italic","|","quicklink","h2","h3","blockquote"],o=["quickimage","quicktable"],h=function(){d&&d.hide()};return{show:function(e,t,n,r){var i,o;d||((d=a(e,r)).renderTo(document.body).reflow().moveTo(n.x,n.y),e.nodeChanged()),i=t,o=e,r=n,s(t=d),t.items().hide(),u(t,i)?(e=x.getHandlerOr(o,"inline_toolbar_position_handler",w.defaultHandler),n=b.getContentAreaRect(o),o=g.getRect(t.getEl()),(i="insert"===i?w.calcInsert(r,n,o):w.calc(r,n,o))?(o=i.rect,f=r,l(t,w.userConstrain(e,r,n,o)),c(t,i.position)):h(t)):h(t)},showForm:function(e,t){var n,r;d&&(d.items().hide(),u(d,t)?(s(d),d.items().hide(),u(d,t),r=x.getHandlerOr(e,"inline_toolbar_position_handler",w.defaultHandler),n=b.getContentAreaRect(e),t=g.getRect(d.getEl()),(e=w.calc(f,n,t))&&(t=e.rect,l(d,w.userConstrain(r,f,n,t)),c(d,e.position))):h(d))},inForm:function(){return d&&d.visible()&&0<d.items().filter("form:visible").length},hide:h,focus:function(){d&&d.find("toolbar:visible").eq(0).each(function(e){e.focus(!0)})},remove:function(){d&&(d.remove(),d=null)}}}}),n("k",["o"],function(e){return{blobToBase64:function(n){return new e(function(e){var t=new FileReader;t.onloadend=function(){e(t.result.split(",")[1])},t.readAsDataURL(n)})}}}),n("l",["o"],function(e){return{pickFile:function(){return new e(function(t){var e=document.createElement("input");e.type="file",e.style.position="fixed",e.style.left=0,e.style.top=0,e.style.opacity=.001,document.body.appendChild(e),e.onchange=function(e){t(Array.prototype.slice.call(e.target.files))},e.click(),e.parentNode.removeChild(e)})}}}),n("4",["3","k","l","m"],function(e,r,t,i){function o(t){for(var e=1;e<6;e++){var n="h"+e;t.addButton(n,{text:n.toUpperCase(),tooltip:"Heading "+e,stateSelector:n,onclick:function(e){return function(){i.formatBlock(t,e)}}(n),onPostRender:function(){this.getEl().firstChild.firstChild.style.fontWeight="bold"}})}}return{addToEditor:function(n,e){n.addButton("quicklink",{icon:"link",tooltip:"Insert/Edit link",stateSelector:"a[href]",onclick:function(){e.showForm(n,"quicklink")}}),n.addButton("quickimage",{icon:"image",tooltip:"Insert image",onclick:function(){t.pickFile().then(function(e){var t=e[0];r.blobToBase64(t).then(function(e){i.insertBlob(n,e,t)})})}}),n.addButton("quicktable",{icon:"table",tooltip:"Insert table",onclick:function(){e.hide(),i.insertTable(n,2,2)}}),o(n)}}}),e("n",tinymce.EditorManager),n("5",["n","e"],function(a,s){return{load:function(r,i){var e,t,n,o=r.settings,e=o.skin_url?(t=r,n=o.skin_url,t.documentBaseURI.toAbsolute(n)):(o=o.skin,e=a.baseURL+"/skins/",o?e+o:e+"lightgray");s.styleSheetLoader.load(e+"/skin.min.css",function(){function e(){t.fire("SkinLoaded"),n()}var t,n;n=i,(t=r).initialized?e():t.on("init",e)}),r.contentCSS.push(e+"/content.inline.min.css")}}}),n("8",[],function(){return{match:function(e,t){for(var n=0;n<t.length;n++){var r=(0,t[n])(e);if(r)return r}return null},result:function(e,t){return{id:e,rect:t}}}}),n("6",["8","h"],function(o,a){return{textSelection:function(t){return function(e){return e.selection.isCollapsed()?null:o.result(t,a.getSelectionRect(e))}},emptyTextBlock:function(r,i){return function(e){for(var t=e.schema.getTextBlockElements(),n=0;n<r.length;n++)if("TABLE"===r[n].nodeName)return null;for(n=0;n<r.length;n++)if(r[n].nodeName in t)return e.dom.isEmpty(r[n])?o.result(i,a.getSelectionRect(e)):null;return null}}}}),n("7",["8","h"],function(o,a){return{element:function(n,r){return function(e){for(var t=0;t<r.length;t++)if(r[t].predicate(n))return o.result(r[t].id,a.getElementRect(e,n));return null}},parent:function(r,i){return function(e){for(var t=0;t<r.length;t++)for(var n=0;n<i.length;n++)if(i[n].predicate(r[t]))return o.result(i[n].id,a.getElementRect(e,r[t]));return null}}}}),n("9",[],function(){var n=function(e){return e.reduce(function(e,t){return Array.isArray(t)?e.concat(n(t)):e.concat(t)},[])};return{flatten:n}}),n("b",["c"],function(t){function n(e,t){return{id:e,predicate:t}}return{create:n,fromContextToolbars:function(e){return t.map(e,function(e){return n(e.id,e.predicate)})}}}),n("0",["1","2","3","4","5","6","7","8","9","a","b"],function(e,u,n,r,t,d,s,f,i,o,l){function h(e){var t,n,r=e.contextToolbars;return i.flatten([r||[],(t=e,n="img",{predicate:function(e){return t.dom.is(e,n)},id:"image",items:"alignleft aligncenter alignright"})])}function m(o,a){function e(){var e,t,n,r=h(o),i=(i=r,n=(t=e=o).selection.getNode(),n=t.dom.getParents(n),i=l.fromContextToolbars(i),(i=f.match(e,[s.element(n[0],i),d.textSelection("text"),d.emptyTextBlock(n,"insert"),s.parent(n,i)]))&&i.rect?i:null);i?a.show(o,i.id,i.rect,r):a.hide()}return function(){o.removed||e()}}function a(l,c){return t.load(l,function(){var n,r,e,t,i,o,a,s;e=l,t=c,a=u.throttle(m(e,t),0),s=u.throttle((o=m(e,i=t),function(){i.inForm()||o()}),0),e.on("blur hide ObjectResizeStart",t.hide),e.on("click",a),e.on("nodeChange mouseup",s),e.on("ResizeEditor ResizeWindow keyup",a),e.on("remove",t.remove),e.shortcuts.add("Alt+F10","",t.focus),r=c,(n=l).shortcuts.remove("meta+k"),n.shortcuts.add("meta+k","",function(){var e=h(n),t=f.match(n,[d.textSelection("quicklink")]);t&&r.show(n,t.id,t.rect,e)})}),{}}return e.add("inlite",function(e){var t=new n;r.addToEditor(e,t);return{renderUI:function(){return e.inline?a(e,t):function(e){throw new Error(e)}("inlite theme only supports inline mode.")}}}),function(){}}),l("0")()}(),tinymce.ThemeManager.add("modern",function(h){function c(e,t){var r,i=[];if(e)return f(e.split(/[ ,]/),function(o){function e(){function e(i){return function(e,t){for(var n,r=t.parents.length;r--&&("OL"!=(n=t.parents[r].nodeName)&&"UL"!=n););o.active(e&&n==i)}}var t=h.selection;"bullist"==n&&t.selectorChanged("ul > li",e("UL")),"numlist"==n&&t.selectorChanged("ol > li",e("OL")),o.settings.stateSelector&&t.selectorChanged(o.settings.stateSelector,function(e){o.active(e)},!0),o.settings.disabledStateSelector&&t.selectorChanged(o.settings.disabledStateSelector,function(e){o.disabled(e)})}var n;"|"==o?r=null:$.has(o)?(o={type:o,size:t},i.push(o),r=null):(r||(r={type:"buttongroup",items:[]},i.push(r)),h.buttons[o]&&(n=o,(o="function"==typeof(o=h.buttons[n])?o():o).type=o.type||"button",o.size=t,o=$.create(o),r.items.push(o),h.initialized?e():h.on("init",e)))}),{type:"toolbar",layout:"flow",items:i}}function m(t){function e(e){return e&&(n.push(c(e,t)),1)}var n=[];if(tinymce.isArray(x.toolbar)){if(0===x.toolbar.length)return;tinymce.each(x.toolbar,function(e,t){x["toolbar"+(t+1)]=e}),delete x.toolbar}for(var r=1;r<10&&e(x["toolbar"+r]);r++);return n.length||!1===x.toolbar||e(x.toolbar||i),n.length?{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}:void 0}function p(){function s(e){return"|"==e?{text:"|"}:h.menuItems[e]}var e,t=[],n=[];if(x.menu)for(e in x.menu)n.push(e);else for(e in l)n.push(e);for(var r="string"==typeof x.menubar?x.menubar.split(/[ ,]/):n,i=0;i<r.length;i++){var o=r[i];(o=function(t){var e,n,r,i,o=tinymce.makeMap((x.removed_menuitems||"").split(/[ ,]/));if(x.menu?(n=x.menu[t],i=!0):n=l[t],n){e={text:n.title},r=[],f((n.items||"").split(/[ ,]/),function(e){s(e)&&!o[e]&&r.push(s(e))}),i||f(h.menuItems,function(e){e.context==t&&("before"==e.separator&&r.push({text:"|"}),e.prependToContext?r.unshift(e):r.push(e),"after"==e.separator&&r.push({text:"|"}))});for(var a=0;a<r.length;a++)"|"==r[a].text&&(0!==a&&a!=r.length-1||r.splice(a,1));if(e.menu=r,!e.menu.length)return null}return e}(o))&&t.push(o)}return t}function g(t){function e(e){e=t.find(e)[0];e&&e.focus(!0)}h.shortcuts.add("Alt+F9","",function(){e("menubar")}),h.shortcuts.add("Alt+F10","",function(){e("toolbar")}),h.shortcuts.add("Alt+F11","",function(){e("elementpath")}),t.on("cancel",function(){h.focus()})}function v(e,t){function n(e){return{width:e.clientWidth,height:e.clientHeight}}var r=h.getContainer(),i=h.getContentAreaContainer().firstChild,o=n(r),a=n(i);null!==e&&(e=Math.max(x.min_width||100,e),e=Math.min(x.max_width||65535,e),C.setStyle(r,"width",e+(o.width-a.width)),C.setStyle(i,"width",e)),t=Math.max(x.min_height||100,t),t=Math.min(x.max_height||65535,t),C.setStyle(i,"height",t),h.fire("ResizeEditor")}function y(){function o(){return h.contextToolbars||[]}function a(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}}function u(e,t,n,r,i){return i=a({x:e,y:t,w:i.w,h:i.h}),i=x.inline_toolbar_position_handler?x.inline_toolbar_position_handler({elementRect:a(n),contentAreaRect:a(r),panelRect:i}):i}function d(e,t){e.moveTo(t.left,t.top)}function n(e){var t,n,r,i,o,a,s,l,c;h.removed||(e&&e.toolbar.panel?(r=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],(t=e.toolbar.panel).show(),s=e.element,l=tinymce.DOM.getPos(h.getContentAreaContainer()),c=h.dom.getRect(s),"BODY"==(s=h.dom.getRoot()).nodeName&&(c.x-=s.ownerDocument.documentElement.scrollLeft||s.scrollLeft,c.y-=s.ownerDocument.documentElement.scrollTop||s.scrollTop),c.x+=l.x,c.y+=l.y,s=c,l=tinymce.DOM.getRect(t.getEl()),c=tinymce.DOM.getRect(h.getContentAreaContainer()||h.getBody()),s.w=e.element.clientWidth,s.h=e.element.clientHeight,h.inline||(c.w=h.getDoc().documentElement.offsetWidth),h.selection.controlSelection.isResizable(e.element)&&s.w<25&&(s=S.inflate(s,0,8)),r=S.findBestRelativePosition(l,s,c,r),s=S.clamp(s,c),r?d(t,u((n=S.relativePosition(l,s,r)).x,n.y,s,c,l)):(c.h+=l.h,(s=S.intersect(c,s))?(r=S.findBestRelativePosition(l,s,c,["bc-tc","bl-tl","br-tr"]))?d(t,u((n=S.relativePosition(l,s,r)).x,n.y,s,c,l)):d(t,u(s.x,s.y,s,c,l)):t.hide()),i=t,a=function(e,t){return e===t},o=(o=r)?o.substr(0,2):"",f({t:"down",b:"up"},function(e,t){i.classes.toggle("arrow-"+e,a(t,o.substr(0,1)))}),f({l:"left",r:"right"},function(e,t){i.classes.toggle("arrow-"+e,a(t,o.substr(1,1)))})):f(h.contextToolbars,function(e){e.panel&&e.panel.hide()}))}function r(){tinymce.util.Delay.requestAnimationFrame(function(){h.selection&&n(s(h.selection.getNode()))})}function t(e){var t;e.toolbar.panel?e.toolbar.panel.show():(l||(l=h.selection.getScrollContainer()||h.getWin(),tinymce.$(l).on("scroll",r),h.on("remove",function(){tinymce.$(l).off("scroll")})),t=$.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:c(e.toolbar.items),oncancel:function(){h.focus()}}),(e.toolbar.panel=t).renderTo(document.body).reflow()),n(e)}function i(){tinymce.each(o(),function(e){e.panel&&e.panel.hide()})}function s(e){for(var t,n=o(),r=h.$(e).parents().add(e),i=r.length-1;0<=i;i--)for(t=n.length-1;0<=t;t--)if(n[t].predicate(r[i]))return{toolbar:n[t],element:r[i]};return null}var l;h.on("click keyup setContent",function(e){"setcontent"==e.type&&!e.selection||tinymce.util.Delay.setEditorTimeout(h,function(){var e=s(h.selection.getNode());e?(i(),t(e)):i()})}),h.on("blur hide",i),h.on("ObjectResizeStart",function(){var e=s(h.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.hide()}),h.on("nodeChange ResizeEditor ResizeWindow",r),h.on("remove",function(){tinymce.each(o(),function(e){e.panel&&e.panel.remove()}),h.contextToolbars={}}),h.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var e=s(h.selection.getNode());e&&e.toolbar.panel&&e.toolbar.panel.items()[0].focus()})}function b(e){return function(){e.initialized?e.fire("SkinLoaded"):e.on("init",function(){e.fire("SkinLoaded")})}}var w=this,x=h.settings,$=tinymce.ui.Factory,f=tinymce.each,C=tinymce.DOM,S=tinymce.geom.Rect,k=tinymce.ui.FloatPanel,l={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},i="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";w.renderUI=function(e){var t,n,r,i,o,a,s,l=!1!==x.skin&&(x.skin||"lightgray");return l&&(t=(t=x.skin_url)?h.documentBaseURI.toAbsolute(t):tinymce.baseURL+"/skins/"+l,tinymce.Env.documentMode<=7?e.skinUiCss=t+"/skin.ie7.min.css":e.skinUiCss=t+"/skin.min.css",h.contentCSS.push(t+"/content"+(h.inline?".inline":"")+".min.css")),h.on("ProgressState",function(e){w.throbber=w.throbber||new tinymce.ui.Throbber(w.panel.getEl("body")),e.state?w.throbber.show(e.time):w.throbber.hide()}),x.inline?(o=e,x.fixed_toolbar_container&&(s=C.select(x.fixed_toolbar_container)[0]),x.content_editable=!0,h.on("focus",function(){o.skinUiCss?tinymce.DOM.styleSheetLoader.load(o.skinUiCss,f,f):f()}),h.on("blur hide",d),h.on("remove",function(){a&&(a.remove(),a=null)}),o.skinUiCss&&tinymce.DOM.styleSheetLoader.load(o.skinUiCss,b(h)),{}):((e=e).skinUiCss&&tinymce.DOM.styleSheetLoader.load(e.skinUiCss,b(h)),n=w.panel=$.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[!1===x.menubar?null:{type:"menubar",border:"0 0 1 0",items:p()},m(x.toolbar_items_size),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]}),!1!==x.resize&&(r={type:"resizehandle",direction:x.resize,onResizeStart:function(){var e=h.getContentAreaContainer().firstChild;i={width:e.clientWidth,height:e.clientHeight}},onResize:function(e){"both"==x.resize?v(i.width+e.deltaX,i.height+e.deltaY):v(null,i.height+e.deltaY)}}),!1!==x.statusbar&&n.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:h},r]}),h.fire("BeforeRenderUI"),h.on("SwitchMode",function(e){"readonly"==e.mode?n.find("*").disabled(!0):n.find("*").disabled(!1)}),n.renderBefore(e.targetNode).reflow(),x.readonly&&h.setMode("readonly"),x.width&&tinymce.DOM.setStyle(n.getEl(),"width",x.width),h.on("remove",function(){n.remove(),n=null}),g(n),y(),{iframeContainer:n.find("#iframe")[0].getEl(),editorContainer:n.getEl()});function c(){var e,t,n,r,i;a&&a.moveRel&&a.visible()&&!a._fixed&&(n=h.selection.getScrollContainer(),e=h.getBody(),i=r=0,n&&(t=C.getPos(e),n=C.getPos(n),r=Math.max(0,n.x-t.x),i=Math.max(0,n.y-t.y)),a.fixed(!1).moveRel(e,h.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(r,i))}function u(){a&&(a.show(),c(),C.addClass(h.getBody(),"mce-edit-focus"))}function d(){a&&(a.hide(),k.hideAll(),C.removeClass(h.getBody(),"mce-edit-focus"))}function f(){return a?void(a.visible()||u()):(a=w.panel=$.create({type:s?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!s,border:1,items:[!1===x.menubar?null:{type:"menubar",border:"0 0 1 0",items:p()},m(x.toolbar_items_size)]}),h.fire("BeforeRenderUI"),a.renderTo(s||document.body).reflow(),g(a),u(),y(),h.on("nodeChange",c),h.on("activate",u),h.on("deactivate",d),void h.nodeChanged())}},w.resizeTo=v,w.resizeBy=function(e,t){var n=h.getContentAreaContainer();w.resizeTo(n.clientWidth+e,n.clientHeight+t)}}),tinymce.PluginManager.add("advlist",function(a){function e(e,t){var n=[];return tinymce.each(t.split(/[ ,]/),function(e){n.push({text:e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()}),data:"default"==e?"":e})}),n}function t(i,o){a.undoManager.transact(function(){var e,t,n=a.dom,r=a.selection;(t=n.getParent(r.getNode(),"ol,ul"))&&t.nodeName==i&&!1!==o||(e={"list-style-type":o||""},a.execCommand("UL"==i?"InsertUnorderedList":"InsertOrderedList",!1,e)),o=!1===o?s[i]:o,s[i]=o,(t=n.getParent(r.getNode(),"ol,ul"))&&(n.setStyle(t,"listStyleType",o||null),t.removeAttribute("data-mce-style")),a.focus()})}function n(e){var t=a.dom.getStyle(a.dom.getParent(a.selection.getNode(),"ol,ul"),"listStyleType")||"";e.control.items().each(function(e){e.active(e.settings.data===t)})}var s={},r=e(0,a.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman")),i=e(0,a.getParam("advlist_bullet_styles","default,circle,disc,square"));a.addButton("numlist",{type:"splitbutton",tooltip:"Numbered list",menu:r,onshow:n,onselect:function(e){t("OL",e.control.settings.data)},onclick:function(){t("OL",!1)}}),a.addButton("bullist",{type:"splitbutton",tooltip:"Bullet list",menu:i,onshow:n,onselect:function(e){t("UL",e.control.settings.data)},onclick:function(){t("UL",!1)}})}),tinymce.PluginManager.add("anchor",function(r){function e(){var t=r.selection.getNode(),e="",n="A"==t.tagName&&""===r.dom.getAttrib(t,"href");n&&(e=t.name||t.id||""),r.windowManager.open({title:"Anchor",body:{type:"textbox",name:"name",size:40,label:"Name",value:e},onsubmit:function(e){e=e.data.name;n?t.id=e:(r.selection.collapse(!0),r.execCommand("mceInsertContent",!1,r.dom.createHTML("a",{id:e})))}})}r.addCommand("mceAnchor",e),r.addButton("anchor",{icon:"anchor",tooltip:"Anchor",onclick:e,stateSelector:"a:not([href])"}),r.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",onclick:e})}),tinymce.PluginManager.add("autolink",function(t){function n(e,t,n){function r(e,t){var n;return t<0&&(t=0),t=3==e.nodeType&&(n=e.data.length)<t?n:t}function i(e,t){1!=e.nodeType||e.hasChildNodes()?a.setStart(e,r(e,t)):a.setStartBefore(e)}function o(e,t){1!=e.nodeType||e.hasChildNodes()?a.setEnd(e,r(e,t)):a.setEndAfter(e)}var a,s,l,c,u,d;if("A"!=e.selection.getNode().tagName){if((a=e.selection.getRng(!0).cloneRange()).startOffset<5){if(!(c=a.endContainer.previousSibling)){if(!a.endContainer.firstChild||!a.endContainer.firstChild.nextSibling)return;c=a.endContainer.firstChild.nextSibling}if(i(c,u=c.length),o(c,u),a.endOffset<5)return;s=a.endOffset,l=c}else{if(3!=(l=a.endContainer).nodeType&&l.firstChild){for(;3!=l.nodeType&&l.firstChild;)l=l.firstChild;3==l.nodeType&&(i(l,0),o(l,l.nodeValue.length))}s=1==a.endOffset?2:a.endOffset-1-t}for(c=s;i(l,2<=s?s-2:0),o(l,1<=s?s-1:0),--s,d=a.toString()," "!=d&&""!==d&&160!=d.charCodeAt(0)&&0<=s-2&&d!=n;);a.toString()==n||160==a.toString().charCodeAt(0)?(i(l,s),o(l,c),s+=1):(0===a.startOffset?i(l,0):i(l,s),o(l,c)),"."==(t=a.toString()).charAt(t.length-1)&&o(l,c-1),(c=(t=a.toString()).match(f))&&("www."==c[1]?c[1]="http://www.":/@$/.test(c[1])&&!/^mailto:/.test(c[1])&&(c[1]="mailto:"+c[1]),t=e.selection.getBookmark(),e.selection.setRng(a),e.execCommand("createlink",!1,c[1]+c[2]),e.selection.moveToBookmark(t),e.nodeChanged())}}var e,f=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i;return t.settings.autolink_pattern&&(f=t.settings.autolink_pattern),t.on("keydown",function(e){return 13==e.keyCode?void n(t,-1,""):void 0}),tinymce.Env.ie?void t.on("focus",function(){if(!e){e=!0;try{t.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}):(t.on("keypress",function(e){return 41==e.keyCode?void n(t,-1,"("):void 0}),void t.on("keyup",function(e){return 32==e.keyCode?void n(t,0,""):void 0}))}),tinymce.PluginManager.add("autoresize",function(d){function f(e){var t,n,r,i,o,a,s,l,c,u=tinymce.DOM;(c=d.getDoc())&&(t=c.body,n=c.documentElement,r=h.autoresize_min_height,!t||e&&"setcontent"===e.type&&e.initial||d.plugins.fullscreen&&d.plugins.fullscreen.isFullscreen()?t&&n&&(t.style.overflowY="auto",n.style.overflowY="auto"):(i=d.dom.getStyle(t,"margin-top",!0),o=d.dom.getStyle(t,"margin-bottom",!0),a=d.dom.getStyle(t,"padding-top",!0),s=d.dom.getStyle(t,"padding-bottom",!0),l=d.dom.getStyle(t,"border-top-width",!0),c=d.dom.getStyle(t,"border-bottom-width",!0),c=t.offsetHeight+parseInt(i,10)+parseInt(o,10)+parseInt(a,10)+parseInt(s,10)+parseInt(l,10)+parseInt(c,10),(c=isNaN(c)||c<=0?tinymce.Env.ie?t.scrollHeight:tinymce.Env.webkit&&0===t.clientHeight?0:t.offsetHeight:c)>h.autoresize_min_height&&(r=c),h.autoresize_max_height&&c>h.autoresize_max_height?(r=h.autoresize_max_height,t.style.overflowY="auto",n.style.overflowY="auto"):(t.style.overflowY="hidden",n.style.overflowY="hidden",t.scrollTop=0),r!==m&&(t=r-m,u.setStyle(d.iframeElement,"height",r+"px"),m=r,tinymce.isWebKit&&t<0&&f(e))))}function r(e,t,n){tinymce.util.Delay.setEditorTimeout(d,function(){f({}),e--?r(e,t,n):n&&n()},t)}var h=d.settings,m=0;d.settings.inline||(h.autoresize_min_height=parseInt(d.getParam("autoresize_min_height",d.getElement().offsetHeight),10),h.autoresize_max_height=parseInt(d.getParam("autoresize_max_height",0),10),d.on("init",function(){var e=d.getParam("autoresize_overflow_padding",1),t=d.getParam("autoresize_bottom_margin",50);!1!==e&&d.dom.setStyles(d.getBody(),{paddingLeft:e,paddingRight:e}),!1!==t&&d.dom.setStyles(d.getBody(),{paddingBottom:t})}),d.on("nodechange setcontent keyup FullscreenStateChanged",f),d.getParam("autoresize_on_init",!0)&&d.on("init",function(){r(20,100,function(){r(5,1e3)})}),d.addCommand("mceAutoResize",f))}),tinymce._beforeUnloadHandler=function(){var t;return tinymce.each(tinymce.editors,function(e){e.plugins.autosave&&e.plugins.autosave.storeDraft(),!t&&e.isDirty()&&e.getParam("autosave_ask_before_unload",!0)&&(t=e.translate("You have unsaved changes are you sure you want to navigate away?"))}),t},tinymce.PluginManager.add("autosave",function(n){function e(e,t){return((e=/^(\d+)([ms]?)$/.exec(""+(e||t)))[2]?{s:1e3,m:6e4}[e[2]]:1)*parseInt(e,10)}function t(){var e=parseInt(d.getItem(f+"time"),10)||0;return!((new Date).getTime()-e>u.autosave_retention)||(r(!1),!1)}function r(e){d.removeItem(f+"draft"),d.removeItem(f+"time"),!1!==e&&n.fire("RemoveDraft")}function i(){!l()&&n.isDirty()&&(d.setItem(f+"draft",n.getContent({format:"raw",no_events:!0})),d.setItem(f+"time",(new Date).getTime()),n.fire("StoreDraft"))}function o(){t()&&(n.setContent(d.getItem(f+"draft"),{format:"raw"}),n.fire("RestoreDraft"))}function a(){var e=this;e.disabled(!t()),n.on("StoreDraft RestoreDraft RemoveDraft",function(){e.disabled(!t())}),c||(setInterval(function(){n.removed||i()},u.autosave_interval),c=!0)}function s(){n.undoManager.beforeChange(),o(),r(),n.undoManager.add()}function l(e){var t=n.settings.forced_root_block;return""===(e=tinymce.trim(void 0===e?n.getBody().innerHTML:e))||new RegExp("^<"+t+"[^>]*>(( |&nbsp;|[ \t]|<br[^>]*>)+?|)</"+t+">|<br>$","i").test(e)}var c,u=n.settings,d=tinymce.util.LocalStorage,f=u.autosave_prefix||"tinymce-autosave-{path}{query}-{id}-";f=(f=(f=f.replace(/\{path\}/g,document.location.pathname)).replace(/\{query\}/g,document.location.search)).replace(/\{id\}/g,n.id),u.autosave_interval=e(u.autosave_interval,"30s"),u.autosave_retention=e(u.autosave_retention,"20m"),n.addButton("restoredraft",{title:"Restore last draft",onclick:s,onPostRender:a}),n.addMenuItem("restoredraft",{text:"Restore last draft",onclick:s,onPostRender:a,context:"file"}),!1!==n.settings.autosave_restore_when_empty&&(n.on("init",function(){t()&&l()&&o()}),n.on("saveContent",function(){r()})),window.onbeforeunload=tinymce._beforeUnloadHandler,this.hasDraft=t,this.storeDraft=i,this.restoreDraft=o,this.removeDraft=r,this.isEmpty=l}),tinymce.create("tinymce.plugins.BBCodePlugin",{init:function(e){var t=this,n=e.getParam("bbcode_dialect","punbb").toLowerCase();e.on("beforeSetContent",function(e){e.content=t["_"+n+"_bbcode2html"](e.content)}),e.on("postProcess",function(e){e.set&&(e.content=t["_"+n+"_bbcode2html"](e.content)),e.get&&(e.content=t["_"+n+"_html2bbcode"](e.content))})},getInfo:function(){return{longname:"BBCode Plugin",author:"Ephox Corp",authorurl:"http://www.tinymce.com",infourl:"http://www.tinymce.com/wiki.php/Plugin:bbcode"}},_punbb_html2bbcode:function(n){function e(e,t){n=n.replace(e,t)}return n=tinymce.trim(n),e(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),e(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),e(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),e(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),e(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),e(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),e(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),e(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),e(/<font>(.*?)<\/font>/gi,"$1"),e(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),e(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),e(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),e(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),e(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),e(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),e(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),e(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),e(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),e(/<\/(strong|b)>/gi,"[/b]"),e(/<(strong|b)>/gi,"[b]"),e(/<\/(em|i)>/gi,"[/i]"),e(/<(em|i)>/gi,"[i]"),e(/<\/u>/gi,"[/u]"),e(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),e(/<u>/gi,"[u]"),e(/<blockquote[^>]*>/gi,"[quote]"),e(/<\/blockquote>/gi,"[/quote]"),e(/<br \/>/gi,"\n"),e(/<br\/>/gi,"\n"),e(/<br>/gi,"\n"),e(/<p>/gi,""),e(/<\/p>/gi,"\n"),e(/&nbsp;|\u00a0/gi," "),e(/&quot;/gi,'"'),e(/&lt;/gi,"<"),e(/&gt;/gi,">"),e(/&amp;/gi,"&"),n},_punbb_bbcode2html:function(n){function e(e,t){n=n.replace(e,t)}return n=tinymce.trim(n),e(/\n/gi,"<br />"),e(/\[b\]/gi,"<strong>"),e(/\[\/b\]/gi,"</strong>"),e(/\[i\]/gi,"<em>"),e(/\[\/i\]/gi,"</em>"),e(/\[u\]/gi,"<u>"),e(/\[\/u\]/gi,"</u>"),e(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),e(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),e(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),e(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),e(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),e(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),n}}),tinymce.PluginManager.add("bbcode",tinymce.plugins.BBCodePlugin),tinymce.PluginManager.add("charmap",function(u){function n(e){return r(e)?[].concat((t=e,tinymce.util.Tools.grep(t,function(e){return r(e)&&2==e.length}))):"function"==typeof e?e():[];var t}function d(){return e=[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]],(t=u.settings).charmap&&(e=n(t.charmap)),t.charmap_append?[].concat(e).concat(n(t.charmap_append)):e;var e,t}function f(e){u.fire("insertCustomChar",{chr:e}).chr,u.execCommand("mceInsertContent",!1,e)}var r=tinymce.util.Tools.isArray;return u.addCommand("mceShowCharmap",function(){function n(e){for(;e;){if("TD"==e.nodeName)return e;e=e.parentNode}}for(var e,t='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',r=d(),i=Math.min(r.length,25),o=Math.ceil(r.length/i),a=0;a<o;a++){for(t+="<tr>",e=0;e<i;e++){var s=a*i+e;s<r.length?t+='<td title="'+(s=r[s])[1]+'"><div tabindex="-1" title="'+s[1]+'" role="button">'+(s?String.fromCharCode(parseInt(s[0],10)):"&nbsp;")+"</div></td>":t+="<td />"}t+="</tr>"}var l={type:"container",html:t+="</tbody></table>",onclick:function(e){var t=e.target;/^(TD|DIV)$/.test(t.nodeName)&&n(t).firstChild&&(f(tinymce.trim(t.innerText||t.textContent)),e.ctrlKey||c.close())},onmouseover:function(e){e=n(e.target);e&&e.firstChild?(c.find("#preview").text(e.firstChild.firstChild.data),c.find("#previewTitle").text(e.title)):(c.find("#preview").text(" "),c.find("#previewTitle").text(" "))}},c=u.windowManager.open({title:"Special character",spacing:10,padding:10,items:[l,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"label",name:"previewTitle",text:" ",style:"text-align: center",border:1,minWidth:140,minHeight:80}]}],buttons:[{text:"Close",onclick:function(){c.close()}}]})}),u.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),u.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"}),{getCharMap:d,insertChar:f}}),tinymce.PluginManager.add("code",function(t){function e(){t.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:t.getParam("code_dialog_width",600),minHeight:t.getParam("code_dialog_height",Math.min(tinymce.DOM.getViewPort().h-200,500)),spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(e){t.focus(),t.undoManager.transact(function(){t.setContent(e.data.code)}),t.selection.setCursorLocation(),t.nodeChanged()}}).find("#code").value(t.getContent({source_view:!0}))}t.addCommand("mceCodeEditor",e),t.addButton("code",{icon:"code",tooltip:"Source code",onclick:e}),t.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:e})}),function(s){"use strict";function r(e,t){for(var n,r=[],i=0;i<e.length;++i){if(!(n=l[e[i]]||function(e){for(var t=s,n=e.split(/[.\/]/),r=0;r<n.length;++r){if(!t[n[r]])return;t=t[n[r]]}return t}(e[i])))throw"module definition dependecy not found: "+e[i];r.push(n)}t.apply(null,r)}function e(e,t,n){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(void 0===t)throw"invalid module definition, dependencies must be specified";if(void 0===n)throw"invalid module definition, definition function must be specified";r(t,function(){l[e]=n.apply(null,arguments)})}var l={};e("tinymce/codesampleplugin/Prism",[],function(){var l,b,a,e={},c=void 0!==e?e:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},r=(l=/\blang(?:uage)?-(?!\*)(\w+)\b/i,(a=(b=c.Prism={util:{encode:function(e){return e instanceof a?new a(e.type,b.util.encode(e.content),e.alias):"Array"===b.util.type(e)?e.map(b.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){switch(b.util.type(e)){case"Object":var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=b.util.clone(e[t]));return n;case"Array":return e.map&&e.map(function(e){return b.util.clone(e)})}return e}},languages:{extend:function(e,t){var n,r=b.util.clone(b.languages[e]);for(n in t)r[n]=t[n];return r},insertBefore:function(n,e,t,r){var i=(r=r||b.languages)[n];if(2==arguments.length){for(var o in t=e)t.hasOwnProperty(o)&&(i[o]=t[o]);return i}var a,s={};for(a in i)if(i.hasOwnProperty(a)){if(a==e)for(var o in t)t.hasOwnProperty(o)&&(s[o]=t[o]);s[a]=i[a]}return b.languages.DFS(b.languages,function(e,t){t===r[n]&&e!=n&&(this[e]=s)}),r[n]=s},DFS:function(e,t,n){for(var r in e)e.hasOwnProperty(r)&&(t.call(e,r,e[r],n||r),"Object"===b.util.type(e[r])?b.languages.DFS(e[r],t):"Array"===b.util.type(e[r])&&b.languages.DFS(e[r],t,r))}},plugins:{},highlightAll:function(e,t){for(var n,r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),i=0;n=r[i++];)b.highlightElement(n,!0===e,t)},highlightElement:function(e,t,n){for(var r,i,o=e;o&&!l.test(o.className);)o=o.parentNode;o&&(r=(o.className.match(l)||[,""])[1],i=b.languages[r]),e.className=e.className.replace(l,"").replace(/\s+/g," ")+" language-"+r,o=e.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(l,"").replace(/\s+/g," ")+" language-"+r);var a=e.textContent,s={element:e,language:r,grammar:i,code:a};a&&i?(b.hooks.run("before-highlight",s),t&&c.Worker?((t=new Worker(b.filename)).onmessage=function(e){s.highlightedCode=e.data,b.hooks.run("before-insert",s),s.element.innerHTML=s.highlightedCode,n&&n.call(s.element),b.hooks.run("after-highlight",s),b.hooks.run("complete",s)},t.postMessage(JSON.stringify({language:s.language,code:s.code,immediateClose:!0}))):(s.highlightedCode=b.highlight(s.code,s.grammar,s.language),b.hooks.run("before-insert",s),s.element.innerHTML=s.highlightedCode,n&&n.call(e),b.hooks.run("after-highlight",s),b.hooks.run("complete",s))):b.hooks.run("complete",s)},highlight:function(e,t,n){t=b.tokenize(e,t);return a.stringify(b.util.encode(t),n)},tokenize:function(e,t,n){var r=b.Token,i=[e],o=t.rest;if(o){for(var a in o)t[a]=o[a];delete t.rest}e:for(var a in t)if(t.hasOwnProperty(a)&&t[a])for(var s=t[a],s="Array"===b.util.type(s)?s:[s],l=0;l<s.length;++l)for(var c=(h=s[l]).inside,u=!!h.lookbehind,d=0,f=h.alias,h=h.pattern||h,m=0;m<i.length;m++){var p,g,v,y=i[m];if(i.length>e.length)break e;y instanceof r||(h.lastIndex=0,(v=h.exec(y))&&(u&&(d=v[1].length),g=(p=v.index-1+d)+(v=v[0].slice(d)).length,p=y.slice(0,p+1),y=y.slice(g+1),g=[m,1],p&&g.push(p),v=new r(a,c?b.tokenize(v,c):v,f),g.push(v),y&&g.push(y),Array.prototype.splice.apply(i,g)))}return i},hooks:{all:{},add:function(e,t){var n=b.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=b.hooks.all[e];if(n&&n.length)for(var r,i=0;r=n[i++];)r(t)}}}).Token=function(e,t,n){this.type=e,this.content=t,this.alias=n}).stringify=function(t,n,e){if("string"==typeof t)return t;if("Array"===b.util.type(t))return t.map(function(e){return a.stringify(e,n,t)}).join("");var r={type:t.type,content:a.stringify(t.content,n,e),tag:"span",classes:["token",t.type],attributes:{},language:n,parent:e};"comment"==r.type&&(r.attributes.spellcheck="true"),t.alias&&(e="Array"===b.util.type(t.alias)?t.alias:[t.alias],Array.prototype.push.apply(r.classes,e)),b.hooks.run("wrap",r);var i,o="";for(i in r.attributes)o+=(o?" ":"")+i+'="'+(r.attributes[i]||"")+'"';return"<"+r.tag+' class="'+r.classes.join(" ")+'" '+o+">"+r.content+"</"+r.tag+">"},c.document?void 0:(c.addEventListener&&c.addEventListener("message",function(e){var t=JSON.parse(e.data),n=t.language,e=t.code,t=t.immediateClose;c.postMessage(b.highlight(e,b.languages[n],n)),t&&c.close()},!1),c.Prism));return"undefined"!=typeof module&&module.exports&&(module.exports=r),"undefined"!=typeof global&&(global.Prism=r),r.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[^\s>\/=.]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},r.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),r.languages.xml=r.languages.markup,r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},r.languages.css.atrule.inside.rest=r.util.clone(r.languages.css),r.languages.markup&&(r.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/i,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/i,inside:r.languages.markup.tag.inside},rest:r.languages.css},alias:"language-css"}}),r.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:r.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:r.languages.css}},alias:"language-css"}},r.languages.markup.tag)),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),r.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}}),r.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}}}),r.languages.markup&&r.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:r.languages.markup.tag.inside},rest:r.languages.javascript},alias:"language-javascript"}}),r.languages.js=r.languages.javascript,r.languages.c=r.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/\-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|?\||[~^%?*\/]/,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)[ful]*\b/i}),r.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+([^\r\n\\]|\\.|\\(?:\r\n?|\n))*/im,lookbehind:!0,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(<.+?>|("|')(\\?.)+?\3)/,lookbehind:!0}}}}),delete r.languages.c["class-name"],delete r.languages.c.boolean,r.languages.csharp=r.languages.extend("clike",{keyword:/\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/,string:[/@("|')(\1\1|\\\1|\\?(?!\1)[\s\S])*\1/,/("|')(\\?.)*?\1/],number:/\b-?(0x[\da-f]+|\d*\.?\d+)\b/i}),r.languages.insertBefore("csharp","keyword",{preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0}}),r.languages.cpp=r.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,boolean:/\b(true|false)\b/,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/}),r.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)[a-z0-9_]+/i,lookbehind:!0}}),r.languages.java=r.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:!0}}),r.languages.php=r.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\w\W]*?\*\/|\/\/.*)/,lookbehind:!0}}),r.languages.insertBefore("php","class-name",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:!0,alias:"comment"}}),r.languages.insertBefore("php","keyword",{delimiter:/\?>|<\?(?:php)?/i,variable:/\$\w+\b/i,package:{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:!0,inside:{punctuation:/\\/}}}),r.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:!0}}),r.languages.markup&&(r.hooks.add("before-highlight",function(t){"php"===t.language&&(t.tokenStack=[],t.backupCode=t.code,t.code=t.code.replace(/(?:<\?php|<\?)[\w\W]*?(?:\?>)/gi,function(e){return t.tokenStack.push(e),"{{{PHP"+t.tokenStack.length+"}}}"}))}),r.hooks.add("before-insert",function(e){"php"===e.language&&(e.code=e.backupCode,delete e.backupCode)}),r.hooks.add("after-highlight",function(e){if("php"===e.language){for(var t,n=0;t=e.tokenStack[n];n++)e.highlightedCode=e.highlightedCode.replace("{{{PHP"+(n+1)+"}}}",r.highlight(t,e.grammar,"php").replace(/\$/g,"$$$$"));e.element.innerHTML=e.highlightedCode}}),r.hooks.add("wrap",function(e){"php"===e.language&&"markup"===e.type&&(e.content=e.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>'))}),r.languages.insertBefore("php","comment",{markup:{pattern:/<[^?]\/?(.*?)>/,inside:r.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/})),r.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},string:/"""[\s\S]+?"""|'''[\s\S]+?'''|("|')(?:\\?.)*?\1/,function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)[a-z0-9_]+/i,lookbehind:!0},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/,boolean:/\b(?:True|False)\b/,number:/\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/},function(e){e.languages.ruby=e.languages.extend("clike",{comment:/#(?!\{[^\r\n]*?\}).*/,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/});var t={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:e.util.clone(e.languages.ruby)}};e.languages.insertBefore("ruby","keyword",{regex:[{pattern:/%r([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/,inside:{interpolation:t}},{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}],variable:/[@$]+[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/,symbol:/:[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.insertBefore("ruby","number",{builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.ruby.string=[{pattern:/%[qQiIwWxs]?([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\((?:[^()\\]|\\[\s\S])*\)/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\[(?:[^\[\]\\]|\\[\s\S])*\]/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?<(?:[^<>\\]|\\[\s\S])*>/,inside:{interpolation:t}},{pattern:/("|')(#\{[^}]+\}|\\(?:\r?\n|\r)|\\?.)*?\1/,inside:{interpolation:t}}]}(r),r}),e("tinymce/codesampleplugin/Utils",[],function(){return{isCodeSample:function(e){return e&&"PRE"==e.nodeName&&-1!==e.className.indexOf("language-")},trimArg:function(n){return function(e,t){return n(t)}}}}),e("tinymce/codesampleplugin/Dialog",["tinymce/dom/DOMUtils","tinymce/codesampleplugin/Utils","tinymce/codesampleplugin/Prism"],function(e,t,o){function a(e){e=e.selection.getNode();return t.isCodeSample(e)?e:null}var s=e.DOM;return{open:function(i){var e;i.windowManager.open({title:"Insert/Edit code sample",minWidth:Math.min(s.getViewPort().w,i.getParam("codesample_dialog_width",800)),minHeight:Math.min(s.getViewPort().h,i.getParam("codesample_dialog_height",650)),layout:"flex",direction:"column",align:"stretch",body:[{type:"listbox",name:"language",label:"Language",maxWidth:200,value:(e=a(e=i))?(e=e.className.match(/language-(\w+)/))?e[1]:"":"",values:i.settings.codesample_languages||[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}]},{type:"textbox",name:"code",multiline:!0,spellcheck:!1,ariaLabel:"Code view",flex:1,style:"direction: ltr; text-align: left",classes:"monospace",value:(e=a(e=i))?e.textContent:"",autofocus:!0}],onSubmit:function(e){var t,n,r;t=i,n=e.data.language,r=e.data.code,t.undoManager.transact(function(){var e=a(t);r=s.encode(r),e?(t.dom.setAttrib(e,"class","language-"+n),e.innerHTML=r,o.highlightElement(e),t.selection.select(e)):(t.insertContent('<pre id="__new" class="language-'+n+'">'+r+"</pre>"),t.selection.select(t.$("#__new").removeAttr("id")[0]))})}})}}}),e("tinymce/codesampleplugin/Plugin",["tinymce/Env","tinymce/PluginManager","tinymce/codesampleplugin/Prism","tinymce/codesampleplugin/Dialog","tinymce/codesampleplugin/Utils"],function(e,t,o,a,s){var l,c=s.trimArg;t.add("codesample",function(n,t){var r,i=n.$;e.ceFalse&&(n.on("PreProcess",function(e){i("pre[contenteditable=false]",e.node).filter(c(s.isCodeSample)).each(function(e,t){var n=i(t),r=t.textContent;n.attr("class",i.trim(n.attr("class"))),n.removeAttr("contentEditable"),n.empty().append(i("<code></code>").each(function(){this.textContent=r}))})}),n.on("SetContent",function(){var e=i("pre").filter(c(s.isCodeSample)).filter(function(e,t){return"false"!==t.contentEditable});e.length&&n.undoManager.transact(function(){e.each(function(e,t){i(t).find("br").each(function(e,t){t.parentNode.replaceChild(n.getDoc().createTextNode("\n"),t)}),t.contentEditable=!1,t.innerHTML=n.dom.encode(t.textContent),o.highlightElement(t),t.className=i.trim(t.className)})})}),n.addCommand("codesample",function(){a.open(n)}),n.addButton("codesample",{cmd:"codesample",title:"Insert/Edit code sample"}),n.on("init",function(){var e;n.inline&&l||!n.inline&&r||(n.inline?l=!0:r=!0,e=n.dom.create("link",{rel:"stylesheet",href:t+"/css/prism.css"}),n.getDoc().getElementsByTagName("head")[0].appendChild(e))}))})}),function(e){for(var t,n,r,i,o=0;o<e.length;o++){t=s,r=(n=e[o]).split(/[.\/]/);for(var a=0;a<r.length-1;++a)void 0===t[r[a]]&&(t[r[a]]={}),t=t[r[a]];t[r[r.length-1]]=l[n]}if(s.AMDLC_TESTS){for(n in i=s.privateModules||{},l)i[n]=l[n];for(o=0;o<e.length;o++)delete i[e[o]];s.privateModules=i}}(["tinymce/codesampleplugin/Prism","tinymce/codesampleplugin/Utils","tinymce/codesampleplugin/Dialog","tinymce/codesampleplugin/Plugin"])}(this),tinymce.PluginManager.add("colorpicker",function(o){o.settings.color_picker_callback||(o.settings.color_picker_callback=function(e,t){function r(e){var t=new tinymce.util.Color(e),e=t.toRgb();i.fromJSON({r:e.r,g:e.g,b:e.b,hex:t.toHex().substr(1)}),n(t.toHex())}function n(e){i.find("#preview")[0].getEl().style.background=e}var i=o.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:t,onchange:function(){var e=this.rgb();i&&(i.find("#r").value(e.r),i.find("#g").value(e.g),i.find("#b").value(e.b),i.find("#hex").value(this.value().substr(1)),n(this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e=i.find("colorpicker")[0],t=this.name(),n=this.value();return"hex"==t?(r(n="#"+n),void e.value(n)):(n={r:i.find("#r").value(),g:i.find("#g").value(),b:i.find("#b").value()},e.value(n),void r(n))}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){e("#"+this.toJSON().hex)}});r(t)})}),tinymce.PluginManager.add("contextmenu",function(i){function o(e){return e.ctrlKey&&!t}var a,t=i.settings.contextmenu_never_use_native;i.on("mousedown",function(e){tinymce.Env.mac&&tinymce.Env.webkit&&2===e.button&&!o(e)&&i.selection.isCollapsed()&&i.once("contextmenu",function(e){i.selection.placeCaretAt(e.clientX,e.clientY)})}),i.on("contextmenu",function(e){if(!o(e)){if(e.preventDefault(),r=i.settings.contextmenu||"link image inserttable | cell row column deletetable",a)a.show();else{var n=[];tinymce.each(r.split(/[ ,]/),function(e){var t=i.menuItems[e];(t="|"==e?{text:e}:t)&&(t.shortcut="",n.push(t))});for(var t=0;t<n.length;t++)"|"==n[t].text&&(0!==t&&t!=n.length-1||n.splice(t,1));a=new tinymce.ui.Menu({items:n,context:"contextmenu",classes:"contextmenu"}).renderTo(),i.on("remove",function(){a.remove(),a=null})}var r={x:e.pageX,y:e.pageY};i.inline||((r=tinymce.DOM.getPos(i.getContentAreaContainer())).x+=e.clientX,r.y+=e.clientY),a.moveTo(r.x,r.y)}})}),tinymce.PluginManager.add("directionality",function(i){function e(t){var n,r=i.dom,e=i.selection.getSelectedBlocks();e.length&&(n=r.getAttrib(e[0],"dir"),tinymce.each(e,function(e){r.getParent(e.parentNode,"*[dir='"+t+"']",r.getRoot())||(n!=t?r.setAttrib(e,"dir",t):r.setAttrib(e,"dir",null))}),i.nodeChanged())}function t(t){var n=[];return tinymce.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(e){n.push(e+"[dir="+t+"]")}),n.join(",")}i.addCommand("mceDirectionLTR",function(){e("ltr")}),i.addCommand("mceDirectionRTL",function(){e("rtl")}),i.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:t("ltr")}),i.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:t("rtl")})}),tinymce.PluginManager.add("emoticons",function(t,r){var e=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]];t.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:function(){var n='<table role="list" class="mce-grid">';return tinymce.each(e,function(e){n+="<tr>",tinymce.each(e,function(e){var t=r+"/img/smiley-"+e+".gif";n+='<td><a href="#" data-mce-url="'+t+'" data-mce-alt="'+e+'" tabindex="-1" role="option" aria-label="'+e+'"><img src="'+t+'" style="width: 18px; height: 18px" role="presentation" /></a></td>'}),n+="</tr>"}),n+="</table>"},onclick:function(e){e=t.dom.getParent(e.target,"a");e&&(t.insertContent('<img src="'+e.getAttribute("data-mce-url")+'" alt="'+e.getAttribute("data-mce-alt")+'" />'),this.hide())}},tooltip:"Emoticons"})}),tinymce.PluginManager.add("fullpage",function(d){function f(){return new tinymce.html.DomParser({validate:!1,root_name:"#document"}).parse(h)}var h,m,p=tinymce.each,c=tinymce.html.Node;d.addCommand("mceFullPageProperties",function(){var e,t,n,r,i=(n=f(),(r={}).fontface=d.getParam("fullpage_default_fontface",""),r.fontsize=d.getParam("fullpage_default_fontsize",""),7==(e=n.firstChild).type&&(r.xml_pi=!0,(t=/encoding="([^"]+)"/.exec(e.value))&&(r.docencoding=t[1])),(e=n.getAll("#doctype")[0])&&(r.doctype="<!DOCTYPE"+e.value+">"),(e=n.getAll("title")[0])&&e.firstChild&&(r.title=e.firstChild.value),p(n.getAll("meta"),function(e){var t=e.attr("name"),n=e.attr("http-equiv");t?r[t.toLowerCase()]=e.attr("content"):"Content-Type"!=n||(e=/charset\s*=\s*(.*)\s*/gi.exec(e.attr("content")))&&(r.docencoding=e[1])}),(e=n.getAll("html")[0])&&(r.langcode=o(e,"lang")||o(e,"xml:lang")),r.stylesheets=[],tinymce.each(n.getAll("link"),function(e){"stylesheet"==e.attr("rel")&&r.stylesheets.push(e.attr("href"))}),(e=n.getAll("body")[0])&&(r.langdir=o(e,"dir"),r.style=o(e,"style"),r.visited_color=o(e,"vlink"),r.link_color=o(e,"link"),r.active_color=o(e,"alink")),r);function o(e,t){return e.attr(t)||""}d.windowManager.open({title:"Document properties",data:i,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(e){!function(o){function e(e,t,n){e.attr(t,n||void 0)}function a(e){t.firstChild?t.insert(e,t.firstChild):t.append(e)}var s,t,l,n,r=d.dom;s=f(),(t=s.getAll("head")[0])||(l=s.getAll("html")[0],t=new c("head",1),l.firstChild?l.insert(t,l.firstChild,!0):l.append(t)),l=s.firstChild,o.xml_pi?(n='version="1.0"',o.docencoding&&(n+=' encoding="'+o.docencoding+'"'),7!=l.type&&(l=new c("xml",7),s.insert(l,s.firstChild,!0)),l.value=n):l&&7==l.type&&l.remove(),l=s.getAll("#doctype")[0],o.doctype?(l||(l=new c("#doctype",10),o.xml_pi?s.insert(l,s.firstChild):a(l)),l.value=o.doctype.substring(9,o.doctype.length-1)):l&&l.remove(),l=null,p(s.getAll("meta"),function(e){"Content-Type"==e.attr("http-equiv")&&(l=e)}),o.docencoding?(l||((l=new c("meta",1)).attr("http-equiv","Content-Type"),l.shortEnded=!0,a(l)),l.attr("content","text/html; charset="+o.docencoding)):l&&l.remove(),l=s.getAll("title")[0],o.title?(l?l.empty():a(l=new c("title",1)),l.append(new c("#text",3)).value=o.title):l&&l.remove(),p("keywords,description,author,copyright,robots".split(","),function(e){for(var t,n=s.getAll("meta"),r=o[e],i=0;i<n.length;i++)if((t=n[i]).attr("name")==e)return void(r?t.attr("content",r):t.remove());r&&((l=new c("meta",1)).attr("name",e),l.attr("content",r),l.shortEnded=!0,a(l))});var i={};tinymce.each(s.getAll("link"),function(e){"stylesheet"==e.attr("rel")&&(i[e.attr("href")]=e)}),tinymce.each(o.stylesheets,function(e){i[e]||((l=new c("link",1)).attr({rel:"stylesheet",text:"text/css",href:e}),l.shortEnded=!0,a(l)),delete i[e]}),tinymce.each(i,function(e){e.remove()}),(l=s.getAll("body")[0])&&(e(l,"dir",o.langdir),e(l,"style",o.style),e(l,"vlink",o.visited_color),e(l,"link",o.link_color),e(l,"alink",o.active_color),r.setAttribs(d.getBody(),{style:o.style,dir:o.dir,vLink:o.visited_color,link:o.link_color,aLink:o.active_color})),(l=s.getAll("html")[0])&&(e(l,"lang",o.langcode),e(l,"xml:lang",o.langcode)),t.firstChild||t.remove(),r=new tinymce.html.Serializer({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(s),h=r.substring(0,r.indexOf("</body>"))}(tinymce.extend(i,e.data))}})}),d.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"}),d.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"}),d.on("BeforeSetContent",function(e){function t(e){return e.replace(/<\/?[A-Z]+/g,function(e){return e.toLowerCase()})}var n,r,i,o,a,s,l=e.content,c="",u=d.dom;e.selection||"raw"==e.format&&h||e.source_view&&d.getParam("fullpage_hide_in_source_view")||(n=(l=(l=0===l.length&&!e.source_view?tinymce.trim(h)+"\n"+tinymce.trim(l)+"\n"+tinymce.trim(m):l).replace(/<(\/?)BODY/gi,"<$1body")).indexOf("<body"),m=-1!=n?(n=l.indexOf(">",n),h=t(l.substring(0,n+1)),-1==(o=l.indexOf("</body",n))&&(o=l.length),e.content=l.substring(n+1,o),t(l.substring(o))):(s=a="",d.getParam("fullpage_default_xml_pi")&&(a+='<?xml version="1.0" encoding="'+d.getParam("fullpage_default_encoding","ISO-8859-1")+'" ?>\n'),a+=d.getParam("fullpage_default_doctype","<!DOCTYPE html>"),a+="\n<html>\n<head>\n",(o=d.getParam("fullpage_default_title"))&&(a+="<title>"+o+"</title>\n"),(o=d.getParam("fullpage_default_encoding"))&&(a+='<meta http-equiv="Content-Type" content="text/html; charset='+o+'" />\n'),(o=d.getParam("fullpage_default_font_family"))&&(s+="font-family: "+o+";"),(o=d.getParam("fullpage_default_font_size"))&&(s+="font-size: "+o+";"),(o=d.getParam("fullpage_default_text_color"))&&(s+="color: "+o+";"),h=a+="</head>\n<body"+(s?' style="'+s+'"':"")+">\n","\n</body>\n</html>"),s=f(),p(s.getAll("style"),function(e){e.firstChild&&(c+=e.firstChild.value)}),(a=s.getAll("body")[0])&&u.setAttribs(d.getBody(),{style:a.attr("style")||"",dir:a.attr("dir")||"",vLink:a.attr("vlink")||"",link:a.attr("link")||"",aLink:a.attr("alink")||""}),u.remove("fullpage_styles"),r=d.getDoc().getElementsByTagName("head")[0],c&&(u.add(r,"style",{id:"fullpage_styles"},c),(a=u.get("fullpage_styles")).styleSheet&&(a.styleSheet.cssText=c)),i={},tinymce.each(r.getElementsByTagName("link"),function(e){"stylesheet"==e.rel&&e.getAttribute("data-mce-fullpage")&&(i[e.href]=e)}),tinymce.each(s.getAll("link"),function(e){var t=e.attr("href");i[t]||"stylesheet"!=e.attr("rel")||u.add(r,"link",{rel:"stylesheet",text:"text/css",href:t,"data-mce-fullpage":"1"}),delete i[t]}),tinymce.each(i,function(e){e.parentNode.removeChild(e)}))}),d.on("GetContent",function(e){e.selection||e.source_view&&d.getParam("fullpage_hide_in_source_view")||(e.content=tinymce.trim(h)+"\n"+tinymce.trim(e.content)+"\n"+tinymce.trim(m))})}),tinymce.PluginManager.add("fullscreen",function(l){function e(){function e(){var e,t,n,r;g.setStyle(o,"height",(n=window,(r=document.body).offsetWidth&&(e=r.offsetWidth,t=r.offsetHeight),n.innerWidth&&n.innerHeight&&(e=n.innerWidth,t=n.innerHeight),{w:e,h:t}.h-(i.clientHeight-o.clientHeight)))}var t,i,o,n,r,a=document.body,s=document.documentElement;p=!p,t=(i=l.getContainer()).style,n=(o=l.getContentAreaContainer().firstChild).style,p?(r=tinymce.DOM.getViewPort(),m={x:r.x,y:r.y},c=n.width,u=n.height,n.width=n.height="100%",f=t.width,h=t.height,t.width=t.height="",g.addClass(a,"mce-fullscreen"),g.addClass(s,"mce-fullscreen"),g.addClass(i,"mce-fullscreen"),g.bind(window,"resize",e),e(),d=e):(n.width=c,n.height=u,f&&(t.width=f),h&&(t.height=h),g.removeClass(a,"mce-fullscreen"),g.removeClass(s,"mce-fullscreen"),g.removeClass(i,"mce-fullscreen"),g.unbind(window,"resize",d),s=m,scrollTo(s.x,s.y)),l.fire("FullscreenStateChanged",{state:p})}var c,u,d,f,h,m,p=!1,g=tinymce.DOM;return l.settings.inline?void 0:(l.on("init",function(){l.addShortcut("Ctrl+Shift+F","",e)}),l.on("remove",function(){d&&g.unbind(window,"resize",d)}),l.addCommand("mceFullScreen",e),l.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,onClick:function(){e(),l.focus()},onPostRender:function(){var t=this;l.on("FullscreenStateChanged",function(e){t.active(e.state)})},context:"view"}),l.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Ctrl+Shift+F",onClick:e,onPostRender:function(){var t=this;l.on("FullscreenStateChanged",function(e){t.active(e.state)})}}),{isFullscreen:function(){return p}})}),tinymce.PluginManager.add("hr",function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")}),e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})}),tinymce.PluginManager.add("image",function(g){function v(e,i,t){return function n(e,r){return r=r||[],tinymce.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=n(e.menu):(t.value=e.value,i(t)),r.push(t)}),r}(e,t||[])}function e(t){return function(){var e=g.settings.image_list;"string"==typeof e?tinymce.util.XHR.send({url:e,success:function(e){t(tinymce.util.JSON.parse(e))}}):"function"==typeof e?e(t):t(e)}}function t(e){function t(){var e,t,n=a.find("#width")[0],r=a.find("#height")[0];n&&r&&(e=n.value(),t=r.value(),a.find("#constrain")[0].checked()&&s&&l&&e&&t&&(s!=e?(t=Math.round(e/s*t),isNaN(t)||r.value(t)):(e=Math.round(t/l*e),isNaN(e)||n.value(e))),s=e,l=t)}function n(){var r,i;o(),t(),(d=tinymce.extend(d,a.toJSON())).alt||(d.alt=""),d.title||(d.title=""),""===d.width&&(d.width=null),""===d.height&&(d.height=null),d.style||(d.style=null),d={src:d.src,alt:d.alt,title:d.title,width:d.width,height:d.height,style:d.style,caption:d.caption,class:d.class},g.undoManager.transact(function(){var e,t;function n(){t.onload=t.onerror=null,g.selection&&(g.selection.select(t),g.nodeChanged())}d.src?(""===d.title&&(d.title=null),m?f.setAttribs(m,d):(d.id="__mcenew",g.focus(),g.selection.setContent(f.createHTML("img",d)),m=f.get("__mcenew"),f.setAttrib(m,"id",null)),g.editorUpload.uploadImagesAuto(),!1===d.caption&&f.is(m.parentNode,"figure.image")&&(r=m.parentNode,f.insertAfter(m,r),f.remove(r)),!0!==d.caption?((t=m).onload=function(){d.width||d.height||!h||f.setAttribs(t,{width:t.clientWidth,height:t.clientHeight}),n()},t.onerror=n):f.is(m.parentNode,"figure.image")||(m=(i=m).cloneNode(!0),(r=f.create("figure",{class:"image"})).appendChild(m),r.appendChild(f.create("figcaption",{contentEditable:!0},"Caption")),r.contentEditable=!1,(e=f.getParent(i,function(e){return g.schema.getTextBlockElements()[e.nodeName]}))?f.split(e,i,r):f.replace(r,i),g.selection.select(r))):m&&(f.remove(m),g.focus(),g.nodeChanged())})}function r(e){return e=e&&e.replace(/px$/,"")}function i(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e}function o(){function e(e){return 0<e.length&&/^[0-9]+$/.test(e)&&(e+="px"),e}var t,n;g.settings.image_advtab&&(t=a.toJSON(),n=i(n=f.parseStyle(t.style)),t.vspace&&(n["margin-top"]=n["margin-bottom"]=e(t.vspace)),t.hspace&&(n["margin-left"]=n["margin-right"]=e(t.hspace)),t.border&&(n["border-width"]=e(t.border)),a.find("#style").value(f.serializeStyle(f.parseStyle(f.serializeStyle(n)))))}var a,s,l,c,u,d={},f=g.dom,h=!1!==g.settings.image_dimensions,m=g.selection.getNode(),p=f.getParent(m,"figure.image");(m=(m=p?f.select("img",p)[0]:m)&&("IMG"!=m.nodeName||m.getAttribute("data-mce-object")||m.getAttribute("data-mce-placeholder"))?null:m)&&(s=f.getAttrib(m,"width"),l=f.getAttrib(m,"height"),d={src:f.getAttrib(m,"src"),alt:f.getAttrib(m,"alt"),title:f.getAttrib(m,"title"),class:f.getAttrib(m,"class"),width:s,height:l,caption:!!p}),e&&(c={type:"listbox",label:"Image list",values:v(e,function(e){e.value=g.convertURL(e.value||e.url,"src")},[{text:"None",value:""}]),value:d.src&&g.convertURL(d.src,"src"),onselect:function(e){var t=a.find("#alt");(!t.value()||e.lastControl&&t.value()==e.lastControl.text())&&t.value(e.control.text()),a.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){c=this}}),g.settings.image_class_list&&(u={name:"class",type:"listbox",label:"Class",values:v(g.settings.image_class_list,function(e){e.value&&(e.textStyle=function(){return g.formatter.getCssText({inline:"img",classes:[e.value]})})})});e=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:function(e){var t,n=e.meta||{};c&&c.value(g.convertURL(this.value(),"src")),tinymce.each(n,function(e,t){a.find("#"+t).value(e)}),n.width||n.height||(t=g.convertURL(this.value(),"src"),e=g.settings.image_prepend_url,n=new RegExp("^(?:[a-z]+:)?//","i"),e&&!n.test(t)&&t.substring(0,e.length)!==e&&(t=e+t),this.value(t),function(e,n){function t(e,t){r.parentNode&&r.parentNode.removeChild(r),n({width:e,height:t})}var r=document.createElement("img");r.onload=function(){t(Math.max(r.width,r.clientWidth),Math.max(r.height,r.clientHeight))},r.onerror=function(){t()};var i=r.style;i.visibility="hidden",i.position="fixed",i.bottom=i.left=0,i.width=i.height="auto",document.body.appendChild(r),r.src=e}(g.documentBaseURI.toAbsolute(this.value()),function(e){e.width&&e.height&&h&&(s=e.width,l=e.height,a.find("#width").value(s),a.find("#height").value(l))}))}},c];!1!==g.settings.image_description&&e.push({name:"alt",type:"textbox",label:"Image description"}),g.settings.image_title&&e.push({name:"title",type:"textbox",label:"Image Title"}),h&&e.push({type:"container",label:"Dimensions",layout:"flex",direction:"row",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:3,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:3,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}),e.push(u),g.settings.image_caption&&tinymce.Env.ceFalse&&e.push({name:"caption",type:"checkbox",label:"Caption"}),a=g.settings.image_advtab?(m&&(m.style.marginLeft&&m.style.marginRight&&m.style.marginLeft===m.style.marginRight&&(d.hspace=r(m.style.marginLeft)),m.style.marginTop&&m.style.marginBottom&&m.style.marginTop===m.style.marginBottom&&(d.vspace=r(m.style.marginTop)),m.style.borderWidth&&(d.border=r(m.style.borderWidth)),d.style=g.dom.serializeStyle(g.dom.parseStyle(g.dom.getAttrib(m,"style")))),g.windowManager.open({title:"Insert/edit image",data:d,bodyType:"tabpanel",body:[{title:"General",type:"form",items:e},{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:function(){var e;g.settings.image_advtab&&(e=a.toJSON(),e=f.parseStyle(e.style),a.find("#vspace").value(""),a.find("#hspace").value(""),((e=i(e))["margin-top"]&&e["margin-bottom"]||e["margin-right"]&&e["margin-left"])&&(e["margin-top"]===e["margin-bottom"]?a.find("#vspace").value(r(e["margin-top"])):a.find("#vspace").value(""),e["margin-right"]===e["margin-left"]?a.find("#hspace").value(r(e["margin-right"])):a.find("#hspace").value("")),e["border-width"]&&a.find("#border").value(r(e["border-width"])),a.find("#style").value(f.serializeStyle(f.parseStyle(f.serializeStyle(e)))))}},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,alignH:["left","right"],defaults:{type:"textbox",maxWidth:50,onchange:o},items:[{label:"Vertical space",name:"vspace"},{label:"Horizontal space",name:"hspace"},{label:"Border",name:"border"}]}]}],onSubmit:n})):g.windowManager.open({title:"Insert/edit image",data:d,body:e,onSubmit:n})}g.on("preInit",function(){function e(o){return function(e){function t(e){e.attr("contenteditable",o?"true":null)}for(var n,r,i=e.length;i--;)n=e[i],(r=(r=n).attr("class"))&&/\bimage\b/.test(r)&&(n.attr("contenteditable",o?"false":null),tinymce.each(n.getAll("figcaption"),t))}}g.parser.addNodeFilter("figure",e(!0)),g.serializer.addNodeFilter("figure",e(!1))}),g.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:e(t),stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),g.addMenuItem("image",{icon:"image",text:"Insert/edit image",onclick:e(t),context:"insert",prependToContext:!0}),g.addCommand("mceImage",e(t))}),function(){var s={},e=function(e,t,n){if("string"!=typeof e)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+e;if(void 0===n)throw"no definition function for "+e;s[e]={deps:t,defn:n,instance:void 0}},l=function(e){var t=s[e];if(void 0===t)throw"module ["+e+"] was undefined";return void 0===t.instance&&function(e){for(var t=s[e],n=t.deps,r=t.defn,i=n.length,o=new Array(i),a=0;a<i;++a)o[a]=l(n[a]);r=r.apply(null,o);if(void 0===r)throw"module ["+e+"] returned undefined";t.instance=r}(e),t.instance},n=e;(e=function(e,t){n(e,[],function(){return t})})("1",tinymce.PluginManager),e("2",tinymce.Env),e("3",tinymce.util.Promise),e("4",tinymce.util.URI),e("5",tinymce.util.Tools),e("6",tinymce.util.Delay),n("m",[],function(){function n(e,t,n){return e.width=t,e.height=n,e}return{create:function(e,t){return n(document.createElement("canvas"),e,t)},resize:n,get2dContext:function(e){return e.getContext("2d")},get3dContext:function(e){var t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}return t=t||null}}}),n("n",[],function(){return{getWidth:function(e){return e.naturalWidth||e.width},getHeight:function(e){return e.naturalHeight||e.height}}}),n("o",[],function(){function n(e,t){return function(){e.apply(t,arguments)}}function e(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,n(r,this),n(i,this))}function o(n){var r=this;return null===this._state?void this._deferreds.push(n):void t(function(){var e,t=r._state?n.onFulfilled:n.onRejected;if(null!==t){try{e=t(r._value)}catch(e){return void n.reject(e)}n.resolve(e)}else(r._state?n.resolve:n.reject)(r._value)})}function r(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void l(n(t,e),n(r,this),n(i,this))}this._state=!0,this._value=e,a.call(this)}catch(e){i.call(this,e)}}function i(e){this._state=!1,this._value=e,a.call(this)}function a(){for(var e=0,t=this._deferreds.length;e<t;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function s(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function l(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}if(window.Promise)return window.Promise;var t=e.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.then=function(n,r){var i=this;return new e(function(e,t){o.call(i,new s(n,r,e,t))})},e.all=function(){var s=Array.prototype.slice.call(1===arguments.length&&c(arguments[0])?arguments[0]:arguments);return new e(function(i,o){if(0===s.length)return i([]);for(var a=s.length,e=0;e<s.length;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return r.call(e,function(e){t(n,e)},o),0}s[n]=e,0==--a&&i(s)}catch(e){o(e)}}(e,s[e])})},e.resolve=function(t){return t&&"object"==typeof t&&t.constructor===e?t:new e(function(e){e(t)})},e.reject=function(n){return new e(function(e,t){t(n)})},e.race=function(i){return new e(function(e,t){for(var n=0,r=i.length;n<r;n++)i[n].then(e,t)})},e}),n("p",[],function(){return{guessMimeType:function(e){var t;return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png"}[e=(e=(e=(t=e,(e=document.createElement("a")).href=t,e.pathname.split(".")))[e.length-1])&&e.toLowerCase()]}}}),n("e",["o","m","p","n"],function(e,n,r,i){function t(n){return new e(function(t){n.complete?t(n):n.addEventListener("load",function e(){n.removeEventListener("load",e),t(n)})})}function o(e){return t(e).then(function(e){var t=n.create(i.getWidth(e),i.getHeight(e));return n.get2dContext(t).drawImage(e,0,0),t})}function a(n){return new e(function(e){var t=new XMLHttpRequest;t.open("GET",n,!0),t.responseType="blob",t.onload=function(){200==this.status&&e(this.response)},t.send()})}function s(a){return new e(function(e){var t,n,r,i,o;if(a=a.split(","),(o=/data:([^;]+)/.exec(a[0]))&&(i=o[1]),t=atob(a[1]),window.WebKitBlobBuilder){for(o=new WebKitBlobBuilder,n=new ArrayBuffer(t.length),r=0;r<n.length;r++)n[r]=t.charCodeAt(r);return o.append(n),void e(o.getBlob(i))}for(n=new Uint8Array(t.length),r=0;r<n.length;r++)n[r]=t.charCodeAt(r);e(new Blob([n],{type:i}))})}function l(n){return new e(function(e){var t=new FileReader;t.onloadend=function(){e(t.result)},t.readAsDataURL(n)})}return{blobToImage:function(r){return new e(function(e){function t(){n.removeEventListener("load",t),e(n)}var n=new Image;n.addEventListener("load",t),n.src=URL.createObjectURL(r),n.complete&&t()})},imageToBlob:function(e){return t(e).then(function(e){var t=e.src;return 0===t.indexOf("blob:")?a(t):0===t.indexOf("data:")?s(t):o(e).then(function(e){return s(e.toDataURL(r.guessMimeType(t)))})})},blobToDataUri:l,blobToBase64:function(e){return l(e).then(function(e){return e.split(",")[1]})},imageToCanvas:o,canvasToBlob:function(e,t){return s(e.toDataURL(t))},revokeImageUrl:function(e){URL.revokeObjectURL(e.src)},uriToBlob:function(e){return 0===e.indexOf("blob:")?a(e):0===e.indexOf("data:")?s(e):null}}}),n("q",[],function(){function i(e,t,n){return n<(e=parseFloat(e))?e=n:e<t&&(e=t),e}function o(e,t){for(var n,r,i,o=[],a=new Array(10),s=0;s<5;s++){for(n=0;n<5;n++)o[n]=t[n+5*s];for(n=0;n<5;n++){for(r=i=0;r<5;r++)i+=e[n+5*r]*o[r];a[n+5*s]=i}}return a}function n(e,n){return n=i(n,0,1),e.map(function(e,t){return t%6==0?e=1-(1-e)*n:e*=n,i(e,0,1)})}var r=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];return{identity:function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},adjust:n,multiply:o,adjustContrast:function(e,t){var n;return t=i(t,-1,1),o(e,[(n=(t*=100)<0?127+t/100*127:127*(n=0===(n=t%1)?r[t]:r[Math.floor(t)]*(1-n)+r[Math.floor(t)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])},adjustBrightness:function(e,t){return o(e,[1,0,0,0,t=i(255*t,-255,255),0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])},adjustSaturation:function(e,t){return o(e,[.3086*(1-(t=1+(0<(t=i(t,-1,1))?3*t:t)))+t,.6094*(1-t),.082*(1-t),0,0,.3086*(1-t),.6094*(1-t)+t,.082*(1-t),0,0,.3086*(1-t),.6094*(1-t),.082*(1-t)+t,0,0,0,0,0,1,0,0,0,0,0,1])},adjustHue:function(e,t){return t=i(t,-180,180)/180*Math.PI,o(e,[.213+.787*(e=Math.cos(t))+-.213*(t=Math.sin(t)),.715+-.715*e+-.715*t,.072+-.072*e+.928*t,0,0,.213+-.213*e+.143*t,.715+e*(1-.715)+.14*t,.072+-.072*e+-.283*t,0,0,.213+-.213*e+-.787*t,.715+-.715*e+.715*t,.072+.928*e+.072*t,0,0,0,0,0,1,0,0,0,0,0,1])},adjustColors:function(e,t,n,r){return o(e,[t=i(t,0,2),0,0,0,0,0,n=i(n,0,2),0,0,0,0,0,r=i(r,0,2),0,0,0,0,0,1,0,0,0,0,0,1])},adjustSepia:function(e,t){return o(e,n([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],t=i(t,0,1)))},adjustGrayscale:function(e,t){return o(e,n([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],t=i(t,0,1)))}}}),n("c",["m","n","e","q"],function(s,l,c,i){function o(e,r){return c.blobToImage(e).then(function(e){var t=s.create(l.getWidth(e),l.getHeight(e)),n=s.get2dContext(t);return n.drawImage(e,0,0),u(e),e=function(e,t){for(var n,r,i,o,a=e.data,s=t[0],l=t[1],c=t[2],u=t[3],d=t[4],f=t[5],h=t[6],m=t[7],p=t[8],g=t[9],v=t[10],y=t[11],b=t[12],w=t[13],x=t[14],$=t[15],C=t[16],S=t[17],k=t[18],E=t[19],A=0;A<a.length;A+=4)n=a[A],r=a[A+1],i=a[A+2],o=a[A+3],a[A]=n*s+r*l+i*c+o*u+d,a[A+1]=n*f+r*h+i*m+o*p+g,a[A+2]=n*v+r*y+i*b+o*w+x,a[A+3]=n*$+r*C+i*S+o*k+E;return e}(n.getImageData(0,0,t.width,t.height),r),n.putImageData(e,0,0),c.canvasToBlob(t)})}function n(e,r){return c.blobToImage(e).then(function(e){var t=s.create(l.getWidth(e),l.getHeight(e)),n=s.get2dContext(t);return n.drawImage(e,0,0),u(e),e=function(e,t,n){function r(e,t,n){return n<e?e=n:e<t&&(e=t),e}for(var i,o,a,s,l,c,u,d,f=Math.round(Math.sqrt(n.length)),h=Math.floor(f/2),m=e.data,p=t.data,g=e.width,v=e.height,y=0;y<v;y++)for(i=0;i<g;i++){for(c=o=a=s=0;c<f;c++)for(l=0;l<f;l++)d=r(i+l-h,0,g-1),u=4*(r(y+c-h,0,v-1)*g+d),d=n[c*f+l],o+=m[u]*d,a+=m[u+1]*d,s+=m[u+2]*d;p[u=4*(y*g+i)]=r(o,0,255),p[u+1]=r(a,0,255),p[u+2]=r(s,0,255)}return t}(n.getImageData(0,0,t.width,t.height),e=n.getImageData(0,0,t.width,t.height),r),n.putImageData(e,0,0),c.canvasToBlob(t)})}function e(a){return function(e,o){return c.blobToImage(e).then(function(e){for(var t=s.create(l.getWidth(e),l.getHeight(e)),n=s.get2dContext(t),r=new Array(256),i=0;i<r.length;i++)r[i]=a(i,o);return n.drawImage(e,0,0),u(e),e=function(e,t){for(var n=e.data,r=0;r<n.length;r+=4)n[r]=t[n[r]],n[r+1]=t[n[r+1]],n[r+2]=t[n[r+2]];return e}(n.getImageData(0,0,t.width,t.height),r),n.putImageData(e,0,0),c.canvasToBlob(t)})}}function t(n){return function(e,t){return o(e,n(i.identity(),t))}}function r(t){return function(e){return n(e,t)}}var a,u=c.revokeImageUrl;return{invert:(a=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0],function(e){return o(e,a)}),brightness:t(i.adjustBrightness),hue:t(i.adjustHue),saturate:t(i.adjustSaturation),contrast:t(i.adjustContrast),grayscale:t(i.adjustGrayscale),sepia:t(i.adjustSepia),colorize:function(e,t,n,r){return o(e,i.adjustColors(i.identity(),t,n,r))},sharpen:r([0,-1,0,-1,5,-1,0,-1,0]),emboss:r([-2,-1,0,-1,1,1,0,1,2]),gamma:e(function(e,t){return 255*Math.pow(e/255,1-t)}),exposure:e(function(e,t){return 255*(1-Math.exp(-e/255*t))}),colorFilter:o,convoluteFilter:n}}),n("r",["o","e","m","n"],function(u,e,d,f){return{scale:function t(e,n,r){var i=f.getWidth(e),o=f.getHeight(e),a=n/i,i=r/o,o=!1;(a<.5||2<a)&&(a=a<.5?.5:2,o=!0),(i<.5||2<i)&&(i=i<.5?.5:2,o=!0);var s,l,c,i=(s=e,l=a,c=i,new u(function(e){var t=f.getWidth(s),n=f.getHeight(s),r=Math.floor(t*l),i=Math.floor(n*c),o=d.create(r,i);d.get2dContext(o).drawImage(s,0,0,t,n,0,0,r,i),e(o)}));return o?i.then(function(e){return t(e,n,r)}):i}}}),n("d",["e","m","n","r"],function(s,l,c,i){function o(t){return function(e){return u(t),e}}var u=s.revokeImageUrl;return{rotate:function(o,a){return s.blobToImage(o).then(function(e){var t=l.create(c.getWidth(e),c.getHeight(e)),n=l.get2dContext(t),r=0,i=0;return 90!=(a=a<0?360+a:a)&&270!=a||l.resize(t,t.height,t.width),90!=a&&180!=a||(r=t.width),270!=a&&180!=a||(i=t.height),n.translate(r,i),n.rotate(a*Math.PI/180),n.drawImage(e,0,0),u(e),s.canvasToBlob(t,o.type)})},flip:function(e,r){return s.blobToImage(e).then(function(e){var t=l.create(c.getWidth(e),c.getHeight(e)),n=l.get2dContext(t);return"v"==r?(n.scale(1,-1),n.drawImage(e,0,-t.height)):(n.scale(-1,1),n.drawImage(e,-t.width,0)),u(e),s.canvasToBlob(t)})},crop:function(e,n,r,i,o){return s.blobToImage(e).then(function(e){var t=l.create(i,o);return l.get2dContext(t).drawImage(e,-n,-r),u(e),s.canvasToBlob(t)})},resize:function(t,n,r){return s.blobToImage(t).then(function(e){return i.scale(e,n,r).then(function(e){return s.canvasToBlob(e,t.type)}).then(o(e)).catch(o(e))})}}}),n("7",["c","d"],function(i,o){return{invert:function(e){return i.invert(e)},sharpen:function(e){return i.sharpen(e)},emboss:function(e){return i.emboss(e)},brightness:function(e,t){return i.brightness(e,t)},hue:function(e,t){return i.hue(e,t)},saturate:function(e,t){return i.saturate(e,t)},contrast:function(e,t){return i.contrast(e,t)},grayscale:function(e,t){return i.grayscale(e,t)},sepia:function(e,t){return i.sepia(e,t)},colorize:function(e,t,n,r){return i.colorize(e,t,n,r)},gamma:function(e,t){return i.gamma(e,t)},exposure:function(e,t){return i.exposure(e,t)},flip:function(e,t){return o.flip(e,t)},crop:function(e,t,n,r,i){return o.crop(e,t,n,r,i)},resize:function(e,t,n){return o.resize(e,t,n)},rotate:function(e,t){return o.rotate(e,t)}}}),n("8",["e"],function(t){return{blobToImage:function(e){return t.blobToImage(e)},imageToBlob:function(e){return t.imageToBlob(e)},blobToDataUri:function(e){return t.blobToDataUri(e)},blobToBase64:function(e){return t.blobToBase64(e)}}}),e("f",tinymce.dom.DOMUtils),e("g",tinymce.ui.Factory),e("h",tinymce.ui.Form),e("i",tinymce.ui.Container),e("s",tinymce.ui.Control),e("t",tinymce.ui.DragHelper),e("u",tinymce.geom.Rect),e("w",tinymce.dom.DomQuery),e("x",tinymce.util.Observable),e("y",tinymce.util.VK),n("v",["w","t","u","5","x","y"],function(g,v,y,b,w,x){var $=0;return function(s,n,l,r,i){function c(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}}function a(e,t,n,r){var i=t.x,o=t.y,a=t.w,t=t.h;i+=n*e.deltaX,o+=r*e.deltaY,(a+=n*e.deltaW)<20&&(a=20),(t+=r*e.deltaH)<20&&(t=20),e=s=y.clamp({x:i,y:o,w:a,h:t},l,"move"==e.name),e=c(l,e),d.fire("updateRect",{rect:e}),u(e)}function t(t){function e(e,t){t.h<0&&(t.h=0),t.w<0&&(t.w=0),g("#"+h+"-"+e,r).css({left:t.x,top:t.y,width:t.w,height:t.h})}b.each(m,function(e){g("#"+h+"-"+e.name,r).css({left:t.w*e.xMul+t.x,top:t.h*e.yMul+t.y})}),e("top",{x:n.x,y:n.y,w:n.w,h:t.y-n.y}),e("right",{x:t.x+t.w,y:t.y,w:n.w-t.x-t.w+n.x,h:t.h}),e("bottom",{x:n.x,y:t.y+t.h,w:n.w,h:n.h-t.y-t.h+n.y}),e("left",{x:n.x,y:t.y,w:t.x-n.x,h:t.h}),e("move",t)}function o(e){t(s=e)}function u(e){var t;o((t=l,{x:(e=e).x+t.x,y:e.y+t.y,w:e.w,h:e.h}))}var d,e,f="mce-",h="mce-crid-"+$++,m=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],p=["top","right","bottom","left"];return g('<div id="'+h+'" class="'+f+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(r),b.each(p,function(e){g("#"+h,r).append('<div id="'+h+"-"+e+'"class="'+f+'croprect-block" style="display: none" data-mce-bogus="all">')}),b.each(m,function(e){g("#"+h,r).append('<div id="'+h+"-"+e.name+'" class="'+f+"croprect-handle "+f+"croprect-handle-"+e.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+e.label+'" aria-grabbed="false">')}),e=b.map(m,function(t){var n;return new v(h,{document:r.ownerDocument,handle:h+"-"+t.name,start:function(){n=s},drag:function(e){a(t,n,e.deltaX,e.deltaY)}})}),t(s),g(r).on("focusin focusout",function(e){g(e.target).attr("aria-grabbed","focus"===e.type)}),g(r).on("keydown",function(t){function e(e,t,n,r,i){e.stopPropagation(),e.preventDefault(),a(o,n,r,i)}var o;switch(b.each(m,function(e){return t.target.id==h+"-"+e.name?(o=e,!1):void 0}),t.keyCode){case x.LEFT:e(t,0,s,-10,0);break;case x.RIGHT:e(t,0,s,10,0);break;case x.UP:e(t,0,s,0,-10);break;case x.DOWN:e(t,0,s,0,10);break;case x.ENTER:case x.SPACEBAR:t.preventDefault(),i()}}),d=b.extend({toggleVisibility:function(e){var t=b.map(m,function(e){return"#"+h+"-"+e.name}).concat(b.map(p,function(e){return"#"+h+"-"+e})).join(",");e?g(t,r).show():g(t,r).hide()},setClampRect:function(e){l=e,t(s)},setRect:o,getInnerRect:function(){return c(l,s)},setInnerRect:u,setViewPortRect:function(e){n=e,t(s)},destroy:function(){b.each(e,function(e){e.destroy()}),e=[]}},w)}}),n("j",["s","t","u","5","3","v"],function(e,t,o,n,a,r){return e.extend({Defaults:{classes:"imagepanel"},selection:function(e){return arguments.length?(this.state.set("rect",e),this):this.state.get("rect")},imageSize:function(){var e=this.state.get("viewRect");return{w:e.w,h:e.h}},toggleCropRect:function(e){this.state.set("cropEnabled",e)},imageSrc:function(e){var n,r=this,i=new Image;i.src=e,n=i,new a(function(t){n.complete?t(n):n.addEventListener("load",function e(){n.removeEventListener("load",e),t(n)})}).then(function(){var e=r.state.get("viewRect"),t=r.$el.find("img");t[0]?t.replaceWith(i):r.getEl().appendChild(i),t={x:0,y:0,w:i.naturalWidth,h:i.naturalHeight},r.state.set("viewRect",t),r.state.set("rect",o.inflate(t,-20,-20)),e&&e.w==t.w&&e.h==t.h||r.zoomFit(),r.repaintImage(),r.fire("load")})},zoom:function(e){return arguments.length?(this.state.set("zoom",e),this):this.state.get("zoom")},postRender:function(){return this.imageSrc(this.settings.imageSrc),this._super()},zoomFit:function(){var e=this.$el.find("img"),t=this.getEl().clientWidth,n=this.getEl().clientHeight,r=e[0].naturalWidth,e=e[0].naturalHeight,e=Math.min((t-10)/r,(n-10)/e);1<=e&&(e=1),this.zoom(e)},repaintImage:function(){var e=this.getEl(),t=this.zoom(),n=this.state.get("rect"),r=this.$el.find("img"),i=e.offsetWidth,o=e.offsetHeight,a=r[0].naturalWidth*t,s=r[0].naturalHeight*t,l=Math.max(0,i/2-a/2),e=Math.max(0,o/2-s/2);r.css({left:l,top:e,width:a,height:s}),this.cropRect&&(this.cropRect.setRect({x:n.x*t+l,y:n.y*t+e,w:n.w*t,h:n.h*t}),this.cropRect.setClampRect({x:l,y:e,w:a,h:s}),this.cropRect.setViewPortRect({x:0,y:0,w:i,h:o}))},bindStates:function(){var n=this;n.state.on("change:cropEnabled",function(e){n.cropRect.toggleVisibility(e.value),n.repaintImage()}),n.state.on("change:zoom",function(){n.repaintImage()}),n.state.on("change:rect",function(e){var t=e.value;n.cropRect||(e=t,n.cropRect=new r(e,n.state.get("viewRect"),n.state.get("viewRect"),n.getEl(),function(){n.fire("crop")}),n.cropRect.on("updateRect",function(e){var t=e.rect,e=n.zoom(),t={x:Math.round(t.x/e),y:Math.round(t.y/e),w:Math.round(t.w/e),h:Math.round(t.h/e)};n.state.set("rect",t)}),n.on("remove",n.cropRect.destroy)),n.cropRect.setRect(t)})}})}),n("k",[],function(){return function(){function e(){return 0<r}function t(){return-1!=r&&r<n.length-1}var n=[],r=-1;return{data:n,add:function(e){var t=n.splice(++r);return n.push(e),{state:e,removed:t}},undo:function(){return 0<r?n[--r]:void 0},redo:function(){return t()?n[++r]:void 0},canUndo:e,canRedo:t}}}),n("9",["f","5","3","g","h","i","j","7","8","k"],function(G,Y,e,K,X,J,Z,Q,t,ee){function te(e){return{blob:e,url:URL.createObjectURL(e)}}function ne(e){e&&URL.revokeObjectURL(e.url)}function re(e){Y.each(e,ne)}function r(o,e,t){function n(e){var t=y.find("#w")[0],n=y.find("#h")[0],r=parseInt(t.value(),10),i=parseInt(n.value(),10);y.find("#constrain")[0].checked()&&U&&H&&r&&i&&("w"==e.control.settings.name?(i=Math.round(r*z),n.value(i)):(r=Math.round(i*V),t.value(r))),U=r,H=i}function a(e){return Math.round(100*e)+"%"}function r(){y.find("#undo").disabled(!q.canUndo()),y.find("#redo").disabled(!q.canRedo()),y.statusbar.find("#save").disabled(!q.canUndo())}function s(){y.find("#undo").disabled(!0),y.find("#redo").disabled(!0)}function l(e){e&&k.imageSrc(e.url)}function i(t){return function(){var e=Y.grep(L,function(e){return e.settings.name!=t});Y.each(e,function(e){e.hide()}),t.show(),t.focus()}}function c(e){l(x=te(e))}function u(e){l(o=te(e)),re(q.add(o).removed),r()}function d(){var e=k.selection();Q.crop(o.blob,e.x,e.y,e.w,e.h).then(function(e){u(e),h()})}function f(t){var n=[].slice.call(arguments,1);return function(){var e=x||o;t.apply(this,[e.blob].concat(n)).then(c)}}function h(){l(o),ne(x),i(b)(),r()}function m(){x&&(u(x.blob),h())}function p(e){return new X({layout:"flex",direction:"row",labelGap:5,border:"0 0 1 0",align:"center",pack:"center",padding:"0 10 0 10",spacing:5,flex:0,minHeight:60,defaults:{classes:"imagetool",type:"button"},items:e})}function g(e,t){return p([{text:"Back",onclick:h},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:m}]).hide().on("show",function(){s(),t(o.blob).then(function(e){e=te(e);l(e),ne(x),x=e})})}function v(e,t,n,r,i){return p([{text:"Back",onclick:h},{type:"spacer",flex:1},{type:"slider",flex:1,ondragend:function(e){e=e.value,t(o.blob,e).then(function(e){e=te(e);l(e),ne(x),x=e})},minValue:r,maxValue:i,value:n,previewFilter:a},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:m}]).hide().on("show",function(){this.find("slider").value(n),s()})}var y,b,w,x,$,C,S,k,E,A,T,N,_,R,D,M,I,P,O,B,F,L,U,H,z,V,j,q=new ee;function W(){var e=y.find("#r")[0].value(),t=y.find("#g")[0].value(),n=y.find("#b")[0].value();j(o.blob,e,t,n).then(function(e){e=te(e);l(e),ne(x),x=e})}$=p([{text:"Back",onclick:h},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:d}]).hide().on("show hide",function(e){k.toggleCropRect("show"==e.type)}).on("show",s),C=p([{text:"Back",onclick:h},{type:"spacer",flex:1},{type:"textbox",name:"w",label:"Width",size:4,onkeyup:n},{type:"textbox",name:"h",label:"Height",size:4,onkeyup:n},{type:"checkbox",name:"constrain",text:"Constrain proportions",checked:!0,onchange:function(e){!0===e.control.value()&&(z=H/U,V=U/H)}},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:"submit"}]).hide().on("submit",function(e){var t=parseInt(y.find("#w").value(),10),n=parseInt(y.find("#h").value(),10);e.preventDefault(),function(e){var t=[].slice.call(arguments,1);return function(){e.apply(this,[o.blob].concat(t)).then(u)}}(Q.resize,t,n)(),h()}).on("show",s),S=p([{text:"Back",onclick:h},{type:"spacer",flex:1},{icon:"fliph",tooltip:"Flip horizontally",onclick:f(Q.flip,"h")},{icon:"flipv",tooltip:"Flip vertically",onclick:f(Q.flip,"v")},{icon:"rotateleft",tooltip:"Rotate counterclockwise",onclick:f(Q.rotate,-90)},{icon:"rotateright",tooltip:"Rotate clockwise",onclick:f(Q.rotate,90)},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:m}]).hide().on("show",s),A=g(0,Q.invert),P=g(0,Q.sharpen),O=g(0,Q.emboss),T=v(0,Q.brightness,0,-1,1),N=v(0,Q.hue,180,0,360),_=v(0,Q.saturate,0,-1,1),R=v(0,Q.contrast,0,-1,1),D=v(0,Q.grayscale,0,0,1),M=v(0,Q.sepia,0,0,1),j=Q.colorize,I=p([{text:"Back",onclick:h},{type:"spacer",flex:1},{type:"slider",label:"R",name:"r",minValue:0,value:1,maxValue:2,ondragend:W,previewFilter:a},{type:"slider",label:"G",name:"g",minValue:0,value:1,maxValue:2,ondragend:W,previewFilter:a},{type:"slider",label:"B",name:"b",minValue:0,value:1,maxValue:2,ondragend:W,previewFilter:a},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:m}]).hide().on("show",function(){y.find("#r,#g,#b").value(1),s()}),B=v(0,Q.gamma,0,-1,1),w=p([{text:"Back",onclick:h},{type:"spacer",flex:1},{text:"hue",icon:"hue",onclick:i(N)},{text:"saturate",icon:"saturate",onclick:i(_)},{text:"sepia",icon:"sepia",onclick:i(M)},{text:"emboss",icon:"emboss",onclick:i(O)},{text:"exposure",icon:"exposure",onclick:i(F=v(0,Q.exposure,1,0,2))},{type:"spacer",flex:1}]).hide(),b=p([{tooltip:"Crop",icon:"crop",onclick:i($)},{tooltip:"Resize",icon:"resize2",onclick:i(C)},{tooltip:"Orientation",icon:"orientation",onclick:i(S)},{tooltip:"Brightness",icon:"sun",onclick:i(T)},{tooltip:"Sharpen",icon:"sharpen",onclick:i(P)},{tooltip:"Contrast",icon:"contrast",onclick:i(R)},{tooltip:"Color levels",icon:"drop",onclick:i(I)},{tooltip:"Gamma",icon:"gamma",onclick:i(B)},{tooltip:"Invert",icon:"invert",onclick:i(A)}]),k=new Z({flex:1,imageSrc:o.url}),E=new J({layout:"flex",direction:"column",border:"0 1 0 0",padding:5,spacing:5,items:[{type:"button",icon:"undo",tooltip:"Undo",name:"undo",onclick:function(){l(o=q.undo()),r()}},{type:"button",icon:"redo",tooltip:"Redo",name:"redo",onclick:function(){l(o=q.redo()),r()}},{type:"button",icon:"zoomin",tooltip:"Zoom in",onclick:function(){var e=k.zoom();e<2&&(e+=.1),k.zoom(e)}},{type:"button",icon:"zoomout",tooltip:"Zoom out",onclick:function(){var e=k.zoom();.1<e&&(e-=.1),k.zoom(e)}}]}),E=new J({type:"container",layout:"flex",direction:"row",align:"stretch",flex:1,items:[E,k]}),L=[b,$,C,S,w,A,T,N,_,R,D,M,I,P,O,B,F],(y=K.create("window",{layout:"flex",direction:"column",align:"stretch",minWidth:Math.min(G.DOM.getViewPort().w,800),minHeight:Math.min(G.DOM.getViewPort().h,650),title:"Edit image",items:L.concat([E]),buttons:[{text:"Save",name:"save",subtype:"primary",onclick:function(){e(o.blob),y.close()}},{text:"Cancel",onclick:"close"}]})).renderTo(document.body).reflow(),y.on("close",function(){t(),re(q.data),x=q=null}),q.add(o),r(),k.on("load",function(){U=k.imageSize().w,H=k.imageSize().h,z=H/U,V=U/H,y.find("#w").value(U),y.find("#h").value(H)}),k.on("crop",d)}return{edit:function(n){return new e(function(e,t){r(te(n),e,t)})}}}),n("a",[],function(){return{getImageSize:function(e){function t(e){return/^[0-9\.]+px$/.test(e)}var n=e.style.width,r=e.style.height;return n||r?t(n)&&t(r)?{w:parseInt(n,10),h:parseInt(r,10)}:null:(n=e.width,r=e.height,n&&r?{w:parseInt(n,10),h:parseInt(r,10)}:null)},setImageSize:function(e,t){var n,r;t&&(n=e.style.width,r=e.style.height,(n||r)&&(e.style.width=t.w+"px",e.style.height=t.h+"px",e.removeAttribute("data-mce-style")),n=e.width,r=e.height,(n||r)&&(e.setAttribute("width",t.w),e.setAttribute("height",t.h)))},getNaturalImageSize:function(e){return{w:e.naturalWidth,h:e.naturalHeight}}}}),n("l",["3","5"],function(e,i){function n(e){return null!=e}return{traverse:function(e,t){e=t.reduce(function(e,t){return n(e)?e[t]:void 0},e);return n(e)?e:null},readBlob:function(n){return new e(function(t){var e=new FileReader;e.onload=function(e){e=e.target;t(e.result)},e.readAsText(n)})},requestUrlAsBlob:function(t,r){return new e(function(e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&e({status:n.status,blob:this.response})},n.open("GET",t,!0),i.each(r,function(e,t){n.setRequestHeader(t,e)}),n.responseType="blob",n.send()})},parseJson:function(e){var t;try{t=JSON.parse(e)}catch(e){}return t}}}),n("b",["3","5","l"],function(i,e,n){function o(e){return i.reject("ImageProxy HTTP error: "+e)}function a(e,t){return n.readBlob(t).then(function(e){e=n.parseJson(e),e=n.traverse(e,["error","type"]);e=e||"Invalid JSON",i.reject("ImageProxy Service error: "+e)})}function r(e,t){return n.requestUrlAsBlob(e,{"Content-Type":"application/json;charset=UTF-8","tiny-api-key":t}).then(function(e){return 400<=e.status?(t=e.status,n=e.blob,400===(r=t)||403===r||500===r?a(0,n):o(t)):i.resolve(e.blob);var t,n,r})}return{getUrl:function(e,t){return t?r(e,t):(e=e,n.requestUrlAsBlob(e,{}).then(function(e){return 400<=e.status?o(e.status):i.resolve(e.blob)}))}}}),n("0",["1","2","3","4","5","6","7","8","9","a","b"],function(e,y,b,w,x,$,C,S,k,E,A){return e.add("imagetools",function(s){function n(e){s.notificationManager.open({text:e,type:"error"})}function l(){return s.selection.getNode()}function r(e){e=e.src;return 0===e.indexOf("data:")||0===e.indexOf("blob:")||new w(e).host===s.documentBaseURI.host}function i(e){return-1!==x.inArray(s.settings.imagetools_cors_hosts,new w(e.src).host)}function a(e){var t=e.src;return i(e)?A.getUrl(e.src,null):r(e)?S.imageToBlob(e):(t=s.settings.imagetools_proxy,t+=(-1===t.indexOf("?")?"?":"&")+"url="+encodeURIComponent(e.src),e=s.settings.api_key||s.settings.imagetools_api_key,A.getUrl(t,e))}function t(){var e=s.editorUpload.blobCache.getByUri(l().src);return e?e.blob():a(l())}function c(){clearTimeout(m)}function u(o,a){return S.blobToDataUri(o).then(function(e){var t=l(),n="imagetools"+v++,r=s.editorUpload.blobCache,e=w.parseDataUri(e).data,i=r.create(n,o,e);return r.add(i),s.undoManager.transact(function(){s.$(t).on("load",function e(){s.$(t).off("load",e),s.nodeChanged(),a?s.editorUpload.uploadImagesAuto():(c(),m=$.setEditorTimeout(s,function(){s.editorUpload.uploadImagesAuto()},3e4))}),s.$(t).attr({src:i.blobUri()}).removeAttr("data-mce-src")}),i})}function e(e){return function(){return s._scanForImages().then(t).then(e).then(u,n)}}function o(n){return function(){return e(function(e){var t=E.getImageSize(l());return t&&E.setImageSize(l(),{w:t.h,h:t.w}),C.rotate(e,n)})()}}function d(t){return function(){return e(function(e){return C.flip(e,t)})()}}function f(){function t(r){return new b(function(n){S.blobToImage(r).then(function(e){var t=E.getNaturalImageSize(e);o.w==t.w&&o.h==t.h||E.getImageSize(i)&&E.setImageSize(i,t),URL.revokeObjectURL(e.src),n(r)})})}var i=l(),o=E.getNaturalImageSize(i);i&&a(i).then(function(e){return k.edit(e).then(t).then(function(e){u(e,!0)},function(){})},n)}function h(e){return s.dom.is(e,"img:not([data-mce-object],[data-mce-placeholder])")&&(r(e)||i(e)||s.settings.imagetools_proxy)}var m,p,g,v=0;y.fileApi&&(s.addButton("rotateleft",{title:"Rotate counterclockwise",onclick:o(-90)}),s.addButton("rotateright",{title:"Rotate clockwise",onclick:o(90)}),s.addButton("flipv",{title:"Flip vertically",onclick:d("v")}),s.addButton("fliph",{title:"Flip horizontally",onclick:d("h")}),s.addButton("editimage",{title:"Edit image",onclick:f}),s.addButton("imageoptions",{title:"Image options",icon:"options",cmd:"mceImage"}),g=(g=s.settings.imagetools_toolbar)||"rotateleft rotateright | flipv fliph | crop editimage imageoptions",s.addContextToolbar(h,g),s.on("NodeChange",function(e){p&&p.src!=e.element.src&&(c(),s.editorUpload.uploadImagesAuto(),p=void 0),h(e.element)&&(p=e.element)}),s.addCommand("mceEditImage",f))}),function(){}}),l("0")()}(),tinymce.PluginManager.add("importcss",function(c){function l(t){return"string"==typeof t?function(e){return-1!==e.indexOf(t)}:t instanceof RegExp?function(e){return t.test(e)}:t}function u(e,a){function s(e,t){var n,r,i,o=e.href;if(r=o,i=tinymce.Env.cacheSuffix,(o=r="string"==typeof r?r.replace("?"+i,"").replace("&"+i,""):r)&&a(o,t)&&!function(e){var t=c.settings,n=!1!==t.skin&&(t.skin||"lightgray");if(n){t=t.skin_url;return e===(t=t?c.documentBaseURI.toAbsolute(t):tinymce.baseURL+"/skins/"+n)+"/content"+(c.inline?".inline":"")+".min.css"}}(o)){m(e.imports,function(e){s(e,!0)});try{n=e.cssRules||e.rules}catch(e){}m(n,function(e){e.styleSheet?s(e.styleSheet,!0):e.selectorText&&m(e.selectorText.split(","),function(e){l.push(tinymce.trim(e))})})}}var l=[],n={};m(c.contentCSS,function(e){n[e]=!0}),a=a||function(e,t){return t||n[e]};try{m(e.styleSheets,function(e){s(e)})}catch(e){}return l}function d(e){var t,n=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(e);if(n){var r=n[1],i=n[2].substr(1).split(".").join(" "),o=tinymce.makeMap("a,img");return n[1]?(t={title:e},c.schema.getTextBlockElements()[r]?t.block=r:c.schema.getBlockElements()[r]||o[r.toLowerCase()]?t.selector=r:t.inline=r):n[2]&&(t={inline:"span",title:e.substr(1),classes:i}),!1!==c.settings.importcss_merge_classes?t.classes=i:t.attributes={class:i},t}}function f(e,t){return null===t||!1!==e.settings.importcss_exclusive}var h=this,m=tinymce.each;c.on("renderFormatsMenu",function(e){function r(e,t){if(n=e,i=o,!(f(c,r=t)?n in i:n in r.selectors)){i=e,n=o,f(c,r=t)?n[i]=!0:r.selectors[i]=!0;i=(r=h,i=e,e=t,t=c.settings,(e&&e.selector_converter?e.selector_converter:t.importcss_selector_converter||d).call(r,i,e));if(i){e=i.name||tinymce.DOM.uniqueId();return c.formatter.register(e,i),tinymce.extend({},a.settings.itemDefaults,{text:i.title,format:e})}}var n,r,i;return null}var t,n=c.settings,o={},i=l(n.importcss_selector_filter),a=e.control,s=(t=n.importcss_groups,tinymce.util.Tools.map(t,function(e){return tinymce.util.Tools.extend({},e,{original:e,selectors:{},filter:l(e.filter),item:{text:e.title,menu:[]}})}));c.settings.importcss_append||a.items().remove(),m(u(e.doc||c.getDoc(),l(n.importcss_file_filter)),function(n){var e,t;-1!==n.indexOf(".mce-")||i&&!i(n)||(e=s,t=n,0<(e=tinymce.util.Tools.grep(e,function(e){return!e.filter||e.filter(t)})).length?tinymce.util.Tools.each(e,function(e){var t=r(n,e);t&&e.item.menu.push(t)}):(e=r(n,null))&&a.add(e))}),m(s,function(e){0<e.item.menu.length&&a.add(e.item)}),e.control.renderNew()}),h.convertSelectorToFormat=d}),tinymce.PluginManager.add("insertdatetime",function(r){function n(e,t){function n(e,t){if((e=""+e).length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e}return t=t||new Date,(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+t.getFullYear())).replace("%y",""+t.getYear())).replace("%m",n(t.getMonth()+1,2))).replace("%d",n(t.getDate(),2))).replace("%H",""+n(t.getHours(),2))).replace("%M",""+n(t.getMinutes(),2))).replace("%S",""+n(t.getSeconds(),2))).replace("%I",""+((t.getHours()+11)%12+1))).replace("%p",t.getHours()<12?"AM":"PM")).replace("%B",""+r.translate(c[t.getMonth()]))).replace("%b",""+r.translate(l[t.getMonth()]))).replace("%A",""+r.translate(s[t.getDay()]))).replace("%a",""+r.translate(a[t.getDay()]))).replace("%%","%")}function t(e){var t=n(e);if(r.settings.insertdatetime_element){t='<time datetime="'+n(/%[HMSIp]/.test(e)?"%Y-%m-%dT%H:%M":"%Y-%m-%d")+'">'+t+"</time>",e=r.dom.getParent(r.selection.getStart(),"time");if(e)return r.dom.setOuterHTML(e,t),0}r.insertContent(t)}var i,o,a="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),s="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),l="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),c="January February March April May June July August September October November December".split(" "),u=[];r.addCommand("mceInsertDate",function(){t(r.getParam("insertdatetime_dateformat",r.translate("%Y-%m-%d")))}),r.addCommand("mceInsertTime",function(){t(r.getParam("insertdatetime_timeformat",r.translate("%H:%M:%S")))}),r.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",onclick:function(){t(i||o)},menu:u}),tinymce.each(r.settings.insertdatetime_formats||["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"],function(e){o=o||e,u.push({text:n(e),onclick:function(){i=e,t(e)}})}),r.addMenuItem("insertdatetime",{icon:"date",text:"Insert date/time",menu:u,context:"insert"})}),function(i){i.PluginManager.add("legacyoutput",function(r,e,t){r.settings.inline_styles=!1,r.on("init",function(){var e="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",t=i.explode(r.settings.font_size_style_values),n=r.schema;r.formatter.register({alignleft:{selector:e,attributes:{align:"left"}},aligncenter:{selector:e,attributes:{align:"center"}},alignright:{selector:e,attributes:{align:"right"}},alignjustify:{selector:e,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(e){return i.inArray(t,e.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),i.each("b,i,u,strike".split(","),function(e){n.addValidElements(e+"[*]")}),n.getElementRule("font")||n.addValidElements("font[face|size|color|style]"),i.each(e.split(","),function(e){e=n.getElementRule(e);e&&(e.attributes.align||(e.attributes.align={},e.attributesOrder.push("align")))})}),r.addButton("fontsizeselect",function(){var i=[],e=r.settings.fontsize_formats||"8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7";return r.$.each(e.split(" "),function(e,t){var n=t,r=t,t=t.split("=");1<t.length&&(n=t[0],r=t[1]),i.push({text:n,value:r})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:i,fixedWidth:!0,onPostRender:function(){var t=this;r.on("NodeChange",function(){var e=r.dom.getParent(r.selection.getNode(),"font");e?t.value(e.size):t.value("")})},onclick:function(e){e.control.settings.value&&r.execCommand("FontSize",!1,e.control.settings.value)}}}),r.addButton("fontselect",function(){var n=[],e=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(r.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return t.each(e,function(e,t){n.push({text:{raw:t[0]},value:t[1],textStyle:-1==t[1].indexOf("dings")?"font-family:"+t[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:n,fixedWidth:!0,onPostRender:function(){var t=this;r.on("NodeChange",function(){var e=r.dom.getParent(r.selection.getNode(),"font");e?t.value(e.face):t.value("")})},onselect:function(e){e.control.settings.value&&r.execCommand("FontName",!1,e.control.settings.value)}}})})}(tinymce),tinymce.PluginManager.add("link",function(b){function e(t){return function(){var e=b.settings.link_list;"string"==typeof e?tinymce.util.XHR.send({url:e,success:function(e){t(tinymce.util.JSON.parse(e))}}):"function"==typeof e?e(t):t(e)}}function w(e,i,t){return function n(e,r){return r=r||[],tinymce.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=n(e.menu):(t.value=e.value,i&&i(t)),r.push(t)}),r}(e,t||[])}function t(e){function t(e){var t=r.find("#text");(!t.value()||e.lastControl&&t.value()==e.lastControl.text())&&t.value(e.control.text()),r.find("#href").value(e.control.value())}function n(){!i&&0===h.text.length&&y&&this.parent().parent().find("#text")[0].value(this.value())}var i,r,o,a,s,l,c,u,d,f,h={},m=b.selection,p=b.dom,g=m.getNode(),v=p.getParent(g,"a[href]"),y=function(e){var t=m.getContent();if(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||-1==t.indexOf("href=")))return!1;if(e){var n,r=e.childNodes;if(0===r.length)return!1;for(n=r.length-1;0<=n;n--)if(3!=r[n].nodeType)return!1}return!0}();h.text=i=v?v.innerText||v.textContent:m.getContent({format:"text"}),h.href=v?p.getAttrib(v,"href"):"",v?h.target=p.getAttrib(v,"target"):b.settings.default_link_target&&(h.target=b.settings.default_link_target),(g=p.getAttrib(v,"rel"))&&(h.rel=g),(g=p.getAttrib(v,"class"))&&(h.class=g),(g=p.getAttrib(v,"title"))&&(h.title=g),y&&(o={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){h.text=this.value()}}),e&&(a={type:"listbox",label:"Link list",values:w(e,function(e){e.value=b.convertURL(e.value||e.url,"href")},[{text:"None",value:""}]),onselect:t,value:b.convertURL(h.href,"href"),onPostRender:function(){a=this}}),!1!==b.settings.target_list&&(b.settings.target_list||(b.settings.target_list=[{text:"None",value:""},{text:"New window",value:"_blank"}]),l={name:"target",type:"listbox",label:"Target",values:w(b.settings.target_list)}),b.settings.rel_list&&(s={name:"rel",type:"listbox",label:"Rel",values:w(b.settings.rel_list)}),b.settings.link_class_list&&(c={name:"class",type:"listbox",label:"Class",values:w(b.settings.link_class_list,function(e){e.value&&(e.textStyle=function(){return b.formatter.getCssText({inline:"a",classes:[e.value]})})})}),!1!==b.settings.link_title&&(u={name:"title",type:"textbox",label:"Title",value:h.title}),r=b.windowManager.open({title:"Insert link",data:h,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(e){var t=e.meta||{};a&&a.value(b.convertURL(this.value(),"href")),tinymce.each(e.meta,function(e,t){r.find("#"+t).value(e)}),t.text||n.call(this)},onkeyup:n},o,u,(d=h.href,f=[],tinymce.each(b.dom.select("a:not([href])"),function(e){e=e.name||e.id;e&&f.push({text:e,value:"#"+e,selected:-1!=d.indexOf("#"+e)})}),f.length?(f.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:f,onselect:t}):void 0),a,s,l,c],onSubmit:function(e){function t(e,t){var n=b.selection.getRng();tinymce.util.Delay.setEditorTimeout(b,function(){b.windowManager.confirm(e,function(e){b.selection.setRng(n),t(e)})})}function n(){var e={href:r,target:h.target||null,rel:h.rel||null,class:h.class||null,title:h.title||null};v?(b.focus(),y&&h.text!=i&&("innerText"in v?v.innerText=h.text:v.textContent=h.text),p.setAttribs(v,e),m.select(v),b.undoManager.add()):y?b.insertContent(p.createHTML("a",e,p.encode(h.text))):b.execCommand("mceInsertLink",!1,e)}var r;return h=tinymce.extend(h,e.data),(r=h.href)?0<r.indexOf("@")&&-1==r.indexOf("//")&&-1==r.indexOf("mailto:")?void t("The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(r="mailto:"+r),n()}):b.settings.link_assume_external_targets&&!/^\w+:/i.test(r)||!b.settings.link_assume_external_targets&&/^\s*www[\.|\d\.]/i.test(r)?void t("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(r="http://"+r),n()}):void n():void b.execCommand("unlink")}})}b.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onclick:e(t),stateSelector:"a[href]"}),b.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",stateSelector:"a[href]"}),b.addShortcut("Meta+K","",e(t)),b.addCommand("mceLink",e(t)),this.showDialog=t,b.addMenuItem("link",{icon:"link",text:"Insert/edit link",shortcut:"Meta+K",onclick:e(t),stateSelector:"a[href]",context:"insert",prependToContext:!0})}),tinymce.PluginManager.add("lists",function($){function C(e){return $.$.contains($.getBody(),e)}function S(e){return e&&"BR"==e.nodeName}function k(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)&&C(e)}function E(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)}function A(e){return e.parentNode.firstChild==e}function T(e){return e.parentNode.lastChild==e}function N(e){return e&&$.schema.getTextBlockElements()[e.nodeName]}function _(e){return e===$.getBody()}function r(e,t){var n,r=tinymce.dom.RangeUtils.getNode(e,t);return E(e)&&((n=r)&&3===n.nodeType)?{container:r,offset:t>=e.childNodes.length?r.data.length:0}:{container:e,offset:t}}function R(e){var t=e.cloneRange(),n=r(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);e=r(e.endContainer,e.endOffset);return t.setEnd(e.container,e.offset),t}var D=this;$.on("init",function(){function s(e,t){e=y.isEmpty(e);return!(t&&0<y.select("span[data-mce-type=bookmark]").length)&&e}function c(i){function e(e){var t,n=i[e?"startContainer":"endContainer"],r=i[e?"startOffset":"endOffset"];1==n.nodeType&&(t=y.create("span",{"data-mce-type":"bookmark"}),n.hasChildNodes()?(r=Math.min(r,n.childNodes.length-1),e?n.insertBefore(t,n.childNodes[r]):y.insertAfter(t,n.childNodes[r])):n.appendChild(t),n=t,r=0),o[e?"startContainer":"endContainer"]=n,o[e?"startOffset":"endOffset"]=r}var o={};return e(!0),i.collapsed||e(),o}function u(i){function e(e){var t,n=t=i[e?"startContainer":"endContainer"],r=i[e?"startOffset":"endOffset"];n&&(1==n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t==e)return n;1==t.nodeType&&"bookmark"==t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,y.remove(t)),i[e?"startContainer":"endContainer"]=n,i[e?"startOffset":"endOffset"]=r)}e(!0),e();var t=y.createRng();t.setStart(i.startContainer,i.startOffset),i.endContainer&&t.setEnd(i.endContainer,i.endOffset),b.setRng(R(t))}function l(e,t){var n,r,i,o=y.createFragment(),a=$.schema.getBlockElements();if((t=$.settings.forced_root_block?t||$.settings.forced_root_block:t)&&((r=y.create(t)).tagName===$.settings.forced_root_block&&y.setAttribs(r,$.settings.forced_root_block_attrs),o.appendChild(r)),e)for(;n=e.firstChild;){var s=n.nodeName;i||"SPAN"==s&&"bookmark"==n.getAttribute("data-mce-type")||(i=!0),a[s]?(o.appendChild(n),r=null):t?(r||(r=y.create(t),o.appendChild(r)),r.appendChild(n)):o.appendChild(n)}return $.settings.forced_root_block?i||tinymce.Env.ie&&!(10<tinymce.Env.ie)||r.appendChild(y.create("br",{"data-mce-bogus":"1"})):o.appendChild(y.create("br")),o}function a(){return tinymce.grep(b.getSelectedBlocks(),E)}function i(e,t,n){var r,i,o,a=y.select('span[data-mce-type="bookmark"]',e);for(n=n||l(t),(r=y.createRng()).setStartAfter(t),r.setEndAfter(e),i=(r=r.extractContents()).firstChild;i;i=i.firstChild)if("LI"==i.nodeName&&y.isEmpty(i)){y.remove(i);break}y.isEmpty(r)||y.insertAfter(r,e),y.insertAfter(n,e),s(t.parentNode)&&(o=t.parentNode,tinymce.each(a,function(e){o.parentNode.insertBefore(e,t.parentNode)}),y.remove(o)),y.remove(t),s(e)&&y.remove(e)}function d(e){var t,n=e.nextSibling;if(n&&k(n)&&n.nodeName==e.nodeName&&w(e,n)){for(;t=n.firstChild;)e.appendChild(t);y.remove(n)}if((n=e.previousSibling)&&k(n)&&n.nodeName==e.nodeName&&w(e,n)){for(;t=n.firstChild;)e.insertBefore(t,e.firstChild);y.remove(n)}}function o(e){tinymce.each(tinymce.grep(y.select("ol,ul",e)),t)}function t(e){var t,n=e.parentNode;"LI"==n.nodeName&&n.firstChild==e&&((t=n.previousSibling)&&"LI"==t.nodeName?(t.appendChild(e),s(n)&&y.remove(n)):y.setStyle(n,"listStyleType","none")),!k(n)||(t=n.previousSibling)&&"LI"==t.nodeName&&t.appendChild(e)}function f(e){function t(e){s(e)&&y.remove(e)}var n=e.parentNode,r=n.parentNode;return _(n)||("DD"==e.nodeName?y.rename(e,"DT"):A(e)&&T(e)?"LI"==r.nodeName?(y.insertAfter(e,r),t(r),y.remove(n)):k(r)?y.remove(n,!0):(r.insertBefore(l(e),n),y.remove(n)):A(e)?"LI"==r.nodeName?(y.insertAfter(e,r),e.appendChild(n),t(r)):k(r)?r.insertBefore(e,n):(r.insertBefore(l(e),n),y.remove(e)):T(e)?"LI"==r.nodeName?y.insertAfter(e,r):k(r)?y.insertAfter(e,n):(y.insertAfter(l(e),n),y.remove(e)):(r="LI"==r.nodeName?(n=r,l(e,"LI")):k(r)?l(e,"LI"):l(e),i(n,e,r),o(n.parentNode))),!0}function r(){var e=a();if(e.length){for(var t=c(b.getRng(!0)),n=0;n<e.length&&(function(r){function e(e,t){var n;if(k(e)){for(;n=r.lastChild.firstChild;)t.appendChild(n);y.remove(e)}}var t,n,i;return"DT"==r.nodeName?(y.rename(r,"DD"),1):(t=r.previousSibling)&&k(t)?(t.appendChild(r),1):t&&"LI"==t.nodeName&&k(t.lastChild)?(t.lastChild.appendChild(r),e(r.lastChild,t.lastChild),1):(t=r.nextSibling)&&k(t)?(t.insertBefore(r,t.firstChild),1):(t=r.previousSibling)&&"LI"==t.nodeName&&(n=y.create(r.parentNode.nodeName),(i=y.getStyle(r.parentNode,"listStyleType"))&&y.setStyle(n,"listStyleType",i),t.appendChild(n),n.appendChild(r),e(r.lastChild,n),1)}(e[n])||0!==n);n++);return u(t),$.nodeChanged(),1}}function h(){var e=a();if(e.length){for(var t,n=c(b.getRng(!0)),r=$.getBody(),i=e.length;i--;)for(var o=e[i].parentNode;o&&o!=r;){for(t=e.length;t--;)if(e[t]===o){e.splice(i,1);break}o=o.parentNode}for(i=0;i<e.length&&(f(e[i])||0!==i);i++);return u(n),$.nodeChanged(),1}}function m(o,a){var e,l=b.getRng(!0),s="LI";"false"!==y.getContentEditable(b.getNode())&&("DL"==(o=o.toUpperCase())&&(s="DT"),e=c(l),tinymce.each(function(){function e(e){var t=l[e?"startContainer":"endContainer"],e=l[e?"startOffset":"endOffset"];for(1==t.nodeType&&(t=t.childNodes[Math.min(e,t.childNodes.length-1)]||t);t.parentNode!=i;){if(N(t))return t;if(/^(TD|TH)$/.test(t.parentNode.nodeName))return t;t=t.parentNode}return t}for(var n,r=[],i=$.getBody(),t=e(!0),o=e(),a=[],s=t;s&&(a.push(s),s!=o);s=s.nextSibling);return tinymce.each(a,function(e){if(N(e))return r.push(e),void(n=null);if(y.isBlock(e)||S(e))return S(e)&&y.remove(e),void(n=null);var t=e.nextSibling;return tinymce.dom.BookmarkManager.isBookmarkNode(e)&&(N(t)||!t&&e.parentNode==i)?void(n=null):(n||(n=y.create("p"),e.parentNode.insertBefore(n,e),r.push(n)),void n.appendChild(e))}),r}(),function(e){var t,n,r,i=e.previousSibling;i&&k(i)&&i.nodeName==o&&(n=i,r=y.getStyle(n,"list-style-type"),n=a?a["list-style-type"]:"",r===(n=null===n?"":n))?(t=i,e=y.rename(e,s),i.appendChild(e)):(t=y.create(o),e.parentNode.insertBefore(t,e),t.appendChild(e),e=y.rename(e,s)),x(t,a),d(t)}),u(e))}function p(){var e=c(b.getRng(!0)),r=$.getBody();tinymce.each(a(),function(e){var t,n;if(!_(e.parentNode))if(s(e))f(e);else{for(t=e;t&&t!=r;t=t.parentNode)k(t)&&(n=t);i(n,e),o(n.parentNode)}}),u(e)}function n(e,t){var n,r=y.getParent(b.getStart(),"OL,UL,DL");_(r)||(r?r.nodeName==e?p():(n=c(b.getRng(!0)),x(r,t),d(y.rename(r,e)),u(n)):m(e,t))}function e(t){return function(){var e=y.getParent($.selection.getStart(),"UL,OL,DL");return e&&e.nodeName==t}}function g(e,t){var n,r,i=e.startContainer,e=e.startOffset;if(3==i.nodeType&&(t?e<i.data.length:0<e))return i;for(n=$.schema.getNonEmptyElements(),1==i.nodeType&&(i=tinymce.dom.RangeUtils.getNode(i,e)),r=new tinymce.dom.TreeWalker(i,$.getBody()),!t||(!S(e=i)||(!y.isBlock(e.nextSibling)||S(e.previousSibling)))||r.next();i=r[t?"next":"prev2"]();){if("LI"==i.nodeName&&!i.hasChildNodes())return i;if(n[i.nodeName])return i;if(3==i.nodeType&&0<i.data.length)return i}}function v(e,t){var n,r,i=e.parentNode;if(C(e)&&C(t)){if(k(t.lastChild)&&(r=t.lastChild),i==t.lastChild&&S(i.previousSibling)&&y.remove(i.previousSibling),(n=t.lastChild)&&S(n)&&e.hasChildNodes()&&y.remove(n),s(t,!0)&&y.$(t).empty(),!s(e,!0))for(;n=e.firstChild;)t.appendChild(n);r&&t.appendChild(r),y.remove(e),s(i)&&!_(i)&&y.remove(i)}}var y=$.dom,b=$.selection,w=function(e,t){return $.dom.getStyle(e,"list-style-type",!0)===$.dom.getStyle(t,"list-style-type",!0)},x=function(e,t){y.setStyle(e,"list-style-type",t?t["list-style-type"]:null)};D.backspaceDelete=function(e){return b.isCollapsed()?function(e){var t,n,r=y.getParent(b.getStart(),"LI");if(r){if(_(t=r.parentNode)&&y.isEmpty(t))return!0;if(i=R(b.getRng(!0)),(n=y.getParent(g(i,e),"LI"))&&n!=r){var i=c(i);return e?v(n,r):v(r,n),u(i),!0}return n||e||!p(t.nodeName)?void 0:!0}}(e):!!($.dom.getParent($.selection.getStart(),"LI,DT,DD")||0<a().length)&&($.undoManager.transact(function(){$.execCommand("Delete"),o($.getBody())}),!0)},$.on("BeforeExecCommand",function(e){var t,n=e.command.toLowerCase();return"indent"==n?r()&&(t=!0):"outdent"==n&&h()&&(t=!0),t?($.fire("ExecCommand",{command:e.command}),e.preventDefault(),!0):void 0}),$.addCommand("InsertUnorderedList",function(e,t){n("UL",t)}),$.addCommand("InsertOrderedList",function(e,t){n("OL",t)}),$.addCommand("InsertDefinitionList",function(e,t){n("DL",t)}),$.addQueryStateHandler("InsertUnorderedList",e("UL")),$.addQueryStateHandler("InsertOrderedList",e("OL")),$.addQueryStateHandler("InsertDefinitionList",e("DL")),$.on("keydown",function(e){9!=e.keyCode||tinymce.util.VK.metaKeyPressed(e)||$.dom.getParent($.selection.getStart(),"LI,DT,DD")&&(e.preventDefault(),(e.shiftKey?h:r)())})}),$.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(){var o=this;$.on("nodechange",function(){for(var e=$.selection.getSelectedBlocks(),t=!1,n=0,r=e.length;!t&&n<r;n++)var i=e[n].nodeName,t="LI"==i&&A(e[n])||"UL"==i||"OL"==i||"DD"==i;o.disabled(t)})}}),$.on("keydown",function(e){e.keyCode==tinymce.util.VK.BACKSPACE?D.backspaceDelete()&&e.preventDefault():e.keyCode==tinymce.util.VK.DELETE&&D.backspaceDelete(!0)&&e.preventDefault()})}),tinymce.PluginManager.add("media",function(u,n){function r(e){return-1!=(e=e.toLowerCase()).indexOf(".mp3")?"audio/mpeg":-1!=e.indexOf(".wav")?"audio/wav":-1!=e.indexOf(".mp4")?"video/mp4":-1!=e.indexOf(".webm")?"video/webm":-1!=e.indexOf(".ogg")?"video/ogg":-1!=e.indexOf(".swf")?"application/x-shockwave-flash":""}function c(e){var t=u.settings.media_scripts;if(t)for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n].filter))return t[n]}function e(){function e(e){var t=o.find("#width")[0],n=o.find("#height")[0],r=t.value(),i=n.value();o.find("#constrain")[0].checked()&&a&&s&&r&&i&&(e.control==t?(i=Math.round(r/a*i),isNaN(i)||n.value(i)):(r=Math.round(i/s*r),isNaN(r)||t.value(r))),a=r,s=i}var o,a,s,t,n=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onchange:function(e){tinymce.each(e.meta,function(e,t){o.find("#"+t).value(e)})}}];!1!==u.settings.media_alt_source&&n.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),!1!==u.settings.media_poster&&n.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),!1!==u.settings.media_dimensions&&n.push({type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:3,onchange:e,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:3,onchange:e,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}),r=u.selection.getNode(),t=r.getAttribute("data-mce-object")?l(u.serializer.serialize(r,{selection:!0})):{},a=t.width,s=t.height;var r={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:u.selection.getNode().getAttribute("data-mce-object")?u.selection.getContent():void 0,multiline:!0,label:"Source"};r[f]=function(){t=l(this.value()),this.parent().parent().fromJSON(t)},o=u.windowManager.open({title:"Insert/edit video",data:t,bodyType:"tabpanel",body:[{title:"General",type:"form",onShowTab:function(){t=l(this.next().find("#embed").value()),this.fromJSON(t)},items:n},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,onShowTab:function(){this.find("#embed").value(i(this.parent().toJSON()))},items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},r]}],onSubmit:function(){var e,t,n,r=u.dom.select("img[data-mce-object]");for(u.insertContent(i(this.toJSON())),e=u.dom.select("img[data-mce-object]"),t=0;t<r.length;t++)for(n=e.length-1;0<=n;n--)r[t]==e[n]&&e.splice(n,1);u.selection.select(e[0]),u.nodeChanged()}})}function i(i){var e,t="";return i.source1||(tinymce.extend(i,l(i.embed)),i.source1)?(i.source2||(i.source2=""),i.poster||(i.poster=""),i.source1=u.convertURL(i.source1,"source"),i.source2=u.convertURL(i.source2,"source"),i.source1mime=r(i.source1),i.source2mime=r(i.source2),i.poster=u.convertURL(i.poster,"poster"),i.flashPlayerUrl=u.convertURL(n+"/moxieplayer.swf","movie"),tinymce.each(a,function(e){var t,n,r;if(t=e.regex.exec(i.source1)){for(r=e.url,n=0;t[n];n++)r=r.replace("$"+n,function(){return t[n]});i.source1=r,i.type=e.type,i.allowFullscreen=e.allowFullscreen,i.width=i.width||e.w,i.height=i.height||e.h}}),i.embed?t=o(i.embed,i,!0):((e=c(i.source1))&&(i.type="script",i.width=e.width,i.height=e.height),i.width=i.width||300,i.height=i.height||150,tinymce.each(i,function(e,t){i[t]=u.dom.encode(e)}),"iframe"==i.type?(e=i.allowFullscreen?' allowFullscreen="1"':"",t+='<iframe src="'+i.source1+'" width="'+i.width+'" height="'+i.height+'"'+e+"></iframe>"):"application/x-shockwave-flash"==i.source1mime?(t+='<object data="'+i.source1+'" width="'+i.width+'" height="'+i.height+'" type="application/x-shockwave-flash">',i.poster&&(t+='<img src="'+i.poster+'" width="'+i.width+'" height="'+i.height+'" />'),t+="</object>"):-1!=i.source1mime.indexOf("audio")?u.settings.audio_template_callback?t=u.settings.audio_template_callback(i):t+='<audio controls="controls" src="'+i.source1+'">'+(i.source2?'\n<source src="'+i.source2+'"'+(i.source2mime?' type="'+i.source2mime+'"':"")+" />\n":"")+"</audio>":"script"==i.type?t+='<script src="'+i.source1+'"><\/script>':t=u.settings.video_template_callback?u.settings.video_template_callback(i):'<video width="'+i.width+'" height="'+i.height+'"'+(i.poster?' poster="'+i.poster+'"':"")+' controls="controls">\n<source src="'+i.source1+'"'+(i.source1mime?' type="'+i.source1mime+'"':"")+" />\n"+(i.source2?'<source src="'+i.source2+'"'+(i.source2mime?' type="'+i.source2mime+'"':"")+" />\n":"")+"</video>"),t):""}function l(e){var r={};return new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(e,t){if(r.source1||"param"!=e||(r.source1=t.map.movie),"iframe"!=e&&"object"!=e&&"embed"!=e&&"video"!=e&&"audio"!=e||(r.type||(r.type=e),r=tinymce.extend(t.map,r)),"script"==e){var n=c(t.map.src);if(!n)return;r={type:"script",source1:t.map.src,width:n.width,height:n.height}}"source"==e&&(r.source1?r.source2||(r.source2=t.map.src):r.source1=t.map.src),"img"!=e||r.poster||(r.poster=t.map.src)}}).parse(e),r.source1=r.source1||r.src||r.data,r.source2=r.source2||"",r.poster=r.poster||"",r}function o(e,i,o){function a(e,t){var n,r,i,o;for(n in t)if(i=""+t[n],e.map[n])for(r=e.length;r--;)o=e[r],o.name==n&&(i?(e.map[n]=i,o.value=i):(delete e.map[n],e.splice(r,1)));else i&&(e.push({name:n,value:i}),e.map[n]=i)}var s,l=new tinymce.html.Writer,c=0;return new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){l.comment(e)},cdata:function(e){l.cdata(e)},text:function(e,t){l.text(e,t)},start:function(e,t,n){switch(e){case"video":case"object":case"embed":case"img":case"iframe":a(t,{width:i.width,height:i.height})}if(o)switch(e){case"video":a(t,{poster:i.poster,src:""}),i.source2&&a(t,{src:""});break;case"iframe":a(t,{src:i.source1});break;case"source":if(++c<=2&&(a(t,{src:i["source"+c],type:i["source"+c+"mime"]}),!i["source"+c]))return;break;case"img":if(!i.poster)return;s=!0}l.start(e,t,n)},end:function(e){if("video"==e&&o)for(var t=1;t<=2;t++){var n;i["source"+t]&&((n=[]).map={},c<t&&(a(n,{src:i["source"+t],type:i["source"+t+"mime"]}),l.start("source",n,!0)))}var r;i.poster&&"object"==e&&o&&!s&&((r=[]).map={},a(r,{src:i.poster,width:i.width,height:i.height}),l.start("img",r,!0)),l.end(e)}},new tinymce.html.Schema({})).parse(e),l.getContent()}function d(e,t){for(var n,r,i=e.attributes,o=i.length;o--;)n=i[o].name,r=i[o].value,"width"!==n&&"height"!==n&&"style"!==n&&("data"!=n&&"src"!=n||(r=u.convertURL(r,n)),t.attr("data-mce-p-"+n,r));(e=e.firstChild&&e.firstChild.value)&&(t.attr("data-mce-html",escape(e)),t.firstChild=null)}var a=[{regex:/youtu\.be\/([\w\-.]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\-_]+(?:\?.+)?)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowfullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowfullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],f=tinymce.Env.ie&&tinymce.Env.ie<=8?"onChange":"onInput";u.on("ResolveName",function(e){var t;1==e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}),u.on("preInit",function(){var t=u.schema.getSpecialElements();tinymce.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var n=u.schema.getBoolAttrs();tinymce.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){n[e]={}}),u.parser.addNodeFilter("iframe,video,audio,object,embed,script",function(e){for(var t,n,r,i,o,a,s,l=e.length;l--;)(t=e[l]).parent&&(t.parent.attr("data-mce-object")||"script"==t.name&&!(n=c(t.attr("src")))||(n&&(n.width&&t.attr("width",n.width.toString()),n.height&&t.attr("height",n.height.toString())),r="iframe"==t.name&&!1!==u.settings.media_live_embeds&&tinymce.Env.ceFalse?(s=a=o=void 0,a=(i=t).name,(s=new tinymce.html.Node("span",1)).attr({contentEditable:"false",style:i.attr("style"),"data-mce-object":a,class:"mce-preview-object mce-object-"+a}),d(i,s),(o=new tinymce.html.Node(a,1)).attr({src:i.attr("src"),allowfullscreen:i.attr("allowfullscreen"),width:i.attr("width")||"300",height:i.attr("height")||("audio"==a?"30":"150"),frameborder:"0"}),(a=new tinymce.html.Node("span",1)).attr("class","mce-shim"),s.append(o),s.append(a),s):(r=a=void 0,a=(s=t).name,(r=new tinymce.html.Node("img",1)).shortEnded=!0,d(s,r),r.attr({width:s.attr("width")||"300",height:s.attr("height")||("audio"==a?"30":"150"),style:s.attr("style"),src:tinymce.Env.transparentSrc,"data-mce-object":a,class:"mce-object mce-object-"+a}),r),t.replace(r)))}),u.serializer.addAttributeFilter("data-mce-object",function(e,t){for(var n,r,i,o,a,s,l=e.length;l--;)if((n=e[l]).parent){for(a=n.attr(t),r=new tinymce.html.Node(a,1),"audio"!=a&&"script"!=a&&((s=n.attr("class"))&&-1!==s.indexOf("mce-preview-object")?r.attr({width:n.firstChild.attr("width"),height:n.firstChild.attr("height")}):r.attr({width:n.attr("width"),height:n.attr("height")})),r.attr({style:n.attr("style")}),i=(o=n.attributes).length;i--;){var c=o[i].name;0===c.indexOf("data-mce-p-")&&r.attr(c.substr(11),o[i].value)}"script"==a&&r.attr("type","text/javascript"),(s=n.attr("data-mce-html"))&&((a=new tinymce.html.Node("#text",3)).raw=!0,a.value=function(e){if(!1===u.settings.media_filter_html)return e;var i,o=new tinymce.html.Writer;return new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){o.comment(e)},cdata:function(e){o.cdata(e)},text:function(e,t){o.text(e,t)},start:function(e,t,n){if(i=!0,"script"!=e&&"noscript"!=e){for(var r=0;r<t.length;r++){if(0===t[r].name.indexOf("on"))return;"style"==t[r].name&&(t[r].value=u.dom.serializeStyle(u.dom.parseStyle(t[r].value),e))}o.start(e,t,n),i=!1}},end:function(e){i||o.end(e)}},new tinymce.html.Schema({})).parse(e),o.getContent()}(unescape(s)),r.append(a)),n.replace(r)}})}),u.on("click keyup",function(){var e=u.selection.getNode();e&&u.dom.hasClass(e,"mce-preview-object")&&u.dom.getAttrib(e,"data-mce-selected")&&e.setAttribute("data-mce-selected","2")}),u.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!=t&&"script"!=t||e.preventDefault()}),u.on("objectResized",function(e){var t,n=e.target;!n.getAttribute("data-mce-object")||(t=n.getAttribute("data-mce-html"))&&(t=unescape(t),n.setAttribute("data-mce-html",escape(o(t,{width:e.width,height:e.height}))))}),u.addButton("media",{tooltip:"Insert/edit video",onclick:e,stateSelector:["img[data-mce-object]","span[data-mce-object]"]}),u.addMenuItem("media",{icon:"media",text:"Insert/edit video",onclick:e,context:"insert",prependToContext:!0}),u.on("setContent",function(){u.$("span.mce-preview-object").each(function(e,t){var n=u.$(t);0===n.find("span.mce-shim",t).length&&n.append('<span class="mce-shim"></span>')})}),u.addCommand("mceMedia",e),this.showDialog=e}),tinymce.PluginManager.add("nonbreaking",function(n){var r,e=n.getParam("nonbreaking_force_tab");n.addCommand("mceNonBreaking",function(){n.insertContent(n.plugins.visualchars&&n.plugins.visualchars.state?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;"),n.dom.setAttrib(n.dom.select("span.mce-nbsp"),"data-mce-bogus","1")}),n.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"}),n.addMenuItem("nonbreaking",{text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"}),e&&(r=1<+e?+e:3,n.on("keydown",function(e){if(9==e.keyCode&&!e.shiftKey){e.preventDefault();for(var t=0;t<r;t++)n.execCommand("mceNonBreaking")}}))}),tinymce.PluginManager.add("noneditable",function(o){function e(t){return function(e){return-1!==(" "+e.attr("class")+" ").indexOf(t)}}function t(e){function t(e){var t=arguments,n=t[t.length-2];return 0<n&&'"'==r.charAt(n-1)?e:'<span class="'+i+'" data-mce-content="'+o.dom.encode(t[0])+'">'+o.dom.encode("string"==typeof t[1]?t[1]:t[0])+"</span>"}var n=l.length,r=e.content,i=tinymce.trim(a);if("raw"!=e.format){for(;n--;)r=r.replace(l[n],t);e.content=r}}var r="contenteditable",n=" "+tinymce.trim(o.getParam("noneditable_editable_class","mceEditable"))+" ",a=" "+tinymce.trim(o.getParam("noneditable_noneditable_class","mceNonEditable"))+" ",i=e(n),s=e(a),l=o.getParam("noneditable_regexp");l&&!l.length&&(l=[l]),o.on("PreInit",function(){l&&o.on("BeforeSetContent",t),o.parser.addAttributeFilter("class",function(e){for(var t,n=e.length;n--;)t=e[n],i(t)?t.attr(r,"true"):s(t)&&t.attr(r,"false")}),o.serializer.addAttributeFilter(r,function(e){for(var t,n=e.length;n--;)t=e[n],(i(t)||s(t))&&(l&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):t.attr(r,null))})})}),tinymce.PluginManager.add("pagebreak",function(i){var t="mce-pagebreak",o=i.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e"),n=new RegExp(o.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi"),r='<img src="'+tinymce.Env.transparentSrc+'" class="'+t+'" data-mce-resize="false" data-mce-placeholder />';i.addCommand("mcePageBreak",function(){i.settings.pagebreak_split_block?i.insertContent("<p>"+r+"</p>"):i.insertContent(r)}),i.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),i.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"}),i.on("ResolveName",function(e){"IMG"==e.target.nodeName&&i.dom.hasClass(e.target,t)&&(e.name="pagebreak")}),i.on("click",function(e){"IMG"===(e=e.target).nodeName&&i.dom.hasClass(e,t)&&i.selection.select(e)}),i.on("BeforeSetContent",function(e){e.content=e.content.replace(n,r)}),i.on("PreInit",function(){i.serializer.addNodeFilter("img",function(e){for(var t,n=e.length;n--;)if((r=(t=e[n]).attr("class"))&&-1!==r.indexOf("mce-pagebreak")){var r=t.parent;if(i.schema.getBlockElements()[r.name]&&i.settings.pagebreak_split_block){r.type=3,r.value=o,r.raw=!0,t.remove();continue}t.type=3,t.value=o,t.raw=!0}})})}),function(s){"use strict";function r(e,t){for(var n,r=[],i=0;i<e.length;++i){if(!(n=l[e[i]]||function(e){for(var t=s,n=e.split(/[.\/]/),r=0;r<n.length;++r){if(!t[n[r]])return;t=t[n[r]]}return t}(e[i])))throw"module definition dependecy not found: "+e[i];r.push(n)}t.apply(null,r)}function e(e,t,n){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(void 0===t)throw"invalid module definition, dependencies must be specified";if(void 0===n)throw"invalid module definition, definition function must be specified";r(t,function(){l[e]=n.apply(null,arguments)})}var l={};e("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function(r,l,c){function u(t,e){return r.each(e,function(e){t=e.constructor==RegExp?t.replace(e,""):t.replace(e[0],e[1])}),t}return{filter:u,innerText:function(e){var t=new c,n=new l({},t),i="",o=t.getShortEndedElements(),a=r.makeMap("script noscript style textarea video audio iframe object"," "),s=t.getBlockElements();return e=u(e,[/<!\[[^\]]+\]>/g]),function e(t){var n=t.name,r=t;if("br"===n)return i+="\n",0;if(o[n]&&(i+=" "),a[n])return i+=" ",0;if(3==t.type&&(i+=t.value),!t.shortEnded&&(t=t.firstChild))for(;e(t),t=t.next;);s[n]&&r.next&&(i+="\n","p"==n&&(i+="\n"))}(n.parse(e)),i},trimHtml:function(e){return u(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(e,t,n){return t||n?" ":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(e){var t=0;return function(){return e+t++}}}}),e("tinymce/pasteplugin/SmartPaste",["tinymce/util/Tools"],function(i){function a(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)}function s(e){return a(e)&&/.(gif|jpe?g|png)$/.test(e)}function o(e,t,n){return!(!1!==e.selection.isCollapsed()||!a(t))&&(i=t,o=n,(r=e).undoManager.extra(function(){o(r,i)},function(){r.execCommand("mceInsertLink",!1,i)}),!0);var r,i,o}function l(e,t,n){return!!s(t)&&(i=t,o=n,(r=e).undoManager.extra(function(){o(r,i)},function(){r.insertContent('<img src="'+i+'">')}),!0);var r,i,o}function c(e,t){return e.insertContent(t,{merge:!1!==e.settings.paste_merge_formats,paste:!0}),!0}return{isImageUrl:s,isAbsoluteUrl:a,insertContent:function(e,t){var n,r;!1===e.settings.smart_paste?c(e,t):(n=e,r=t,i.each([o,l,c],function(e){return!0!==e(n,r,c)}))}}}),e("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/dom/RangeUtils","tinymce/util/VK","tinymce/pasteplugin/Utils","tinymce/pasteplugin/SmartPaste","tinymce/util/Delay"],function(k,E,t,A,i,T){return function(s){function a(e){var t,n,r=s.dom;n=s.fire("BeforePastePreProcess",{content:e}),e=(n=s.fire("PastePreProcess",n)).content,n.isDefaultPrevented()||(s.hasEventListeners("PastePostProcess")&&!n.isDefaultPrevented()&&(t=r.add(s.getBody(),"div",{style:"display:none"},e),n=s.fire("PastePostProcess",{node:t}),r.remove(t),e=n.node.innerHTML),n.isDefaultPrevented()||i.insertContent(s,e))}function l(e){e=s.dom.encode(e).replace(/\r\n/g,"\n");var t,n=s.dom.getParent(s.selection.getStart(),s.dom.isBlock),r=s.settings.forced_root_block;r&&(t=(t=s.dom.createHTML(r,s.settings.forced_root_block_attrs)).substr(0,t.length-3)+">"),n&&/^(PRE|DIV)$/.test(n.nodeName)||!r?e=A.filter(e,[[/\n/g,"<br>"]]):-1!=(e=A.filter(e,[[/\n\n/g,"</p>"+t],[/^(.*<\/p>)(<p>)$/,t+"$1"],[/\n/g,"<br />"]])).indexOf("<p>")&&(e=t+e),a(e)}function c(){var e,t,i=s.dom,n=s.getBody(),r=s.dom.getViewPort(s.getWin()).y,o=20;y=s.selection.getRng(),!s.inline||(e=s.selection.getScrollContainer())&&0<e.scrollTop&&(r=e.scrollTop),y.getClientRects&&((t=function(e){var t,n=e.startContainer,r=e.getClientRects();if(r.length)return r[0];if(e.collapsed&&1==n.nodeType){for(t=n.childNodes[y.startOffset];t&&3==t.nodeType&&!t.data.length;)t=t.nextSibling;if(t)return"BR"==t.tagName&&(n=i.doc.createTextNode("\ufeff"),t.parentNode.insertBefore(n,t),(e=i.createRng()).setStartBefore(n),e.setEndAfter(n),r=e.getClientRects(),i.remove(n)),r.length?r[0]:void 0}}(y))?o=r+(t.top-i.getPos(n).y):(o=r,!(r=y.startContainer)||1==(r=3==r.nodeType&&r.parentNode!=n?r.parentNode:r).nodeType&&(o=i.getPos(r,e||n).y))),v=i.add(s.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+o+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},C),(k.ie||k.gecko)&&i.setStyle(v,"left","rtl"==i.getStyle(n,"direction",!0)?65535:-65535),i.bind(v,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),v.focus(),s.selection.select(v,!0)}function u(){if(v){for(var e;e=s.dom.get("mcepastebin");)s.dom.remove(e),s.dom.unbind(e);y&&s.selection.setRng(y)}v=y=null}function d(){for(var e,t="",n=s.dom.select("div[id=mcepastebin]"),r=0;r<n.length;r++)e=(e=(e=n[r]).firstChild&&"mcepastebin"==e.firstChild.id?e.firstChild:e).innerHTML,t!=C&&(t+=e);return t}function f(e){var t,n={};if(e&&(!e.getData||(t=e.getData("Text"))&&0<t.length&&-1==t.indexOf(o)&&(n["text/plain"]=t),e.types))for(var r=0;r<e.types.length;r++){var i=e.types[r];n[i]=e.getData(i)}return n}function h(e){return g(e,"text/html")||g(e,"text/plain")}function m(e,t,n){e&&(s.selection.setRng(e),e=null);var r,i=t.result,o=-1!==(t=(e=i).indexOf(","))?e.substr(t+1):null,e=new Image;e.src=i,t=s.settings,e=e,!t.images_dataimg_filter||t.images_dataimg_filter(e)?((e=(t=s.editorUpload.blobCache).findFirst(function(e){return e.base64()===o}))?r=e:(r=t.create(S(),n,o),t.add(r)),a('<img src="'+r.blobUri()+'">')):a('<img src="'+i+'">')}function p(o,a){function e(e){var t,n=!1;if(e)for(t=0;t<e.length;t++){var r,i=e[t];/^image\/(jpeg|png|gif|bmp)$/.test(i.type)&&(r=i.getAsFile?i.getAsFile():i,(i=new FileReader).onload=m.bind(null,a,i,r),i.readAsDataURL(r),o.preventDefault(),n=!0)}return n}var t=o.clipboardData||o.dataTransfer;return s.settings.paste_data_images&&t?e(t.items)||e(t.files):void 0}function g(e,t){return t in e&&0<e[t].length}function n(e){return t.metaKeyPressed(e)&&86==e.keyCode||e.shiftKey&&45==e.keyCode}function e(){function o(e,t,n){var r;return g(e,"text/html")?r=e["text/html"]:(r=d())==C&&(n=!0),r=A.trimHtml(r),v&&v.firstChild&&"mcepastebin"===v.firstChild.id&&(n=!0),u(),(r=(n=!r.length?!0:n)?g(e,"text/plain")&&-1==r.indexOf("</p>")?e["text/plain"]:A.innerText(r):r)==C?void(t||s.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(n?l:a)(r)}s.on("keydown",function(e){function t(e){n(e)&&!e.isDefaultPrevented()&&u()}if(n(e)&&!e.isDefaultPrevented()&&(!(b=e.shiftKey&&86==e.keyCode)||!k.webkit||-1==navigator.userAgent.indexOf("Version/")))return e.stopImmediatePropagation(),x=(new Date).getTime(),k.ie&&b?(e.preventDefault(),void s.fire("paste",{ieFake:!0})):(u(),c(),s.once("keyup",t),void s.once("paste",function(){s.off("keyup",t)}))});s.on("paste",function(e){var t=(new Date).getTime(),n=f(e.clipboardData||s.getDoc().dataTransfer),t=(new Date).getTime()-t,r=(new Date).getTime()-x-t<1e3,i="text"==w.pasteFormat||b;return b=!1,e.isDefaultPrevented()||(t=(t=e).clipboardData,-1!=navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length)||!h(n)&&p(e,y||s.selection.getRng())?void u():(r||e.preventDefault(),!k.ie||r&&!e.ieFake||(c(),s.dom.bind(v,"paste",function(e){e.stopPropagation()}),s.getDoc().execCommand("Paste",!1,null),n["text/html"]=d()),void(g(n,"text/html")?(e.preventDefault(),o(n,r,i)):T.setEditorTimeout(s,function(){o(n,r,i)},0)))}),s.on("dragstart dragend",function(e){$="dragstart"==e.type}),s.on("drop",function(e){var t,n,r,i;i=e,n=E.getCaretRangeFromPoint(i.clientX,i.clientY,s.getDoc()),e.isDefaultPrevented()||$||((!h(t=f(e.dataTransfer))||0===t["text/plain"].indexOf("file://"))&&p(e,n)||!n||!1===s.settings.paste_filter_drop)||(r=t["mce-internal"]||t["text/html"]||t["text/plain"])&&(e.preventDefault(),T.setEditorTimeout(s,function(){s.undoManager.transact(function(){t["mce-internal"]&&s.execCommand("Delete"),s.selection.setRng(n),r=A.trimHtml(r),(t["text/html"]?a:l)(r)})}))}),s.on("dragover dragend",function(e){s.settings.paste_data_images&&e.preventDefault()})}var v,y,b,w=this,x=0,$=!1,C="%MCEPASTEBIN%",o="data:text/mce-internal,",S=A.createIdGenerator("mceclip");w.pasteHtml=a,w.pasteText=l,w.pasteImageData=p,s.on("preInit",function(){e(),s.parser.addNodeFilter("img",function(e,t,n){function r(e){e.attr("data-mce-object")||o===k.transparentSrc||e.remove()}if(!s.settings.paste_data_images&&((a=n).data&&!0===a.data.paste))for(var i=e.length;i--;){var o=e[i].attributes.map.src;o&&(0===o.indexOf("webkit-fake-url")||!s.settings.allow_html_data_urls&&0===o.indexOf("data:"))&&r(e[i])}var a})})}}),e("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],function(d,o,c,u,f,h){function m(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function e(l){var i=l.settings;l.on("BeforePastePreProcess",function(e){var a,s,t,n,r=e.content;r=(r=r.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,"")).replace(/<br class="?Apple-interchange-newline"?>/gi,""),(a=i.paste_retain_style_properties)&&(s=d.makeMap(a.split(/[, ]/))),!1!==i.paste_enable_default_filters&&m(e.content)&&(e.wordContent=!0,r=h.filter(r,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return 0<t.length?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]),n=i.paste_word_valid_elements,t=new c({valid_elements:n=n||"-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody",valid_children:"-li[p]"}),d.each(t.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))}),(n=new o({},t)).addAttributeFilter("style",function(e){for(var t,n=e.length;n--;)(t=e[n]).attr("style",function(n,r){var i,o={},e=l.dom.parseStyle(r);return d.each(e,function(e,t){switch(t){case"mso-list":(i=/\w+ \w+([0-9]+)/i.exec(r))&&(n._listLevel=parseInt(i[1],10)),/Ignore/i.test(e)&&n.firstChild&&(n._listIgnore=!0,n.firstChild._listIgnore=!0);break;case"horiz-align":t="text-align";break;case"vert-align":t="vertical-align";break;case"font-color":case"mso-foreground":t="color";break;case"mso-background":case"mso-highlight":t="background";break;case"font-weight":case"font-style":return void("normal"!=e&&(o[t]=e));case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void n.remove()}return 0===t.indexOf("mso-comment")?void n.remove():void(0!==t.indexOf("mso-")&&("all"==a||s&&s[t])&&(o[t]=e))}),/(bold)/i.test(o["font-weight"])&&(delete o["font-weight"],n.wrap(new f("b",1))),/(italic)/i.test(o["font-style"])&&(delete o["font-style"],n.wrap(new f("i",1))),(o=l.dom.serializeStyle(o,n.name))||null}(t,t.attr("style"))),"span"==t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),n.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)n=(t=e[r]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),n.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),n.addNodeFilter("a",function(e){for(var t,n,r,i=e.length;i--;)if(n=(t=e[i]).attr("href"),r=t.attr("name"),n&&-1!=n.indexOf("#_msocom_"))t.remove();else if((n=n&&0===n.indexOf("file://")?(n=n.split("#")[1])&&"#"+n:n)||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()}),r=n.parse(r),!1!==i.paste_convert_word_fake_lists&&function(e){function i(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),0;if(e=e.firstChild)do{if(!i(e,t))return}while(e=e.next);return 1}function t(e,t,n){var r=e._listLevel||s;(o=r!=s?r<s?o&&o.parent.parent:(a=o,null):o)&&o.name==t?o.append(e):(a=a||o,o=new f(t,1),1<n&&o.attr("start",""+n),e.wrap(o)),e.name="li",s<r&&a&&a.lastChild.append(o),s=r,function e(t){if(t._listIgnore)return t.remove(),0;if(t=t.firstChild)for(;e(t),t=t.next;);}(e),i(e,/^\u00a0+/),i(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),i(e,/^\u00a0+/)}for(var o,a,s=1,n=[],r=e.firstChild;null!=r;)if(n.push(r),null!==(r=r.walk()))for(;void 0!==r&&r.parent!==e;)r=r.walk();for(var l=0;l<n.length;l++)if("p"==(e=n[l]).name&&e.firstChild){var c=function e(t){var n="";if(3===t.type)return t.value;if(t=t.firstChild)for(;n+=e(t),t=t.next;);return n}(e);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(c)){t(e,"ul");continue}if(function(t){var n,e=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/];return t=t.replace(/^[\u00a0 ]+/,""),d.each(e,function(e){return e.test(t)?!(n=!0):void 0}),n}(c)){var u=/([0-9]+)\./.exec(c),c=1;t(e,"ol",c=u?parseInt(u[1],10):c);continue}if(e._listLevel){t(e,"ul",1);continue}o=null}else a=o,o=null}(r),e.content=new u({validate:i.validate},t).serialize(r))})}return e.isWordContent=m,e}),e("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(t,i,o,a){return function(r){function e(t){r.on("BeforePastePreProcess",function(e){e.content=t(e.content)})}t.webkit&&e(function(e){if(o.isWordContent(e))return e;var c,u,d=r.settings.paste_webkit_styles;return!1===r.settings.paste_remove_styles_if_webkit||"all"==d?e:(e=(d=d&&d.split(/[, ]/))?(c=r.dom,u=r.selection.getNode(),e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,t,n,r){var i=c.parseStyle(n,"span"),o={};if("none"===d)return t+r;for(var a=0;a<d.length;a++){var s=i[d[a]],l=c.getStyle(u,d[a],!0);/color/.test(d[a])&&(s=c.toHex(s),l=c.toHex(l)),l!=s&&(o[d[a]]=s)}return(o=c.serializeStyle(o,"span"))?t+' style="'+o+'"'+r:t+r})):e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3")).replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r})}),t.ie&&e(function(e){if(!o.isWordContent(e))return e;var n=[];i.each(r.schema.getBlockElements(),function(e,t){n.push(t)});var t=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return e=a.filter(e,[[t,"$1"]]),a.filter(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])})}}),e("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(o,a,s,l){var c;o.add("paste",function(t){function e(){var e;"text"==n.pasteFormat?(this.active(!1),n.pasteFormat="html",t.fire("PastePlainTextToggle",{state:!1})):(n.pasteFormat="text",this.active(!0),c||!1===t.settings.paste_plaintext_inform||(e=t.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),t.notificationManager.open({text:e,type:"info"}),c=!0,t.fire("PastePlainTextToggle",{state:!0}))),t.focus()}var n,r=this,i=t.settings;return/(^|[ ,])powerpaste([, ]|$)/.test(i.plugins)&&o.get("powerpaste")?void("undefined"!=typeof console&&console.log&&console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option.")):(r.clipboard=n=new a(t),r.quirks=new l(t),r.wordFilter=new s(t),t.settings.paste_as_text&&(r.clipboard.pasteFormat="text"),i.paste_preprocess&&t.on("PastePreProcess",function(e){i.paste_preprocess.call(r,r,e)}),i.paste_postprocess&&t.on("PastePostProcess",function(e){i.paste_postprocess.call(r,r,e)}),t.addCommand("mceInsertClipboardContent",function(e,t){t.content&&r.clipboard.pasteHtml(t.content),t.text&&r.clipboard.pasteText(t.text)}),t.settings.paste_block_drop&&t.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),t.settings.paste_data_images||t.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&0<t.files.length&&e.preventDefault()}),t.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:e,active:"text"==r.clipboard.pasteFormat}),void t.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:n.pasteFormat,onclick:e}))})}),function(e){for(var t,n,r,i,o=0;o<e.length;o++){t=s,r=(n=e[o]).split(/[.\/]/);for(var a=0;a<r.length-1;++a)void 0===t[r[a]]&&(t[r[a]]={}),t=t[r[a]];t[r[r.length-1]]=l[n]}if(s.AMDLC_TESTS){for(n in i=s.privateModules||{},l)i[n]=l[n];for(o=0;o<e.length;o++)delete i[e[o]];s.privateModules=i}}(["tinymce/pasteplugin/Utils"])}(this),tinymce.PluginManager.add("preview",function(i){var o=i.settings,a=!tinymce.Env.ie;i.addCommand("mcePreview",function(){i.windowManager.open({title:"Preview",width:parseInt(i.getParam("plugin_preview_width","650"),10),height:parseInt(i.getParam("plugin_preview_height","500"),10),html:'<iframe src="javascript:\'\'" frameborder="0"'+(a?' sandbox="allow-scripts"':"")+"></iframe>",buttons:{text:"Close",onclick:function(){this.parent().parent().close()}},onPostRender:function(){var t="";t+='<base href="'+i.documentBaseURI.getURI()+'">',tinymce.each(i.contentCSS,function(e){t+='<link type="text/css" rel="stylesheet" href="'+i.documentBaseURI.toAbsolute(e)+'">'});var e=o.body_id||"tinymce";-1!=e.indexOf("=")&&(e=(e=i.getParam("body_id","","hash"))[i.id]||e);var n=o.body_class||"";-1!=n.indexOf("=")&&(n=(n=i.getParam("body_class","","hash"))[i.id]||"");var r=i.settings.directionality?' dir="'+i.settings.directionality+'"':"",n="<!DOCTYPE html><html><head>"+t+'</head><body id="'+e+'" class="mce-content-body '+n+'"'+r+">"+i.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);<\/script> </body></html>';a?this.getEl("body").firstChild.src="data:text/html;charset=utf-8,"+encodeURIComponent(n):((r=this.getEl("body").firstChild.contentWindow.document).open(),r.write(n),r.close())}})}),i.addButton("preview",{title:"Preview",cmd:"mcePreview"}),i.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})}),tinymce.PluginManager.add("print",function(e){e.addCommand("mcePrint",function(){e.getWin().print()}),e.addButton("print",{title:"Print",cmd:"mcePrint"}),e.addShortcut("Meta+P","","mcePrint"),e.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print",shortcut:"Meta+P",context:"file"})}),tinymce.PluginManager.add("save",function(t){function n(e){t.notificationManager.open({text:e,type:"error"})}function e(){var e=this;t.on("nodeChange dirty",function(){e.disabled(t.getParam("save_enablewhendirty",!0)&&!t.isDirty())})}t.addCommand("mceSave",function(){var e=tinymce.DOM.getParent(t.id,"form");return!t.getParam("save_enablewhendirty",!0)||t.isDirty()?(tinymce.triggerSave(),t.getParam("save_onsavecallback")?(t.execCallback("save_onsavecallback",t),void t.nodeChanged()):void(e?(t.setDirty(!1),e.onsubmit&&!e.onsubmit()||("function"==typeof e.submit?e.submit():n(t.translate("Error: Form submit field collision."))),t.nodeChanged()):n(t.translate("Error: No form element found.")))):void 0}),t.addCommand("mceCancel",function(){var e=tinymce.trim(t.startContent);return t.getParam("save_oncancelcallback")?void t.execCallback("save_oncancelcallback",t):(t.setContent(e),t.undoManager.clear(),void t.nodeChanged())}),t.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:e}),t.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:e}),t.addShortcut("Meta+S","","mceSave")}),function(){function v(e){return e&&1==e.nodeType&&"false"===e.contentEditable}function i(e,t,n,r,i){function o(e,t){if(t=t||0,!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var n=e.index;if(0<t){t=e[t];if(!t)throw"Invalid capture group";n+=e[0].indexOf(t),e[0]=t}return[n,n+e[0].length,[e[0]]]}var a,s,l,c,m,u=[],d=0,p=t.ownerDocument,f=i.getBlockElements(),h=i.getWhiteSpaceElements(),g=i.getShortEndedElements();if(s=function e(t){var n;if(3===t.nodeType)return t.data;if(h[t.nodeName]&&!f[t.nodeName])return"";if(n="",v(t))return"\n";if((f[t.nodeName]||g[t.nodeName])&&(n+="\n"),t=t.firstChild)for(;n+=e(t),t=t.nextSibling;);return n}(t)){if(e.global)for(;a=e.exec(s);)u.push(o(a,r));else a=s.match(e),u.push(o(a,r));return u.length&&(d=u.length,function(e,t,n){var r,i,o,a,s=[],l=0,c=e,u=t.shift(),d=0;e:for(;;){if((f[c.nodeName]||g[c.nodeName]||v(c))&&l++,3===c.nodeType&&(!i&&c.length+l>=u[1]?(i=c,a=u[1]-l):r&&s.push(c),!r&&c.length+l>u[0]&&(r=c,o=u[0]-l),l+=c.length),r&&i){if(c=n({startNode:r,startNodeIndex:o,endNode:i,endNodeIndex:a,innerNodes:s,match:u[2],matchIndex:d}),l-=i.length-a,i=r=null,s=[],d++,!(u=t.shift()))break}else if(h[c.nodeName]&&!f[c.nodeName]||!c.firstChild){if(c.nextSibling){c=c.nextSibling;continue}}else if(!v(c)){c=c.firstChild;continue}for(;;){if(c.nextSibling){c=c.nextSibling;break}if(c.parentNode===e)break e;c=c.parentNode}}}(t,u,(m="function"!=typeof(l=n)?(c=l.nodeType?l:p.createElement(l),function(e,t){var n=c.cloneNode(!1);return n.setAttribute("data-mce-index",t),e&&n.appendChild(p.createTextNode(e)),n}):l,function(e){var t,n,r=e.startNode,i=e.endNode,o=e.matchIndex;if(r===i){var a=r,s=a.parentNode;0<e.startNodeIndex&&(t=p.createTextNode(a.data.substring(0,e.startNodeIndex)),s.insertBefore(t,a));var l=m(e.match[0],o);return s.insertBefore(l,a),e.endNodeIndex<a.length&&(n=p.createTextNode(a.data.substring(e.endNodeIndex)),s.insertBefore(n,a)),a.parentNode.removeChild(a),l}t=p.createTextNode(r.data.substring(0,e.startNodeIndex)),n=p.createTextNode(i.data.substring(e.endNodeIndex));for(var a=m(r.data.substring(e.startNodeIndex),o),c=[],u=0,d=e.innerNodes.length;u<d;++u){var f=e.innerNodes[u],h=m(f.data,o);f.parentNode.replaceChild(h,f),c.push(h)}l=m(i.data.substring(0,e.endNodeIndex),o);return(s=r.parentNode).insertBefore(t,r),s.insertBefore(a,r),s.removeChild(r),(s=i.parentNode).insertBefore(l,i),s.insertBefore(n,i),s.removeChild(i),l}))),d}}tinymce.PluginManager.add("searchreplace",function(d){function t(){function i(){s.statusbar.find("#next").disabled(!m(y+1).length),s.statusbar.find("#prev").disabled(!m(y-1).length)}function o(){d.windowManager.alert("Could not find the specified string.",function(){s.find("#find")[0].focus()})}var a={},e=tinymce.trim(d.selection.getContent({format:"text"})),s=d.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){d.focus(),v.done()},onSubmit:function(e){var t,n,r;return e.preventDefault(),t=s.find("#case").checked(),r=s.find("#words").checked(),(n=s.find("#find").value()).length?a.text==n&&a.caseState==t&&a.wholeWord==r?0===m(y+1).length?void o():(v.next(),void i()):((e=v.find(n,t,r))||o(),s.statusbar.items().slice(1).disabled(0===e),i(),void(a={text:n,caseState:t,wholeWord:r})):(v.done(!1),void s.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){s.submit()}},{text:"Replace",disabled:!0,onclick:function(){v.replace(s.find("#replace").value())||(s.statusbar.items().slice(1).disabled(!0),y=-1,a={})}},{text:"Replace all",disabled:!0,onclick:function(){v.replace(s.find("#replace").value(),!0,!0),s.statusbar.items().slice(1).disabled(!0),a={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){v.prev(),i()}},{text:"Next",name:"next",disabled:!0,onclick:function(){v.next(),i()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:e},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})}function f(e){e=e.getAttribute("data-mce-index");return"number"==typeof e?""+e:e}function h(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function m(e){var t=[],n=tinymce.toArray(d.getBody().getElementsByTagName("span"));if(n.length)for(var r=0;r<n.length;r++){var i=f(n[r]);null!==i&&i.length&&i===e.toString()&&t.push(n[r])}return t}function r(e){var t=y,n=d.dom;(e=!1!==e)?t++:t--,n.removeClass(m(y),"mce-match-marker-selected");e=m(t);return e.length?(n.addClass(m(t),"mce-match-marker-selected"),d.selection.scrollIntoView(e[0]),t):-1}function p(e){var t=d.dom,n=e.parentNode;t.remove(e),t.isEmpty(n)&&t.remove(n)}function g(e){e=f(e);return null!==e&&0<e.length}var v=this,y=-1;v.init=function(e){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:t,separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",shortcut:"Meta+F",onclick:t}),e.addCommand("SearchReplace",t),e.shortcuts.add("Meta+F","",t)},v.find=function(e,t,n){e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),e=n?"\\b"+e+"\\b":e;n=new RegExp(e,t?"g":"gi"),(e=d.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",t=d.getBody(),v.done(!1),e=i(n,t,e,!1,d.schema);return e&&(y=-1,y=r(!0)),e},v.next=function(){var e=r(!0);-1!==e&&(y=e)},v.prev=function(){var e=r(!1);-1!==e&&(y=e)},v.replace=function(e,t,n){var r,i,o,a,s,l=y;for(t=!1!==t,o=d.getBody(),i=tinymce.grep(tinymce.toArray(o.getElementsByTagName("span")),g),r=0;r<i.length;r++){var c=f(i[r]),u=a=parseInt(c,10);if(n||u===y){for(e.length?(i[r].firstChild.nodeValue=e,h(i[r])):p(i[r]);i[++r];){if((u=parseInt(f(i[r]),10))!==a){r--;break}p(i[r])}t&&l--}else y<a&&i[r].setAttribute("data-mce-index",a-1)}return d.undoManager.add(),y=l,t?(s=0<m(l+1).length,v.next()):(s=0<m(l-1).length,v.prev()),!n&&s},v.done=function(e){for(var t,n,r=tinymce.toArray(d.getBody().getElementsByTagName("span")),i=0;i<r.length;i++){var o=f(r[i]);null!==o&&o.length&&(o===y.toString()&&(t=t||r[i].firstChild,n=r[i].firstChild),h(r[i]))}if(t&&n){var a=d.dom.createRng();return a.setStart(t,0),a.setEnd(n,n.data.length),!1!==e&&d.selection.setRng(a),a}}})}(),function(s){"use strict";function r(e,t){for(var n,r=[],i=0;i<e.length;++i){if(!(n=l[e[i]]||function(e){for(var t=s,n=e.split(/[.\/]/),r=0;r<n.length;++r){if(!t[n[r]])return;t=t[n[r]]}return t}(e[i])))throw"module definition dependecy not found: "+e[i];r.push(n)}t.apply(null,r)}function e(e,t,n){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(void 0===t)throw"invalid module definition, dependencies must be specified";if(void 0===n)throw"invalid module definition, definition function must be specified";r(t,function(){l[e]=n.apply(null,arguments)})}var l={};e("tinymce/spellcheckerplugin/DomTextMatcher",[],function(){function v(e){return e&&1==e.nodeType&&"false"===e.contentEditable}return function(a,n){function i(e){var t=a.getElementsByTagName("*"),n=[];e="number"==typeof e?""+e:null;for(var r=0;r<t.length;r++){var i=t[r],o=i.getAttribute("data-mce-index");null!==o&&o.length&&(o!==e&&null!==e||n.push(i))}return n}function o(e){for(var t=l.length;t--;)if(l[t]===e)return t;return-1}function e(e){for(var t=0,n=l.length;t<n&&!1!==e(l[t],t);t++);return this}function t(e){for(var t,n=i(e?o(e):null),r=n.length;r--;)(t=n[r]).parentNode.insertBefore(t.firstChild,t),t.parentNode.removeChild(t);return this}function r(e){var t=i(o(e)),e=n.dom.createRng();return e.setStartBefore(t[0]),e.setEndAfter(t[t.length-1]),e}var s,l=[],g=n.dom,f=n.schema.getBlockElements(),h=n.schema.getWhiteSpaceElements(),m=n.schema.getShortEndedElements(),c=function e(t){var n;if(3===t.nodeType)return t.data;if(h[t.nodeName]&&!f[t.nodeName])return"";if(v(t))return"\n";if(n="",(f[t.nodeName]||m[t.nodeName])&&(n+="\n"),t=t.firstChild)for(;n+=e(t),t=t.nextSibling;);return n}(a);return{text:c,matches:l,each:e,filter:function(n){var r=[];return e(function(e,t){n(e,t)&&r.push(e)}),l=r,this},reset:function(){return l.splice(0,l.length),t(),this},matchFromElement:function(e){return l[e.getAttribute("data-mce-index")]},elementFromMatch:function(e){return i(o(e))[0]},find:function(e,t){if(c&&e.global)for(;s=e.exec(c);)l.push(function(e,t){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";return{start:e.index,end:e.index+e[0].length,text:e[0],data:t}}(s,t));return this},add:function(e,t,n){return l.push({start:e,end:e+t,text:c.substr(e,t),data:n}),this},wrap:function(e){return l.length&&function(e,t,n){var r,i,o,a,s,l=[],c=0,u=e,d=0;(t=t.slice(0)).sort(function(e,t){return e.start-t.start}),s=t.shift();e:for(;;){if((f[u.nodeName]||m[u.nodeName]||v(u))&&c++,3===u.nodeType&&(!i&&u.length+c>=s.end?(i=u,a=s.end-c):r&&l.push(u),!r&&u.length+c>s.start&&(r=u,o=s.start-c),c+=u.length),r&&i){if(u=n({startNode:r,startNodeIndex:o,endNode:i,endNodeIndex:a,innerNodes:l,match:s.text,matchIndex:d}),c-=i.length-a,i=r=null,l=[],d++,!(s=t.shift()))break}else if(h[u.nodeName]&&!f[u.nodeName]||!u.firstChild){if(u.nextSibling){u=u.nextSibling;continue}}else if(!v(u)){u=u.firstChild;continue}for(;;){if(u.nextSibling){u=u.nextSibling;break}if(u.parentNode===e)break e;u=u.parentNode}}}(a,l,(r=e,function(e){var t,n,r=e.startNode,i=e.endNode,o=e.matchIndex,a=g.doc;if(r===i){var s=r,l=s.parentNode;0<e.startNodeIndex&&(t=a.createTextNode(s.data.substring(0,e.startNodeIndex)),l.insertBefore(t,s));var c=p(e.match,o);return l.insertBefore(c,s),e.endNodeIndex<s.length&&(n=a.createTextNode(s.data.substring(e.endNodeIndex)),l.insertBefore(n,s)),s.parentNode.removeChild(s),c}t=a.createTextNode(r.data.substring(0,e.startNodeIndex)),n=a.createTextNode(i.data.substring(e.endNodeIndex));for(var c=p(r.data.substring(e.startNodeIndex),o),u=[],d=0,f=e.innerNodes.length;d<f;++d){var h=e.innerNodes[d],m=p(h.data,o);h.parentNode.replaceChild(m,h),u.push(m)}a=p(i.data.substring(0,e.endNodeIndex),o);return(l=r.parentNode).insertBefore(t,r),l.insertBefore(c,r),l.removeChild(r),(l=i.parentNode).insertBefore(a,i),l.insertBefore(n,i),l.removeChild(i),a})),this;function p(e,t){var n=l[t];n.stencil||(n.stencil=r(n));n=n.stencil.cloneNode(!1);return n.setAttribute("data-mce-index",t),e&&n.appendChild(g.doc.createTextNode(e)),n}var r},unwrap:t,replace:function(e,t){return(e=r(e)).deleteContents(),0<t.length&&e.insertNode(n.dom.doc.createTextNode(t)),e},rangeFromMatch:r,indexOf:o}}}),e("tinymce/spellcheckerplugin/Plugin",["tinymce/spellcheckerplugin/DomTextMatcher","tinymce/PluginManager","tinymce/util/Tools","tinymce/ui/Menu","tinymce/dom/DOMUtils","tinymce/util/XHR","tinymce/util/URI","tinymce/util/JSON"],function(C,S,k,E,A,T,N,_){S.add("spellchecker",function(a,s){function n(){return x.textMatcher||(x.textMatcher=new C(a.getBody(),a)),x.textMatcher}function r(n,r){var t=[],e=m[n];k.each(e,function(e){t.push({text:e,onclick:function(){a.insertContent(a.dom.encode(e)),a.dom.remove(r),c()}})}),t.push({text:"-"}),v&&t.push({text:"Add to Dictionary",onclick:function(){var e,t;e=n,t=r,a.setProgressState(!0),l("addToDictionary",e,function(){a.setProgressState(!1),a.dom.remove(t,!0),c()},function(e){a.notificationManager.open({text:e,type:"error"}),a.setProgressState(!1)})}}),t.push.apply(t,[{text:"Ignore",onclick:function(){u(n,r)}},{text:"Ignore all",onclick:function(){u(n,r,!0)}}]),(g=new E({items:t,context:"contextmenu",onautohide:function(e){-1!=e.target.className.indexOf("spellchecker")&&e.preventDefault()},onhide:function(){g.remove(),g=null}})).renderTo(document.body);var i=A.DOM.getPos(a.getContentAreaContainer()),o=a.dom.getPos(r[0]),e=a.dom.getRoot();"BODY"==e.nodeName?(o.x-=e.ownerDocument.documentElement.scrollLeft||e.scrollLeft,o.y-=e.ownerDocument.documentElement.scrollTop||e.scrollTop):(o.x-=e.scrollLeft,o.y-=e.scrollTop),i.x+=o.x,i.y+=o.y,g.moveTo(i.x,i.y+r[0].offsetHeight)}function i(){return a.getParam("spellchecker_wordchar_pattern")||new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`§©«®±¶·¸»¼½¾¿×÷¤”“„    ]+',"g")}function o(e,t,n,r){var i={method:e,lang:$.spellchecker_language},o="";i["addToDictionary"==e?"word":"text"]=t,k.each(i,function(e,t){o&&(o+="&"),o+=t+"="+encodeURIComponent(e)}),T.send({url:new N(s).toAbsolute($.spellchecker_rpc_url),type:"post",content_type:"application/x-www-form-urlencoded",data:o,success:function(e){(e=_.parse(e))?e.error?r(e.error):n(e):(e=a.translate("Server response wasn't proper JSON."),r(e))},error:function(){var e=a.translate("The spelling service was not found: (")+$.spellchecker_rpc_url+a.translate(")");r(e)}})}function l(e,t,n,r){($.spellchecker_callback||o).call(x,e,t,n,r)}function e(){t()||(a.setProgressState(!0),l("spellcheck",n().text,f,function(e){a.notificationManager.open({text:e,type:"error"}),a.setProgressState(!1),t()}),a.focus())}function c(){a.dom.select("span.mce-spellchecker-word").length||t()}function u(t,e,n){a.selection.collapse(),n?k.each(a.dom.select("span.mce-spellchecker-word"),function(e){e.getAttribute("data-mce-word")==t&&a.dom.remove(e,!0)}):a.dom.remove(e,!0),c()}function t(){return n().reset(),x.textMatcher=null,p&&(p=!1,a.fire("SpellcheckEnd"),1)}function d(e){e=e.getAttribute("data-mce-index");return"number"==typeof e?""+e:e}function f(e){var t=e.words?(v=!!e.dictionary,e.words):e;if(a.setProgressState(!1),function(e){for(var t in e)return;return 1}(t)){e=a.translate("No misspellings found.");return a.notificationManager.open({text:e,type:"info"}),void(p=!1)}m=t,n().find(i()).filter(function(e){return!!t[e.text]}).wrap(function(e){return a.dom.create("span",{class:"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":e.text})}),p=!0,a.fire("SpellcheckStart")}var h,m,p,g,v,y,b,w,x=this,$=a.settings;/(^|[ ,])tinymcespellchecker([, ]|$)/.test($.plugins)&&S.get("tinymcespellchecker")?"undefined"!=typeof console&&console.log&&console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."):(w=$.spellchecker_languages||"English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv",y=k.map(w.split(","),function(e){return{name:(e=e.split("="))[0],value:e[1]}}),b=[],k.each(y,function(e){b.push({selectable:!0,text:e.name,data:e.value})}),h=b,a.on("click",function(e){var t,n=e.target;"mce-spellchecker-word"==n.className&&(e.preventDefault(),0<(t=function(e){var t=[],n=k.toArray(a.getBody().getElementsByTagName("span"));if(n.length)for(var r=0;r<n.length;r++){var i=d(n[r]);null!==i&&i.length&&i===e.toString()&&t.push(n[r])}return t}(d(n))).length&&((e=a.dom.createRng()).setStartBefore(t[0]),e.setEndAfter(t[t.length-1]),a.selection.setRng(e),r(n.getAttribute("data-mce-word"),t)))}),a.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:e,selectable:!0,onPostRender:function(){var e=this;e.active(p),a.on("SpellcheckStart SpellcheckEnd",function(){e.active(p)})}}),w={tooltip:"Spellcheck",onclick:e,onPostRender:function(){var e=this;a.on("SpellcheckStart SpellcheckEnd",function(){e.active(p)})}},1<h.length&&(w.type="splitbutton",w.menu=h,w.onshow=function(e){var t=$.spellchecker_language;e.control.items().each(function(e){e.active(e.settings.data===t)})},w.onselect=function(e){$.spellchecker_language=e.control.settings.data}),a.addButton("spellchecker",w),a.addCommand("mceSpellCheck",e),a.on("remove",function(){g&&(g.remove(),g=null)}),a.on("change",c),this.getTextMatcher=n,this.getWordCharPattern=i,this.markErrors=f,this.getLanguage=function(){return $.spellchecker_language},$.spellchecker_language=$.spellchecker_language||$.language||"en")})}),function(e){for(var t,n,r,i,o=0;o<e.length;o++){t=s,r=(n=e[o]).split(/[.\/]/);for(var a=0;a<r.length-1;++a)void 0===t[r[a]]&&(t[r[a]]={}),t=t[r[a]];t[r[r.length-1]]=l[n]}if(s.AMDLC_TESTS){for(n in i=s.privateModules||{},l)i[n]=l[n];for(o=0;o<e.length;o++)delete i[e[o]];s.privateModules=i}}(["tinymce/spellcheckerplugin/DomTextMatcher"])}(this),tinymce.PluginManager.add("tabfocus",function(a){function e(e){9!==e.keyCode||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()}function t(n){function e(e){function t(e){return/INPUT|TEXTAREA|BUTTON/.test(e.tagName)&&tinymce.get(n.id)&&-1!=e.tabIndex&&function e(t){return"BODY"===t.nodeName||"hidden"!=t.type&&"none"!=t.style.display&&"hidden"!=t.style.visibility&&e(t.parentNode)}(e)}if(i=s.select(":input:enabled,*[tabindex]:not(iframe)"),l(i,function(e,t){return e.id==a.id?(r=t,!1):void 0}),0<e){for(o=r+1;o<i.length;o++)if(t(i[o]))return i[o]}else for(o=r-1;0<=o;o--)if(t(i[o]))return i[o];return null}var r,i,o,t;!(9!==n.keyCode||n.ctrlKey||n.altKey||n.metaKey||n.isDefaultPrevented())&&(1==(t=c(a.getParam("tab_focus",a.getParam("tabfocus_elements",":prev,:next")))).length&&(t[1]=t[0],t[0]=":prev"),i=n.shiftKey?":prev"==t[0]?e(-1):s.get(t[0]):":next"==t[1]?e(1):s.get(t[1]))&&(t=tinymce.get(i.id||i.name),i.id&&t?t.focus():tinymce.util.Delay.setTimeout(function(){tinymce.Env.webkit||window.focus(),i.focus()},10),n.preventDefault())}var s=tinymce.DOM,l=tinymce.each,c=tinymce.explode;a.on("init",function(){a.inline&&tinymce.DOM.setAttrib(a.getBody(),"tabIndex",null),a.on("keyup",e),tinymce.Env.gecko?a.on("keypress keydown",t):a.on("keydown",t)})}),function(o,me){"use strict";function r(e,t){for(var n,r=[],i=0;i<e.length;++i){if(!(n=a[e[i]]||function(e){for(var t=o,n=e.split(/[.\/]/),r=0;r<n.length;++r){if(!t[n[r]])return;t=t[n[r]]}return t}(e[i])))throw"module definition dependecy not found: "+e[i];r.push(n)}t.apply(null,r)}function e(e,t,n){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(t===me)throw"invalid module definition, dependencies must be specified";if(n===me)throw"invalid module definition, definition function must be specified";r(t,function(){a[e]=n.apply(null,arguments)})}var a={};e("tinymce/tableplugin/Utils",["tinymce/Env"],function(t){function r(n){return function(e,t){e&&(1===(t=parseInt(t,10))||0===t?e.removeAttribute(n,1):e.setAttribute(n,t,1))}}function n(t){return function(e){return parseInt(e.getAttribute(t)||1,10)}}return{setColSpan:r("colSpan"),setRowSpan:r("rowspan"),getColSpan:n("colSpan"),getRowSpan:n("rowSpan"),setSpanVal:function(e,t,n){r(t)(e,n)},getSpanVal:function(e,t){return n(t)(e)},paddCell:function(e){(!t.ie||9<t.ie)&&(e.hasChildNodes()||(e.innerHTML='<br data-mce-bogus="1" />'))}}}),e("tinymce/tableplugin/SplitCols",["tinymce/util/Tools","tinymce/tableplugin/Utils"],function(a,s){function l(e,t,n){return e[n]?e[n][t]:null}function c(e,t,n){return(n=l(e,t,n))?n.elm:null}function u(e,t,n,r){for(var i=0,o=c(e,t,n),a=n;(0<r?a<e.length:0<=a)&&o===l(e,t,a).elm;a+=r)i++;return i}function i(e,t,n){for(var r,i=e[n],o=t;o<i.length;o++)if((r=i[o]).real)return r.elm;return null}function d(e,t){var n=e.elm.ownerDocument.createElement("td");return s.setColSpan(n,s.getColSpan(e.elm)),s.setRowSpan(n,t),s.paddCell(n),n}function f(e,t,n,r){(n=i(e,n+1,r))?n.parentNode.insertBefore(t,n):(n=i(e,0,r)).parentNode.appendChild(t)}return{splitAt:function(n,e,r,i){var t=function(e,t){for(var n,r=[],i=e[t],o=0;o<i.length;o++)n=i[o],r.push({elm:n.elm,above:u(e,o,t,-1)-1,below:u(e,o,t,1)-1}),o+=s.getColSpan(n.elm)-1;return r}(n,r),e=c(n,e,r).parentNode,o=[];return a.each(t,function(e,t){null!==(i?function(e,t,n,r){if(0===t.above)return null;s.setRowSpan(t.elm,t.above);t=d(t,t.below+1);return f(e,t,n,r),t}:function(e,t,n,r){if(0===t.below)return null;s.setRowSpan(t.elm,t.above+1);t=d(t,t.below);return f(e,t,n,r+1),t})(n,e,t,r)&&o.push(o)}),{cells:o,row:e}}}}),e("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env","tinymce/tableplugin/Utils","tinymce/tableplugin/SplitCols"],function(D,M,I,P){var O=D.each,B=I.getSpanVal,F=I.setSpanVal;return function(t,r,i){function u(){t.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function n(e){return e===t.getBody()}function o(e,t){return e?(t=D.map(t.split(","),function(e){return e.toLowerCase()}),D.grep(e.childNodes,function(e){return-1!==D.inArray(t,e.nodeName.toLowerCase())})):[]}function h(){var t=0;S=[],k=0,O(["thead","tbody","tfoot"],function(s){var e=o(r,s)[0],e=o(e,"tr");O(e,function(e,a){a+=t,O(o(e,"td,th"),function(e,t){var n,r,i,o;if(S[a])for(;S[a][t];)t++;for(i=B(e,"rowspan"),o=B(e,"colspan"),r=a;r<a+i;r++)for(S[r]||(S[r]=[]),n=t;n<t+o;n++)S[r][n]={part:s,real:r==a&&n==t,elm:e,rowspan:i,colspan:o};k=Math.max(k,t+1)})}),t+=e.length})}function d(e){return t.fire("newrow",{node:e}),e}function a(e){return t.fire("newcell",{node:e}),e}function f(e,t){return(e=e.cloneNode(t)).removeAttribute("id"),e}function m(e,t){t=S[t];return t?t[e]:void 0}function p(e){return e&&(!!R.getAttrib(e.elm,"data-mce-selected")||e==i)}function s(){var n=[];return O(r.rows,function(t){O(t.cells,function(e){return R.getAttrib(e,"data-mce-selected")||i&&e==i.elm?(n.push(t),!1):void 0})}),n}function g(n){var r,i={};return!1!==t.settings.table_clone_elements&&(i=D.makeMap((t.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),D.walk(n,function(e){var t;return 3==e.nodeType?(O(R.getParents(e.parentNode,null,n).reverse(),function(e){i[e.nodeName]&&(e=f(e,!1),r?t&&t.appendChild(e):r=t=e,t=e)}),t&&(t.innerHTML=M.ie&&M.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'),!1):void 0},"childNodes"),a(n=f(n,!1)),F(n,"rowSpan",1),F(n,"colSpan",1),r?n.appendChild(r):I.paddCell(n),n}function v(){var e=R.createRng();return O(R.select("tr",r),function(e){0===e.cells.length&&R.remove(e)}),0===R.select("tr",r).length?(e.setStartBefore(r),e.setEndBefore(r),_.setRng(e),void R.remove(r)):(O(R.select("thead,tbody,tfoot",r),function(e){0===e.rows.length&&R.remove(e)}),h(),void(E&&((e=S[Math.min(S.length-1,E.y)])&&(_.select(e[Math.min(e.length-1,E.x)].elm,!0),_.collapse(!0)))))}function l(e,t,n,r){for(var i,o,a,s=S[t][e].elm.parentNode,l=1;l<=n;l++)if(s=R.getNext(s,"tr")){for(i=e;0<=i;i--)if((a=S[t+l][i].elm).parentNode==s){for(o=1;o<=r;o++)R.insertAfter(g(a),a);break}if(-1==i)for(o=1;o<=r;o++)s.insertBefore(g(s.cells[0]),s.cells[0])}}function y(){O(S,function(e,o){O(e,function(e,t){var n,r,i;if(p(e)&&(e=e.elm,n=B(e,"colspan"),r=B(e,"rowspan"),1<n||1<r)){for(F(e,"rowSpan",1),F(e,"colSpan",1),i=0;i<n-1;i++)R.insertAfter(g(e),e);l(t,o,r-1,n)}})})}function b(e,t,n){for(var r=[],i=0;i<e.length;i++)(i<t||n<i)&&r.push(e[i]);return r}function w(e){return D.grep(e,function(e){return!1===e.real})}function x(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].elm;t[t.length-1]!==r&&t.push(r)}return t}function $(e,t,n,r,i){for(var o=0,a=t;a<=r;a++){var s=b(function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(m(t,r));return n}(e,a),n,i),l=w(s);s.length===l.length&&(D.each(x(l),function(e){I.setColSpan(e,I.getColSpan(e)-1)}),o++)}return o}function c(e){var t=[];return O(e,function(e){O(e,function(e){t.push(e)})}),t}function C(r){var i;return O(S,function(e,n){return O(e,function(e,t){return e.elm==r?!(i={x:t,y:n}):void 0}),!i}),i}var S,k,E,A,T,N,_=t.selection,R=_.dom;r=r||R.getParent(_.getStart(!0),"table"),h(),(i=i||R.getParent(_.getStart(!0),"th,td"))&&(E=C(i),N=T=0,O(S,function(e,r){O(e,function(e,t){var n;p(e)&&(e=S[r][t],N<t&&(N=t),T<r&&(T=r),e.real&&(n=e.colspan-1,e=e.rowspan-1,n&&N<t+n&&(N=t+n),e&&T<r+e&&(T=r+e)))})}),A={x:N,y:T},i=m(E.x,E.y)),D.extend(this,{deleteTable:function(){var e=R.createRng();n(r)||(e.setStartAfter(r),e.setEndAfter(r),_.setRng(e),R.remove(r))},split:y,merge:function(e,t,n){var r,i,o,a,s,l,c,u,d;if(e?(o=(r=(f=C(e)).x)+(t-1),a=(i=f.y)+(n-1)):(E=A=null,O(S,function(e,n){O(e,function(e,t){p(e)&&(E=E||{x:t,y:n},A={x:t,y:n})})}),E&&(r=E.x,i=E.y,o=A.x,a=A.y)),c=m(r,i),f=m(o,a),c&&f&&c.part==f.part){y(),h(),n=function(e,t,n,r,i){for(var o=0,a=n;a<=i;a++){var s=b(e[a]||null,t,r),l=w(s);s.length===l.length&&(D.each(x(l),function(e){I.setRowSpan(e,I.getRowSpan(e)-1)}),o++)}return o}(S,r,i,o,a),f=$(S,r,i,o,a),c=m(r,i).elm;var f=o-r-f+1,n=a-i-n+1;for(f===k&&n===S.length&&(n=f=1),f===k&&1<n&&(n=1),F(c,"colSpan",f),F(c,"rowSpan",n),l=i;l<=a;l++)for(s=r;s<=o;s++)S[l]&&S[l][s]&&((e=S[l][s].elm)!=c&&(u=D.grep(e.childNodes),O(u,function(e){c.appendChild(e)}),u.length&&(u=D.grep(c.childNodes),d=0,O(u,function(e){"BR"==e.nodeName&&d++<u.length-1&&c.removeChild(e)})),R.remove(e)));v()}},insertRow:function(n){var r,e,t,i,o,a,s,l,c,u;if(O(S,function(e,t){return O(e,function(e){return(!p(e)||(e=e.elm,o=e.parentNode,a=d(f(o,!1)),r=t,!n))&&void 0}),n?!r:void 0}),r!==me){for(u=i=0;i<S[0].length;i+=u)if(S[r][i]&&(e=S[r][i].elm,u=B(e,"colspan"),e!=t)){if(n){if(0<r&&S[r-1][i]&&(l=S[r-1][i].elm,1<(c=B(l,"rowSpan")))){F(l,"rowSpan",c+1);continue}}else if(1<(c=B(e,"rowspan"))){F(e,"rowSpan",c+1);continue}s=g(e),F(s,"colSpan",e.colSpan),a.appendChild(s),t=e}a.hasChildNodes()&&(n?o.parentNode.insertBefore(a,o):R.insertAfter(a,o))}},insertCol:function(i){var o,a;O(S,function(e){return O(e,function(e,t){return(!p(e)||(o=t,!i))&&void 0}),i?!o:void 0}),O(S,function(e,t){var n,r;!e[o]||(n=e[o].elm)!=a&&(r=B(n,"colspan"),e=B(n,"rowspan"),1==r?(i?n.parentNode.insertBefore(g(n),n):R.insertAfter(g(n),n),l(o,t,e-1,r)):F(n,"colSpan",n.colSpan+1),a=n)})},splitCols:function(e){E&&(e=P.splitAt(S,E.x,E.y,e),D.each(e.cells,a))},deleteCols:function(){var e,t=[];if(n(r)){if(1==S[0].length)return;if(e=S,D.grep(c(e),p).length==c(S).length)return}O(S,function(e){O(e,function(e,n){p(e)&&-1===D.inArray(t,n)&&(O(S,function(e){var t=e[n].elm,e=B(t,"colSpan");1<e?F(t,"colSpan",e-1):R.remove(t)}),t.push(n))})}),v()},deleteRows:function(){var e=s();n(r)&&e.length==r.rows.length||(O(e.reverse(),function(e){var n,r;O((e=e).cells,function(e){var t=B(e,"rowSpan");1<t&&(F(e,"rowSpan",t-1),l((n=C(e)).x,n.y,1,1))}),n=C(e.cells[0]),O(S[n.y],function(e){var t;(e=e.elm)!=r&&((t=B(e,"rowSpan"))<=1?R.remove(e):F(e,"rowSpan",t-1),r=e)})}),v())},cutRows:function(){var e=s();if(!n(r)||e.length!=r.rows.length)return R.remove(e),v(),e},copyRows:function(){var n=s();return O(n,function(e,t){n[t]=f(e,!0)}),n},pasteRows:function(e,i){var t,o;e&&(t=P.splitAt(S,E.x,E.y,i),o=t.row,D.each(t.cells,a),e=D.map(e,function(e){return e.cloneNode(!0)}),i||e.reverse(),O(e,function(e){var t,n,r=e.cells.length;for(d(e),t=0;t<r;t++)a(n=e.cells[t]),F(n,"colSpan",1),F(n,"rowSpan",1);for(t=r;t<k;t++)e.appendChild(a(g(e.cells[r-1])));for(t=k;t<r;t++)R.remove(e.cells[t]);i?o.parentNode.insertBefore(e,o):R.insertAfter(e,o)}),u())},getPos:C,setStartCell:function(e){E=C(e)},setEndCell:function(e){var t,n,r,i,o,a,s,l,c;if(A=C(e),E&&A){for(t=Math.min(E.x,A.x),n=Math.min(E.y,A.y),o=r=Math.max(E.x,A.x),a=i=Math.max(E.y,A.y),c=n;c<=i;c++)for(l=t;l<=r;l++)(e=S[c][l]).real&&((s=e.colspan-1)&&o<l+s&&(o=l+s),(s=e.rowspan-1)&&a<c+s&&(a=c+s));for(u(),c=n;c<=a;c++)for(l=t;l<=o;l++)S[c][l]&&R.setAttrib(S[c][l].elm,"data-mce-selected","1")}},moveRelIdx:function(e,t){var n,r=C(e),i=r.y*k+r.x;do{if(!(n=m((i+=t)%k,Math.floor(i/k))))break;if(n.elm!=e)return _.select(n.elm,!0),R.isEmpty(n.elm)&&_.collapse(!0),!0}while(n.elm==e);return!1},refresh:h})}}),e("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/util/Delay","tinymce/Env","tinymce/util/Tools","tinymce/tableplugin/Utils"],function(a,h,s,l,c){var m=l.each,p=c.getSpanVal;return function(f){function e(){f.on("KeyDown",function(e){var t,n,r,i,o,a,s=f.dom;37!=e.keyCode&&38!=e.keyCode||(t=f.selection.getRng(),(n=s.getParent(t.startContainer,"table"))&&f.getBody().firstChild==n&&(r=t,o=(i=n).ownerDocument,(a=o.createRange()).setStartBefore(i),a.setEnd(r.endContainer,r.endOffset),(o=o.createElement("body")).appendChild(a.cloneContents()),0===o.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length)&&((t=s.createRng()).setStartBefore(n),t.setEndBefore(n),f.selection.setRng(t),e.preventDefault()))})}function t(){f.on("KeyDown SetContent VisualAid",function(){for(var e=f.getBody().lastChild;e;e=e.previousSibling)if(3==e.nodeType){if(0<e.nodeValue.length)break}else if(1==e.nodeType&&("BR"==e.tagName||!e.getAttribute("data-mce-bogus")))break;e&&"TABLE"==e.nodeName&&(f.settings.forced_root_block?f.dom.add(f.getBody(),f.settings.forced_root_block,f.settings.forced_root_block_attrs,s.ie&&s.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'):f.dom.add(f.getBody(),"br",{"data-mce-bogus":"1"}))}),f.on("PreProcess",function(e){e=e.node.lastChild;e&&("BR"==e.nodeName||1==e.childNodes.length&&("BR"==e.firstChild.nodeName||" "==e.firstChild.nodeValue))&&e.previousSibling&&"TABLE"==e.previousSibling.nodeName&&f.dom.remove(e)})}function n(){var e,t,n,r,i,o=f.selection.getRng(),a=f.selection.getNode(),s=f.dom.getParent(o.startContainer,"TD,TH");if(t=o,n=a,r=s,(e=(e=f).dom.getParent(t.startContainer,"TABLE"))&&(i=e.parentNode),i=3==t.startContainer.nodeType&&0===t.startOffset&&0===t.endOffset&&r&&("TR"==n.nodeName||n==i),r=("TD"==n.nodeName||"TH"==n.nodeName)&&!r,i||r){for(var l=(s=s||a).lastChild;l.lastChild;)l=l.lastChild;3==l.nodeType&&(o.setEnd(l,l.data.length),f.selection.setRng(o))}}function r(s){function l(e,t){var n=e?"previousSibling":"nextSibling",r=f.dom.getParent(t,"tr"),i=r[n];if(i)return d(0,t,i,e),s.preventDefault(),!0;var o=f.dom.getParent(r,"table"),a=r.parentNode,i=a.nodeName.toLowerCase();if("tbody"===i||i===(e?"tfoot":"thead")){a=function(e,t,n,r){var i=f.dom.select(">"+r,t),r=i.indexOf(n);if(e&&0===r||!e&&r===i.length-1)return function(e,t){e=e?"thead":"tfoot",t=f.dom.select(">"+e,t);return 0!==t.length?t[0]:null}(e,t);if(-1!==r)return i[r+(e?-1:1)];n="thead"===n.tagName.toLowerCase()?0:i.length-1;return i[n]}(e,o,a,"tbody");if(null!==a)return function(e,t,n){t=c(t,e);return t&&d(0,n,t,e),s.preventDefault(),!0}(e,a,t)}return function(e,t,n,r){n=r[n];if(n)return u(n),!0;r=f.dom.getParent(r,"td,th");return r?l(e,r):(u(c(t,!e)),s.preventDefault(),!1)}(e,r,n,o)}function c(e,t){t=e&&e[t?"lastChild":"firstChild"];return t&&"BR"===t.nodeName?f.dom.getParent(t,"td,th"):t}function u(e){f.selection.setCursorLocation(e,0)}function d(e,t,n,r){var i,o,a,t=function(e){for(var t=0,n=e;n.previousSibling;)n=n.previousSibling,t+=p(n,"colspan");return t}(f.dom.getParent(t,"td,th")),t=(i=t,a=o=0,m(n.children,function(e,t){return o+=p(e,"colspan"),a=t,!(i<o)&&void 0}),a),t=n.childNodes[t];u(c(t,r)||t)}function e(e){var t=f.selection.getNode(),t=f.dom.getParent(t,"td,th"),e=f.dom.getParent(e,"td,th");return t&&t!==e&&(t=t,e=e,f.dom.getParent(t,"TABLE")===f.dom.getParent(e,"TABLE"))}var t,n,r,i=s.keyCode;i!=a.UP&&i!=a.DOWN||(r=(n=f).selection.getNode(),null===n.dom.getParent(r,"tr"))||(t=f.selection.getNode(),h.setEditorTimeout(f,function(){e(t)&&l(!s.shiftKey&&i===a.UP,t)},0))}function i(e){f.selection.select(e,!0),f.selection.collapse(!0)}function o(e){f.$(e).empty(),c.paddCell(e)}f.on("keydown",function(e){var t,n,r;if((e.keyCode==a.DELETE||e.keyCode==a.BACKSPACE)&&!e.isDefaultPrevented()&&(r=f.dom.getParent(f.selection.getStart(),"table"))){if(t=f.dom.select("td,th",r),0===(n=l.grep(t,function(e){return!!f.dom.getAttrib(e,"data-mce-selected")})).length)return r=f.dom.getParent(f.selection.getStart(),"td,th"),void(f.selection.isCollapsed()&&r&&f.dom.isEmpty(r)&&(e.preventDefault(),o(r),i(r)));e.preventDefault(),f.undoManager.transact(function(){t.length==n.length?f.execCommand("mceTableDelete"):(l.each(n,o),i(n[0]))})}}),s.webkit&&(f.on("KeyDown",function(e){r(e)}),f.on("KeyDown",function(){n()}),f.on("MouseDown",function(e){2!=e.button&&n()})),s.gecko&&(e(),t()),9<s.ie&&(e(),t())}}),e("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(g,v,y){return function(s,i){function t(e){s.getBody().style.webkitUserSelect="",(e||p)&&(s.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),p=!1)}function o(e,t){return e&&t&&e===m.getParent(t,"table")}function e(e){var t,n,r=e.target;if(!f&&!h&&r!==d&&(d=r,a&&u)&&(n=m.getParent(r,"td,th"),o(a,n)||(n=m.getParent(a,"td,th")),(u!==n||p)&&(i(!0),o(a,n)))){e.preventDefault(),c||(c=new g(s,a,u),s.getBody().style.webkitUserSelect="none"),c.setEndCell(n),p=!0,t=s.selection.getSel();try{t.removeAllRanges?t.removeAllRanges():t.empty()}catch(e){}}}function l(){u=c=a=d=null,i(!1)}var c,u,a,d,f,h,m=s.dom,p=!0;return s.on("SelectionChange",function(e){p&&e.stopImmediatePropagation()},!0),s.on("MouseDown",function(e){2==e.button||f||h||(t(),u=m.getParent(e.target,"td,th"),a=m.getParent(u,"table"))}),s.on("mouseover",e),s.on("remove",function(){m.unbind(s.getDoc(),"mouseover",e),t()}),s.on("MouseUp",function(){function e(e,t){var n=new v(e,e);do{if(3==e.nodeType&&0!==y.trim(e.nodeValue).length)return t?r.setStart(e,0):r.setEnd(e,e.nodeValue.length),0;if("BR"==e.nodeName)return t?r.setStartBefore(e):r.setEndBefore(e),0}while(e=t?n.next():n.prev())}var r,t,n,i,o,a=s.selection;if(u){if(c&&(s.getBody().style.webkitUserSelect=""),0<(t=m.select("td[data-mce-selected],th[data-mce-selected]")).length){r=m.createRng(),i=t[0],r.setStartBefore(i),r.setEndAfter(i),e(i,1),n=new v(i,m.getParent(t[0],"table"));do{if("TD"==i.nodeName||"TH"==i.nodeName){if(!m.getAttrib(i,"data-mce-selected"))break;o=i}}while(i=n.next());e(o),a.setRng(r)}s.nodeChanged(),l()}}),s.on("KeyUp Drop SetContent",function(e){t("setcontent"==e.type),l(),f=!1}),s.on("ObjectResizeStart ObjectResized",function(e){f="objectresized"!=e.type}),s.on("dragstart",function(){h=!0}),s.on("drop dragend",function(){h=!1}),{clear:t}}}),e("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(b,w){var x=b.each;return function(d){function t(){var e=d.settings.color_picker_callback;return e?function(){var t=this;e.call(d,function(e){t.value(e).fire("change")},t.value())}:void 0}function f(e){return{title:"Advanced",type:"form",defaults:{onchange:function(){v(e,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:t()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:t()}]}]}}function h(e){return e?e.replace(/px$/,""):""}function m(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function p(t){x("left center right".split(" "),function(e){d.formatter.remove("align"+e,{},t)})}function g(e,i,t){return function n(e,r){return r=r||[],b.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=n(e.menu):(t.value=e.value,i&&i(t)),r.push(t)}),r}(e,t||[])}function v(e,t,n){var r=t.toJSON(),i=e.parseStyle(r.style);n?(t.find("#borderColor").value(i["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(i["background-color"]||"")[0].fire("change")):(i["border-color"]=r.borderColor,i["background-color"]=r.backgroundColor),t.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(i))))}function y(e,t,n){n=e.parseStyle(e.getAttrib(n,"style"));n["border-color"]&&(t.borderColor=n["border-color"]),n["background-color"]&&(t.backgroundColor=n["background-color"]),t.style=e.serializeStyle(n)}var e=this;e.tableProps=function(){e.table(!0)},e.table=function(e){function t(){function o(e,t,n){if("TD"===e.tagName||"TH"===e.tagName)c.setStyle(e,t,n);else if(e.children)for(var r=0;r<e.children.length;r++)o(e.children[r],t,n)}var a;v(c,this),!1===(u=b.extend(u,this.toJSON())).class&&delete u.class,d.undoManager.transact(function(){if(s=s||d.plugins.table.insertTable(u.cols||1,u.rows||1),d.dom.setAttribs(s,{style:u.style,class:u.class}),d.settings.table_style_by_css){if((l=[]).push({name:"border",value:u.border}),l.push({name:"border-spacing",value:m(u.cellspacing)}),n=s,r=l,i=(t=c).parseStyle(t.getAttrib(n,"style")),x(r,function(e){i[e.name]=e.value}),t.setAttrib(n,"style",t.serializeStyle(t.parseStyle(t.serializeStyle(i)))),c.setAttribs(s,{"data-mce-border-color":u.borderColor,"data-mce-cell-padding":u.cellpadding,"data-mce-border":u.border}),s.children)for(var e=0;e<s.children.length;e++)o(s.children[e],"border",u.border),o(s.children[e],"padding",m(u.cellpadding))}else d.dom.setAttribs(s,{border:u.border,cellpadding:u.cellpadding,cellspacing:u.cellspacing});var t,n,r,i;c.getAttrib(s,"width")&&!d.settings.table_style_by_css?c.setAttrib(s,"width",h(u.width)):c.setStyle(s,"width",m(u.width)),c.setStyle(s,"height",m(u.height)),(a=c.select("caption",s)[0])&&!u.caption&&c.remove(a),!a&&u.caption&&((a=c.create("caption")).innerHTML=w.ie?" ":'<br data-mce-bogus="1"/>',s.insertBefore(a,s.firstChild)),p(s),u.align&&d.formatter.apply("align"+u.align,{},s),d.focus(),d.addVisual()})}function n(e,i){return function(e,t){for(var n=0;n<t.length;n++){var r=c.getStyle(t[n],i);if((e=void 0===e?r:e)!=r)return""}return e}(void 0,d.dom.select("td,th",e))}var s,r,i,o,l,c=d.dom,u={};!0===e?(s=c.getParent(d.selection.getStart(),"table"))&&(u={width:h(c.getStyle(s,"width")||c.getAttrib(s,"width")),height:h(c.getStyle(s,"height")||c.getAttrib(s,"height")),cellspacing:h(c.getStyle(s,"border-spacing")||c.getAttrib(s,"cellspacing")),cellpadding:c.getAttrib(s,"data-mce-cell-padding")||c.getAttrib(s,"cellpadding")||n(s,"padding"),border:c.getAttrib(s,"data-mce-border")||c.getAttrib(s,"border")||n(s,"border"),borderColor:c.getAttrib(s,"data-mce-border-color"),caption:!!c.select("caption",s)[0],class:c.getAttrib(s,"class")},x("left center right".split(" "),function(e){d.formatter.matchNode(s,"align"+e)&&(u.align=e)})):(r={label:"Cols",name:"cols"},i={label:"Rows",name:"rows"}),d.settings.table_class_list&&(u.class&&(u.class=u.class.replace(/\s*mce\-item\-table\s*/g,"")),o={name:"class",type:"listbox",label:"Class",values:g(d.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return d.formatter.getCssText({block:"table",classes:[e.value]})})})}),!(o={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==d.settings.table_appearance_options?[r,i,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,i,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},o]})!==d.settings.table_advtab?(y(c,u,s),d.windowManager.open({title:"Table properties",data:u,bodyType:"tabpanel",body:[{title:"General",type:"form",items:o},f(c)],onsubmit:t})):d.windowManager.open({title:"Table properties",data:u,body:o,onsubmit:t})},e.merge=function(t,n){d.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var e=this.toJSON();d.undoManager.transact(function(){t.merge(n,e.cols,e.rows)})}})},e.cell=function(){function e(){v(r,this),n=b.extend(n,this.toJSON()),d.undoManager.transact(function(){x(i,function(e){var t;d.dom.setAttribs(e,{scope:n.scope,style:n.style,class:n.class}),d.dom.setStyles(e,{width:m(n.width),height:m(n.height)}),p(e=n.type&&e.nodeName.toLowerCase()!=n.type?r.rename(e,n.type):e),n.align&&d.formatter.apply("align"+n.align,{},e),t=e,x("top middle bottom".split(" "),function(e){d.formatter.remove("valign"+e,{},t)}),n.valign&&d.formatter.apply("valign"+n.valign,{},e)}),d.focus()})}var n,t,r=d.dom,i=[],i=d.dom.select("td[data-mce-selected],th[data-mce-selected]"),o=d.dom.getParent(d.selection.getStart(),"td,th");!i.length&&o&&i.push(o),(o=o||i[0])&&((n={width:h(r.getStyle(o,"width")||r.getAttrib(o,"width")),height:h(r.getStyle(o,"height")||r.getAttrib(o,"height")),scope:r.getAttrib(o,"scope"),class:r.getAttrib(o,"class")}).type=o.nodeName.toLowerCase(),x("left center right".split(" "),function(e){d.formatter.matchNode(o,"align"+e)&&(n.align=e)}),x("top middle bottom".split(" "),function(e){d.formatter.matchNode(o,"valign"+e)&&(n.valign=e)}),!(t={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},t=d.settings.table_cell_class_list?{name:"class",type:"listbox",label:"Class",values:g(d.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return d.formatter.getCssText({block:"td",classes:[e.value]})})})}:t]})!==d.settings.table_cell_advtab?(y(r,n,o),d.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:t},f(r)],onsubmit:e})):d.windowManager.open({title:"Cell properties",data:n,body:t,onsubmit:e}))},e.row=function(){function e(){var n,r,i;v(a,this),o=b.extend(o,this.toJSON()),d.undoManager.transact(function(){var t=o.type;x(s,function(e){d.dom.setAttribs(e,{scope:o.scope,style:o.style,class:o.class}),d.dom.setStyles(e,{height:m(o.height)}),t!=e.parentNode.nodeName.toLowerCase()&&(n=a.getParent(e,"table"),r=e.parentNode,(i=a.select(t,n)[0])||(i=a.create(t),n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)),i.appendChild(e),r.hasChildNodes()||a.remove(r)),p(e),o.align&&d.formatter.apply("align"+o.align,{},e)}),d.focus()})}var t,o,n,a=d.dom,s=[],r=d.dom.getParent(d.selection.getStart(),"table"),i=d.dom.getParent(d.selection.getStart(),"td,th");x(r.rows,function(t){x(t.cells,function(e){return a.getAttrib(e,"data-mce-selected")||e==i?(s.push(t),!1):void 0})}),(t=s[0])&&((o={height:h(a.getStyle(t,"height")||a.getAttrib(t,"height")),scope:a.getAttrib(t,"scope"),class:a.getAttrib(t,"class")}).type=t.parentNode.nodeName.toLowerCase(),x("left center right".split(" "),function(e){d.formatter.matchNode(t,"align"+e)&&(o.align=e)}),!(n={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},n=d.settings.table_row_class_list?{name:"class",type:"listbox",label:"Class",values:g(d.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return d.formatter.getCssText({block:"tr",classes:[e.value]})})})}:n]})!==d.settings.table_row_advtab?(y(a,o,t),d.windowManager.open({title:"Row properties",data:o,bodyType:"tabpanel",body:[{title:"General",type:"form",items:n},f(a)],onsubmit:e})):d.windowManager.open({title:"Row properties",data:o,body:n,onsubmit:e}))}}}),e("tinymce/tableplugin/ResizeBars",["tinymce/util/Tools","tinymce/util/VK"],function(de,fe){var he;return function(h){function c(e,t){return{index:e,y:h.dom.getPos(t).y}}function i(e,t){return{index:e,y:h.dom.getPos(t).y+t.offsetHeight}}function n(e,t){return{index:e,x:h.dom.getPos(t).x}}function r(e,t){return{index:e,x:h.dom.getPos(t).x+t.offsetWidth}}function o(){return"rtl"===h.getBody().dir}function u(){return h.getBody().ownerDocument.body}function d(e,t){return(o()?r:n)(e,t)}function f(e,t){return(o()?n:r)(e,t)}function m(e,t){t=h.dom.getStyle(e,t,!0);return parseInt(t,10)}function p(e){return m(e,"width")/m(e.parentElement,"width")*100}function g(e,t,n){for(var r=[],i=1;i<n.length;i++){var o=n[i].element;r.push(e(i-1,o))}var a=n[n.length-1];return r.push(t(n.length-1,a.element)),r}function a(){var e=h.dom.select("."+X,u());de.each(e,function(e){h.dom.remove(e)})}function s(e){a(),$(e)}function v(e,t,n,r,i,o,a,s){o={"data-mce-bogus":"all",class:X+" "+e,unselectable:"on","data-mce-resize":!1,style:"cursor: "+t+"; margin: 0; padding: 0; position: absolute; left: "+n+"px; top: "+r+"px; height: "+i+"px; width: "+o+"px; "};return o[a]=s,o}function y(e){return de.map(e.rows,function(e){return{element:e,cells:de.map(e.cells,function(e){var t=e.hasAttribute("rowspan")?parseInt(e.getAttribute("rowspan"),10):1,n=e.hasAttribute("colspan")?parseInt(e.getAttribute("colspan"),10):1;return{element:e,rowspan:t,colspan:n}})}})}function b(e){var c={},n=[],u=0,d=0;return de.each(e,function(e,s){var l=[];de.each(e.cells,function(e){for(var t=0;c[s+","+t]!==me;)t++;for(var n={element:e.element,colspan:e.colspan,rowspan:e.rowspan,rowIndex:s,colIndex:t},r=0;r<e.colspan;r++)for(var i=0;i<e.rowspan;i++){var o=s+i,a=t+r;c[o+","+a]=n,u=Math.max(u,o+1),d=Math.max(d,a+1)}l.push(n)}),n.push({element:e.element,cells:l})}),{grid:{maxRows:u,maxCols:d},getAt:function(e,t){return c[e+","+t]},getAllCells:function(){var t=[];return de.each(n,function(e){t=t.concat(e.cells)}),t},getAllRows:function(){return n}}}function t(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n}function l(e,t,n){for(var r,i=e(),o=0;o<i.length;o++)t(i[o])&&(r=i[o]);return r||n()}function w(i){var e=t(0,i.grid.maxCols),o=t(0,i.grid.maxRows);return de.map(e,function(r){return l(function(){for(var e=[],t=0;t<o.length;t++){var n=i.getAt(t,r);n&&n.colIndex===r&&e.push(n)}return e},function(e){return 1===e.colspan},function(){for(var e,t=0;t<o.length;t++)if(e=i.getAt(t,r))return e;return null})})}function x(i){var o=t(0,i.grid.maxCols),e=t(0,i.grid.maxRows);return de.map(e,function(r){return l(function(){for(var e=[],t=0;t<o.length;t++){var n=i.getAt(r,t);n&&n.rowIndex===r&&e.push(n)}return e},function(e){return 1===e.rowspan},function(){return i.getAt(r,0)})})}function $(e){var o,a,s,l,t=b(y(e)),n=x(t),r=w(t),t=h.dom.getPos(e),n=0<n.length?g(c,i,n):[],r=0<r.length?g(d,f,r):[];n=n,s=e.offsetWidth,l=t,de.each(n,function(e){var t=l.x,n=e.y-oe/2,r=oe,i=s;h.dom.add(u(),"div",v(J,Z,t,n,r,i,Q,e.index))}),r=r,o=e.offsetHeight,a=t,de.each(r,function(e){var t=e.x-oe/2,n=a.y,r=o,i=oe;h.dom.add(u(),"div",v(te,ne,t,n,r,i,re,e.index))})}function C(e,t,n,r){if(t<0||t>=e.length-1)return"";var i=e[t];if(i)i={value:i,delta:0};else for(var o=e.slice(0,t).reverse(),a=0;a<o.length;a++)o[a]&&(i={value:o[a],delta:a+1});var s=e[t+1];if(s)s={value:s,delta:1};else for(var l=e.slice(t+1),c=0;c<l.length;c++)l[c]&&(s={value:l[c],delta:c+1});t=s.delta-i.delta,t=Math.abs(s.value-i.value)/t;return n?t/m(r,"width")*100:t}function S(e,t){var n=h.dom.getStyle(e,t);return n=(n=n||h.dom.getAttrib(e,t))||h.dom.getStyle(e,t,!0)}function k(e,t,n){var r=S(e,"width"),i=parseInt(r,10),e=t?(n=n,m(e,"width")/m(n,"width")*100):m(e,"width");return(t&&!M(r)||!t&&!I(r))&&(i=0),!isNaN(i)&&0<i?i:e}function E(e,t,n){for(var r=w(e),i=de.map(r,function(e){return d(e.colIndex,e.element).x}),o=[],a=0;a<r.length;a++){var s=(s=1<(r[a].element.hasAttribute("colspan")?parseInt(r[a].element.getAttribute("colspan"),10):1)?C(i,a):k(r[a].element,t,n))||ae;o.push(s)}return o}function A(e){for(var t,n,r=x(e),i=de.map(r,function(e){return c(e.rowIndex,e.element).y}),o=[],a=0;a<r.length;a++){var s=(s=1<(r[a].element.hasAttribute("rowspan")?parseInt(r[a].element.getAttribute("rowspan"),10):1)?C(i,a):(s=r[a].element,n=t=void 0,t=S(s,"height"),n=parseInt(t,10),M(t)&&(n=0),!isNaN(n)&&0<n?n:m(s,"height")))||se;o.push(s)}return o}function T(e,t,o,a,n){function s(e){return de.map(e,function(){return 0})}function r(e,t){var n,r=s(u.slice(0,e)),i=s(u.slice(t+1));return 0<=o?(n=Math.max(a,u[t]-o),r.concat([o,n-u[t]]).concat(i)):(n=Math.max(a,u[e]+o),t=u[e]-n,r.concat([n-u[e],t]).concat(i))}var i,l,c,u=e.slice(0);return 0===e.length?[]:1===e.length?n?[100-u[0]]:[Math.max(a,u[0]+o)-u[0]]:0===t?r(0,1):0<t&&t<e.length-1?r(t,t+1):t===e.length-1?(i=t,c=s(u.slice(0,i)),0<=o?c.concat([o]):(l=Math.max(a,u[i]+o),c.concat([l-u[i]]))):[]}function N(e,t,n){for(var r=0,i=e;i<t;i++)r+=n[i];return r}function _(e,n){e=e.getAllCells();return de.map(e,function(e){var t=N(e.colIndex,e.colIndex+e.colspan,n);return{element:e.element,width:t,colspan:e.colspan}})}function R(e,n){e=e.getAllCells();return de.map(e,function(e){var t=N(e.rowIndex,e.rowIndex+e.rowspan,n);return{element:e.element,height:t,rowspan:e.rowspan}})}function D(e,n){e=e.getAllRows();return de.map(e,function(e,t){return{element:e.element,height:n[t]}})}function M(e){return ce.test(e)}function I(e){return ue.test(e)}function P(i,e,o){for(var a=b(y(i)),s=M(i.width)||M(i.style.width),t=E(a,s,i),n=s?e/m(i,"width")*100:e,r=T(t,o,n,ae,s),l=[],c=0;c<r.length;c++)l.push(r[c]+t[c]);var u=_(a,l),d=s?"%":"px",f=s?o<a.grid.maxCols-1?p(i):p(i)+e/m(i.parentElement,"width")*100:o<a.grid.maxCols-1?m(i,"width"):m(i,"width")+e;h.undoManager.transact(function(){var e,t,n,r;n=u,r=d,de.each(n,function(e){h.dom.setStyle(e.element,"width",e.width+r),h.dom.setAttrib(e.element,"width",null)}),e=f,t=d,n=s,o!=a.grid.maxCols-1&&n||(h.dom.setStyle(i,"width",e+t),h.dom.setAttrib(i,"width",null))})}function O(e,t,n){for(var r=b(y(e)),i=A(r),o=[],a=0,s=0;s<i.length;s++)o.push(s===n?t+i[s]:i[s]),a+=a[s];var l=R(r,o),c=D(r,o);h.undoManager.transact(function(){de.each(c,function(e){h.dom.setStyle(e.element,"height",e.height+"px"),h.dom.setAttrib(e.element,"height",null)}),de.each(l,function(e){h.dom.setStyle(e.element,"height",e.height+"px"),h.dom.setAttrib(e.element,"height",null)}),h.dom.setStyle(e,"height",a+"px"),h.dom.setAttrib(e,"height",null)})}function B(e,t){h.dom.bind(e,"mouseup",function(){F()}),h.dom.bind(e,"mousemove",function(e){clearTimeout(j),q&&t(e)}),h.dom.bind(e,"mouseout",function(){j=setTimeout(function(){F()},200)})}function F(){var e,t,n,r;h.dom.remove(W),q&&(h.dom.removeClass(G,le),q=!1,U(G)?(r=parseInt(h.dom.getAttrib(G,ie),10),n=h.dom.getPos(G).x,e=parseInt(h.dom.getAttrib(G,re),10),t=o()?r-n:n-r,P(he,t,e)):H(G)&&(n=parseInt(h.dom.getAttrib(G,ee),10),r=h.dom.getPos(G).y,e=parseInt(h.dom.getAttrib(G,Q),10),O(he,t=r-n,e)),s(he),h.nodeChanged())}function L(e,t){var n;W=W||((n=document.createElement("div")).setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),n.setAttribute("data-mce-bogus","all"),n),q=!0,h.dom.addClass(e,le),G=e,B(W,t),h.dom.add(u(),W)}function U(e){return h.dom.hasClass(e,te)}function H(e){return h.dom.hasClass(e,J)}function z(e){Y=Y!==me?Y:e.clientX;var t=e.clientX-Y;Y=e.clientX;e=h.dom.getPos(G).x;h.dom.setStyle(G,"left",e+t+"px")}function V(e){K=K!==me?K:e.clientY;var t=e.clientY-K;K=e.clientY;e=h.dom.getPos(G).y;h.dom.setStyle(G,"top",e+t+"px")}function e(e){var t=e.target,n=h.getBody();!h.$.contains(n,he)&&he!==n||(U(t)?(e.preventDefault(),n=h.dom.getPos(t).x,h.dom.setAttrib(t,ie,n),Y=me,L(t,z)):H(t)?(e.preventDefault(),e=h.dom.getPos(t).y,h.dom.setAttrib(t,ee,e),K=me,L(t,V)):a())}var j,q,W,G,Y,K,X="mce-resize-bar",J="mce-resize-bar-row",Z="row-resize",Q="data-row",ee="data-initial-top",te="mce-resize-bar-col",ne="col-resize",re="data-col",ie="data-initial-left",oe=4,ae=10,se=10,le="mce-resize-bar-dragging",ce=new RegExp(/(\d+(\.\d+)?%)/),ue=new RegExp(/px|em/);return h.on("init",function(){h.dom.bind(u(),"mousedown",e)}),h.on("ObjectResized",function(e){var n,e=e.target;"TABLE"===e.nodeName&&(n=[],de.each(e.rows,function(e){de.each(e.cells,function(e){var t=h.dom.getStyle(e,"width",!0);n.push({cell:e,width:t})})}),de.each(n,function(e){h.dom.setStyle(e.cell,"width",e.width),h.dom.setAttrib(e.cell,"width",null)}))}),h.on("mouseover",function(e){var t;q||(t=h.dom.getParent(e.target,"table"),"TABLE"!==e.target.nodeName&&!t||s(he=t))}),h.on("keydown",function(e){switch(e.keyCode){case fe.LEFT:case fe.RIGHT:case fe.UP:case fe.DOWN:a()}}),h.on("remove",function(){a(),h.dom.unbind(u(),"mousedown",e)}),{adjustWidth:P,adjustHeight:O,clearBars:a,drawBars:$,determineDeltas:T,getTableGrid:b,getTableDetails:y,getWidths:E,getPixelHeights:A,isPercentageBasedSize:M,isPixelBasedSize:I,recalculateWidths:_,recalculateCellHeights:R,recalculateRowHeights:D}}}),e("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/tableplugin/ResizeBars","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(m,p,g,v,y,e,t,b,n){var w=e.each;n.add("table",function(u){function e(e){return function(){u.execCommand(e)}}function n(e,t){for(var n,r,i='<table id="__mce"><tbody>',o=0;o<t;o++){for(i+="<tr>",n=0;n<e;n++)i+="<td>"+(b.ie&&b.ie<10?"&nbsp;":"<br>")+"</td>";i+="</tr>"}return i+="</tbody></table>",u.undoManager.transact(function(){u.insertContent(i),r=u.dom.get("__mce"),u.dom.setAttrib(r,"id",null),u.$("tr",r).each(function(e,t){u.fire("newrow",{node:t}),u.$("th,td",t).each(function(e,t){u.fire("newcell",{node:t})})}),u.dom.setAttribs(r,u.settings.table_default_attributes||{}),u.dom.setStyles(r,u.settings.table_default_styles||{})}),r}function t(i,o,a){function e(){var t={},n=0,e=u.dom.select("td[data-mce-selected],th[data-mce-selected]"),r=e[0];r=r||u.selection.getStart(),r=a&&0<e.length?(w(e,function(e){return t[e.parentNode.parentNode.nodeName]=1}),w(t,function(e){n+=e}),1!==n):!u.dom.getParent(r,o),i.disabled(r),u.selection.selectorChanged(o,function(e){i.disabled(!e)})}u.initialized?e():u.on("init",e)}function r(){t(this,"table")}function i(){t(this,"td,th")}function o(e,t,n){var r,i,o,a,s,l=n.getEl().getElementsByTagName("table")[0],c=n.isRtl()||"tl-tr"==n.parent().rel;for(l.nextSibling.innerHTML=e+1+" x "+(t+1),c&&(e=9-e),i=0;i<10;i++)for(r=0;r<10;r++)a=l.rows[i].childNodes[r].firstChild,s=(c?e<=r:r<=e)&&i<=t,u.dom.toggleClass(a,"mce-active",s),s&&(o=a);return o.parentNode}function a(e){return u.dom.is(e,"table")&&u.getBody().contains(e)}var s,l,c=this,d=new v(u);!u.settings.object_resizing||!1===u.settings.table_resize_bars||!0!==u.settings.object_resizing&&"table"!==u.settings.object_resizing||(l=y(u)),!1===u.settings.table_grid?u.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:d.table}):u.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),d.table())},onshow:function(){o(0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");u.dom.removeClass(e,"mce-active"),u.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:function(){for(var e="",e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">',t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return(e+="</table>")+'<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t,n=e.target;"A"==n.tagName.toUpperCase()&&(t=parseInt(n.getAttribute("data-mce-x"),10),n=parseInt(n.getAttribute("data-mce-y"),10),(t=this.isRtl()||"tl-tr"==this.parent().rel?9-t:t)===this.lastX&&n===this.lastY||(o(t,n,e.control),this.lastX=t,this.lastY=n))},onclick:function(e){var t=this;"A"==e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),u.undoManager.transact(function(){n(t.lastX+1,t.lastY+1)}),u.addVisual())}}]}),u.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:r,onclick:d.tableProps}),u.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:r,cmd:"mceTableDelete"}),u.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:e("mceTableCellProps"),onPostRender:i},{text:"Merge cells",onclick:e("mceTableMergeCells"),onPostRender:function(){t(this,"td,th",!0)}},{text:"Split cell",onclick:e("mceTableSplitCells"),onPostRender:i}]}),u.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:e("mceTableInsertRowBefore"),onPostRender:i},{text:"Insert row after",onclick:e("mceTableInsertRowAfter"),onPostRender:i},{text:"Delete row",onclick:e("mceTableDeleteRow"),onPostRender:i},{text:"Row properties",onclick:e("mceTableRowProps"),onPostRender:i},{text:"-"},{text:"Cut row",onclick:e("mceTableCutRow"),onPostRender:i},{text:"Copy row",onclick:e("mceTableCopyRow"),onPostRender:i},{text:"Paste row before",onclick:e("mceTablePasteRowBefore"),onPostRender:i},{text:"Paste row after",onclick:e("mceTablePasteRowAfter"),onPostRender:i}]}),u.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:e("mceTableInsertColBefore"),onPostRender:i},{text:"Insert column after",onclick:e("mceTableInsertColAfter"),onPostRender:i},{text:"Delete column",onclick:e("mceTableDeleteCol"),onPostRender:i}]});var f,h=[];w("inserttable tableprops deletetable | cell row column".split(" "),function(e){"|"==e?h.push({text:"-"}):h.push(u.menuItems[e])}),u.addButton("table",{type:"menubutton",title:"Table",menu:h}),b.isIE||u.on("click",function(e){"TABLE"===(e=e.target).nodeName&&(u.selection.select(e),u.nodeChanged())}),c.quirks=new p(u),u.on("Init",function(){c.cellSelection=new g(u,function(e){e&&l.clearBars()}),c.resizeBars=l}),u.on("PreInit",function(){u.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})}),w({mceTableSplitCells:function(e){e.split()},mceTableMergeCells:function(e){var t=u.dom.getParent(u.selection.getStart(),"th,td");u.dom.select("td[data-mce-selected],th[data-mce-selected]").length?e.merge():d.merge(e,t)},mceTableInsertRowBefore:function(e){e.insertRow(!0)},mceTableInsertRowAfter:function(e){e.insertRow()},mceTableInsertColBefore:function(e){e.insertCol(!0)},mceTableInsertColAfter:function(e){e.insertCol()},mceTableDeleteCol:function(e){e.deleteCols()},mceTableDeleteRow:function(e){e.deleteRows()},mceTableCutRow:function(e){s=e.cutRows()},mceTableCopyRow:function(e){s=e.copyRows()},mceTablePasteRowBefore:function(e){e.pasteRows(s,!0)},mceTablePasteRowAfter:function(e){e.pasteRows(s)},mceSplitColsBefore:function(e){e.splitCols(!0)},mceSplitColsAfter:function(e){e.splitCols(!1)},mceTableDelete:function(e){l&&l.clearBars(),e.deleteTable()}},function(t,e){u.addCommand(e,function(){var e=new m(u);e&&(t(e),u.execCommand("mceRepaint"),c.cellSelection.clear())})}),w({mceInsertTable:d.table,mceTableProps:function(){d.table(!0)},mceTableRowProps:d.row,mceTableCellProps:d.cell},function(n,e){u.addCommand(e,function(e,t){n(t)})}),u.addButton("tableprops",{title:"Table properties",onclick:d.tableProps,icon:"table"}),u.addButton("tabledelete",{title:"Delete table",onclick:e("mceTableDelete")}),u.addButton("tablecellprops",{title:"Cell properties",onclick:e("mceTableCellProps")}),u.addButton("tablemergecells",{title:"Merge cells",onclick:e("mceTableMergeCells")}),u.addButton("tablesplitcells",{title:"Split cell",onclick:e("mceTableSplitCells")}),u.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:e("mceTableInsertRowBefore")}),u.addButton("tableinsertrowafter",{title:"Insert row after",onclick:e("mceTableInsertRowAfter")}),u.addButton("tabledeleterow",{title:"Delete row",onclick:e("mceTableDeleteRow")}),u.addButton("tablerowprops",{title:"Row properties",onclick:e("mceTableRowProps")}),u.addButton("tablecutrow",{title:"Cut row",onclick:e("mceTableCutRow")}),u.addButton("tablecopyrow",{title:"Copy row",onclick:e("mceTableCopyRow")}),u.addButton("tablepasterowbefore",{title:"Paste row before",onclick:e("mceTablePasteRowBefore")}),u.addButton("tablepasterowafter",{title:"Paste row after",onclick:e("mceTablePasteRowAfter")}),u.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:e("mceTableInsertColBefore")}),u.addButton("tableinsertcolafter",{title:"Insert column after",onclick:e("mceTableInsertColAfter")}),u.addButton("tabledeletecol",{title:"Delete column",onclick:e("mceTableDeleteCol")}),""!==(f=u.settings.table_toolbar)&&!1!==f&&(f=f||"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",u.addContextToolbar(a,f)),!1!==u.settings.table_tab_navigation&&u.on("keydown",function(e){var t,n,r;9!=e.keyCode||(t=u.dom.getParent(u.selection.getStart(),"th,td"))&&(e.preventDefault(),n=new m(u),r=e.shiftKey?-1:1,u.undoManager.transact(function(){!n.moveRelIdx(t,r)&&0<r&&(n.insertRow(),n.refresh(),n.moveRelIdx(t,r))}))}),c.insertTable=n,c.setClipboardRows=function(e){s=e},c.getClipboardRows=function(){return s}})})}(this),tinymce.PluginManager.add("template",function(s){function e(t){return function(){var e=s.settings.templates;return"function"==typeof e?void e(t):void("string"==typeof e?tinymce.util.XHR.send({url:e,success:function(e){t(tinymce.util.JSON.parse(e))}}):t(e))}}function t(e){var r,i,t=[];e&&0!==e.length?(tinymce.each(e,function(e){t.push({selected:!t.length,text:e.title,value:{url:e.url,content:e.content,description:e.description}})}),(r=s.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:t,onselect:function(e){function t(e){var t;-1==e.indexOf("<html>")&&(t="",tinymce.each(s.contentCSS,function(e){t+='<link type="text/css" rel="stylesheet" href="'+s.documentBaseURI.toAbsolute(e)+'">'}),-1!=(n=s.settings.body_class||"").indexOf("=")&&(n=(n=s.getParam("body_class","","hash"))[s.id]||""),e="<!DOCTYPE html><html><head>"+t+'</head><body class="'+n+'">'+e+"</body></html>"),e=c(e,"template_preview_replace_values");var n=r.find("iframe")[0].getEl().contentWindow.document;n.open(),n.write(e),n.close()}var n=e.control.value();n.url?tinymce.util.XHR.send({url:n.url,success:function(e){t(i=e)}}):t(i=n.content),r.find("#description")[0].text(e.control.value().description)}}}]},{type:"label",name:"description",label:"Description",text:" "},{type:"iframe",flex:1,border:1}],onsubmit:function(){n(0,i)},minWidth:Math.min(tinymce.DOM.getViewPort().w,s.getParam("template_popup_width",600)),minHeight:Math.min(tinymce.DOM.getViewPort().h,s.getParam("template_popup_height",500))})).find("listbox")[0].fire("select")):(e=s.translate("No templates defined."),s.notificationManager.open({text:e,type:"info"}))}function a(e,t){function n(e,t){if((e=""+e).length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e}var r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),i="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),o="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),a="January February March April May June July August September October November December".split(" ");return t=t||new Date,(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+t.getFullYear())).replace("%y",""+t.getYear())).replace("%m",n(t.getMonth()+1,2))).replace("%d",n(t.getDate(),2))).replace("%H",""+n(t.getHours(),2))).replace("%M",""+n(t.getMinutes(),2))).replace("%S",""+n(t.getSeconds(),2))).replace("%I",""+((t.getHours()+11)%12+1))).replace("%p",t.getHours()<12?"AM":"PM")).replace("%B",""+s.translate(a[t.getMonth()]))).replace("%b",""+s.translate(o[t.getMonth()]))).replace("%A",""+s.translate(i[t.getDay()]))).replace("%a",""+s.translate(r[t.getDay()]))).replace("%%","%")}function l(e){var r=s.dom,i=s.getParam("template_replace_values");u(r.select("*",e),function(n){u(i,function(e,t){r.hasClass(n,t)&&"function"==typeof i[t]&&i[t](n)})})}function c(n,e){return u(s.getParam(e),function(e,t){"function"==typeof e&&(e=e(t)),n=n.replace(new RegExp("\\{\\$"+t+"\\}","g"),e)}),n}function n(e,t){function n(e,t){return new RegExp("\\b"+t+"\\b","g").test(e.className)}var r,i=s.dom,o=s.selection.getContent();t=c(t,"template_replace_values"),r=i.create("div",null,t),(t=i.select(".mceTmpl",r))&&0<t.length&&(r=i.create("div",null)).appendChild(t[0].cloneNode(!0)),u(i.select("*",r),function(e){n(e,s.getParam("template_cdate_classes","cdate").replace(/\s+/g,"|"))&&(e.innerHTML=a(s.getParam("template_cdate_format",s.getLang("template.cdate_format")))),n(e,s.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(e.innerHTML=a(s.getParam("template_mdate_format",s.getLang("template.mdate_format")))),n(e,s.getParam("template_selected_content_classes","selcontent").replace(/\s+/g,"|"))&&(e.innerHTML=o)}),l(r),s.execCommand("mceInsertContent",!1,r.innerHTML),s.addVisual()}var u=tinymce.each;s.addCommand("mceInsertTemplate",n),s.addButton("template",{title:"Insert template",onclick:e(t)}),s.addMenuItem("template",{text:"Insert template",onclick:e(t),context:"insert"}),s.on("PreProcess",function(e){var t=s.dom;u(t.select("div",e.node),function(e){t.hasClass(e,"mceTmpl")&&(u(t.select("*",e),function(e){t.hasClass(e,s.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(e.innerHTML=a(s.getParam("template_mdate_format",s.getLang("template.mdate_format"))))}),l(e))})})}),tinymce.PluginManager.add("textcolor",function(u){function e(){function e(e,t){var n="transparent"==e;return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'"><div id="'+a+"-"+s+++'" data-mce-color="'+(e||"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+tinymce.translate(t)+'">'+(n?"&#215;":"")+"</div></td>"}var t,n,r,i,o,a=this._id,s=0,l=this.settings.origin,c=function(e){var t,n=[],r=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"];for(r=u.settings.textcolor_map||r,r=u.settings[e+"_map"]||r,t=0;t<r.length;t+=2)n.push({text:r[t+1],color:"#"+r[t]});return n}(l);for(c.push({text:tinymce.translate("No color"),color:"transparent"}),t='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',n=c.length-1,i=0;i<d[l];i++){for(t+="<tr>",r=0;r<f[l];r++)n<(o=i*f[l]+r)?t+="<td></td>":t+=e((o=c[o]).color,o.text);t+="</tr>"}if(u.settings.color_picker_callback){for(t+='<tr><td colspan="'+f[l]+'" class="mce-custom-color-btn"><div id="'+a+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+a+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+tinymce.translate("Custom...")+"</button></div></td></tr>",t+="<tr>",r=0;r<f[l];r++)t+=e("","Custom color");t+="</tr>"}return t+"</tbody></table>"}function i(e,t){u.undoManager.transact(function(){u.focus(),u.formatter.apply(e,{value:t}),u.nodeChanged()})}function c(e){u.undoManager.transact(function(){u.focus(),u.formatter.remove(e,{value:null},null,!0),u.nodeChanged()})}function t(e){function o(e){s.hidePanel(),s.color(e),i(s.settings.format,e)}function a(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)}var t,n,r,s=this.parent(),l=s.settings.origin;tinymce.DOM.getParent(e.target,".mce-custom-color-btn")&&(s.hidePanel(),u.settings.color_picker_callback.call(u,function(e){for(var t,n=s.panel.getEl().getElementsByTagName("table")[0],r=tinymce.map(n.rows[n.rows.length-1].childNodes,function(e){return e.firstChild}),i=0;i<r.length&&(t=r[i]).getAttribute("data-mce-color");i++);if(i==f[l])for(i=0;i<f[l]-1;i++)a(r[i],r[i+1].getAttribute("data-mce-color"));a(t,e),o(e)},(n=s.settings.format,u.dom.getParents(u.selection.getStart(),function(e){(e=e.style["forecolor"==n?"color":"background-color"])&&(r=e)}),r))),(t=e.target.getAttribute("data-mce-color"))?(this.lastId&&document.getElementById(this.lastId).setAttribute("aria-selected",!1),e.target.setAttribute("aria-selected",!0),this.lastId=e.target.id,"transparent"==t?(s.hidePanel(),s.resetColor(),c(s.settings.format)):o(t)):null!==t&&s.hidePanel()}function n(){this._color?i(this.settings.format,this._color):c(this.settings.format)}var d={forecolor:u.settings.forecolor_rows||u.settings.textcolor_rows||5,backcolor:u.settings.backcolor_rows||u.settings.textcolor_rows||5},f={forecolor:u.settings.forecolor_cols||u.settings.textcolor_cols||8,backcolor:u.settings.backcolor_cols||u.settings.textcolor_cols||8};u.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{origin:"forecolor",role:"application",ariaRemember:!0,html:e,onclick:t},onclick:n}),u.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{origin:"backcolor",role:"application",ariaRemember:!0,html:e,onclick:t},onclick:n})}),tinymce.PluginManager.add("textpattern",function(c){function u(){return n&&(i.sort(function(e,t){return e.start.length>t.start.length?-1:e.start.length<t.start.length?1:0}),n=!1),i}function d(e){for(var t=u(),n=0;n<t.length;n++)if(0===e.indexOf(t[n].start)&&(!t[n].end||e.lastIndexOf(t[n].end)==e.length-t[n].end.length))return t[n]}function r(e){var t,n,r,i,o,a,s=c.selection,l=c.dom;return s.isCollapsed()&&(s=s.getRng(!0),t=s.startContainer,n=s.startOffset,s=t.data,o=e?1:0,3==t.nodeType&&((i=function(e,t,n){for(var r,i=u(),o=0;o<i.length;o++)if((r=i[o]).end&&e.substr(t-r.end.length-n,r.end.length)==r.end)return r}(s,n,o))&&(r=Math.max(0,n-o),-1!==(r=s.lastIndexOf(i.start,r-i.end.length-1))&&((a=l.createRng()).setStart(t,r),a.setEnd(t,n-o),(i=d(a.toString()))&&i.end&&!(t.data.length<=i.start.length+i.end.length)))))?(a=c.formatter.get(i.format))&&a[0].inline?((t=t.splitText(r)).splitText(n-r-o),t.deleteData(0,i.start.length),t.deleteData(t.data.length-i.end.length,i.end.length),c.formatter.apply(i.format,{},t),t):void 0:void 0}function t(){var e,t=r();t&&((e=c.dom.createRng()).setStart(t,t.data.length),e.setEnd(t,t.data.length),c.selection.setRng(e)),function(){var e,t,n,r,i,o,a,s=c.selection,l=c.dom;if(s.isCollapsed()&&(r=l.getParent(s.getStart(),"p"))){for(o=new tinymce.dom.TreeWalker(r,r);n=o.next();)if(3==n.nodeType){t=n;break}t&&(i=d(t.data))&&(e=(a=s.getRng(!0)).startContainer,l=a.startOffset,t==e&&(l=Math.max(0,l-i.start.length)),tinymce.trim(t.data).length!=i.start.length&&(!i.format||(r=c.formatter.get(i.format))&&r[0].block&&(t.deleteData(0,i.start.length),c.formatter.apply(i.format,{},t),a.setStart(e,l),a.collapse(!0),s.setRng(a)),i.cmd&&c.undoManager.transact(function(){t.deleteData(0,i.start.length),c.execCommand(i.cmd)})))}}()}var n=!0,i=c.settings.textpattern_patterns||[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}];c.on("keydown",function(e){13!=e.keyCode||tinymce.util.VK.modifierPressed(e)||t()},!0),c.on("keyup",function(e){var t,n;32!=e.keyCode||tinymce.util.VK.modifierPressed(e)||(n=r(!0))&&(t=c.dom,e=n.data.slice(-1),/[\u00a0 ]/.test(e)&&(n.deleteData(n.data.length-1,1),e=t.doc.createTextNode(e),n.nextSibling?t.insertAfter(e,n.nextSibling):n.parentNode.appendChild(e),(t=t.createRng()).setStart(e,1),t.setEnd(e,1),c.selection.setRng(t)))}),this.getPatterns=u,this.setPatterns=function(e){i=e,n=!0}}),tinymce.PluginManager.add("visualblocks",function(n,r){function e(){var e=this;e.active(o),n.on("VisualBlocks",function(){e.active(n.dom.hasClass(n.getBody(),"mce-visualblocks"))})}var i,o;window.NodeList&&(n.addCommand("mceVisualBlocks",function(){var e,t=n.dom;i||(i=t.uniqueId(),e=t.create("link",{id:i,rel:"stylesheet",href:r+"/css/visualblocks.css"}),n.getDoc().getElementsByTagName("head")[0].appendChild(e)),n.on("PreviewFormats AfterPreviewFormats",function(e){o&&t.toggleClass(n.getBody(),"mce-visualblocks","afterpreviewformats"==e.type)}),t.toggleClass(n.getBody(),"mce-visualblocks"),o=n.dom.hasClass(n.getBody(),"mce-visualblocks"),n.fire("VisualBlocks")}),n.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:e}),n.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:e,selectable:!0,context:"view",prependToContext:!0}),n.on("init",function(){n.settings.visualblocks_default_state&&n.execCommand("mceVisualBlocks",!1,null,{skip_focus:!0})}),n.on("remove",function(){n.dom.removeClass(n.getBody(),"mce-visualblocks")}))}),tinymce.PluginManager.add("visualchars",function(f){function t(e){function t(e){return'<span data-mce-bogus="1" class="mce-'+d[e]+'">'+e+"</span>"}var n,r,i,o,a,s,l,c=f.getBody(),u=f.selection,d={" ":"nbsp","­":"shy"};if(h=!h,m.state=h,f.fire("VisualChars",{state:h}),l=function(){var e,t="";for(e in d)t+=e;return new RegExp("["+t+"]","g")}(),e&&(s=u.getBookmark()),h)for(r=[],tinymce.walk(c,function(e){3==e.nodeType&&e.nodeValue&&l.test(e.nodeValue)&&r.push(e)},"childNodes"),i=0;i<r.length;i++){for(o=(o=r[i].nodeValue).replace(l,t),a=f.dom.create("div",null,o);n=a.lastChild;)f.dom.insertAfter(n,r[i]);f.dom.remove(r[i])}else for(i=(r=f.dom.select(function(){var e,t="";for(e in d)t&&(t+=","),t+="span.mce-"+d[e];return t}(),c)).length-1;0<=i;i--)f.dom.remove(r[i],1);u.moveToBookmark(s)}function e(){var t=this;f.on("VisualChars",function(e){t.active(e.state)})}var h,m=this;f.addCommand("mceVisualChars",t),f.addButton("visualchars",{title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:e}),f.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:e,selectable:!0,context:"view",prependToContext:!0}),f.on("beforegetcontent",function(e){h&&"raw"!=e.format&&!e.draft&&t(!(h=!0))})}),tinymce.PluginManager.add("wordcount",function(n){function t(){n.theme.panel.find("#wordcount").text(["Words: {0}",r.getCount()])}var r=this,i=n.getParam("wordcount_countregex",/[\w\u2019\x27\-\u00C0-\u1FFF]+/g),o=n.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g);n.on("init",function(){var e=n.theme.panel&&n.theme.panel.find("#statusbar")[0];e&&tinymce.util.Delay.setEditorTimeout(n,function(){e.insert({type:"label",name:"wordcount",text:["Words: {0}",r.getCount()],classes:"wordcount",disabled:n.settings.readonly},0),n.on("setcontent beforeaddundo",t),n.on("keyup",function(e){32==e.keyCode&&t()})},0)}),r.getCount=function(){var e=n.getContent({format:"raw"}),t=0;return!e||(e=(e=(e=(e=(e=e.replace(/\.\.\./g," ")).replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ")).replace(/(\w+)(&#?[a-z0-9]+;)+(\w+)/i,"$1$3").replace(/&.+?;/g," ")).replace(o,"")).match(i))&&(t=e.length),t}}),angular.module("ui.tinymce",[]).value("uiTinymceConfig",{}).directive("uiTinymce",["$rootScope","$compile","$timeout","$window","$sce","uiTinymceConfig",function(m,p,g,v,y,b){return(b=b||{}).baseUrl&&(tinymce.baseURL=b.baseUrl),{require:["ngModel","^?form"],priority:599,link:function(i,o,a,e){function t(e){e?(n(),s&&s.getBody().setAttribute("contenteditable",!1)):(n(),s&&!s.settings.readonly&&s.getDoc()&&s.getBody().setAttribute("contenteditable",!0))}function n(){s=s||tinymce.get(a.id)}var r,s,l,c,u,d,f,h;v.tinymce&&(l=e[0],c=e[1]||null,u={debounce:!0},d=function(e){e=e.getContent({format:u.format}).trim(),e=y.trustAsHtml(e);l.$setViewValue(e),m.$$phase||i.$digest()},a.$set("id","ui-tinymce-"+(new Date).valueOf()),r={},angular.extend(r,i.$eval(a.uiTinymce)),f=function(t){g.cancel(h),h=g(function(){var e;(e=t).isDirty()&&(e.save(),d(e))},400)},e={setup:function(e){e.on("init",function(){l.$render(),l.$setPristine(),l.$setUntouched(),c&&c.$setPristine()}),e.on("ExecCommand change NodeChange ObjectResized",function(){return u.debounce?void f(e):(e.save(),void d(e))}),e.on("blur",function(){o[0].blur(),l.$setTouched(),m.$$phase||i.$digest()}),e.on("remove",function(){o.remove()}),b.setup&&b.setup(e,{updateView:d}),r.setup&&r.setup(e,{updateView:d})},format:r.format||"html",selector:"#"+a.id},angular.extend(u,b,r,e),g(function(){u.baseURL&&(tinymce.baseURL=u.baseURL);var e=tinymce.init(u);e&&"function"==typeof e.then?e.then(function(){t(i.$eval(a.ngDisabled))}):t(i.$eval(a.ngDisabled))}),l.$formatters.unshift(function(e){return e?y.trustAsHtml(e):""}),l.$parsers.unshift(function(e){return e?y.getTrustedHtml(e):""}),l.$render=function(){n();var e=l.$viewValue?y.getTrustedHtml(l.$viewValue):"";s&&s.getDoc()&&(s.setContent(e),s.fire("change"))},a.$observe("disabled",t),i.$on("$tinymce:refresh",function(e,t){var n,r=a.id;!angular.isUndefined(t)&&t!==r||(n=o.parent(),(t=o.clone()).removeAttr("id"),t.removeAttr("style"),t.removeAttr("aria-hidden"),tinymce.execCommand("mceRemoveEditor",!1,r),n.append(p(t)(i)))}),i.$on("$destroy",function(){n(),s&&(s.remove(),s=null)}))}}}]),function(x){"use strict";function o(e,t){var i=[],e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(e,t,n,r){return e="?"===r||"*?"===r,r="*"===r||"*?"===r,i.push({name:n,optional:e}),t=t||"",(e?"(?:"+t:t+"(?:")+(r?"(.+?)":"([^/]+)")+(e?"?)?":")")}).replace(/([/$*])/g,"\\$1");return t.ignoreTrailingSlashes&&(e=e.replace(/\/+$/,"")+"/*"),{keys:i,regexp:new RegExp("^"+e+"(?:[?#]|$)",t.caseInsensitiveMatch?"i":"")}}function e(e){i&&e.get("$route")}function t(f,h,m){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(n,r,e,t,i){function o(){c&&(m.cancel(c),c=null),s&&(s.$destroy(),s=null),l&&((c=m.leave(l)).done(function(e){!1!==e&&(c=null)}),l=null)}function a(){var e,t=f.current&&f.current.locals;x.isDefined(t&&t.$template)?(t=n.$new(),e=f.current,l=i(t,function(e){m.enter(e,null,l||r).done(function(e){!1===e||!x.isDefined(u)||u&&!n.$eval(u)||h()}),o()}),(s=e.scope=t).$emit("$viewContentLoaded"),s.$eval(d)):o()}var s,l,c,u=e.autoscroll,d=e.onload||"";n.$on("$routeChangeSuccess",a),a()}}}function n(a,s,l){return{restrict:"ECA",priority:-400,link:function(e,t){var n=l.current,r=n.locals;t.html(r.$template);var i,o=a(t.contents());n.controller&&(r.$scope=e,i=s(n.controller,r),n.controllerAs&&(e[n.controllerAs]=i),t.data("$ngControllerController",i),t.children().data("$ngControllerController",i)),e[n.resolveAs||"$resolve"]=r,o(e)}}}var a,s,r,$,i,l=x.module("ngRoute",[]).info({angularVersion:"1.8.2"}).provider("$route",function(){function b(e,t){return x.extend(Object.create(e),t)}a=x.isArray,s=x.isObject,r=x.isDefined,$=x.noop;var w={};this.when=function(e,t){var n=void 0;if(a(t)){n=n||[];for(var r=0,i=t.length;r<i;r++)n[r]=t[r]}else if(s(t))for(r in n=n||{},t)"$"===r.charAt(0)&&"$"===r.charAt(1)||(n[r]=t[r]);return n=n||t,x.isUndefined(n.reloadOnUrl)&&(n.reloadOnUrl=!0),x.isUndefined(n.reloadOnSearch)&&(n.reloadOnSearch=!0),x.isUndefined(n.caseInsensitiveMatch)&&(n.caseInsensitiveMatch=this.caseInsensitiveMatch),w[e]=x.extend(n,{originalPath:e},e&&o(e,n)),e&&(r="/"===e[e.length-1]?e.substr(0,e.length-1):e+"/",w[r]=x.extend({originalPath:e,redirectTo:e},o(r,n))),this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},i=!0,this.eagerInstantiationEnabled=function(e){return r(e)?(i=e,this):i},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser",function(i,d,o,a,s,l,c,e){function t(e){var c,u,t=y.current;x.forEach(w,function(e,t){if(r=!u){var n=d.path(),r=e.keys,i={};if(e.regexp)if(n=e.regexp.exec(n)){for(var o=1,a=n.length;o<a;++o){var s=r[o-1],l=n[o];s&&l&&(i[s.name]=l)}r=i}else r=null;else r=null;r=c=r}r&&((u=b(e,{params:x.extend({},d.search(),c),pathParams:c})).$$route=e)}),p=u||w.null&&b(w.null,{params:{},pathParams:{}}),(g=!v&&p&&t&&p.$$route===t.$$route&&(!p.reloadOnUrl||!p.reloadOnSearch&&x.equals(p.pathParams,t.pathParams)))||!t&&!p||i.$broadcast("$routeChangeStart",p,t).defaultPrevented&&e&&e.preventDefault()}function n(){var t,n=y.current,r=p;g?(n.params=r.params,x.copy(n.params,o),i.$broadcast("$routeUpdate",n)):(r||n)&&(v=!1,y.current=r,t=a.resolve(r),e.$$incOutstandingRequestCount("$route"),t.then(u).then(f).then(function(e){return e&&t.then(h).then(function(e){r===y.current&&(r&&(r.locals=e,x.copy(r.params,o)),i.$broadcast("$routeChangeSuccess",r,n))})}).catch(function(e){r===y.current&&i.$broadcast("$routeChangeError",r,n,e)}).finally(function(){e.$$completeOutstandingRequest($,"$route")}))}function u(e){var t,n,r={route:e,hasRedirection:!1};if(e)if(e.redirectTo)x.isString(e.redirectTo)?(r.path=m(e.redirectTo,e.params),r.search=e.params,r.hasRedirection=!0):(t=d.path(),n=d.search(),e=e.redirectTo(e.pathParams,t,n),x.isDefined(e)&&(r.url=e,r.hasRedirection=!0));else if(e.resolveRedirectTo)return a.resolve(s.invoke(e.resolveRedirectTo)).then(function(e){return x.isDefined(e)&&(r.url=e,r.hasRedirection=!0),r});return r}function f(e){var t,n,r=!0;return e.route!==y.current?r=!1:e.hasRedirection&&(t=d.url(),(n=e.url)?d.url(n).replace():n=d.path(e.path).search(e.search).replace().url(),n!==t&&(r=!1)),r}function h(e){if(e){var n=x.extend({},e.resolve);return x.forEach(n,function(e,t){n[t]=x.isString(e)?s.get(e):s.invoke(e,null,null,t)}),t=e,x.isDefined(r=t.template)?x.isFunction(r)&&(r=r(t.params)):x.isDefined(i=t.templateUrl)&&(x.isFunction(i)&&(i=i(t.params)),x.isDefined(i)&&(t.loadedTemplateUrl=c.valueOf(i),r=l(i))),e=r,x.isDefined(e)&&(n.$template=e),a.all(n)}var t,r,i}function m(e,n){var r=[];return x.forEach((e||"").split(":"),function(e,t){0===t?r.push(e):(e=(t=e.match(/(\w+)(?:[?*])?(.*)/))[1],r.push(n[e]),r.push(t[2]||""),delete n[e])}),r.join("")}var p,g,v=!1,y={routes:w,reload:function(){var e={defaultPrevented:!(v=!0),preventDefault:function(){this.defaultPrevented=!0,v=!1}};i.$evalAsync(function(){t(e),e.defaultPrevented||n()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw C("norout");e=x.extend({},this.current.params,e),d.path(m(this.current.$$route.originalPath,e)),d.search(e)}};return i.$on("$locationChangeStart",t),i.$on("$locationChangeSuccess",n),y}]}).run(e),C=x.$$minErr("ngRoute");e.$inject=["$injector"],l.provider("$routeParams",function(){this.$get=function(){return{}}}),l.directive("ngView",t),l.directive("ngView",n),t.$inject=["$route","$anchorScroll","$animate"],n.$inject=["$compile","$controller","$route"]}((window,window.angular)),function(){"use strict";angular.module("angularModalService",[]).factory("ModalService",["$document","$compile","$controller","$http","$rootScope","$q","$timeout","$templateCache","_",function(e,d,f,r,h,m,p,i,g){var v=e.find("body");return new function(){var t=new n;this.showModal=function(e){return e.stack=t,new o(e).init()}};function n(){var t=this,n=[];function r(e){n.length&&n[n.length-1].setVisibility(e)}t.count=0,t.push=function(e){r(!1),n.push(e),r(!0),t.count=n.length},t.pop=function(){n.length&&(r(!1),n.pop(),r(!0),t.count=n.length)}}function o(u){function e(e){var t,n="modal--show",r=h.$new(),i=m.defer(),o=(t=r,g.extend({},u.inputs,{$scope:t,close:c})),a=u.appendElement||v;r.isRootModal=0===u.stack.count;var s=function(e,t){e=angular.element(e);return d(e)(t)}(e,r);o.$element=s;o=f(u.controller,o);a.append(s);var l={controller:o,scope:r,element:s,close:i.promise,setVisibility:function(e){var t="addClass";e&&(t="removeClass");l.element[t]("modal--pause")}};return l.close.then(function(e){u.stack.pop(),r.$destroy(),s.remove(),parent&&0===u.stack.count&&parent.postMessage({type:"MODAL_CLOSE"},document.location.origin)}),u.stack.push(l),l;function c(e,t){null==t&&(t=500),l.element.children().removeClass(n),p(function(){i.resolve(e)},t)}}this.init=function(){var t=m.defer();return u.controller?function(e,t){var n=m.defer();e?n.resolve(e):t?void 0!==(e=i.get(t))?n.resolve(e):r({method:"GET",url:t,cache:!0}).then(function(e){i.put(t,e.data),n.resolve(e.data)}).catch(n.reject):n.reject("No template or templateUrl has been specified.");return n.promise}(u.template,u.templateUrl).then(e).then(t.resolve).catch(function(e){t.reject(e)}):t.reject("No controller has been specified."),t.promise}}}])}(),function(x){"use strict";function $(e){e.originalEvent&&(e.dataTransfer=e.originalEvent.dataTransfer),void 0!==e.dataTransfer&&"none"===e.dataTransfer.dropEffect&&("copy"===e.dataTransfer.effectAllowed||"move"===e.dataTransfer.effectAllowed?e.dataTransfer.dropEffect=e.dataTransfer.effectAllowed:"copyMove"!==e.dataTransfer.effectAllowed&&"copymove"!==e.dataTransfer.effectAllowed||(e.dataTransfer.dropEffect=e.ctrlKey?"copy":"move"))}var e;"ondrag"in document.createElement("a")?((e=x.module("ang-drag-drop",[])).directive("uiDraggable",["$parse","$rootScope","$dragImage",function(y,b,w){return function(u,d,f){var h,m,p=!1,g=f.draggingClass||"on-dragging";function v(e){e.originalEvent&&(e.dataTransfer=e.originalEvent.dataTransfer),setTimeout(function(){d.unbind("$destroy",v)},0);var t,n,r=f.dragChannel||"defaultchannel";b.$broadcast("ANGULAR_DRAG_END",e,r),$(e),e.dataTransfer&&"none"!==e.dataTransfer.dropEffect?f.onDropSuccess&&(t=y(f.onDropSuccess),u.$evalAsync(function(){t(u,{$event:e})})):e.dataTransfer&&"none"===e.dataTransfer.dropEffect&&f.onDropFailure&&(n=y(f.onDropFailure),u.$evalAsync(function(){n(u,{$event:e})})),d.removeClass(g)}function t(r){var e,t,n,i,o,a,s,l,c;r.originalEvent&&(r.dataTransfer=r.originalEvent.dataTransfer),!p||m.classList.contains(h)?(e=f.dragChannel||"defaultchannel",o="",f.drag&&(o=u.$eval(f.drag)),t=f.dragImage||null,d.addClass(g),d.bind("$destroy",v),n=!(document.uniqueID||window.opera),t&&n?(i=y(f.dragImage),u.$apply(function(){var e,t,n=i(u,{$event:r});n&&(n=x.isString(n)?w.generate(n):n).image&&(e=n.xOffset||0,t=n.yOffset||0,r.dataTransfer.setDragImage(n.image,e,t))})):f.dragImageElementId&&(s=r,l=f.dragImageElementId,s.originalEvent&&(s.dataTransfer=s.originalEvent.dataTransfer),c=y(l),u.$apply(function(){var e,t=c(u,{$event:s});t&&x.isString(t)&&(e=document.getElementById(t))&&s.dataTransfer.setDragImage(e,0,0)})),l={data:o,channel:e,offset:{x:r.offsetX,y:r.offsetY}},o=x.toJson(l),r.dataTransfer.setData("text",o),r.dataTransfer.effectAllowed="copyMove",f.onDragStart&&(a=y(f.onDragStart),u.$evalAsync(function(){a(u,{$event:r})})),b.$broadcast("ANGULAR_DRAG_START",r,e,l)):r.preventDefault()}d.attr("draggable",!1),u.$watch(f.uiDraggable,function(e){e?(d.attr("draggable",e),d.bind("dragend",v),d.bind("dragstart",t)):(d.removeAttr("draggable"),d.unbind("dragend",v),d.unbind("dragstart",t))}),x.isString(f.dragHandleClass)&&(p=!0,h=f.dragHandleClass.trim()||"drag-handle",d.bind("mousedown",function(e){m=e.target}))}}]),e.directive("uiOnDrop",["$parse","$rootScope",function(v,y){return function(a,s,l){var o=0,c=l.dropChannel||"defaultchannel",u="",d=l.dragEnterClass||"on-drag-enter",n=l.dragHoverClass||"on-drag-hover",r=v(l.onDragEnter),i=v(l.onDragLeave);function f(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation();var t=v(l.uiOnDragOver);return a.$evalAsync(function(){t(a,{$event:e,$channel:c})}),!1}function h(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),0===--o&&(a.$evalAsync(function(){i(a,{$event:e,$channel:c})}),s.addClass(d),s.removeClass(n));var t=v(l.uiOnDragLeave);a.$evalAsync(function(){t(a,{$event:e,$channel:c})})}function m(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),0===o&&(a.$evalAsync(function(){r(a,{$event:e,$channel:c})}),s.removeClass(d),s.addClass(n)),o++;var t=v(l.uiOnDragEnter);a.$evalAsync(function(){t(a,{$event:e,$channel:c})}),y.$broadcast("ANGULAR_HOVER",u)}function p(e){e.originalEvent&&(e.dataTransfer=e.originalEvent.dataTransfer),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation();var t=e.dataTransfer.getData("text"),t=x.fromJson(t),n=function(e){for(var t={x:e.offsetX,y:e.offsetY},n=e.target;n!==s[0];)if(t.x=t.x+n.offsetLeft,t.y=t.y+n.offsetTop,!(n=n.offsetParent))return null;return t}(e),r=n?{x:n.x-t.offset.x,y:n.y-t.offset.y}:null;$(e);var i=v(l.uiOnDrop);a.$evalAsync(function(){i(a,{$data:t.data,$event:e,$channel:t.channel,$position:r})}),s.removeClass(d),o=0}function g(e){return e.originalEvent&&(e.dataTransfer=e.originalEvent.dataTransfer),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),!(e.dataTransfer.dropEffect="none")}var e=y.$on("ANGULAR_DRAG_START",function(e,t,n,r){var i,o=!0;i=u=n,(o=(o="*"!==(n=c)&&!new RegExp("(\\s|[,])+("+i+")(\\s|[,])+","i").test(","+n+",")?!1:o)&&l.dropValidate?v(l.dropValidate)(a,{$drop:{scope:a,element:s},$event:t,$data:r.data,$channel:r.channel}):o)?(s.bind("dragover",f),s.bind("dragenter",m),s.bind("dragleave",h),s.bind("drop",p),s.addClass(d)):(s.bind("dragover",g),s.bind("dragenter",g),s.bind("dragleave",g),s.bind("drop",g),s.removeClass(d))}),t=y.$on("ANGULAR_DRAG_END",function(){s.unbind("dragover",f),s.unbind("dragenter",m),s.unbind("dragleave",h),s.unbind("drop",p),s.removeClass(n),s.removeClass(d),s.unbind("dragover",g),s.unbind("dragenter",g),s.unbind("dragleave",g),s.unbind("drop",g)});a.$on("$destroy",function(){e(),t()}),l.$observe("dropChannel",function(e){e&&(c=e)})}}]),e.constant("$dragImageConfig",{height:20,width:200,padding:10,font:"bold 11px Arial",fontColor:"#eee8d5",backgroundColor:"#93a1a1",xOffset:0,yOffset:0}),e.service("$dragImage",["$dragImageConfig",function(i){this.generate=function(e,t){var n=x.extend({},i,t||{}),r=document.createElement("canvas");r.height=n.height,r.width=n.width;t=r.getContext("2d");t.fillStyle=n.backgroundColor,t.fillRect(0,0,n.width,n.height),t.font=n.font,t.fillStyle=n.fontColor;e=function(e,t,n){var r=e.measureText(t).width;if(r<n.width)return t;for(;r+n.padding>n.width;)t=t.substring(0,t.length-1),r=e.measureText(t+"…").width;return t+"…"}(t,e,n);t.fillText(e,4,n.padding+4);e=new Image;return e.src=r.toDataURL(),{image:e,xOffset:n.xOffset,yOffset:n.yOffset}}}])):x.module("ang-drag-drop",[])}(angular),!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(r){return function(e,t){var n;"__setXHR_"===e?(n=t(this))instanceof Function&&n(this):r.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);function RoutingUtilitites(){var r={mapOptions:function(e,t){return{controller:t+"Controller",controllerAs:"vm",templateUrl:e+"Routes/"+t+".html",reloadOnSearch:!1}},registerCrudRoutes:function(e,t,n){e.when("/new",r.mapOptions(t,"Add"+n)).when("/:id",r.mapOptions(t,n+"Details")).otherwise(r.mapOptions(t,n+"List"))}};return r}ngFileUpload.version="12.2.13",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(s,e,l){var c=this;c.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var u=this.isResumeSupported();function t(n){n.method=n.method||"POST",n.headers=n.headers||{};var r=n._deferred=n._deferred||e.defer(),i=r.promise;function o(e){r.notify&&r.notify(e),i.progressFunc&&l(function(){i.progressFunc(e)})}function t(e){return null!=n._start&&u?{loaded:e.loaded+n._start,total:n._file&&n._file.size||e.total,type:e.type,config:n,lengthComputable:!0,target:e.target}:e}function a(){s(n).then(function(e){var t;u&&n._chunkSize&&!n._finished&&n._file?(t=n._file&&n._file.size||0,o({loaded:Math.min(n._end,t),total:t,config:n,type:"progress"}),c.upload(n,!0)):(n._finished&&delete n._finished,r.resolve(e))},function(e){r.reject(e)},function(e){r.notify(e)})}return n.disableProgress||(n.headers.__setXHR_=function(){return function(e){e&&e.upload&&e.upload.addEventListener&&(n.__XHR=e,n.xhrFn&&n.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=n,o(t(e))},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=n,o(t(e)))},!1))}}),u?n._chunkSize&&n._end&&!n._finished?(n._start=n._end,n._end+=n._chunkSize,a()):n.resumeSizeUrl?s.get(n.resumeSizeUrl).then(function(e){n.resumeSizeResponseReader?n._start=n.resumeSizeResponseReader(e.data):n._start=parseInt((null==e.data.size?e.data:e.data.size).toString()),n._chunkSize&&(n._end=n._start+n._chunkSize),a()},function(e){throw e}):n.resumeSize?n.resumeSize().then(function(e){n._start=e,n._chunkSize&&(n._end=n._start+n._chunkSize),a()},function(e){throw e}):(n._chunkSize&&(n._start=0,n._end=n._start+n._chunkSize),a()):a(),i.success=function(t){return i.then(function(e){t(e.data,e.status,e.headers,n)}),i},i.error=function(t){return i.then(null,function(e){t(e.data,e.status,e.headers,n)}),i},i.progress=function(t){return i.progressFunc=t,i.then(null,null,function(e){t(e)}),i},i.abort=i.pause=function(){return n.__XHR&&l(function(){n.__XHR.abort()}),i},i.xhr=function(e){var t;return n.xhrFn=(t=n.xhrFn,function(){t&&t.apply(i,arguments),e.apply(i,arguments)}),i},c.promisesCount++,i.finally&&i.finally instanceof Function&&i.finally(function(){c.promisesCount--}),i}function n(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}this.isUploadInProgress=function(){return 0<c.promisesCount},this.rename=function(e,t){return e.ngfName=t,e},this.jsonBlob=function(e){null==e||angular.isString(e)||(e=JSON.stringify(e));e=new window.Blob([e],{type:"application/json"});return e._ngfBlob=!0,e},this.json=function(e){return angular.toJson(e)},this.isFile=function(e){return null!=e&&(e instanceof window.Blob||e.flashId&&e.name&&e.size)},this.upload=function(s,e){function l(e,t,n){if(void 0!==t)if(angular.isDate(t)&&(t=t.toISOString()),angular.isString(t))e.append(n,t);else if(c.isFile(t)){var r=function(e,t){if(e._ngfBlob)return e;if(s._file=s._file||e,null!=s._start&&u){s._end&&s._end>=e.size&&(s._finished=!0,s._end=e.size);var n=e.slice(s._start,s._end||e.size);return n.name=e.name,n.ngfName=e.ngfName,s._chunkSize&&(t.append("_chunkSize",s._chunkSize),t.append("_currentChunkSize",s._end-s._start),t.append("_chunkNumber",Math.floor(s._start/s._chunkSize)),t.append("_totalSize",s._file.size)),n}return e}(t,e),i=n.split(",");i[1]&&(r.ngfName=i[1].replace(/^\s+|\s+$/g,""),n=i[0]),s._fileKey=s._fileKey||n,e.append(n,r,r.ngfName||r.name)}else if(angular.isObject(t)){if(t.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+n;t.$$ngfCircularDetection=!0;try{for(var o in t){var a;t.hasOwnProperty(o)&&"$$ngfCircularDetection"!==o&&(a=null==s.objectKey?"[i]":s.objectKey,t.length&&-1<parseInt(o)&&(a=null==s.arrayKey?a:s.arrayKey),l(e,t[o],n+a.replace(/[ik]/g,o)))}}finally{delete t.$$ngfCircularDetection}}else e.append(n,t)}return(s=!e?n(s):s)._isDigested||(s._isDigested=!0,s._chunkSize=c.translateScalars(s.resumeChunkSize),s._chunkSize=s._chunkSize?parseInt(s._chunkSize.toString()):null,s.headers=s.headers||{},s.headers["Content-Type"]=void 0,s.transformRequest=s.transformRequest?angular.isArray(s.transformRequest)?s.transformRequest:[s.transformRequest]:[],s.transformRequest.push(function(e){var t,n,r=new window.FormData;for(t in e=e||s.fields||{},s.file&&(e.file=s.file),e)e.hasOwnProperty(t)&&(n=e[t],s.formDataAppender?s.formDataAppender(r,t,n):l(r,n,t));return r})),t(s)},this.http=function(e){return(e=n(e)).transformRequest=e.transformRequest||function(e){return window.ArrayBuffer&&e instanceof window.ArrayBuffer||e instanceof window.Blob?e:s.defaults.transformRequest[0].apply(this,arguments)},e._chunkSize=c.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,t(e)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1024*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1048576*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1073741824*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.urlToBlob=function(n){var r=e.defer();return s({url:n,method:"get",responseType:"arraybuffer"}).then(function(e){var t=new Uint8Array(e.data),e=e.headers("content-type")||"image/WebP",t=new window.Blob([t],{type:e}),e=n.match(/.*\/(.+?)(\?.*)?$/);1<e.length&&(t.name=e[1]),r.resolve(t)},function(e){r.reject(e)}),r.promise},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function($,C,e,S,t){var k=t;function E(r,i,o,a,s){var l=[k.emptyPromise()];for(var e=0;e<i.length;e++)!function(n,t){var e;0===n.type.indexOf("image")&&(r.pattern&&!k.validatePattern(n,r.pattern)||(r.resizeIf=function(e,t){return k.attrGetter("ngfResizeIf",o,a,{$width:e,$height:t,$file:n})},e=k.resize(n,r),l.push(e),e.then(function(e){i.splice(t,1,e)},function(e){n.$error="resize",(n.$errorMessages=n.$errorMessages||{}).resize=!0,n.$errorParam=(e?(e.message||e)+": ":"")+(n&&n.name),s.$ngfValidations.push({name:"resize",valid:!1}),k.applyModelValidation(s,i)})))}(i[e],e);return S.all(l)}return k.getAttrWithDefaults=function(e,t){if(null!=e[t])return e[t];t=k.defaults[t];return null==t||angular.isString(t)?t:JSON.stringify(t)},k.attrGetter=function(t,e,n,r){var i=this.getAttrWithDefaults(e,t);if(!n)return i;try{return r?$(i)(n,r):$(i)(n)}catch(e){if(t.search(/min|max|pattern/i))return i;throw e}},k.shouldUpdateOn=function(e,t,n){n=k.attrGetter("ngfModelOptions",t,n);return!n||!n.updateOn||-1<n.updateOn.split(" ").indexOf(e)},k.emptyPromise=function(){var e=S.defer(),t=arguments;return C(function(){e.resolve.apply(e,t)}),e.promise},k.rejectPromise=function(){var e=S.defer(),t=arguments;return C(function(){e.reject.apply(e,t)}),e.promise},k.happyPromise=function(e,t){var n=S.defer();return e.then(function(e){n.resolve(e)},function(e){C(function(){throw e}),n.resolve(t)}),n.promise},k.updateModel=function(l,c,u,d,t,f,a){function s(e,t,n,r,i){c.$$ngfPrevValidFiles=e,c.$$ngfPrevInvalidFiles=t;var o=e&&e.length?e[0]:null,a=t&&t.length?t[0]:null;l&&(k.applyModelValidation(l,e),l.$setViewValue(i?o:e)),d&&$(d)(u,{$files:e,$file:o,$newFiles:n,$duplicateFiles:r,$invalidFiles:t,$invalidFile:a,$event:f});var s=k.attrGetter("ngfModelInvalid",c);s&&C(function(){$(s).assign(u,i?a:t)}),C(function(){})}var o,h,e,m=[],p=[],g=[];function v(){function r(){C(function(){s(n?o.concat(g):g,n?h.concat(p):p,t,m,x)},w&&w.debounce?w.debounce.change||w.debounce:0)}var i=b?y:g;(function(t,n,r,i){var e=k.attrGetter("ngfResize",n,r);if(!e||!k.isResizeSupported()||!t.length)return k.emptyPromise();if(e instanceof Function){var o=S.defer();return e(t).then(function(e){E(e,t,n,r,i).then(function(e){o.resolve(e)},function(e){o.reject(e)})},function(e){o.reject(e)})}return E(e,t,n,r,i)})(i,c,u,l).then(function(){b?k.validate(y,n?o.length:0,l,c,u).then(function(e){g=e.validsFiles,p=e.invalidsFiles,r()}):r()},function(){for(var e=0;e<i.length;e++){var t,n=i[e];"resize"===n.$error&&(-1<(t=g.indexOf(n))&&(g.splice(t,1),p.push(n)),r())}})}o=c.$$ngfPrevValidFiles||[],h=c.$$ngfPrevInvalidFiles||[],l&&l.$modelValue&&(e=l.$modelValue,o=angular.isArray(e)?e:[e]);var n=k.attrGetter("ngfKeep",c,u),y=(t||[]).slice(0);"distinct"!==n&&!0!==k.attrGetter("ngfKeepDistinct",c,u)||function(){function n(e,t){return e.name===t.name&&(e.$ngfOrigSize||e.size)===(t.$ngfOrigSize||t.size)&&e.type===t.type}if(t){y=[],m=[];for(var e=0;e<t.length;e++)(!function(e){for(var t=0;t<o.length;t++)if(n(e,o[t]))return 1;for(t=0;t<h.length;t++)if(n(e,h[t]))return 1}(t[e])?y:m).push(t[e])}}();var b,w,x=!n&&!k.attrGetter("ngfMultiple",c,u)&&!k.attrGetter("multiple",c);n&&!y.length||(k.attrGetter("ngfBeforeModelChange",c,u,{$files:t,$file:t&&t.length?t[0]:null,$newFiles:y,$duplicateFiles:m,$event:f}),b=k.attrGetter("ngfValidateAfterResize",c,u),w=k.attrGetter("ngfModelOptions",c,u),k.validate(y,n?o.length:0,l,c,u).then(function(e){var n,r,i,o;a?s(y,[],t,m,x):(w&&w.allowInvalid||b?g=y:(g=e.validFiles,p=e.invalidFiles),k.attrGetter("ngfFixOrientation",c,u)&&k.isExifSupported()?(n=g,r=c,i=u,o=[k.emptyPromise()],angular.forEach(n,function(e,t){0===e.type.indexOf("image/jpeg")&&k.attrGetter("ngfFixOrientation",r,i,{$file:e})&&o.push(k.happyPromise(k.applyExifRotation(e),e).then(function(e){n.splice(t,1,e)}))}),S.all(o).then(function(){v()})):v())}))},k}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,i,t,v){var y=[];function o(i,o,a,s,e,t,n,l){var r=function(e,t){return l.attrGetter(e,a,t)};function c(){return"input"===o[0].tagName.toLowerCase()&&a.type&&"file"===a.type.toLowerCase()}function u(){return r("ngfChange")||r("ngfSelect")}function d(e){if(l.shouldUpdateOn("change",a,i)){var t=e.__files_||e.target&&e.target.files,n=[];if(t){for(var r=0;r<t.length;r++)n.push(t[r]);l.updateModel(s,a,i,u(),n.length?n:null,e)}}}l.registerModelChangeValidator(s,a,i);var f=[];r("ngfMultiple")&&f.push(i.$watch(r("ngfMultiple"),function(){p.attr("multiple",r("ngfMultiple",i))})),r("ngfCapture")&&f.push(i.$watch(r("ngfCapture"),function(){p.attr("capture",r("ngfCapture",i))})),r("ngfAccept")&&f.push(i.$watch(r("ngfAccept"),function(){p.attr("accept",r("ngfAccept",i))})),f.push(a.$observe("accept",function(){p.attr("accept",r("accept"))}));var h=0,m=0;var p=o;function g(e){l.shouldUpdateOn("click",a,i)&&p.val()&&(p.val(null),l.updateModel(s,a,i,u(),null,e,!0))}(p=!c()?function(){if(c())return o;var e=angular.element('<input type="file">'),t=angular.element("<label>upload</label>");return t.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),function(t,n){function e(e){t.attr("id","ngf-"+e),n.attr("id","ngf-label-"+e)}for(var r=0;r<o[0].attributes.length;r++){var i=o[0].attributes[r];"type"!==i.name&&"class"!==i.name&&"style"!==i.name&&("id"===i.name?(e(i.value),f.push(a.$observe("id",e))):t.attr(i.name,i.value||"required"!==i.name&&"multiple"!==i.name?i.value:i.name))}}(e,t),y.push({el:o,ref:t}),document.body.appendChild(t.append(e)[0]),e}():p).bind("change",d),c()?o.bind("click",g):o.bind("click touchstart touchend",function(e){if(o.attr("disabled"))return!1;if(!r("ngfSelectDisabled",i)){var t=function(e){var t=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if(t){if("touchstart"===e.type)return m=t[0].clientX,h=t[0].clientY,!0;if("touchend"===e.type){var n=t[0].clientX,t=t[0].clientY;if(20<Math.abs(n-m)||20<Math.abs(t-h))return e.stopPropagation(),e.preventDefault(),!1}return!0}}(e);if(null!=t)return t;g(e);try{c()||document.body.contains(p[0])||(y.push({el:o,ref:p.parent()}),document.body.appendChild(p.parent()[0]),p.bind("change",d))}catch(e){}return!function(e){var t=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(t&&2<t.length){var n=v.defaults.androidFixMinorVersion||4;return parseInt(t[1])<4||parseInt(t[1])===n&&parseInt(t[2])<n}return-1===e.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(e)}(navigator.userAgent)?p[0].click():setTimeout(function(){p[0].click()},0),!1}}),-1!==navigator.appVersion.indexOf("MSIE 10")&&p.bind("click",function e(t){if(p&&!p.attr("__ngf_ie10_Fix_")){if(p[0].parentNode)return t.preventDefault(),t.stopPropagation(),p.unbind("click"),t=p.clone(),p.replaceWith(t),(p=t).attr("__ngf_ie10_Fix_","true"),p.bind("change",d),p.bind("click",e),p[0].click(),!1;p=null}else p.removeAttr("__ngf_ie10_Fix_")}),s&&s.$formatters.push(function(e){return null!=e&&0!==e.length||p.val()&&p.val(null),e}),i.$on("$destroy",function(){c()||p.parent().remove(),angular.forEach(f,function(e){e()})}),t(function(){for(var e=0;e<y.length;e++){var t=y[e];document.body.contains(t.el[0])||(y.splice(e,1),t.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(o,p,d)}return{restrict:"AEC",require:"?ngModel",link:function(e,t,n,r){o(e,t,n,r,0,i,0,v)}}}]),function(){function a(r,e,i,o,a,s,l,c){function u(t){var n=r.attrGetter("ngfNoObjectUrl",a,i);r.dataUrl(t,n).finally(function(){e(function(){var e=(n?t.$ngfDataUrl:t.$ngfBlobUrl)||t.$ngfDataUrl;c?o.css("background-image","url('"+(e||"")+"')"):o.attr("src",e),e?o.removeClass("ng-hide"):o.addClass("ng-hide")})})}e(function(){var e=i.$watch(a[s],function(n){var e,t=l;if("ngfThumbnail"===s&&(0!==(t=t||{width:o[0].naturalWidth||o[0].clientWidth,height:o[0].naturalHeight||o[0].clientHeight}).width||!window.getComputedStyle||(e=getComputedStyle(o[0])).width&&-1<e.width.indexOf("px")&&e.height&&-1<e.height.indexOf("px")&&(t={width:parseInt(e.width.slice(0,-2)),height:parseInt(e.height.slice(0,-2))})),angular.isString(n))return o.removeClass("ng-hide"),c?o.css("background-image","url('"+n+"')"):o.attr("src",n);!n||!n.type||0!==n.type.search("img"===(e=o[0]).tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./)||c&&0!==n.type.indexOf("image")?o.addClass("ng-hide"):t&&r.isResizeSupported()?(t.resizeIf=function(e,t){return r.attrGetter("ngfResizeIf",a,i,{$width:e,$height:t,$file:n})},r.resize(n,t).then(function(e){u(e)},function(e){throw e})):u(n)});i.$on("$destroy",function(){e()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,n,s){var l=e;return l.base64DataUrl=function(n){if(angular.isArray(n)){var r=s.defer(),i=0;return angular.forEach(n,function(e){l.dataUrl(e,!0).finally(function(){var t;++i===n.length&&(t=[],angular.forEach(n,function(e){t.push(e.$ngfDataUrl)}),r.resolve(t,n))})}),r.promise}return l.dataUrl(n,!0)},l.dataUrl=function(o,t){if(!o)return l.emptyPromise(o,o);if(t&&null!=o.$ngfDataUrl||!t&&null!=o.$ngfBlobUrl)return l.emptyPromise(t?o.$ngfDataUrl:o.$ngfBlobUrl,o);var e=t?o.$$ngfDataUrlPromise:o.$$ngfBlobUrlPromise;if(e)return e;var a=s.defer();return n(function(){if(window.FileReader&&o&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||o.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||o.size<4e6)){var r,i=window.URL||window.webkitURL;if(i&&i.createObjectURL&&!t){try{r=i.createObjectURL(o)}catch(e){return void n(function(){o.$ngfBlobUrl="",a.reject()})}n(function(){if(o.$ngfBlobUrl=r){a.resolve(r,o),l.blobUrls=l.blobUrls||[],l.blobUrlsTotalSize=l.blobUrlsTotalSize||0,l.blobUrls.push({url:r,size:o.size}),l.blobUrlsTotalSize+=o.size||0;for(var e=l.defaults.blobUrlsMaxMemory||268435456,t=l.defaults.blobUrlsMaxQueueSize||200;(l.blobUrlsTotalSize>e||l.blobUrls.length>t)&&1<l.blobUrls.length;){var n=l.blobUrls.splice(0,1)[0];i.revokeObjectURL(n.url),l.blobUrlsTotalSize-=n.size}}})}else{var e=new FileReader;e.onload=function(e){n(function(){o.$ngfDataUrl=e.target.result,a.resolve(e.target.result,o),n(function(){delete o.$ngfDataUrl},1e3)})},e.onerror=function(){n(function(){o.$ngfDataUrl="",a.reject()})},e.readAsDataURL(o)}}else n(function(){o[t?"$ngfDataUrl":"$ngfBlobUrl"]="",a.reject()})}),(e=t?o.$$ngfDataUrlPromise=a.promise:o.$$ngfBlobUrlPromise=a.promise).finally(function(){delete o[t?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),e},l}]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(r,i){return{restrict:"AE",link:function(e,t,n){a(r,i,e,t,n,"ngfSrc",r.attrGetter("ngfResize",n,e),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(r,i){return{restrict:"AE",link:function(e,t,n){a(r,i,e,t,n,"ngfBackground",r.attrGetter("ngfResize",n,e),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(i,o){return{restrict:"AE",link:function(e,t,n){var r=i.attrGetter("ngfSize",n,e);a(i,o,e,t,n,"ngfThumbnail",r,i.attrGetter("ngfAsBackground",n,e))}}}]),ngFileUpload.config(["$compileProvider",function(e){e.imgSrcSanitizationWhitelist&&e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/),e.aHrefSanitizationWhitelist&&e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(i,o){return function(e,t,n){if(angular.isString(e))return o.trustAsResourceUrl(e);var r=e&&((t?e.$ngfDataUrl:e.$ngfBlobUrl)||e.$ngfDataUrl);return e&&!r?(!e.$ngfDataUrlFilterInProgress&&angular.isObject(e)&&(e.$ngfDataUrlFilterInProgress=!0,i.dataUrl(e,t)),""):(e&&delete e.$ngfDataUrlFilterInProgress,(e&&r?n?o.trustAsResourceUrl(r):r:e)||"")}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,y,s){var b=e;return b.validatePattern=function(e,t){if(!t)return!0;var n=function e(t){var n="",r=[];if(2<t.length&&"/"===t[0]&&"/"===t[t.length-1])n=t.substring(1,t.length-1);else{var i=t.split(",");if(1<i.length)for(var o=0;o<i.length;o++){var a=e(i[o]);a.regexp?(n+="("+a.regexp+")",o<i.length-1&&(n+="|")):r=r.concat(a.excludes)}else 0===t.indexOf("!")?r.push("^((?!"+e(t.substring(1)).regexp+").)*$"):n=(n="^"+(t=0===t.indexOf(".")?"*"+t:t).replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$").replace(/\\\*/g,".*").replace(/\\\?/g,".")}return{regexp:n,excludes:r}}(t),r=!0;n.regexp&&n.regexp.length&&(t=new RegExp(n.regexp,"i"),r=null!=e.type&&t.test(e.type)||null!=e.name&&t.test(e.name));for(var i=n.excludes.length;i--;){var o=new RegExp(n.excludes[i],"i");r=r&&(null==e.type||o.test(e.type))&&(null==e.name||o.test(e.name))}return r},b.ratioToFloat=function(e){var t=e.toString(),e=t.search(/[x:]/i);return t=-1<e?parseFloat(t.substring(0,e))/parseFloat(t.substring(e+1)):parseFloat(t)},b.registerModelChangeValidator=function(n,r,i){n&&n.$formatters.push(function(e){var t;return n.$dirty&&((t=e)&&!angular.isArray(e)&&(t=[e]),b.validate(t,0,n,r,i).then(function(){b.applyModelValidation(n,t)})),e})},b.applyModelValidation=function(t,e){var n;n=t,null==e||n.$dirty||(n.$setDirty?n.$setDirty():n.$dirty=!0),angular.forEach(t.$ngfValidations,function(e){t.$setValidity(e.name,e.valid)})},b.getValidationAttr=function(e,t,n,r,i){var o="ngf"+n[0].toUpperCase()+n.substr(1),o=b.attrGetter(o,e,t,{$file:i});return null==o&&(o=b.attrGetter("ngfValidate",e,t,{$file:i}))&&(o=o[(n=(r||n).split("."))[0]],1<n.length&&(o=o&&o[n[1]])),o},b.validate=function(u,r,d,f,h){(d=d||{}).$ngfValidations=d.$ngfValidations||[],angular.forEach(d.$ngfValidations,function(e){e.valid=!0});var m=function(e,t){return b.attrGetter(e,f,h,t)},p=(b.attrGetter("ngfIgnoreInvalid",f,h)||"").split(" "),g=b.attrGetter("ngfRunAllValidations",f,h);if(null==u||0===u.length)return b.emptyPromise({validFiles:u,invalidFiles:[]});u=void 0===u.length?[u]:u.slice(0);var v=[];function t(e,t,n){if(u){for(var r=u.length,i=null;r--;){var o,a=u[r];!a||null!=(o=b.getValidationAttr(f,h,e,t,a))&&(n(a,o,r)||(-1===p.indexOf(e)?(a.$error=e,(a.$errorMessages=a.$errorMessages||{})[e]=!0,a.$errorParam=o,-1===v.indexOf(a)&&v.push(a),g||u.splice(r,1),i=!1):u.splice(r,1)))}null!==i&&d.$ngfValidations.push({name:e,valid:i})}}t("pattern",null,b.validatePattern),t("minSize","size.min",function(e,t){return e.size+.1>=b.translateScalars(t)}),t("maxSize","size.max",function(e,t){return e.size-.1<=b.translateScalars(t)});var n=0;if(t("maxTotalSize",null,function(e,t){return!((n+=e.size)>b.translateScalars(t))||void u.splice(0,u.length)}),t("validateFn",null,function(e,t){return!0===t||null===t||""===t}),!u.length)return b.emptyPromise({validFiles:[],invalidFiles:v});function e(o,e,r,a,s){function i(n,r,i){function t(e){var t;e()?-1===p.indexOf(o)?(r.$error=o,(r.$errorMessages=r.$errorMessages||{})[o]=!0,r.$errorParam=i,-1===v.indexOf(r)&&v.push(r),g||-1<(t=u.indexOf(r))&&u.splice(t,1),n.resolve(!1)):(-1<(t=u.indexOf(r))&&u.splice(t,1),n.resolve(!0)):n.resolve(!0)}null!=i?a(r,i).then(function(e){t(function(){return!s(e,i)})},function(){t(function(){return m("ngfValidateForce",{$file:r})})}):n.resolve(!0)}var l=[b.emptyPromise(!0)];u&&(u=void 0===u.length?[u]:u,angular.forEach(u,function(t){var n=y.defer();l.push(n.promise),!r||null!=t.type&&0===t.type.search(r)?"dimensions"===o&&null!=b.attrGetter("ngfDimensions",f)?b.imageDimensions(t).then(function(e){i(n,t,m("ngfDimensions",{$file:t,$width:e.width,$height:e.height}))},function(){n.resolve(!1)}):"duration"===o&&null!=b.attrGetter("ngfDuration",f)?b.mediaDuration(t).then(function(e){i(n,t,m("ngfDuration",{$file:t,$duration:e}))},function(){n.resolve(!1)}):i(n,t,b.getValidationAttr(f,h,o,e,t)):n.resolve(!0)}));var c=y.defer();return y.all(l).then(function(e){for(var t=!0,n=0;n<e.length;n++)if(!e[n]){t=!1;break}d.$ngfValidations.push({name:o,valid:t}),c.resolve(t)}),c.promise}var i=y.defer(),o=[];return o.push(e("maxHeight","height.max",/image/,this.imageDimensions,function(e,t){return e.height<=t})),o.push(e("minHeight","height.min",/image/,this.imageDimensions,function(e,t){return e.height>=t})),o.push(e("maxWidth","width.max",/image/,this.imageDimensions,function(e,t){return e.width<=t})),o.push(e("minWidth","width.min",/image/,this.imageDimensions,function(e,t){return e.width>=t})),o.push(e("dimensions",null,/image/,function(e,t){return b.emptyPromise(t)},function(e){return e})),o.push(e("ratio",null,/image/,this.imageDimensions,function(e,t){for(var n=t.toString().split(","),r=!1,i=0;i<n.length;i++)Math.abs(e.width/e.height-b.ratioToFloat(n[i]))<.01&&(r=!0);return r})),o.push(e("maxRatio","ratio.max",/image/,this.imageDimensions,function(e,t){return e.width/e.height-b.ratioToFloat(t)<1e-4})),o.push(e("minRatio","ratio.min",/image/,this.imageDimensions,function(e,t){return-1e-4<e.width/e.height-b.ratioToFloat(t)})),o.push(e("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(e,t){return e<=b.translateScalars(t)})),o.push(e("minDuration","duration.min",/audio|video/,this.mediaDuration,function(e,t){return e>=b.translateScalars(t)})),o.push(e("duration",null,/audio|video/,function(e,t){return b.emptyPromise(t)},function(e){return e})),o.push(e("validateAsyncFn",null,null,function(e,t){return t},function(e){return!0===e||null===e||""===e})),y.all(o).then(function(){if(g)for(var e=0;e<u.length;e++)u[e].$error&&u.splice(e--,1);g=!1,t("maxFiles",null,function(e,t,n){return r+n<t}),i.resolve({validFiles:u,invalidFiles:v})}),i.promise},b.imageDimensions=function(o){if(o.$ngfWidth&&o.$ngfHeight){var e=y.defer();return s(function(){e.resolve({width:o.$ngfWidth,height:o.$ngfHeight})}),e.promise}if(o.$ngfDimensionPromise)return o.$ngfDimensionPromise;var a=y.defer();return s(function(){0===o.type.indexOf("image")?b.dataUrl(o).then(function(e){var n=angular.element("<img>").attr("src",e).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");function t(){var e=n[0].naturalWidth||n[0].clientWidth,t=n[0].naturalHeight||n[0].clientHeight;n.remove(),o.$ngfWidth=e,o.$ngfHeight=t,a.resolve({width:e,height:t})}function r(){n.remove(),a.reject("load error")}n.on("load",t),n.on("error",r);var i=0;!function e(){s(function(){n[0].parentNode&&(n[0].clientWidth?t:10<i++?r:e)()},1e3)}(),angular.element(document.getElementsByTagName("body")[0]).append(n)},function(){a.reject("load error")}):a.reject("not image")}),o.$ngfDimensionPromise=a.promise,o.$ngfDimensionPromise.finally(function(){delete o.$ngfDimensionPromise}),o.$ngfDimensionPromise},b.mediaDuration=function(o){if(o.$ngfDuration){var e=y.defer();return s(function(){e.resolve(o.$ngfDuration)}),e.promise}if(o.$ngfDurationPromise)return o.$ngfDurationPromise;var a=y.defer();return s(function(){0===o.type.indexOf("audio")||0===o.type.indexOf("video")?b.dataUrl(o).then(function(e){var t=angular.element(0===o.type.indexOf("audio")?"<audio>":"<video>").attr("src",e).css("visibility","none").css("position","fixed");function n(){var e=t[0].duration;o.$ngfDuration=e,t.remove(),a.resolve(e)}function r(){t.remove(),a.reject("load error")}t.on("loadedmetadata",n),t.on("error",r);var i=0;!function e(){s(function(){t[0].parentNode&&(t[0].duration?n:10<i?r:e)()},1e3)}(),angular.element(document.body).append(t)},function(){a.reject("load error")}):a.reject("not media")}),o.$ngfDurationPromise=a.promise,o.$ngfDurationPromise.finally(function(){delete o.$ngfDurationPromise}),o.$ngfDurationPromise},b}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(e,t){function a(e,r,i,o,a,s,l,c){var u=t.defer(),d=document.createElement("canvas"),f=document.createElement("img");return f.setAttribute("style","visibility:hidden;position:fixed;z-index:-100000"),document.body.appendChild(f),f.onload=function(){var e=f.width,t=f.height;if(f.parentNode.removeChild(f),null==c||!1!==c(e,t))try{s&&(e/t<(n=h.ratioToFloat(s))?i=(r=e)/n:r=(i=t)*n);var n=function(e,t,n,r,i){i=i?Math.max(n/e,r/t):Math.min(n/e,r/t);return{width:e*i,height:t*i,marginX:e*i-n,marginY:t*i-r}}(e,t,r=r||e,i=i||t,l);d.width=Math.min(n.width,r),d.height=Math.min(n.height,i),d.getContext("2d").drawImage(f,Math.min(0,-n.marginX/2),Math.min(0,-n.marginY/2),n.width,n.height),u.resolve(d.toDataURL(a||"image/WebP",o||.934))}catch(e){u.reject(e)}else u.reject("resizeIf")},f.onerror=function(){f.parentNode.removeChild(f),u.reject()},f.src=e,u.promise}var h=e;return h.dataUrltoBlob=function(e,t,n){for(var r=e.split(","),e=r[0].match(/:(.*?);/)[1],i=atob(r[1]),o=i.length,a=new Uint8Array(o);o--;)a[o]=i.charCodeAt(o);e=new window.Blob([a],{type:e});return e.name=t,e.$ngfOrigSize=n,e},h.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")&&window.Blob},h.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(e){this.$ngfName=e},configurable:!0}),h.resize=function(r,i){if(0!==r.type.indexOf("image"))return h.emptyPromise(r);var o=t.defer();return h.dataUrl(r,!0).then(function(n){a(n,i.width,i.height,i.quality,i.type||r.type,i.ratio,i.centerCrop,i.resizeIf).then(function(e){if("image/jpeg"===r.type&&!1!==i.restoreExif)try{e=h.restoreExif(n,e)}catch(e){setTimeout(function(){throw e},1)}try{var t=h.dataUrltoBlob(e,r.name,r.size);o.resolve(t)}catch(e){o.reject(e)}},function(e){"resizeIf"===e&&o.resolve(r),o.reject(e)})},function(e){o.reject(e)}),o.promise},h}]),function(){function f(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$window","Upload","$http","$q",function(i,o,a,s,e,l){return{restrict:"AEC",require:"?ngModel",link:function(e,t,n,r){!function(p,n,g,r,e,i,v,y,b){var t=f(),w=function(e,t,n){return y.attrGetter(e,g,t,n)};if(w("dropAvailable")&&i(function(){p[w("dropAvailable")]?p[w("dropAvailable")].value=t:p[w("dropAvailable")]=t}),!t)return!0===w("ngfHideOnDropNotAvailable",p)&&n.css("display","none");function o(){return n.attr("disabled")||w("ngfDropDisabled",p)}null==w("ngfSelect")&&y.registerModelChangeValidator(r,g,p);var a,s=null,l=e(w("ngfStopPropagation")),c=1;function u(e,t,n){if(e){var r;try{r=e&&e.getData&&e.getData("text/html")}catch(e){}(function(e,t,n,r){var c=y.getValidationAttr(g,p,"maxFiles");null==c&&(c=Number.MAX_VALUE);var u=y.getValidationAttr(g,p,"maxTotalSize");null==u&&(u=Number.MAX_VALUE);var d=w("ngfIncludeDir",p),f=[],h=0;var i=[y.emptyPromise()];if(e&&0<e.length&&"file:"!==v.location.protocol)for(var o=0;o<e.length;o++){if(e[o].webkitGetAsEntry&&e[o].webkitGetAsEntry()&&e[o].webkitGetAsEntry().isDirectory){var a=e[o].webkitGetAsEntry();if(a.isDirectory&&!n)continue;null!=a&&i.push(function t(n,r){var i,e,o,a,s,l=b.defer();return null!=n&&(n.isDirectory?(i=[y.emptyPromise()],d&&((e={type:"directory"}).name=e.path=(r||"")+n.name,f.push(e)),o=n.createReader(),a=[],(s=function(){o.readEntries(function(e){try{e.length?(a=a.concat(Array.prototype.slice.call(e||[],0)),s()):(angular.forEach(a.slice(0),function(e){f.length<=c&&h<=u&&i.push(t(e,(r||"")+n.name+"/"))}),b.all(i).then(function(){l.resolve()},function(e){l.reject(e)}))}catch(e){l.reject(e)}},function(e){l.reject(e)})})()):n.file(function(e){try{e.path=(r||"")+e.name,d&&(e=y.rename(e,e.path)),f.push(e),h+=e.size,l.resolve()}catch(e){l.reject(e)}},function(e){l.reject(e)})),l.promise}(a))}else{a=e[o].getAsFile();null!=a&&(f.push(a),h+=a.size)}if(f.length>c||u<h||!r&&0<f.length)break}else if(null!=t)for(var s=0;s<t.length;s++){var l=t.item(s);if((l.type||0<l.size)&&(f.push(l),h+=l.size),f.length>c||u<h||!r&&0<f.length)break}var m=b.defer();return b.all(i).then(function(){if(r||d||!f.length)m.resolve(f);else{for(var e=0;f[e]&&"directory"===f[e].type;)e++;m.resolve([f[e]])}},function(e){m.reject(e)}),m.promise})(e.items,e.files,!1!==w("ngfAllowDir",p),w("multiple")||w("ngfMultiple",p)).then(function(e){e.length?d(e,t):function(e,t){if(!y.shouldUpdateOn(e,g,p)||"string"!=typeof t)return y.rejectPromise([]);var r=[];t.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(e,t,n){r.push(n)});var n=[],i=[];if(r.length){angular.forEach(r,function(e){n.push(y.urlToBlob(e).then(function(e){i.push(e)}))});var o=b.defer();return b.all(n).then(function(){o.resolve(i)},function(e){o.reject(e)}),o.promise}return y.emptyPromise()}(n,r).then(function(e){d(e,t)})})}}function d(e,t){y.updateModel(r,g,p,w("ngfChange")||w("ngfDrop"),e,t)}n[0].addEventListener("dragover",function(t){var e;!o()&&y.shouldUpdateOn("drop",g,p)&&(t.preventDefault(),l(p)&&t.stopPropagation(),-1<navigator.userAgent.indexOf("Chrome")&&(e=t.dataTransfer.effectAllowed,t.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy"),i.cancel(s),a||(a="C",function(e,t,n){var r=w("ngfDragOverClass",e,{$event:t}),i="dragover";if(angular.isString(r))i=r;else if(r&&(r.delay&&(c=r.delay),r.accept||r.reject)){var o=t.dataTransfer.items;if(null!=o&&o.length)for(var a=r.pattern||w("ngfPattern",e,{$event:t}),s=o.length;s--;){if(!y.validatePattern(o[s],a)){i=r.reject;break}i=r.accept}else i=r.accept}n(i)}(p,t,function(e){a=e,n.addClass(a),w("ngfDrag",p,{$isDragging:!0,$class:a,$event:t})})))},!1),n[0].addEventListener("dragenter",function(e){!o()&&y.shouldUpdateOn("drop",g,p)&&(e.preventDefault(),l(p)&&e.stopPropagation())},!1),n[0].addEventListener("dragleave",function(e){!o()&&y.shouldUpdateOn("drop",g,p)&&(e.preventDefault(),l(p)&&e.stopPropagation(),s=i(function(){a&&n.removeClass(a),a=null,w("ngfDrag",p,{$isDragging:!1,$event:e})},c||100))},!1),n[0].addEventListener("drop",function(e){!o()&&y.shouldUpdateOn("drop",g,p)&&(e.preventDefault(),l(p)&&e.stopPropagation(),a&&n.removeClass(a),a=null,u(e.dataTransfer,e,"dropUrl"))},!1),n[0].addEventListener("paste",function(e){-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&w("ngfEnableFirefoxPaste",p)&&e.preventDefault(),!o()&&y.shouldUpdateOn("paste",g,p)&&u(e.clipboardData||e.originalEvent.clipboardData,e,"pasteUrl")},!1),-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&w("ngfEnableFirefoxPaste",p)&&(n.attr("contenteditable",!0),n.on("keypress",function(e){e.metaKey||e.ctrlKey||e.preventDefault()}))}(e,t,n,r,i,o,a,s,l)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(e,t){f()&&t.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(i,o,a){return function(e,t,n){var r;f()&&(r=i(a.attrGetter("ngfDropAvailable",n)),o(function(){r(e),r.assign&&r.assign(e,!0)}))}}])}(),ngFileUpload.service("UploadExif",["UploadResize","$q",function(e,n){var a=e;return a.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&a.isResizeSupported()},a.readOrientation=function(e){var u=n.defer(),t=new FileReader,e=e.slice?e.slice(0,65536):e;return t.readAsArrayBuffer(e),t.onerror=function(e){return u.reject(e)},t.onload=function(e){var t={orientation:1},n=new DataView(this.result);if(65496!==n.getUint16(0,!1))return u.resolve(t);for(var r=n.byteLength,i=2;i<r;){var o=n.getUint16(i,!1);if(i+=2,65505===o){if(1165519206!==n.getUint32(i+=2,!1))return u.resolve(t);var a=18761===n.getUint16(i+=6,!1);i+=n.getUint32(i+4,a);var s=n.getUint16(i,a);i+=2;for(var l=0;l<s;l++)if(274===n.getUint16(i+12*l,a)){var c=n.getUint16(i+12*l+8,a);return 2<=c&&c<=8&&(n.setUint16(i+12*l+8,1,a),t.fixedArrayBuffer=e.target.result),t.orientation=c,u.resolve(t)}}else{if(65280!=(65280&o))break;i+=n.getUint16(i,!1)}}return u.resolve(t)},u.promise},a.applyExifRotation=function(i){if(0!==i.type.indexOf("image/jpeg"))return a.emptyPromise(i);var o=n.defer();return a.readOrientation(i).then(function(r){return r.orientation<2||8<r.orientation?o.resolve(i):void a.dataUrl(i,!0).then(function(e){var t=document.createElement("canvas"),n=document.createElement("img");n.onload=function(){try{t.width=4<r.orientation?n.height:n.width,t.height=4<r.orientation?n.width:n.height;var e=t.getContext("2d");!function(e,t,n,r){switch(t){case 2:return e.transform(-1,0,0,1,n,0);case 3:return e.transform(-1,0,0,-1,n,r);case 4:return e.transform(1,0,0,-1,0,r);case 5:return e.transform(0,1,1,0,0,0);case 6:return e.transform(0,1,-1,0,r,0);case 7:return e.transform(0,-1,-1,0,r,n);case 8:e.transform(0,-1,1,0,0,n)}}(e,r.orientation,n.width,n.height),e.drawImage(n,0,0);e=t.toDataURL(i.type||"image/WebP",.934),e=a.restoreExif(function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)}(r.fixedArrayBuffer),e),e=a.dataUrltoBlob(e,i.name);o.resolve(e)}catch(e){return o.reject(e)}},n.onerror=function(){o.reject()},n.src=e},function(e){o.reject(e)})},function(e){o.reject(e)}),o.promise},a.restoreExif=function(e,t){var n={KEY_STR:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode64:function(e){for(var t,n,r,i,o,a="",s="",l="",c=0;r=(t=e[c++])>>2,i=(3&t)<<4|(n=e[c++])>>4,o=(15&n)<<2|(s=e[c++])>>6,l=63&s,isNaN(n)?o=l=64:isNaN(s)&&(l=64),a=a+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(l),o=l=s="",c<e.length;);return a},restore:function(e,t){e.match("data:image/jpeg;base64,")&&(e=e.replace("data:image/jpeg;base64,",""));e=this.decode64(e),e=this.slice2Segments(e),e=this.exifManipulation(t,e);return"data:image/jpeg;base64,"+this.encode64(e)},exifManipulation:function(e,t){t=this.getExifArray(t),t=this.insertExif(e,t);return new Uint8Array(t)},getExifArray:function(e){for(var t,n=0;n<e.length;n++)if(255===(t=e[n])[0]&225===t[1])return t;return[]},insertExif:function(e,t){var n=e.replace("data:image/jpeg;base64,",""),r=this.decode64(n),e=r.indexOf(255,3),n=r.slice(0,e),e=r.slice(e),n=n;return n=(n=n.concat(t)).concat(e)},slice2Segments:function(e){for(var t,n,r=0,i=[];!(255===e[r]&218===e[r+1]);)if(255===e[r]&216===e[r+1]?r+=2:(t=r+(256*e[r+2]+e[r+3])+2,n=e.slice(r,t),i.push(n),r=t),r>e.length)break;return i},decode64:function(e){var t,n,r,i,o="",a=0,s=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=this.KEY_STR.indexOf(e.charAt(a++))<<2|(n=this.KEY_STR.indexOf(e.charAt(a++)))>>4,n=(15&n)<<4|(r=this.KEY_STR.indexOf(e.charAt(a++)))>>2,o=(3&r)<<6|(i=this.KEY_STR.indexOf(e.charAt(a++))),s.push(t),64!==r&&s.push(n),64!==i&&s.push(o),n=o="",a<e.length;);return s}};return n.restore(e,t)},a}]),function(){"use strict";var $={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(e){switch(e.which){case $.COMMAND:case $.SHIFT:case $.CTRL:case $.ALT:return!0}return!!(e.metaKey||e.ctrlKey||e.altKey)},isFunctionKey:function(e){return 112<=(e=e.which||e)&&e<=123},isVerticalMovement:function(e){return~[$.UP,$.DOWN].indexOf(e)},isHorizontalMovement:function(e){return~[$.LEFT,$.RIGHT,$.BACKSPACE,$.DELETE].indexOf(e)},toSeparator:function(e){var t={ENTER:"\n",TAB:"\t",SPACE:" "}[e];return t||($[e]?void 0:e)}};function C(e){return angular.isUndefined(e)||null===e}void 0===angular.element.prototype.querySelectorAll&&(angular.element.prototype.querySelectorAll=function(e){return angular.element(this[0].querySelectorAll(e))}),void 0===angular.element.prototype.closest&&(angular.element.prototype.closest=function(e){for(var t=this[0],n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t;){if(n.bind(t)(e))return t;t=t.parentElement}return!1});var e=0,t=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,skipFocusser:!1,dropdownPosition:"auto",removeSelected:!0,resetSearchInput:!0,generateId:function(){return e++},appendToBody:!1,spinnerEnabled:!1,spinnerClass:"glyphicon glyphicon-refresh ui-select-spin",backspaceReset:!0}).service("uiSelectMinErr",function(){var t=angular.$$minErr("ui.select");return function(){var e=t.apply(this,arguments).message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(e)}}).directive("uisTranscludeAppend",function(){return{link:function(e,t,n,r,i){i(e,function(e){t.append(e)})}}}).filter("highlight",function(){return function(e,t){return t&&e?(""+e).replace(new RegExp((""+t).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"gi"),'<span class="ui-select-highlight">$&</span>'):e}}).factory("uisOffset",["$document","$window",function(n,r){return function(e){var t=e[0].getBoundingClientRect();return{width:t.width||e.prop("offsetWidth"),height:t.height||e.prop("offsetHeight"),top:t.top+(r.pageYOffset||n[0].documentElement.scrollTop),left:t.left+(r.pageXOffset||n[0].documentElement.scrollLeft)}}}]);t.factory("$$uisDebounce",["$timeout",function(o){return function(n,r){var i;return function(){var e=this,t=Array.prototype.slice.call(arguments);i&&o.cancel(i),i=o(function(){n.apply(e,t)},r)}}}]),t.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile","$window",function(l,r,i,e,c){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(e){return e.addClass("ui-select-choices"),(e.parent().attr("theme")||l.theme)+"/choices.tpl.html"},compile:function(o,e){if(!e.repeat)throw i("repeat","Expected 'repeat' expression.");var a=e.groupBy,s=e.groupFilter;if(a){var t=o.querySelectorAll(".ui-select-choices-group");if(1!==t.length)throw i("rows","Expected 1 .ui-select-choices-group but got '{0}'.",t.length);t.attr("ng-repeat",r.getGroupNgRepeatExpression())}var n=r.parse(e.repeat),t=o.querySelectorAll(".ui-select-choices-row");if(1!==t.length)throw i("rows","Expected 1 .ui-select-choices-row but got '{0}'.",t.length);t.attr("ng-repeat",n.repeatExpression(a)).attr("ng-if","$select.open");e=o.querySelectorAll(".ui-select-choices-row-inner");if(1!==e.length)throw i("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",e.length);return e.attr("uis-transclude-append",""),(c.document.addEventListener?t:e).attr("ng-click","$select.select("+n.itemName+",$select.skipFocusser,$event)"),function(t,n,r,i){i.parseRepeatAttr(r.repeat,a,s),i.disableChoiceExpression=r.uiDisableChoice,i.onHighlightCallback=r.onHighlight,i.minimumInputLength=parseInt(r.minimumInputLength)||0,i.dropdownPosition=r.position?r.position.toLowerCase():l.dropdownPosition,t.$watch("$select.search",function(e){e&&!i.open&&i.multiple&&i.activate(!1,!0),i.activeIndex=i.tagging.isActivated?-1:0,!r.minimumInputLength||i.search.length>=r.minimumInputLength?i.refresh(r.refresh):i.items=[]}),r.$observe("refreshDelay",function(){var e=t.$eval(r.refreshDelay);i.refreshDelay=void 0!==e?e:l.refreshDelay}),t.$watch("$select.open",function(e){e?(o.attr("role","listbox"),i.refresh(r.refresh)):n.removeAttr("role")})}}}}]),t.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","$$uisDebounce","uisRepeatParser","uiSelectMinErr","uiSelectConfig","$parse","$injector","$window",function(a,s,l,e,t,o,c,n,u,r,i){var d,f=this,h="";if(f.placeholder=n.placeholder,f.searchEnabled=n.searchEnabled,f.sortable=n.sortable,f.refreshDelay=n.refreshDelay,f.paste=n.paste,f.resetSearchInput=n.resetSearchInput,f.refreshing=!1,f.spinnerEnabled=n.spinnerEnabled,f.spinnerClass=n.spinnerClass,f.removeSelected=n.removeSelected,f.closeOnSelect=!0,f.skipFocusser=!1,f.search=h,f.activeIndex=0,f.items=[],f.open=!1,f.focus=!1,f.disabled=!1,f.selected=void 0,f.dropdownPosition="auto",f.focusser=void 0,f.multiple=void 0,f.disableChoiceExpression=void 0,f.tagging={isActivated:!1,fct:void 0},f.taggingTokens={isActivated:!1,tokens:void 0},f.lockChoiceExpression=void 0,f.clickTriggeredSelect=!1,f.$filter=e,f.$element=s,f.$animate=function(){try{return r.get("$animate")}catch(e){return null}}(),f.searchInput=s.querySelectorAll("input.ui-select-search"),1!==f.searchInput.length)throw c("searchInput","Expected 1 input.ui-select-search but got '{0}'.",f.searchInput.length);function m(){f.resetSearchInput&&(f.search=h,f.selected&&f.items.length&&!f.multiple&&(f.activeIndex=function(e,t,n){if(e.findIndex)return e.findIndex(t,n);for(var r,i=Object(e),o=i.length>>>0,a=0;a<o;a++)if(r=i[a],t.call(n,r,a,i))return a;return-1}(f.items,function(e){return angular.equals(this,e)},f.selected)))}f.isEmpty=function(){return C(f.selected)||""===f.selected||f.multiple&&0===f.selected.length},f.activate=function(n,e){var r,i,o;f.disabled||f.open?f.open&&!f.searchEnabled&&f.close():(e||m(),a.$broadcast("uis:activate"),f.open=!0,f.activeIndex=f.activeIndex>=f.items.length?0:f.activeIndex,-1===f.activeIndex&&!1!==f.taggingLabel&&(f.activeIndex=0),r=s.querySelectorAll(".ui-select-choices-content"),i=s.querySelectorAll(".ui-select-search"),f.$animate&&f.$animate.on&&f.$animate.enabled(r[0])?(o=function(e,t){"start"===t&&0===f.items.length?(f.$animate.off("removeClass",i[0],o),l(function(){f.focusSearchInput(n)})):"close"===t&&(f.$animate.off("enter",r[0],o),l(function(){f.focusSearchInput(n)}))},0<f.items.length?f.$animate.on("enter",r[0],o):f.$animate.on("removeClass",i[0],o)):l(function(){f.focusSearchInput(n),!f.tagging.isActivated&&1<f.items.length&&w()}))},f.focusSearchInput=function(e){f.search=e||f.search,f.searchInput[0].focus()},f.findGroupByName=function(t){return f.groups&&f.groups.filter(function(e){return e.name===t})[0]},f.parseRepeatAttr=function(e,t,n){f.setItemsFn=t?function(e){var r=a.$eval(t);f.groups=[],angular.forEach(e,function(e){var t=angular.isFunction(r)?r(e):e[r],n=f.findGroupByName(t);n?n.items.push(e):f.groups.push({name:t,items:[e]})}),n&&(e=a.$eval(n),angular.isFunction(e)?f.groups=e(f.groups):angular.isArray(e)&&(f.groups=function(e,t){for(var n,r=[],i=0;i<t.length;i++)for(n=0;n<e.length;n++)e[n].name==[t[i]]&&r.push(e[n]);return r}(f.groups,e))),f.items=[],f.groups.forEach(function(e){f.items=f.items.concat(e.items)})}:function(e){f.items=e||[]},f.parserResult=o.parse(e),f.isGrouped=!!t,f.itemProperty=f.parserResult.itemName;function r(){var n=i(a);a.$uisSource=Object.keys(n).map(function(e){var t={};return t[f.parserResult.keyName]=e,t.value=n[e],t})}var i=f.parserResult.source;f.parserResult.keyName&&(r(),f.parserResult.source=u("$uisSource"+f.parserResult.filters),a.$watch(i,function(e,t){e!==t&&r()},!0)),f.refreshItems=function(e){e=e||f.parserResult.source(a);var n=f.selected;f.isEmpty()||angular.isArray(n)&&!n.length||!f.multiple||!f.removeSelected?f.setItemsFn(e):null!=e&&(e=e.filter(function(t){return angular.isArray(n)?n.every(function(e){return!angular.equals(t,e)}):!angular.equals(t,n)}),f.setItemsFn(e)),"auto"!==f.dropdownPosition&&"up"!==f.dropdownPosition||a.calculateDropdownPos(),a.$broadcast("uis:refresh")},a.$watchCollection(f.parserResult.source,function(e){if(null==e)f.items=[];else{if(!angular.isArray(e))throw c("items","Expected an array but got '{0}'.",e);f.refreshItems(e),angular.isDefined(f.ngModel.$modelValue)&&(f.ngModel.$modelValue=null)}})},f.refresh=function(t){void 0!==t&&(d&&l.cancel(d),d=l(function(){var e;a.$select.search.length>=a.$select.minimumInputLength&&((e=a.$eval(t))&&angular.isFunction(e.then)&&!f.refreshing&&(f.refreshing=!0,e.finally(function(){f.refreshing=!1})))},f.refreshDelay))},f.isActive=function(e){if(!f.open)return!1;var t=f.items.indexOf(e[f.itemProperty]),n=t==f.activeIndex;return n&&!(t<0)&&(n&&!angular.isUndefined(f.onHighlightCallback)&&e.$eval(f.onHighlightCallback),n)};function p(t){return f.selected&&angular.isArray(f.selected)&&0<f.selected.filter(function(e){return angular.equals(e,t)}).length}var g=[];function v(e){return-1<g.indexOf(e)}f.isDisabled=function(e){if(f.open){var t,n=e[f.itemProperty],r=!1;if(0<=f.items.indexOf(n)&&(angular.isDefined(f.disableChoiceExpression)||f.multiple)){if(n.isTag)return!1;!(r=f.multiple?p(n):r)&&angular.isDefined(f.disableChoiceExpression)&&(r=!!e.$eval(f.disableChoiceExpression)),t=n,e=r,n=g.indexOf(t),e&&-1===n&&g.push(t),!e&&-1<n&&g.splice(n,1)}return r}},f.select=function(e,t,n){if((C(e)||!v(e))&&(f.items||f.search||f.tagging.isActivated)&&(!e||!v(e))){if(f.clickTriggeredSelect=!1,n&&("click"===n.type||"touchend"===n.type)&&e&&(f.clickTriggeredSelect=!0),f.tagging.isActivated&&!1===f.clickTriggeredSelect){if(!1===f.taggingLabel)if(f.activeIndex<0){if(!(e=void 0===e?void 0!==f.tagging.fct?f.tagging.fct(f.search):f.search:e)||angular.equals(f.items[0],e))return}else e=f.items[f.activeIndex];else if(0===f.activeIndex){if(void 0===e)return;if(void 0!==f.tagging.fct&&"string"==typeof e){if(!(e=f.tagging.fct(e)))return}else"string"==typeof e&&(e=e.replace(f.taggingLabel,"").trim())}if(p(e))return void f.close(t)}m(),a.$broadcast("uis:select",e),f.closeOnSelect&&f.close(t)}},f.close=function(e){f.open&&(f.ngModel&&f.ngModel.$setTouched&&f.ngModel.$setTouched(),f.open=!1,m(),a.$broadcast("uis:close",e))},f.setFocus=function(){f.focus||f.focusInput[0].focus()},f.clear=function(e){f.select(null),e.stopPropagation(),l(function(){f.focusser[0].focus()},0,!1)},f.toggle=function(e){f.open?(f.close(),e.preventDefault(),e.stopPropagation()):f.activate()},f.isLocked=function(){return!1},a.$watch(function(){return angular.isDefined(f.lockChoiceExpression)&&""!==f.lockChoiceExpression},function(e){if(!e)return;var o=[];f.isLocked=function(e,t){var n,r=!1,i=f.selected[t];return i&&(e?(r=!!e.$eval(f.lockChoiceExpression),n=i,t=r,e=o.indexOf(n),t&&-1===e&&o.push(n),!t&&-1<e&&o.splice(e,1)):(i=i,r=-1<o.indexOf(i))),r}});var y=null,b=!1;function w(){var e,t,n=s.querySelectorAll(".ui-select-choices-content"),r=n.querySelectorAll(".ui-select-choices-row");if(r.length<1)throw c("choices","Expected multiple .ui-select-choices-row but got '{0}'.",r.length);f.activeIndex<0||(t=(e=r[f.activeIndex]).offsetTop+e.clientHeight-n[0].scrollTop,(r=n[0].offsetHeight)<t?n[0].scrollTop+=t-r:t<e.clientHeight&&(f.isGrouped&&0===f.activeIndex?n[0].scrollTop=0:n[0].scrollTop-=e.clientHeight-t))}f.sizeSearchInput=function(){function e(){return r.clientWidth*!!n.offsetParent}function t(e){if(0!==e){var t=e-n.offsetLeft;return t<50&&(t=e),f.searchInput.css("width",t+"px"),1}}var n=f.searchInput[0],r=f.$element[0];f.searchInput.css("width","10px"),l(function(){null!==y||t(e())||(y=a.$watch(function(){b||(b=!0,a.$$postDigest(function(){b=!1,t(e())&&(y(),y=null)}))},angular.noop))})},f.searchInput.on("keydown",function(n){var r=n.which;~[$.ENTER,$.ESC].indexOf(r)&&(n.preventDefault(),n.stopPropagation()),a.$apply(function(){var e=!1;if((0<f.items.length||f.tagging.isActivated)&&(function(e){var t=!0;switch(e){case $.DOWN:if(!f.open&&f.multiple)f.activate(!1,!0);else if(f.activeIndex<f.items.length-1)for(var n=++f.activeIndex;v(f.items[n])&&n<f.items.length;)f.activeIndex=++n;break;case $.UP:var r=0===f.search.length&&f.tagging.isActivated?-1:0;if(!f.open&&f.multiple)f.activate(!1,!0);else if(f.activeIndex>r)for(var i=--f.activeIndex;v(f.items[i])&&r<i;)f.activeIndex=--i;break;case $.TAB:f.multiple&&!f.open||f.select(f.items[f.activeIndex],!0);break;case $.ENTER:f.open&&(f.tagging.isActivated||0<=f.activeIndex)?f.select(f.items[f.activeIndex],f.skipFocusser):f.activate(!1,!0);break;case $.ESC:f.close();break;default:t=!1}return t}(r)||f.searchEnabled||(n.preventDefault(),n.stopPropagation()),f.taggingTokens.isActivated)){for(var t=0;t<f.taggingTokens.tokens.length;t++)f.taggingTokens.tokens[t]===$.MAP[n.keyCode]&&0<f.search.length&&(e=!0);e&&l(function(){f.searchInput.triggerHandler("tagged");var e=f.search.replace($.MAP[n.keyCode],"").trim();(e=f.tagging.fct?f.tagging.fct(e):e)&&f.select(e,!0)})}}),$.isVerticalMovement(r)&&0<f.items.length&&w(),r!==$.ENTER&&r!==$.ESC||(n.preventDefault(),n.stopPropagation())}),f.searchInput.on("paste",function(e){var t=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):(e.originalEvent||e).clipboardData.getData("text/plain");if((t=f.search+t)&&0<t.length)if(f.taggingTokens.isActivated){for(var n=[],r=0;r<f.taggingTokens.tokens.length;r++){var i=$.toSeparator(f.taggingTokens.tokens[r])||f.taggingTokens.tokens[r];if(-1<t.indexOf(i)){n=t.split(i);break}}0===n.length&&(n=[t]);var o=f.search;angular.forEach(n,function(e){e=f.tagging.fct?f.tagging.fct(e):e;e&&f.select(e,!0)}),f.search=o||h,e.preventDefault(),e.stopPropagation()}else f.paste&&(f.paste(t),f.search=h,e.preventDefault(),e.stopPropagation())}),f.searchInput.on("tagged",function(){l(function(){m()})});var x=t(function(){f.sizeSearchInput()},50);angular.element(i).bind("resize",x),a.$on("$destroy",function(){f.searchInput.off("keyup keydown tagged blur paste"),angular.element(i).off("resize",x)}),a.$watch("$select.activeIndex",function(e){e&&s.find("input").attr("aria-activedescendant","ui-select-choices-row-"+f.generatedId+"-"+e)}),a.$watch("$select.open",function(e){e||s.find("input").removeAttr("aria-activedescendant")})}]),t.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function(p,g,v,y,e,b,w){return{restrict:"EA",templateUrl:function(e,t){return(t.theme||g.theme)+(angular.isDefined(t.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(e,t){var n=/{(.*)}\s*{(.*)}/.exec(t.ngClass);return n&&(n="{"+n[1]+", "+n[2]+"}",t.ngClass=n,e.attr("ng-class",n)),angular.isDefined(t.multiple)?e.append("<ui-select-multiple/>").removeAttr("multiple"):e.append("<ui-select-single/>"),t.inputId&&(e.querySelectorAll("input.ui-select-search")[0].id=t.inputId),function(n,r,t,e,i){var o=e[0],e=e[1];function a(e){var t;o.open&&((window.jQuery?window.jQuery.contains(r[0],e.target):r[0].contains(e.target))||o.clickTriggeredSelect||(t=!!o.skipFocusser||((t=(t=angular.element(e.target).controller("uiSelect"))&&t!==o)||~["input","button","textarea","select"].indexOf(e.target.tagName.toLowerCase())),o.close(t),n.$digest()),o.clickTriggeredSelect=!1)}o.generatedId=g.generateId(),o.baseTitle=t.title||"Select box",o.focusserTitle=o.baseTitle+" focus",o.focusserId="focusser-"+o.generatedId,o.closeOnSelect=angular.isDefined(t.closeOnSelect)?b(t.closeOnSelect)():g.closeOnSelect,n.$watch("skipFocusser",function(){var e=n.$eval(t.skipFocusser);o.skipFocusser=void 0!==e?e:g.skipFocusser}),o.onSelectCallback=b(t.onSelect),o.onRemoveCallback=b(t.onRemove),o.ngModel=e,o.choiceGrouped=function(e){return o.isGrouped&&e&&e.name},t.tabindex&&t.$observe("tabindex",function(e){o.focusInput.attr("tabindex",e),r.removeAttr("tabindex")}),n.$watch(function(){return n.$eval(t.searchEnabled)},function(e){o.searchEnabled=void 0!==e?e:g.searchEnabled}),n.$watch("sortable",function(){var e=n.$eval(t.sortable);o.sortable=void 0!==e?e:g.sortable}),t.$observe("backspaceReset",function(){var e=n.$eval(t.backspaceReset);o.backspaceReset=void 0===e||e}),t.$observe("limit",function(){o.limit=angular.isDefined(t.limit)?parseInt(t.limit,10):void 0}),n.$watch("removeSelected",function(){var e=n.$eval(t.removeSelected);o.removeSelected=void 0!==e?e:g.removeSelected}),t.$observe("disabled",function(){o.disabled=void 0!==t.disabled&&t.disabled}),t.$observe("resetSearchInput",function(){var e=n.$eval(t.resetSearchInput);o.resetSearchInput=void 0===e||e}),t.$observe("paste",function(){o.paste=n.$eval(t.paste)}),t.$observe("tagging",function(){var e;void 0!==t.tagging?(e=n.$eval(t.tagging),o.tagging={isActivated:!0,fct:!0!==e?e:void 0}):o.tagging={isActivated:!1,fct:void 0}}),t.$observe("taggingLabel",function(){void 0!==t.tagging&&("false"===t.taggingLabel?o.taggingLabel=!1:o.taggingLabel=void 0!==t.taggingLabel?t.taggingLabel:"(new)")}),t.$observe("taggingTokens",function(){var e;void 0!==t.tagging&&(e=void 0!==t.taggingTokens?t.taggingTokens.split("|"):[",","ENTER"],o.taggingTokens={isActivated:!0,tokens:e})}),t.$observe("spinnerEnabled",function(){var e=n.$eval(t.spinnerEnabled);o.spinnerEnabled=void 0!==e?e:g.spinnerEnabled}),t.$observe("spinnerClass",function(){var e=t.spinnerClass;o.spinnerClass=(void 0!==e?t:g).spinnerClass}),angular.isDefined(t.autofocus)&&w(function(){o.setFocus()}),angular.isDefined(t.focusOn)&&n.$on(t.focusOn,function(){w(function(){o.setFocus()})}),p.on("click",a),n.$on("$destroy",function(){p.off("click",a)}),i(n,function(e){var t=angular.element("<div>").append(e),e=t.querySelectorAll(".ui-select-match");if(e.removeAttr("ui-select-match"),e.removeAttr("data-ui-select-match"),1!==e.length)throw v("transcluded","Expected 1 .ui-select-match but got '{0}'.",e.length);r.querySelectorAll(".ui-select-match").replaceWith(e);e=t.querySelectorAll(".ui-select-choices");if(e.removeAttr("ui-select-choices"),e.removeAttr("data-ui-select-choices"),1!==e.length)throw v("transcluded","Expected 1 .ui-select-choices but got '{0}'.",e.length);r.querySelectorAll(".ui-select-choices").replaceWith(e);t=t.querySelectorAll(".ui-select-no-choice");t.removeAttr("ui-select-no-choice"),t.removeAttr("data-ui-select-no-choice"),1==t.length&&r.querySelectorAll(".ui-select-no-choice").replaceWith(t)});i=n.$eval(t.appendToBody);(void 0!==i?i:g.appendToBody)&&(n.$watch("$select.open",function(e){e?(e=y(r),(s=angular.element('<div class="ui-select-placeholder"></div>'))[0].style.width=e.width+"px",s[0].style.height=e.height+"px",r.after(s),l=r[0].style.width,p.find("body").append(r),r[0].style.position="absolute",r[0].style.left=e.left+"px",r[0].style.top=e.top+"px",r[0].style.width=e.width+"px"):c()}),n.$on("$destroy",function(){c()}));var s=null,l="";function c(){null!==s&&(s.replaceWith(r),s=null,r[0].style.position="",r[0].style.left="",r[0].style.top="",r[0].style.width=l,o.setFocus())}var u=null,d="direction-up";n.$watch("$select.open",function(){"auto"!==o.dropdownPosition&&"up"!==o.dropdownPosition||n.calculateDropdownPos()});function f(e,t){e=e||y(r),t=t||y(u),u[0].style.position="absolute",u[0].style.top=-1*t.height+"px",r.addClass(d)}function h(){w(function(){var e,t,n;"up"===o.dropdownPosition?f():(r.removeClass(d),t=y(r),n=y(u),e=p[0].documentElement.scrollTop||p[0].body.scrollTop,t.top+t.height+n.height>e+p[0].documentElement.clientHeight?f(t,n):(t=t,n=n,r.removeClass(d),t=t||y(r),n=n||y(u),u[0].style.position="",u[0].style.top="")),u[0].style.opacity=1})}var m=!1;n.calculateDropdownPos=function(){var n;o.open?0!==(u=angular.element(r).querySelectorAll(".ui-select-dropdown")).length&&(""!==o.search||m||(u[0].style.opacity=0,m=!0),!y(u).height&&o.$animate&&o.$animate.on&&o.$animate.enabled(u)?(n=!0,o.$animate.on("enter",u,function(e,t){"close"===t&&n&&(h(),n=!1)})):h()):null!==u&&0!==u.length&&(u[0].style.opacity=0,u[0].style.position="",u[0].style.top="",r.removeClass(d))}}}}}]),t.directive("uiSelectMatch",["uiSelectConfig",function(o){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(e){e.addClass("ui-select-match");e=e.parent();return(t(e,"theme")||o.theme)+(angular.isDefined(t(e,"multiple"))?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(e,t,n,r){function i(e){r.allowClear=!!angular.isDefined(e)&&(""===e||"true"===e.toLowerCase())}r.lockChoiceExpression=n.uiLockChoice,n.$observe("placeholder",function(e){r.placeholder=void 0!==e?e:o.placeholder}),n.$observe("allowClear",i),i(n.allowClear),r.multiple&&r.sizeSearchInput()}};function t(e,t){return e[0].hasAttribute(t)?e.attr(t):e[0].hasAttribute("data-"+t)?e.attr("data-"+t):e[0].hasAttribute("x-"+t)?e.attr("x-"+t):void 0}}]),t.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(i,o){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function(r,i){var e,o=this,a=r.$select;angular.isUndefined(a.selected)&&(a.selected=[]),r.$evalAsync(function(){e=r.ngModel}),o.activeMatchIndex=-1,o.updateModel=function(){e.$setViewValue(Date.now()),o.refreshComponent()},o.refreshComponent=function(){a.refreshItems&&a.refreshItems(),a.sizeSearchInput&&a.sizeSearchInput()},o.removeChoice=function(e){if(a.isLocked(null,e))return!1;var t=a.selected[e],n={};return n[a.parserResult.itemName]=t,a.selected.splice(e,1),o.activeMatchIndex=-1,a.sizeSearchInput(),i(function(){a.onRemoveCallback(r,{$item:t,$model:a.parserResult.modelMapper(r,n)})}),o.updateModel(),!0},o.getPlaceholder=function(){if(!a.selected||!a.selected.length)return a.placeholder}}],controllerAs:"$selectMultiple",link:function(l,e,t,n){var c=n[0],r=l.ngModel=n[1],s=l.$selectMultiple;function u(e){return void 0!==e&&void 0!==c.search&&0<e.filter(function(e){return void 0!==c.search.toUpperCase()&&void 0!==e&&e.toUpperCase()===c.search.toUpperCase()}).length}function d(e,t){var n=-1;if(angular.isArray(e))for(var r,i=angular.copy(e),o=0;o<i.length;o++)void 0===c.tagging.fct?i[o]+" "+c.taggingLabel===t&&(n=o):(r=i[o],angular.isObject(r)&&(r.isTag=!0),angular.equals(r,t)&&(n=o));return n}c.multiple=!0,c.focusInput=c.searchInput,r.$isEmpty=function(e){return!e||0===e.length},r.$parsers.unshift(function(){for(var e,t={},n=[],r=c.selected.length-1;0<=r;r--)(t={})[c.parserResult.itemName]=c.selected[r],e=c.parserResult.modelMapper(l,t),n.unshift(e);return n}),r.$formatters.unshift(function(e){var o,t=c.parserResult&&c.parserResult.source(l,{$select:{search:""}}),a={};if(!t)return e;function n(e,t){if(e&&e.length)for(var n=e.length-1;0<=n;n--){if(a[c.parserResult.itemName]=e[n],o=c.parserResult.modelMapper(l,a),c.parserResult.trackByExp){var r=/(\w*)\./.exec(c.parserResult.trackByExp),i=/\.([^\s]+)/.exec(c.parserResult.trackByExp);if(r&&0<r.length&&r[1]==c.parserResult.itemName&&i&&0<i.length&&o[i[1]]==t[i[1]])return s.unshift(e[n]),1}if(angular.equals(o,t))return s.unshift(e[n]),1}else;}var s=[];if(!e)return s;for(var r=e.length-1;0<=r;r--)n(c.selected,e[r])||n(t,e[r])||s.unshift(e[r]);return s}),l.$watchCollection(function(){return r.$modelValue},function(e,t){t!=e&&(angular.isDefined(r.$modelValue)&&(r.$modelValue=null),s.refreshComponent())}),r.$render=function(){if(!angular.isArray(r.$viewValue)){if(!C(r.$viewValue))throw i("multiarr","Expected model value to be array but got '{0}'",r.$viewValue);r.$viewValue=[]}c.selected=r.$viewValue,s.refreshComponent(),l.$evalAsync()},l.$on("uis:select",function(e,t){var n;c.selected.length>=c.limit||(c.selected.push(t),(n={})[c.parserResult.itemName]=t,o(function(){c.onSelectCallback(l,{$item:t,$model:c.parserResult.modelMapper(l,n)})}),s.updateModel())}),l.$on("uis:activate",function(){s.activeMatchIndex=-1}),l.$watch("$select.disabled",function(e,t){t&&!e&&c.sizeSearchInput()}),c.searchInput.on("keydown",function(t){var n=t.which;l.$apply(function(){var e=!1;(e=$.isHorizontalMovement(n)?function(e){var t=function(e){return angular.isNumber(e.selectionStart)?e.selectionStart:e.value.length}(c.searchInput[0]),n=c.selected.length,r=n-1,i=s.activeMatchIndex,o=s.activeMatchIndex+1,a=s.activeMatchIndex-1,n=i;if(0<t||c.search.length&&e==$.RIGHT)return!1;c.close(),n=function(){switch(e){case $.LEFT:return~s.activeMatchIndex?a:r;case $.RIGHT:return~s.activeMatchIndex&&i!==r?o:(c.activate(),!1);case $.BACKSPACE:return~s.activeMatchIndex?s.removeChoice(i)?a:i:r;case $.DELETE:return!!~s.activeMatchIndex&&(s.removeChoice(s.activeMatchIndex),i)}}(),c.selected.length&&!1!==n?s.activeMatchIndex=Math.min(r,Math.max(0,n)):s.activeMatchIndex=-1;return!0}(n):e)&&n!=$.TAB&&(t.preventDefault(),t.stopPropagation())})}),c.searchInput.on("keyup",function(e){if($.isVerticalMovement(e.which)||l.$evalAsync(function(){c.activeIndex=!1===c.taggingLabel?-1:0}),c.tagging.isActivated&&0<c.search.length&&!(e.which===$.TAB||$.isControl(e)||$.isFunctionKey(e)||e.which===$.ESC||$.isVerticalMovement(e.which))&&(c.activeIndex=!1===c.taggingLabel?-1:0,!1!==c.taggingLabel)){var t,n,r,i=angular.copy(c.items),o=angular.copy(c.items),a=!1,e=-1;if(void 0!==c.tagging.fct){if(0<(n=c.$filter("filter")(i,{isTag:!0})).length&&(r=n[0]),0<i.length&&r&&(a=!0,i=i.slice(1,i.length),o=o.slice(1,o.length)),t=c.tagging.fct(c.search),o.some(function(e){return angular.equals(e,t)})||c.selected.some(function(e){return angular.equals(e,t)}))return void l.$evalAsync(function(){c.activeIndex=0,c.items=i});t&&(t.isTag=!0)}else{if(0<(n=c.$filter("filter")(i,function(e){return e.match(c.taggingLabel)})).length&&(r=n[0]),void 0!==i[0]&&0<i.length&&r&&(a=!0,i=i.slice(1,i.length),o=o.slice(1,o.length)),t=c.search+" "+c.taggingLabel,-1<d(c.selected,c.search))return;if(u(o.concat(c.selected)))return void(a&&(i=o,l.$evalAsync(function(){c.activeIndex=0,c.items=i})));if(u(o))return void(a&&(c.items=o.slice(1,o.length)))}a&&(e=d(c.selected,t)),i=-1<e?i.slice(e+1,i.length-1):(i=[],t&&i.push(t),i.concat(o)),l.$evalAsync(function(){var e;c.activeIndex=0,c.items=i,c.isGrouped&&(e=t?i.slice(1):i,c.setItemsFn(e),t&&(c.items.unshift(t),c.groups.unshift({name:"",items:[t],tagging:!0})))})}}),c.searchInput.on("blur",function(){o(function(){s.activeMatchIndex=-1})})}}}]),t.directive("uiSelectNoChoice",["uiSelectConfig",function(t){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(e){return e.addClass("ui-select-no-choice"),(e.parent().attr("theme")||t.theme)+"/no-choice.tpl.html"}}}]),t.directive("uiSelectSingle",["$timeout","$compile",function(s,l){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(o,e,t,n){var a=n[0],r=n[1];r.$parsers.unshift(function(e){if(C(e))return e;var t={};return t[a.parserResult.itemName]=e,a.parserResult.modelMapper(o,t)}),r.$formatters.unshift(function(t){if(C(t))return t;var e=a.parserResult&&a.parserResult.source(o,{$select:{search:""}}),n={};if(e){var r=function(e){return n[a.parserResult.itemName]=e,a.parserResult.modelMapper(o,n)===t};if(a.selected&&r(a.selected))return a.selected;for(var i=e.length-1;0<=i;i--)if(r(e[i]))return e[i]}return t}),o.$watch("$select.selected",function(e){r.$viewValue!==e&&r.$setViewValue(e)}),r.$render=function(){a.selected=r.$viewValue},o.$on("uis:select",function(e,t){a.selected=t;var n={};n[a.parserResult.itemName]=t,s(function(){a.onSelectCallback(o,{$item:t,$model:C(t)?t:a.parserResult.modelMapper(o,n)})})}),o.$on("uis:close",function(e,t){s(function(){a.focusser.prop("disabled",!1),t||a.focusser[0].focus()},0,!1)}),o.$on("uis:activate",function(){i.prop("disabled",!0)});var i=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");l(i)(o),a.focusser=i,a.focusInput=i,e.parent().append(i),i.bind("focus",function(){o.$evalAsync(function(){a.focus=!0})}),i.bind("blur",function(){o.$evalAsync(function(){a.focus=!1})}),i.bind("keydown",function(e){return e.which===$.BACKSPACE&&!1!==a.backspaceReset?(e.preventDefault(),e.stopPropagation(),a.select(void 0),void o.$apply()):void(e.which===$.TAB||$.isControl(e)||$.isFunctionKey(e)||e.which===$.ESC||(e.which!=$.DOWN&&e.which!=$.UP&&e.which!=$.ENTER&&e.which!=$.SPACE||(e.preventDefault(),e.stopPropagation(),a.activate()),o.$digest()))}),i.bind("keyup input",function(e){e.which===$.TAB||$.isControl(e)||$.isFunctionKey(e)||e.which===$.ESC||e.which==$.ENTER||e.which===$.BACKSPACE||(a.activate(i.val()),i.val(""),o.$digest())})}}}]),t.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function(g,e,v){return{require:["^^uiSelect","^ngModel"],link:function(i,o,a,e){if(null===i[a.uiSelectSort])throw v("sort","Expected a list to sort");var n=e[0],s=e[1],t=angular.extend({axis:"horizontal"},i.$eval(a.uiSelectSortOptions)).axis,r="dragging",l="dropping",c="dropping-before",u="dropping-after";i.$watch(function(){return n.sortable},function(e){e?o.attr("draggable",!0):o.removeAttr("draggable")}),o.on("dragstart",function(e){o.addClass(r),(e.dataTransfer||e.originalEvent.dataTransfer).setData("text",i.$index.toString())}),o.on("dragend",function(){m(r)});function d(e){e.preventDefault(),("vertical"===t?e.offsetY||e.layerY||(e.originalEvent?e.originalEvent.offsetY:0):e.offsetX||e.layerX||(e.originalEvent?e.originalEvent.offsetX:0))<this["vertical"===t?"offsetHeight":"offsetWidth"]/2?(m(u),o.addClass(c)):(m(c),o.addClass(u))}function f(e){e.preventDefault();var t=parseInt((e.dataTransfer||e.originalEvent.dataTransfer).getData("text"),10);g.cancel(h),h=g(function(){p(t)},20)}var h,m=function(t){angular.forEach(n.$element.querySelectorAll("."+t),function(e){angular.element(e).removeClass(t)})},p=function(e){var t=i.$eval(a.uiSelectSort),n=t[e],r=null,r=o.hasClass(c)?e<i.$index?i.$index-1:i.$index:e<i.$index?i.$index:i.$index+1;(function(e,t){this.splice(t,0,this.splice(e,1)[0])}).apply(t,[e,r]),s.$setViewValue(Date.now()),i.$apply(function(){i.$emit("uiSelectSort:change",{array:t,item:n,from:e,to:r})}),m(l),m(c),m(u),o.off("drop",f)};o.on("dragenter",function(){o.hasClass(r)||(o.addClass(l),o.on("dragover",d),o.on("drop",f))}),o.on("dragleave",function(e){e.target==o&&(m(l),m(c),m(u),o.off("dragover",d),o.off("drop",f))})}}}]),t.directive("uisOpenClose",["$parse","$timeout",function(i,o){return{restrict:"A",require:"uiSelect",link:function(n,e,t,r){r.onOpenCloseCallback=i(t.uisOpenClose),n.$watch("$select.open",function(e,t){e!==t&&o(function(){r.onOpenCloseCallback(n,{isOpen:e})})})}}}]),t.service("uisRepeatParser",["uiSelectMinErr","$parse",function(i,o){this.parse=function(e){var t=e.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(\s*[\s\S]+?)?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!t)throw i("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",e);var n=t[5],r="";return t[3]&&(n=t[5].replace(/(^\()|(\)$)/g,""),(e=t[5].match(/^\s*(?:[\s\S]+?)(?:[^\|]|\|\|)+([\s\S]*)\s*$/))&&e[1].trim()&&(r=e[1],n=n.replace(r,""))),{itemName:t[4]||t[2],keyName:t[3],source:o(n),filters:r,trackByExp:t[6],modelMapper:o(t[1]||t[4]||t[2]),repeatExpression:function(e){e=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(e+=" track by "+this.trackByExp),e}}},this.getGroupNgRepeatExpression=function(){return"$group in $select.groups track by $group.name"}}])}(),angular.module("ui.select").run(["$templateCache",function(e){e.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" ng-show="$select.open && $select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><span class="ui-select-choices-row-inner"></span></div></li></ul>'),e.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected track by $index"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>'),e.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open && $select.searchEnabled" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty() && ($select.disabled !== true)" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>'),e.put("bootstrap/no-choice.tpl.html",'<ul class="ui-select-no-choice dropdown-menu" ng-show="$select.items.length == 0"><li ng-transclude=""></li></ul>'),e.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-expanded="{{$select.open}}" aria-label="{{$select.baseTitle}}" ng-class="{\'spinner\': $select.refreshing}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><span ng-show="$select.open && $select.refreshing && $select.spinnerEnabled" class="ui-select-refreshing {{$select.spinnerClass}}"></span> <input type="search" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" class="form-control ui-select-search" ng-class="{ \'ui-select-search-hidden\' : !$select.searchEnabled }" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.open"><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("select2/choices.tpl.html",'<ul tabindex="-1" class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>'),e.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected track by $index" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>'),e.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>'),e.put("select2/no-choice.tpl.html",'<div class="ui-select-no-choice dropdown" ng-show="$select.items.length == 0"><div class="dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>'),e.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"></li></ul><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open || $select.items.length === 0}"><div class="ui-select-choices"></div></div></div>'),e.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="search-container" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled, \'select2-search\':$select.searchEnabled}"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" ng-class="{\'select2-active\': $select.refreshing}" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div></div>'),e.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices ui-select-dropdown selectize-dropdown" ng-class="{\'single\': !$select.multiple, \'multi\': $select.multiple}"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>'),e.put("selectize/match-multiple.tpl.html",'<div class="ui-select-match" data-value="" ng-repeat="$item in $select.selected track by $index" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'active\':$selectMultiple.activeMatchIndex === $index}" ui-select-sort="$select.selected"><span class="ui-select-match-item" ng-class="{\'select-locked\':$select.isLocked(this, $index)}"><span uis-transclude-append=""></span> <span class="remove ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&times;</span></span></div>'),e.put("selectize/match.tpl.html",'<div ng-hide="$select.searchEnabled && ($select.open || $select.isEmpty())" class="ui-select-match"><span ng-show="!$select.searchEnabled && ($select.isEmpty() || $select.open)" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty() || $select.open" ng-transclude=""></span></div>'),e.put("selectize/no-choice.tpl.html",'<div class="ui-select-no-choice selectize-dropdown" ng-show="$select.items.length == 0"><div class="selectize-dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>'),e.put("selectize/select-multiple.tpl.html",'<div class="ui-select-container selectize-control multi plugin-remove_button" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-model="$select.search" ng-disabled="$select.disabled" aria-expanded="{{$select.open}}" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>'),e.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.isEmpty() && !$select.open" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>')}]),angular.module("cms.shared",["ngRoute","ngSanitize","angularModalService","ngFileUpload","ui.tinymce","ang-drag-drop","ui.select"]).constant("shared.internalModulePath","/Admin/Modules/Shared/Js/").constant("shared.pluginModulePath","/Plugins/Admin/Modules/Shared/Js/").constant("shared.modulePath","/Cofoundry/Admin/Modules/Shared/Js/"),angular.module("cms.shared").factory("shared.customEntityService",["$http","_","shared.serviceBase","shared.publishableEntityMapper",function(n,r,i,o){var e={},a=i+"custom-entities",t=i+"custom-entity-data-model-schemas";function s(e){return a+"/"+e}function l(e){return s(e)+"/versions"}function c(e){var t=i+"custom-entity-definitions/";return e?t+e:t}return e.getAll=function(e,t){return n.get(c(t)+"/custom-entities",{params:e}).then(function(e){return r.each(e.items,o.map),e})},e.getDefinition=function(e){return n.get(c(e))},e.getDataModelSchema=function(e){return n.get(c(e)+"/data-model-schema")},e.getDataModelSchemasByCodeRange=function(e){return n.get(t,{params:{customEntityDefinitionCodes:e}})},e.getPageRoutes=function(e){return n.get(c(e)+"/routes")},e.getDefinitionsByIdRange=function(t){return n.get(c()).then(function(e){return r.filter(e,function(e){return r.contains(t,e.customEntityDefinitionCode)})})},e.getByIdRange=function(e){return n.get(a+"/",{params:{customEntityIds:e}}).then(function(e){return r.each(e,o.map),e})},e.getById=function(e){return n.get(s(e)).then(function(e){e&&o.map(e);return e})},e.getVersionsByCustomEntityId=function(e,t){return n.get(l(e),{params:t})},e.add=function(e,t){return e.customEntityDefinitionCode=t,n.post(a,e)},e.updateUrl=function(e){return n.put(s(e.customEntityId)+"/url",e)},e.updateOrdering=function(e){return n.put(a+"/ordering",e)},e.updateDraft=function(e,t){return e.customEntityDefinitionCode=t,n.put(l(e.customEntityId)+"/draft",e)},e.remove=function(e){return n.delete(s(e))},e.removeDraft=function(e){return n.delete(l(e)+"/draft")},e.duplicate=function(e){return n.post(s(e.customEntityToDuplicateId)+"/duplicate",e)},e}]),angular.module("cms.shared").factory("shared.directoryService",["$http","_","shared.serviceBase",function(e,t,n){var r={},i=n+"page-directories";return r.getAll=function(){return e.get(i)},r}]),angular.module("cms.shared").factory("shared.documentService",["$http","Upload","shared.serviceBase",function(t,r,e){var n={},i=e+"documents";return n.getAll=function(e){return t.get(i,{params:e})},n.getById=function(e){return t.get(n.getIdRoute(e))},n.getByIdRange=function(e){return t.get(i+"/",{params:{documentAssetIds:e}})},n.getAllDocumentFileTypes=function(){return t.get(e+"document-file-types")},n.add=function(e){return n.uploadFile(n.getBaseRoute(),e,"POST")},n.getIdRoute=function(e){return i+"/"+e},n.getBaseRoute=function(){return i},n.uploadFile=function(e,t,n){return r.upload({url:e,data:t,method:n})},n}]),angular.module("cms.shared").factory("shared.entityVersionService",["$http","shared.serviceBase",function(r,e){var t={},n=e+"pages",i=e+"custom-entities";function o(e,t){return(e?i:n)+"/"+t+"/versions"}return t.publish=function(e,t){return r.patch(o(e,t)+"/draft/publish")},t.unpublish=function(e,t){return r.patch(o(e,t)+"/published/unpublish")},t.duplicateDraft=function(e,t,n){n=e?{customEntityId:t,copyFromCustomEntityVersionId:n}:{pageId:t,copyFromPageVersionId:n};return r.post(o(e,t),n)},t.removeDraft=function(e,t){return r.delete(o(e,t)+"/draft")},t}]),angular.module("cms.shared").factory("shared.imageService",["$http","Upload","shared.stringUtilities","shared.serviceBase",function(t,i,e,n){var r={},o=n+"images";function a(e,t,n){var r=_.omit(t,"file");return t.file&&!t.file.isCurrentFile&&(r.file=t.file),i.upload({url:e,data:r,method:n})}return r.add=function(e){return a(r.getBaseRoute(),e,"POST")},r.update=function(e){return a(r.getIdRoute(e.imageAssetId),e,"PUT")},r.getAll=function(e){return t.get(o,{params:e})},r.getById=function(e){return t.get(r.getIdRoute(e))},r.getSettings=function(){return t.get(o+"/settings")},r.getByIdRange=function(e){return t.get(o+"/",{params:{imageAssetIds:e}})},r.getIdRoute=function(e){return o+"/"+e},r.getBaseRoute=function(){return o},r}]),angular.module("cms.shared").factory("shared.localeService",["$http","shared.serviceBase",function(e,t){var n={},r=t+"locales";return n.getAll=function(){return e.get(r)},n}]),angular.module("cms.shared").factory("shared.localStorage",["shared.serviceBase",function(e){var t={};return t.setValue=function(e,t){localStorage.setItem(e,t)},t.getValue=function(e){return localStorage.getItem(e)},t}]),angular.module("cms.shared").factory("shared.nestedDataModelSchemaService",["$http","_","shared.serviceBase",function(n,e,r){var t={getByName:function(e){return n.get(r+"nested-data-model-schemas/"+e)},getByNames:function(e){return n.get(r+"nested-data-model-schemas/",{params:{names:e}})},validate:function(e,t){return n.post(r+"nested-data-model-schemas/validate",{typeName:e,model:t})}};return t}]),angular.module("cms.shared").factory("shared.optionSourceService",["$http","shared.serviceBase",function(t,e){var n={};return n.getFromApi=function(e){return t.get(e).then(function(e){var t=e,n=0;for(;t.data&&n<=2;)t=t.data,n++;return t})},n}]),angular.module("cms.shared").factory("shared.pageService",["_","$http","shared.serviceBase","shared.publishableEntityMapper",function(t,n,e,r){var i={},o=e+"pages";return i.getAll=function(e){return n.get(o,{params:e}).then(function(e){return t.map(e.items,r.map),e})},i.getByIdRange=function(e){return n.get(o,{params:{pageIds:e}}).then(function(e){return t.map(e,r.map),e})},i.getById=function(e){return n.get(i.getIdRoute(e)).then(function(e){e&&r.map(e.pageRoute);return e})},i.getVersionsByPageId=function(e,t){return n.get(i.getPageVerionsRoute(e),{params:t})},i.getPageTypes=function(){return[{name:"Generic",value:"Generic"},{name:"Custom Entity Details",value:"CustomEntityDetails"}]},i.add=function(e){return n.post(o,e)},i.update=function(e){return n.patch(i.getIdRoute(e.pageId),e)},i.updateUrl=function(e){return n.put(i.getIdRoute(e.pageId)+"/url",e)},i.updateDraft=function(e){return n.patch(i.getPageVerionsRoute(e.pageId)+"/draft",e)},i.removeDraft=function(e){return n.delete(i.getPageVerionsRoute(e)+"/draft")},i.remove=function(e){return n.delete(i.getIdRoute(e))},i.duplicate=function(e){return n.post(i.getIdRoute(e.pageToDuplicateId)+"/duplicate",e)},i.getIdRoute=function(e){return o+"/"+e},i.getPageVerionsRoute=function(e){return i.getIdRoute(e)+"/versions"},i}]),angular.module("cms.shared").factory("shared.publishableEntityMapper",["$http","shared.serviceBase",function(e,t){var n={};return n.map=function(e){e.isPublished=function(e){return"Published"==e.publishStatus&&e.hasPublishedVersion&&new Date(e.publishDate)<Date.now()}.bind(null,e),e.getPublishStatusLabel=function(e){if("Published"==e.publishStatus&&e.publishDate<Date.now())return"Pending Publish";return e.publishStatus}.bind(null,e)},n}]),angular.module("cms.shared").factory("shared.arrayUtilities",function(){var o={move:function(e,t,n){e.splice(n,0,e.splice(t,1)[0])},moveObject:function(e,t,n,r){var i=r?_.findIndex(e,function(e){return e[r]===t[r]}):e.indexOf(t);o.move(e,i,n)},removeObject:function(e,t){t=e.indexOf(t);if(0<=t)return e.splice(t,1)},remove:function(e,t){if(0<=t)return e.splice(t,1)}};return o}),angular.module("cms.shared").factory("shared.directiveUtilities",function(){var n={setModelName:function(e,t){t.cmsModelName?e.modelName=t.cmsModelName:e.modelName=n.parseModelName(t.cmsModel)},parseModelName:function(e){var t;if(e)return t=e.substring(e.lastIndexOf(".")+1,e.length),(e=/['"]([^'"]*)['"]/g.exec(t))&&1<e.length?e[1]:t}};return n}),angular.module("cms.shared").factory("shared.imageFileUtilities",["$q",function(i){var e={};return e.getFileInfoAndResizeIfRequired=function(o,a){return function(e){var n=i.defer();{var t;e?((t=new FileReader).onload=function(e){var t=document.createElement("img");t.onload=function(){n.resolve(t)},t.onerror=r,t.src=e.target.result},t.onerror=r,t.readAsDataURL(e)):n.resolve(null)}return n.promise;function r(e){n.resolve(null)}}(o).then(function(e){if(!e)return null;var t={fileName:function(e){return e.substr(0,e.lastIndexOf("."))||e}(o.name),file:o,originalImageWidth:e.width,originalImageHeight:e.height,width:e.width,height:e.height,isResized:!1};{var n,r,i;(a.maxUploadWidth&&e.width>a.maxUploadWidth||a.maxUploadHeight&&e.height>a.maxUploadHeight)&&(r=function(e,t,n,r){if(!e||!t)return null;var i=document.createElement("canvas"),o=e.width,a=e.height;if(!o||!a)return null;t=s(o,r.maxUploadWidth),r=s(a,r.maxUploadHeight),r=t<r?t:r;return o=Math.round(r*o),a=Math.round(r*a),i.width=o,i.height=a,i.getContext("2d").drawImage(e,0,0,o,a),{dataUrl:i.toDataURL(n),width:o,height:a};function s(e,t){return t<e?t/e:1}}(e,o,n="image/jpeg",a),i=function(e){var t=atob(e.split(",")[1]),n=[],r=0;for(;r<t.length;)n.push(t.charCodeAt(r)),r++;return new Uint8Array(n)}(r.dataUrl),(e=new FormData).append("file",new Blob([i],{type:n}),t.fileName+".jpg"),t.file=e.get("file"),t.isResized=!0,t.width=r.width,t.height=r.height)}return t})},e}]),function(i,o){var e,a,s;a=!(e="offset"),s=function(e,t,n){var r={top:0,left:0},i=e&&e.ownerDocument;if(i&&o.isUndefined(t))return i=i.documentElement,{top:(r=!o.isUndefined(e.getBoundingClientRect)?e.getBoundingClientRect():r).top+(window.pageYOffset||i.scrollTop)-(i.clientTop||0),left:r.left+(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}},i.prototype[e]||(i.prototype[e]=function(e,t){for(var n,r=0;r<this.length;r++)null==n?void 0!==(n=s(this[r],e,t))&&a&&(n=i(n)):function(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;r<n;r++)e[e.length++]=t[r]}else e[e.length++]=t}}(n,s(this[r],e,t));return null==n?this:n})}(angular.element,_),angular.module("cms.shared").constant("shared.routingUtilities",new RoutingUtilitites),angular.module("cms.shared").factory("shared.stringUtilities",function(){var t={},n={"Á":"A","Ă":"A","Ắ":"A","Ặ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ǎ":"A","Â":"A","Ấ":"A","Ậ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ä":"A","Ǟ":"A","Ȧ":"A","Ǡ":"A","Ạ":"A","Ȁ":"A","À":"A","Ả":"A","Ȃ":"A","Ā":"A","Ą":"A","Å":"A","Ǻ":"A","Ḁ":"A","Ⱥ":"A","Ã":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ḃ":"B","Ḅ":"B","Ɓ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ć":"C","Č":"C","Ç":"C","Ḉ":"C","Ĉ":"C","Ċ":"C","Ƈ":"C","Ȼ":"C","Ď":"D","Ḑ":"D","Ḓ":"D","Ḋ":"D","Ḍ":"D","Ɗ":"D","Ḏ":"D","ǲ":"D","ǅ":"D","Đ":"D","Ƌ":"D","Ǳ":"DZ","Ǆ":"DZ","É":"E","Ĕ":"E","Ě":"E","Ȩ":"E","Ḝ":"E","Ê":"E","Ế":"E","Ệ":"E","Ề":"E","Ể":"E","Ễ":"E","Ḙ":"E","Ë":"E","Ė":"E","Ẹ":"E","Ȅ":"E","È":"E","Ẻ":"E","Ȇ":"E","Ē":"E","Ḗ":"E","Ḕ":"E","Ę":"E","Ɇ":"E","Ẽ":"E","Ḛ":"E","Ꝫ":"ET","Ḟ":"F","Ƒ":"F","Ǵ":"G","Ğ":"G","Ǧ":"G","Ģ":"G","Ĝ":"G","Ġ":"G","Ɠ":"G","Ḡ":"G","Ǥ":"G","Ḫ":"H","Ȟ":"H","Ḩ":"H","Ĥ":"H","Ⱨ":"H","Ḧ":"H","Ḣ":"H","Ḥ":"H","Ħ":"H","Í":"I","Ĭ":"I","Ǐ":"I","Î":"I","Ï":"I","Ḯ":"I","İ":"I","Ị":"I","Ȉ":"I","Ì":"I","Ỉ":"I","Ȋ":"I","Ī":"I","Į":"I","Ɨ":"I","Ĩ":"I","Ḭ":"I","Ꝺ":"D","Ꝼ":"F","Ᵹ":"G","Ꞃ":"R","Ꞅ":"S","Ꞇ":"T","Ꝭ":"IS","Ĵ":"J","Ɉ":"J","Ḱ":"K","Ǩ":"K","Ķ":"K","Ⱪ":"K","Ꝃ":"K","Ḳ":"K","Ƙ":"K","Ḵ":"K","Ꝁ":"K","Ꝅ":"K","Ĺ":"L","Ƚ":"L","Ľ":"L","Ļ":"L","Ḽ":"L","Ḷ":"L","Ḹ":"L","Ⱡ":"L","Ꝉ":"L","Ḻ":"L","Ŀ":"L","Ɫ":"L","ǈ":"L","Ł":"L","Ǉ":"LJ","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ń":"N","Ň":"N","Ņ":"N","Ṋ":"N","Ṅ":"N","Ṇ":"N","Ǹ":"N","Ɲ":"N","Ṉ":"N","Ƞ":"N","ǋ":"N","Ñ":"N","Ǌ":"NJ","Ó":"O","Ŏ":"O","Ǒ":"O","Ô":"O","Ố":"O","Ộ":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ö":"O","Ȫ":"O","Ȯ":"O","Ȱ":"O","Ọ":"O","Ő":"O","Ȍ":"O","Ò":"O","Ỏ":"O","Ơ":"O","Ớ":"O","Ợ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ȏ":"O","Ꝋ":"O","Ꝍ":"O","Ō":"O","Ṓ":"O","Ṑ":"O","Ɵ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Õ":"O","Ṍ":"O","Ṏ":"O","Ȭ":"O","Ƣ":"OI","Ꝏ":"OO","Ɛ":"E","Ɔ":"O","Ȣ":"OU","Ṕ":"P","Ṗ":"P","Ꝓ":"P","Ƥ":"P","Ꝕ":"P","Ᵽ":"P","Ꝑ":"P","Ꝙ":"Q","Ꝗ":"Q","Ŕ":"R","Ř":"R","Ŗ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ȑ":"R","Ȓ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꜿ":"C","Ǝ":"E","Ś":"S","Ṥ":"S","Š":"S","Ṧ":"S","Ş":"S","Ŝ":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṩ":"S","ẞ":"SS","Ť":"T","Ţ":"T","Ṱ":"T","Ț":"T","Ⱦ":"T","Ṫ":"T","Ṭ":"T","Ƭ":"T","Ṯ":"T","Ʈ":"T","Ŧ":"T","Ɐ":"A","Ꞁ":"L","Ɯ":"M","Ʌ":"V","Ꜩ":"TZ","Ú":"U","Ŭ":"U","Ǔ":"U","Û":"U","Ṷ":"U","Ü":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ǖ":"U","Ṳ":"U","Ụ":"U","Ű":"U","Ȕ":"U","Ù":"U","Ủ":"U","Ư":"U","Ứ":"U","Ự":"U","Ừ":"U","Ử":"U","Ữ":"U","Ȗ":"U","Ū":"U","Ṻ":"U","Ų":"U","Ů":"U","Ũ":"U","Ṹ":"U","Ṵ":"U","Ꝟ":"V","Ṿ":"V","Ʋ":"V","Ṽ":"V","Ꝡ":"VY","Ẃ":"W","Ŵ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẁ":"W","Ⱳ":"W","Ẍ":"X","Ẋ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ẏ":"Y","Ỵ":"Y","Ỳ":"Y","Ƴ":"Y","Ỷ":"Y","Ỿ":"Y","Ȳ":"Y","Ɏ":"Y","Ỹ":"Y","Ź":"Z","Ž":"Z","Ẑ":"Z","Ⱬ":"Z","Ż":"Z","Ẓ":"Z","Ȥ":"Z","Ẕ":"Z","Ƶ":"Z","Ĳ":"IJ","Œ":"OE","ᴀ":"A","ᴁ":"AE","ʙ":"B","ᴃ":"B","ᴄ":"C","ᴅ":"D","ᴇ":"E","ꜰ":"F","ɢ":"G","ʛ":"G","ʜ":"H","ɪ":"I","ʁ":"R","ᴊ":"J","ᴋ":"K","ʟ":"L","ᴌ":"L","ᴍ":"M","ɴ":"N","ᴏ":"O","ɶ":"OE","ᴐ":"O","ᴕ":"OU","ᴘ":"P","ʀ":"R","ᴎ":"N","ᴙ":"R","ꜱ":"S","ᴛ":"T","ⱻ":"E","ᴚ":"R","ᴜ":"U","ᴠ":"V","ᴡ":"W","ʏ":"Y","ᴢ":"Z","á":"a","ă":"a","ắ":"a","ặ":"a","ằ":"a","ẳ":"a","ẵ":"a","ǎ":"a","â":"a","ấ":"a","ậ":"a","ầ":"a","ẩ":"a","ẫ":"a","ä":"a","ǟ":"a","ȧ":"a","ǡ":"a","ạ":"a","ȁ":"a","à":"a","ả":"a","ȃ":"a","ā":"a","ą":"a","ᶏ":"a","ẚ":"a","å":"a","ǻ":"a","ḁ":"a","ⱥ":"a","ã":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ḃ":"b","ḅ":"b","ɓ":"b","ḇ":"b","ᵬ":"b","ᶀ":"b","ƀ":"b","ƃ":"b","ɵ":"o","ć":"c","č":"c","ç":"c","ḉ":"c","ĉ":"c","ɕ":"c","ċ":"c","ƈ":"c","ȼ":"c","ď":"d","ḑ":"d","ḓ":"d","ȡ":"d","ḋ":"d","ḍ":"d","ɗ":"d","ᶑ":"d","ḏ":"d","ᵭ":"d","ᶁ":"d","đ":"d","ɖ":"d","ƌ":"d","ı":"i","ȷ":"j","ɟ":"j","ʄ":"j","ǳ":"dz","ǆ":"dz","é":"e","ĕ":"e","ě":"e","ȩ":"e","ḝ":"e","ê":"e","ế":"e","ệ":"e","ề":"e","ể":"e","ễ":"e","ḙ":"e","ë":"e","ė":"e","ẹ":"e","ȅ":"e","è":"e","ẻ":"e","ȇ":"e","ē":"e","ḗ":"e","ḕ":"e","ⱸ":"e","ę":"e","ᶒ":"e","ɇ":"e","ẽ":"e","ḛ":"e","ꝫ":"et","ḟ":"f","ƒ":"f","ᵮ":"f","ᶂ":"f","ǵ":"g","ğ":"g","ǧ":"g","ģ":"g","ĝ":"g","ġ":"g","ɠ":"g","ḡ":"g","ᶃ":"g","ǥ":"g","ḫ":"h","ȟ":"h","ḩ":"h","ĥ":"h","ⱨ":"h","ḧ":"h","ḣ":"h","ḥ":"h","ɦ":"h","ẖ":"h","ħ":"h","ƕ":"hv","í":"i","ĭ":"i","ǐ":"i","î":"i","ï":"i","ḯ":"i","ị":"i","ȉ":"i","ì":"i","ỉ":"i","ȋ":"i","ī":"i","į":"i","ᶖ":"i","ɨ":"i","ĩ":"i","ḭ":"i","ꝺ":"d","ꝼ":"f","ᵹ":"g","ꞃ":"r","ꞅ":"s","ꞇ":"t","ꝭ":"is","ǰ":"j","ĵ":"j","ʝ":"j","ɉ":"j","ḱ":"k","ǩ":"k","ķ":"k","ⱪ":"k","ꝃ":"k","ḳ":"k","ƙ":"k","ḵ":"k","ᶄ":"k","ꝁ":"k","ꝅ":"k","ĺ":"l","ƚ":"l","ɬ":"l","ľ":"l","ļ":"l","ḽ":"l","ȴ":"l","ḷ":"l","ḹ":"l","ⱡ":"l","ꝉ":"l","ḻ":"l","ŀ":"l","ɫ":"l","ᶅ":"l","ɭ":"l","ł":"l","ǉ":"lj","ſ":"s","ẜ":"s","ẛ":"s","ẝ":"s","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ᵯ":"m","ᶆ":"m","ń":"n","ň":"n","ņ":"n","ṋ":"n","ȵ":"n","ṅ":"n","ṇ":"n","ǹ":"n","ɲ":"n","ṉ":"n","ƞ":"n","ᵰ":"n","ᶇ":"n","ɳ":"n","ñ":"n","ǌ":"nj","ó":"o","ŏ":"o","ǒ":"o","ô":"o","ố":"o","ộ":"o","ồ":"o","ổ":"o","ỗ":"o","ö":"o","ȫ":"o","ȯ":"o","ȱ":"o","ọ":"o","ő":"o","ȍ":"o","ò":"o","ỏ":"o","ơ":"o","ớ":"o","ợ":"o","ờ":"o","ở":"o","ỡ":"o","ȏ":"o","ꝋ":"o","ꝍ":"o","ⱺ":"o","ō":"o","ṓ":"o","ṑ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","õ":"o","ṍ":"o","ṏ":"o","ȭ":"o","ƣ":"oi","ꝏ":"oo","ɛ":"e","ᶓ":"e","ɔ":"o","ᶗ":"o","ȣ":"ou","ṕ":"p","ṗ":"p","ꝓ":"p","ƥ":"p","ᵱ":"p","ᶈ":"p","ꝕ":"p","ᵽ":"p","ꝑ":"p","ꝙ":"q","ʠ":"q","ɋ":"q","ꝗ":"q","ŕ":"r","ř":"r","ŗ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ȑ":"r","ɾ":"r","ᵳ":"r","ȓ":"r","ṟ":"r","ɼ":"r","ᵲ":"r","ᶉ":"r","ɍ":"r","ɽ":"r","ↄ":"c","ꜿ":"c","ɘ":"e","ɿ":"r","ś":"s","ṥ":"s","š":"s","ṧ":"s","ş":"s","ŝ":"s","ș":"s","ṡ":"s","ṣ":"s","ṩ":"s","ʂ":"s","ᵴ":"s","ᶊ":"s","ȿ":"s","ɡ":"g","ß":"ss","ᴑ":"o","ᴓ":"o","ᴝ":"u","ť":"t","ţ":"t","ṱ":"t","ț":"t","ȶ":"t","ẗ":"t","ⱦ":"t","ṫ":"t","ṭ":"t","ƭ":"t","ṯ":"t","ᵵ":"t","ƫ":"t","ʈ":"t","ŧ":"t","ᵺ":"th","ɐ":"a","ᴂ":"ae","ǝ":"e","ᵷ":"g","ɥ":"h","ʮ":"h","ʯ":"h","ᴉ":"i","ʞ":"k","ꞁ":"l","ɯ":"m","ɰ":"m","ᴔ":"oe","ɹ":"r","ɻ":"r","ɺ":"r","ⱹ":"r","ʇ":"t","ʌ":"v","ʍ":"w","ʎ":"y","ꜩ":"tz","ú":"u","ŭ":"u","ǔ":"u","û":"u","ṷ":"u","ü":"u","ǘ":"u","ǚ":"u","ǜ":"u","ǖ":"u","ṳ":"u","ụ":"u","ű":"u","ȕ":"u","ù":"u","ủ":"u","ư":"u","ứ":"u","ự":"u","ừ":"u","ử":"u","ữ":"u","ȗ":"u","ū":"u","ṻ":"u","ų":"u","ᶙ":"u","ů":"u","ũ":"u","ṹ":"u","ṵ":"u","ᵫ":"ue","ꝸ":"um","ⱴ":"v","ꝟ":"v","ṿ":"v","ʋ":"v","ᶌ":"v","ⱱ":"v","ṽ":"v","ꝡ":"vy","ẃ":"w","ŵ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẁ":"w","ⱳ":"w","ẘ":"w","ẍ":"x","ẋ":"x","ᶍ":"x","ý":"y","ŷ":"y","ÿ":"y","ẏ":"y","ỵ":"y","ỳ":"y","ƴ":"y","ỷ":"y","ỿ":"y","ȳ":"y","ẙ":"y","ɏ":"y","ỹ":"y","ź":"z","ž":"z","ẑ":"z","ʑ":"z","ⱬ":"z","ż":"z","ẓ":"z","ȥ":"z","ẕ":"z","ᵶ":"z","ᶎ":"z","ʐ":"z","ƶ":"z","ɀ":"z","ﬀ":"ff","ﬃ":"ffi","ﬄ":"ffl","ﬁ":"fi","ﬂ":"fl","ĳ":"ij","œ":"oe","ﬆ":"st","ₐ":"a","ₑ":"e","ᵢ":"i","ⱼ":"j","ₒ":"o","ᵣ":"r","ᵤ":"u","ᵥ":"v","ₓ":"x"};return t.getFileNameWithoutExtension=function(e){return e&&e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."))},t.capitaliseFirstLetter=function(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)},t.lowerCaseFirstWord=function(e){return e&&e.replace(/^([A-Z]+)([a-z]?)(\w*)$/,function(e,t,n,r){return!n||t.length<2?t.toLowerCase()+n+r:t.toLowerCase().slice(0,t.length-1)+t[t.length-1]+n+r})},t.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},t.startsWith=function(e,t){return 0===e.lastIndexOf(t,0)},t.slugify=function(e){if(!e)return e;e=t.latinise(e).replace(/&/g," and ").replace(/[/\\\.,\+=–—:_]/g," ").replace(/[^\w\s-]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/-+/g,"-");return e="-"===e.charAt(0)?e.substr(1):e},t.toSnakeCase=function(e){return e?e.replace(/\B([A-Z])/g,"-$1").toLowerCase():""},t.toQueryString=function(e){return _.chain(e).pairs().sortBy(function(e){return e[0]}).map(function(e){if(!_.isUndefined(e[1]))return e[0]+"="+encodeURIComponent(e[1])}).filter(function(e){return!_.isEmpty(e)}).value().join("&")},t.latinise=function(e){return e&&e.replace(/[^A-Za-z0-9\[\] ]/g,function(e){return n[e]||e})},t.format=function(e){var n=Array.prototype.slice.call(arguments,1);return e.replace(/{(\d+)}/g,function(e,t){return void 0!==n[t]?n[t]:e})},t.stripTags=function(e){return e&&e.replace(/<([^>]+)>/gi,"")},t}),angular.module("cms.shared").factory("shared.timeUtilities",["_",function(n){var r={};function i(e){return("00"+e).slice(-2)}return r.toDate=function(e){if(e){var t=new Date(0),n=/(\d{2}):(\d{2})(:(\d{2}))?/g.exec(e);return n?(t.setUTCHours(r(1),r(2),r(4)),t):null}function r(e){e=n[e];return e&&parseInt(e)||0}},r.format=function(e){if(e=e&&!n.isDate(e)?r.toDate(e):e){var t=i(e.getUTCHours())+":"+i(e.getUTCMinutes()),e=e.getUTCSeconds();return 0<e&&(t+=":"+i(e)),t}},r}]),angular.module("cms.shared").factory("shared.urlLibrary",["_","shared.urlBaseBase","shared.stringUtilities",function(r,i,o){var n={};function a(e){e=e?e.name:"cms";return o.slugify(e)+"-users"}function e(e,t){n[e+"List"]=function(e){return n.makePath(t,null,e)},n[e+"New"]=function(e){return n.makePath(t,"new",e)},n[e+"Details"]=function(e){return n.makePath(t,e)}}return n.makePath=function(e,t,n){e=i+e+"#/";return r.isArray(t)?e+=t.join("/"):null!=t&&(e+=t),n&&(e+="?"+o.toQueryString(n)),e},e("document","documents"),e("image","images"),e("page","pages"),e("pageTemplate","page-templates"),e("role","roles"),n.getDocumentUrl=function(e){if(e)return e.downloadUrl},n.getImageUrl=function(e,t){var n,r;if(e)return n=e,(r=t)&&(i(r.width,n.width)||i(r.height,n.height))&&(r.mode||(r.mode="Crop"),n.defaultAnchorLocation&&(r.anchor=n.defaultAnchorLocation)),t?e.url+"?"+o.toQueryString(t):e.url;function i(e,t){return 0<e&&e!=t}},n.login=function(e){var t=i+"auth/login";return e&&(t+="?returnUrl="+encodeURIComponent(e)),t},n.visualEditorForPage=function(e,t){if(!e)return"";e=e.fullPath;return t&&(e+="?mode=edit"),e},n.visualEditorForVersion=function(e,t,n,r){if(!e)return"";e=e.fullPath+"?";return"Draft"==t.workFlowStatus?e+="mode=preview":t.isLatestPublishedVersion&&r?e+="mode=live":e+="version="+t[(n?"customEntity":"page")+"VersionId"],n&&(e+="&edittype=entity"),e},n.customEntityList=function(e){return n.makePath(o.slugify(e.name))},n.customEntityDetails=function(e,t){return n.makePath(o.slugify(e.namePlural),t)},n.customEntityVisualEditor=function(e,t){if(!e)return"";e=e.fullPath;return e&&(t&&(e+="?mode=edit&edittype=entity"),e)},n.userDetails=function(e,t){return n.makePath(a(e),t)},n.userList=function(e,t){return n.makePath(a(e),null,t)},n.userNew=function(e,t){return n.makePath(a(e),"new",t)},n}]),angular.module("cms.shared").filter("bytes",function(){return function(e,t){var n,r=["bytes","kb","mb","gb","tb","pb"];return isNaN(parseFloat(e))||!isFinite(e)?"-":e?(void 0===t&&(t=1),n=Math.floor(Math.log(e)/Math.log(1024)),(e/Math.pow(1024,Math.floor(n))).toFixed(t)+" "+r[n]):"0 "+r[1]}}),angular.module("cms.shared").provider("filterWatcher",function(){this.$get=["$window","$rootScope",function(e,i){var o={},a={},s=e.setTimeout;function l(e,t){return[e,angular.toJson(t)].join("#").replace(/"/g,"")}function c(e){e=e.targetScope.$id;forEach(a[e],function(e){delete o[e]}),delete a[e]}return{isMemoized:function(e,t){return t=l(e,t),o[t]},memoize:function(e,t,n,r){return e=l(e,t),o[e]=r,(t=n)&&t.$evalAsync&&t.$watch?(t=e,n=(e=n).$id,isUndefined(a[n])&&(e.$on("$destroy",c),a[n]=[]),a[n].push(t)):s(function(){i.$$phase||(o={})}),r}}}]}),angular.module("cms.shared").filter("groupBy",["$parse","_","filterWatcher",function(s,l,c){return function(e,t){if(!l.isObject(e)||l.isUndefined(t))return e;var n,r,i,o,a=s(t);return c.isMemoized("groupBy",arguments)||c.memoize("groupBy",arguments,this,(n=e,r=a,o={},l.each(n,function(e){i=r(e),o[i]||(o[i]=[]),o[i].push(e)}),o))}}]),angular.module("cms.shared").filter("time",["shared.timeUtilities",function(t){return function(e){return t.format(e)}}]),angular.module("cms.shared").factory("authenticationService",["$window","shared.urlLibrary",function(t,n){var e={redirectToLogin:function(){var e=t.location,e=n.login(e.pathname+e.hash);t.location=e}};return e}]),angular.module("cms.shared").run(["shared.errorService","shared.modalDialogService","shared.internalModulePath","shared.stringUtilities","shared.showDevException",function(e,r,i,o,a){e.addHandler(function(e){var t=e.response,n=t?t.config:null;a&&n&&o.startsWith(n.url,"/")&&o.startsWith(t.headers("Content-Type"),"text/html")&&o.startsWith(t.data,"<!DOCTYPE html>")?r.show({templateUrl:i+"UIComponents/Modals/DeveloperException.html",controller:"DeveloperExceptionController",options:e}):r.alert(e)})}]),angular.module("cms.shared").factory("shared.errorService",function(){var e={},n=[];return e.raise=function(t){n.forEach(function(e){e(t)})},e.addHandler=function(e){return n.push(e),e},e.removeHandler=function(e){developerExceptionHandlers=_.difference(developerExceptionHandlers,e)},e}),angular.module("cms.shared").factory("shared.focusService",["$document",function(e){var t={},n=e[0];return t.focusById=function(e){e=n.getElementById(e);e&&e.focus()},t}]),angular.module("cms.shared").factory("httpInterceptor",["$q","$rootScope","_","shared.validationErrorService","authenticationService","shared.errorService","shared.stringUtilities",function(n,e,t,r,i,o,a){var s={response:function(e){return e=!t.isUndefined(e.data.data)?e.data.data:e},responseError:function(e){var t;return a.startsWith(e.config.url,"/")&&function(){switch(e.status){case 400:!1===e.data.isValid&&r.raise(e.data.errors);break;case 401:i.redirectToLogin();break;case 403:o.raise({title:"Permission Denied",message:"This action is not authorized"});break;default:404==e.status&&"GET"===e.config.method||(t={title:e.statusText,message:"An unexpected server error has occured.",response:e},o.raise(t))}}(),n.reject(e)}};return s}]),angular.module("cms.shared").config(["$httpProvider","csrfToken","csrfHeaderName",function(e,t,n){var r=e.defaults.headers;e.interceptors.push("httpInterceptor"),["put","post","patch","delete"].forEach(function(e){r[e]=r[e]||{},r[e][n]=t}),r.common["X-Requested-With"]="XMLHttpRequest"}]),angular.module("cms.shared").config(["$locationProvider",function(e){e.hashPrefix("")}]),angular.module("cms.shared").factory("shared.permissionValidationService",["_","shared.currentUser",function(t,n){var r={};return r.hasPermission=function(e){return t.contains(n.permissionCodes,e)},r.canRead=function(e){return r.hasPermission(e+"COMRED")},r.canViewModule=function(e){return r.hasPermission(e+"COMMOD")},r.canCreate=function(e){return r.hasPermission(e+"COMCRT")},r.canUpdate=function(e){return r.hasPermission(e+"COMUPD")},r.canDelete=function(e){return r.hasPermission(e+"COMDEL")},r}]),angular.module("cms.shared").factory("shared.validationErrorService",["_",function(i){var e={},o=[];return e.raise=function(e){var t,r=[];e.forEach(function(n){var e=i.filter(o,function(t){return i.find(n.properties,function(e){return!(!e||!t.prop)&&t.prop.toLowerCase()===e.toLowerCase()})});e.length?e.forEach(function(e){e.fn([n])}):r.push(n)}),r.length&&((e=i.filter(o,function(e){return!e.prop})).length?(t=r,e.forEach(function(e){e.fn(t)})):function(){throw new Error("An unhandled validation exception has occured")}())},e.addHandler=function(e,t){t={prop:e,fn:t};return o.push(t),t},e.removeHandler=function(e){e=i.isFunction(e)?i.where(o,{fn:e}):i.where(o,{prop:e});o=i.difference(o,e)},e}]),angular.module("cms.shared").directive("cmsButton",["shared.internalModulePath",function(e){return{restrict:"E",replace:!0,templateUrl:e+"UIComponents/Buttons/Button.html",scope:{text:"@cmsText"}}}]),angular.module("cms.shared").directive("cmsButtonIcon",["shared.internalModulePath",function(e){return{restrict:"E",replace:!1,templateUrl:e+"UIComponents/Buttons/ButtonIcon.html",scope:{title:"@cmsTitle",icon:"@cmsIcon",href:"@cmsHref",external:"@cmsExternal"},link:function(e,t){e.icon&&(e.iconCls="fa-"+e.icon)}}}]),angular.module("cms.shared").directive("cmsButtonLink",["shared.internalModulePath",function(e){return{restrict:"E",replace:!0,templateUrl:e+"UIComponents/Buttons/ButtonLink.html",scope:{text:"@cmsText",href:"@cmsHref"}}}]),angular.module("cms.shared").directive("cmsButtonSubmit",["shared.internalModulePath",function(e){return{restrict:"E",replace:!0,templateUrl:e+"UIComponents/Buttons/ButtonSubmit.html",scope:{text:"@cmsText"}}}]),angular.module("cms.shared").directive("cmsFormFieldDirectorySelector",["_","shared.directiveUtilities","shared.internalModulePath","shared.directoryService",function(e,r,t,n){return{restrict:"E",templateUrl:t+"UIComponents/Directories/FormFieldDirectorySelector.html",scope:{model:"=cmsModel",title:"@cmsTitle",onLoaded:"&cmsOnLoaded",readonly:"=cmsReadonly"},link:{pre:function(e,t,n){e=e.vm;angular.isDefined(n.required)?e.isRequired=!0:(e.isRequired=!1,e.defaultItemText=n.cmsDefaultItemText||"None");e.title=n.cmsTitle||"Directory",e.description=n.cmsDescription,r.setModelName(e,n)}},controller:function(){var t=this;n.getAll().then(function(e){t.pageDirectories=e,t.onLoaded&&t.onLoaded()})},controllerAs:"vm",bindToController:!0}}]),angular.module("cms.shared").controller("AddCustomEntityDialogController",["$scope","$location","shared.stringUtilities","shared.LoadState","shared.customEntityService","options","close",function(e,t,n,r,i,o,a){var s=e;function l(e){var t=e?(s.command.publish=!0,s.saveAndPublishLoadState):s.saveLoadState;e=t,s.globalLoadState.on(),e&&_.isFunction(e.on)&&e.on(),i.add(s.command,o.customEntityDefinition.customEntityDefinitionCode).then(d).finally(function(e){s.globalLoadState.off(),e&&_.isFunction(e.off)&&e.off()}.bind(null,t))}function c(){s.command.urlSlug=n.slugify(s.command.title)}function u(){a()}function d(e){o.onComplete(e),a()}angular.extend(e,o.customEntityDefinition),s.globalLoadState=new r,s.saveLoadState=new r,s.saveAndPublishLoadState=new r,s.formLoadState=new r(!0),s.editMode=!1,s.options=o.customEntityDefinition,s.saveButtonText=o.customEntityDefinition.autoPublish?"Save":"Save & Publish",s.save=l.bind(null,!1),s.saveAndPublish=l.bind(null,!0),s.cancel=u,s.close=u,s.onNameChanged=c,i.getDataModelSchema(o.customEntityDefinition.customEntityDefinitionCode).then(function(e){e.defaultValue&&e.defaultValue.value?s.command.model=angular.copy(e.defaultValue.value):s.command.model={},s.formDataSource={model:s.command.model,modelMetaData:e},s.formLoadState.off()}),s.command={},e.$watch("vm.command.localeId",function(e){s.additionalParameters=e?{localeId:e}:{}})}]),angular.module("cms.shared").directive("cmsCustomEntityLink",["shared.internalModulePath","shared.urlLibrary",function(e,t){return{restrict:"E",scope:{customEntityDefinition:"=cmsCustomEntityDefinition",customEntity:"=cmsCustomEntity"},templateUrl:e+"UIComponents/CustomEntities/CustomEntityLink.html",controller:function(){this.urlLibrary=t},controllerAs:"vm",bindToController:!0}}]),angular.module("cms.shared").controller("CustomEntityPickerDialogController",["$scope","$q","shared.LoadState","shared.customEntityService","shared.SearchQuery","shared.modalDialogService","shared.internalModulePath","shared.permissionValidationService","shared.ModelPreviewFieldset","shared.ImagePreviewFieldCollection","options","close",function(e,r,t,i,n,o,a,s,l,c,u,d){var f=e;function h(e){f.isFilterVisible=_.isUndefined(e)?!f.isFilterVisible:e}function m(){h(!1),p()}function p(){var e,t=u.customEntityDefinition.customEntityDefinitionCode,n=(f.gridLoadState.on(),i.getAll(f.query.getParameters(),t).then(function(e){f.result=e,f.gridLoadState.off()}));return f.previewFields?(e=r.defer()).resolve():e=i.getDataModelSchema(t).then(function(e){f.previewFields=new l(e)}),r.all([e,n]).then(function(){return f.gridImages=new c,f.gridImages.load(f.result.items,f.previewFields)})}function g(){f.multiMode||f.onSelected(f.currentEntity),d()}function v(e){f.multiMode?$(e):f.selectedEntity=e}function y(e){if(!f.multiMode)return f.selectedEntity=e,void b();$(e),b()}function b(){f.multiMode?f.onSelected(f.selectedIds):f.onSelected(f.selectedEntity),d()}function w(){o.show({templateUrl:a+"UIComponents/CustomEntities/AddCustomEntityDialog.html",controller:"AddCustomEntityDialogController",options:{customEntityDefinition:u.customEntityDefinition,onComplete:function(e){f.multiMode?(v({customEntityId:e}),p()):y({customEntityId:e})}}})}function x(e){return!!(f.selectedIds&&e&&-1<f.selectedIds.indexOf(e.customEntityId))||!(!e||!f.selectedEntity)&&e.customEntityId===f.selectedEntity.customEntityId}function $(e){var t;x(e)?(t=f.selectedIds.indexOf(e.customEntityId),f.selectedIds.splice(t,1)):f.selectedIds.push(e.customEntityId)}angular.extend(e,u),f.onOk=b,f.onCancel=g,f.onSelect=v,f.onCreate=w,f.selectedEntity=f.currentEntity,f.onSelectAndClose=y,f.close=g,f.gridLoadState=new t,f.query=new n({onChanged:m,useHistory:!1,defaultParams:u.filter}),f.presetFilter=u.filter,f.filter=f.query.getFilters(),f.toggleFilter=h,f.isSelected=x,f.customEntityDefinition=u.customEntityDefinition,f.multiMode=!!f.selectedIds,f.canCreate=s.hasPermission(u.customEntityDefinition.customEntityDefinitionCode+"COMCRT"),h(!1),p()}]),angular.module("cms.shared").directive("cmsFormFieldCustomEntityCollection",["_","shared.internalModulePath","shared.LoadState","shared.customEntityService","shared.modalDialogService","shared.arrayUtilities","shared.ModelPreviewFieldset","shared.ImagePreviewFieldCollection","baseFormFieldFactory",function(g,v,y,b,w,x,$,C,e){var S="customEntityId",k=e.defaultConfig,t={templateUrl:v+"UIComponents/CustomEntities/FormFieldCustomEntityCollection.html",scope:g.extend(k.scope,{customEntityDefinitionCode:"@cmsCustomEntityDefinitionCode",localeId:"=cmsLocaleId",orderable:"=cmsOrderable"}),require:g.union(k.require,["?^^cmsFormDynamicFieldSet"]),passThroughAttributes:["required"],link:function(e,t,n,r){var i,o,a,s=e.vm,l=(g.has(n,"required"),g.last(r));return function(){s.gridLoadState=new y,s.showPicker=u,s.remove=c,s.onDrop=d,s.onDropSuccess=f,i=b.getDefinition(s.customEntityDefinitionCode).then(function(e){s.customEntityDefinition=e}),o=b.getDataModelSchema(s.customEntityDefinitionCode).then(m),e.$watch("vm.model",p)}(),k.link(e,t,n,r);function c(e,t){x.removeObject(s.gridData,e),x.removeObject(s.model,e[S]),s.gridImages.remove(t)}function u(){w.show({templateUrl:v+"UIComponents/CustomEntities/CustomEntityPickerDialog.html",controller:"CustomEntityPickerDialogController",options:{selectedIds:s.model||[],customEntityDefinition:s.customEntityDefinition,filter:function(){var e,t={};s.localeId?e=s.localeId:l&&l.additionalParameters&&(e=l.additionalParameters.localeId);e&&(t.localeId=e);return t}(),onSelected:function(e){p(s.model=e)}}})}function d(e,t){a=e}function f(e){x.move(s.gridData,e,a),s.gridImages.move(e,a),h()}function h(){s.model=g.pluck(s.gridData,S)}function m(e){s.previewFields=new $(e)}function p(e){e&&e.length?s.gridData&&g.pluck(s.gridData,S).join()==e.join()||(s.gridLoadState.on(),e=b.getByIdRange(e).then(function(e){s.gridData=e,s.orderable||(s.gridData=g.sortBy(s.gridData,"title"),h()),o.then(function(){return s.gridImages=new C,s.gridImages.load(s.gridData,s.previewFields)})}),s.gridLoadState.offWhen(i,e)):s.gridData=[]}}};return e.create(t)}]),angular.module("cms.shared").directive("cmsFormFieldCustomEntityMultiTypeCollection",["_","shared.internalModulePath","shared.LoadState","shared.customEntityService","shared.modalDialogService","shared.arrayUtilities","shared.ModelPreviewFieldset","shared.ImagePreviewFieldCollection","baseFormFieldFactory",function(g,v,y,b,w,x,$,C,e){var S="customEntityId",k="customEntityDefinitionCode",E=e.defaultConfig,t={templateUrl:v+"UIComponents/CustomEntities/FormFieldCustomEntityMultiTypeCollection.html",scope:g.extend(E.scope,{customEntityDefinitionCodes:"@cmsCustomEntityDefinitionCodes",localeId:"=cmsLocaleId",orderable:"=cmsOrderable",titleColumnHeader:"@cmsTitleColumnHeader",descriptionColumnHeader:"@cmsDescriptionColumnHeader",imageColumnHeader:"@cmsImageColumnHeader",typeColumnHeader:"@cmsTypeColumnHeader"}),require:g.union(E.require,["?^^cmsFormDynamicFieldSet"]),passThroughAttributes:["required"],link:function(t,e,n,r){var i,o,a,s=t.vm,l=(g.has(n,"required"),g.last(r));return function(){var e=s.customEntityDefinitionCodes?s.customEntityDefinitionCodes.split(","):[];s.gridLoadState=new y,s.showPicker=u,s.remove=c,s.onDrop=d,s.onDropSuccess=f,i=b.getDefinitionsByIdRange(e).then(function(e){s.customEntityDefinitions={},g.each(e,function(e){(s.customEntityDefinitions[e.customEntityDefinitionCode]=e).autoPublish||(s.showPublishColumn=!0)})}),o=b.getDataModelSchemasByCodeRange(e).then(m),t.$watch("vm.model",p),void 0===s.titleColumnHeader&&(s.titleColumnHeader="Title"),void 0===s.descriptionColumnHeader&&(s.descriptionColumnHeader="Description"),void(void 0===s.typeColumnHeader&&(s.typeColumnHeader="Type"))}(),E.link(t,e,n,r);function c(e,t){x.removeObject(s.gridData,e),x.remove(s.model,t),s.gridImages.remove(t)}function u(r){w.show({templateUrl:v+"UIComponents/CustomEntities/CustomEntityPickerDialog.html",controller:"CustomEntityPickerDialogController",options:{selectedIds:g.chain(s.model).where({customEntityDefinitionCode:r[k]}).map(function(e){return e[S]}).value(),customEntityDefinition:r,filter:function(){var e,t={};s.localeId?e=s.localeId:l&&l.additionalParameters&&(e=l.additionalParameters.localeId);e&&(t.localeId=e);return t}(),onSelected:function(e){s.model||(s.model=[]);if(0<s.model.length)for(var t,n=0;n<s.model.length;n++)s.model[n].customEntityDefinitionCode===r[k]&&(-1<(t=e.indexOf(s.model[n].customEntityId))?e.splice(t,1):s.model.splice(n,1));for(n=0;n<e.length;n++)s.model.push({customEntityId:e[n],customEntityDefinitionCode:r[k]});p(s.model)}}})}function d(e){a=e}function f(e){x.move(s.gridData,e,a),s.gridImages.move(e,a),h()}function h(){s.model=g.map(s.gridData,function(e){return g.pick(e,S,k)})}function m(e){s.previewFields={},g.each(e,function(e){var t=new $(e);t.fields.previewDescription&&(s.previewFields.showDescription=!0),t.fields.previewImage&&(s.previewFields.showImage=!0),s.previewFields[e.customEntityDefinitionCode]=t})}function p(e){e=e?g.pluck(e,S):[];e&&e.length?s.gridData&&g.pluck(s.gridData,S).join()==e.join()||(s.gridLoadState.on(),e=b.getByIdRange(e).then(function(e){s.gridData=e,s.orderable||(s.gridData=g.sortBy(s.gridData,"title"),h()),o.then(function(){return s.gridImages=new C("customEntityDefinitionCode"),s.gridImages.load(s.gridData,s.previewFields)})}),s.gridLoadState.offWhen(i,e)):s.gridData=[]}}};return e.create(t)}]),angular.module("cms.shared").directive("cmsFormFieldCustomEntitySelector",["_","shared.internalModulePath","shared.customEntityService","shared.directiveUtilities","shared.modalDialogService","shared.permissionValidationService",function(e,o,a,s,l,c){return{restrict:"E",templateUrl:o+"UIComponents/CustomEntities/FormFieldCustomEntitySelector.html",scope:{model:"=cmsModel",title:"@cmsTitle",localeId:"=cmsLocaleId",readonly:"=cmsReadonly",customEntityDefinitionCode:"@cmsCustomEntityDefinitionCode"},require:["?^^cmsFormDynamicFieldSet"],link:{pre:function(e,t,n,r){var i=e.vm;r[0];angular.isDefined(n.required)?i.isRequired=!0:i.isRequired=!1;s.setModelName(i,n),i.search=function(e){return a.getAll(e,i.customEntityDefinitionCode)},a.getDefinition(i.customEntityDefinitionCode).then(function(e){i.customEntityDefinition=e,i.canCreate=c.hasPermission(i.customEntityDefinition.customEntityDefinitionCode+"COMCRT")}),i.create=function(){l.show({templateUrl:o+"UIComponents/CustomEntities/AddCustomEntityDialog.html",controller:"AddCustomEntityDialogController",options:{customEntityDefinition:i.customEntityDefinition,onComplete:function(e){i.model=e}}})},i.initialItemFunction=function(e){return a.getByIdRange([e]).then(function(e){return e[0]})}}},controller:function(){},controllerAs:"vm",bindToController:!0}}]),angular.module("cms.shared").directive("cmsDocumentAsset",["shared.internalModulePath","shared.urlLibrary",function(e,r){return{restrict:"E",scope:{document:"=cmsDocument"},templateUrl:e+"UIComponents/DocumentAssets/DocumentAsset.html",link:function(e,t,n){e.getDocumentUrl=r.getDocumentUrl}}}]),angular.module("cms.shared").controller("DocumentAssetPickerDialogController",["$scope","shared.LoadState","shared.documentService","shared.SearchQuery","shared.modalDialogService","shared.internalModulePath","shared.permissionValidationService","shared.urlLibrary","options","close",function(e,t,n,r,i,o,a,s,l,c){var u=e;function d(e){u.isFilterVisible=_.isUndefined(e)?!u.isFilterVisible:e}function f(){d(!1),h()}function h(){return u.gridLoadState.on(),n.getAll(u.query.getParameters()).then(function(e){u.result=e,u.gridLoadState.off()})}function m(){u.multiMode||u.onSelected(u.currentAsset),c()}function p(e){u.multiMode?w(e):u.selectedAsset=e}function g(e){if(!u.multiMode)return u.selectedAsset=e,void v();w(e),v()}function v(){u.multiMode?u.onSelected(u.selectedIds):u.onSelected(u.selectedAsset),c()}function y(){i.show({templateUrl:o+"UIComponents/DocumentAssets/UploadDocumentAssetDialog.html",controller:"UploadDocumentAssetDialogController",options:{filter:l.filter,onUploadComplete:function(e){g({documentAssetId:e})}}})}function b(e){return!!(u.selectedIds&&e&&-1<u.selectedIds.indexOf(e.documentAssetId))||!(!e||!u.selectedAsset)&&e.documentAssetId===u.selectedAsset.documentAssetId}function w(e){var t;b(e)?(t=u.selectedIds.indexOf(e.documentAssetId),u.selectedIds.splice(t,1)):u.selectedIds.push(e.documentAssetId)}angular.extend(e,l),u.onOk=v,u.onCancel=m,u.onSelect=p,u.onUpload=y,u.selectedAsset=u.currentAsset,u.onSelectAndClose=g,u.close=m,u.gridLoadState=new t,u.query=new r({onChanged:f,useHistory:!1,defaultParams:u.filter}),u.presetFilter=l.filter,u.filter=u.query.getFilters(),u.toggleFilter=d,u.isSelected=b,u.multiMode=!!u.selectedIds,u.okText=u.multiMode?"Ok":"Select",u.canCreate=a.canCreate("COFDOC"),u.getDocumentUrl=s.getDocumentUrl,d(!1),h()}]),angular.module("cms.shared").directive("cmsDocumentUpload",["_","shared.internalModulePath","shared.urlLibrary",function(u,e,d){return{restrict:"E",templateUrl:e+"UIComponents/DocumentAssets/DocumentUpload.html",scope:{asset:"=cmsAsset",loadState:"=cmsLoadState",isEditMode:"=cmsIsEditMode",modelName:"=cmsModelName",ngModel:"=ngModel",onChange:"&cmsOnChange"},require:"ngModel",controller:function(){},controllerAs:"vm",bindToController:!0,link:function(e,t,n,r){var i=e.vm,o=u.has(n,"required");function a(){l()}function s(){var e=i.asset;e?(i.previewUrl=d.getDocumentUrl(e),i.isRemovable=!o,r.$setViewValue({name:e.fileName+"."+e.fileExtension,size:e.fileSizeInBytes,isCurrentFile:!0})):(i.isRemovable=!1,r.$modelValue&&r.$setViewValue(void 0)),c()}function l(e){e&&e[0]?(r.$setViewValue(e[0]),i.isRemovable=!o):i.ngModel&&!u.isUndefined(e)||(r.$setViewValue(void 0),i.previewUrl=null,i.isRemovable=!1,i.asset=void 0),c(),i.onChange&&i.onChange(i.ngModel)}function c(){i.buttonText=r.$modelValue?"Change":"Upload"}i.remove=a,i.fileChanged=l,i.isRemovable=u.isObject(i.ngModel)&&!o,e.$watch("vm.asset",s)}}}]),angular.module("cms.shared").directive("cmsFormFieldDocumentAsset",["_","shared.internalModulePath","shared.internalContentPath","shared.modalDialogService","shared.stringUtilities","shared.documentService","shared.urlLibrary","baseFormFieldFactory",function(d,f,e,h,m,p,g,v){var t={templateUrl:f+"UIComponents/DocumentAssets/FormFieldDocumentAsset.html",scope:d.extend(v.defaultConfig.scope,{asset:"=cmsAsset",loadState:"=cmsLoadState",updateAsset:"@cmsUpdateAsset"}),passThroughAttributes:["required"],link:function(e,t,n,r){var i,o=e.vm,a=d.has(n,"required");return function(){o.urlLibrary=g,o.showPicker=l,o.remove=s,o.isRemovable=d.isObject(o.model)&&!a,o.filter=function(n){var r={};return e("Tags"),e("FileExtension"),e("FileExtensions"),r;function e(e){var t=m.lowerCaseFirstWord(e);r[t]=n["cms"+e]}}(n),e.$watch("vm.asset",u),e.$watch("vm.model",c)}(),v.defaultConfig.link(e,t,n,r);function s(){u(null)}function l(){h.show({templateUrl:f+"UIComponents/DocumentAssets/DocumentAssetPickerDialog.html",controller:"DocumentAssetPickerDialogController",options:{currentAsset:o.previewAsset,filter:o.filter,onSelected:function(e){!e&&o.asset?u(null):(!o.asset||e&&o.asset.documentAssetId!==e.documentAssetId)&&u(e)}}})}function c(e){e||(o.model=e=void 0),!e||o.previewAsset&&o.previewAsset.documentAssetId==e||p.getById(e).then(function(e){u(e)})}function u(e){e?(o.previewAsset=e,o.isRemovable=!a,o.model=e.documentAssetId,o.updateAsset&&(o.asset=e)):i&&(o.previewAsset=null,o.isRemovable=!1,o.model&&(o.model=null),o.updateAsset&&(o.asset=null)),o.buttonText=o.model?"Change":"Select",i=!0}}};return v.create(t)}]),angular.module("cms.shared").directive("cmsFormFieldDocumentAssetCollection",["_","shared.internalModulePath","shared.LoadState","shared.documentService","shared.modalDialogService","shared.arrayUtilities","shared.stringUtilities","shared.urlLibrary","baseFormFieldFactory",function(c,u,d,f,h,m,p,g,e){var v="documentAssetId",y=e.defaultConfig,t={templateUrl:u+"UIComponents/DocumentAssets/FormFieldDocumentAssetCollection.html",passThroughAttributes:["required"],link:function(e,t,r,n){var i=e.vm;c.has(r,"required");return i.urlLibrary=g,i.gridLoadState=new d,i.showPicker=a,i.remove=o,i.onDrop=s,e.$watch("vm.model",l),y.link(e,t,r,n);function o(e){function t(e,t){t=e.indexOf(t);return 0<=t&&e.splice(t,1)}t(i.gridData,e),t(i.model,e[v])}function a(){function e(e){var t=p.lowerCaseFirstWord(e);n[t]=r["cms"+e]}var n;h.show({templateUrl:u+"UIComponents/DocumentAssets/DocumentAssetPickerDialog.html",controller:"DocumentAssetPickerDialogController",options:{selectedIds:i.model||[],filter:(n={},e("Tags"),e("FileExtension"),e("FileExtensions"),n),onSelected:function(e){l(i.model=e)}}})}function s(e,t){m.moveObject(i.gridData,t,e,v),i.model=c.pluck(i.gridData,v)}function l(e){e&&e.length?i.gridData&&c.pluck(i.gridData,v).join()==e.join()||(i.gridLoadState.on(),f.getByIdRange(e).then(function(e){i.gridData=e,i.gridLoadState.off()})):i.gridData=[]}}};return e.create(t)}]),angular.module("cms.shared").directive("cmsFormFieldDocumentTypeSelector",["_","shared.internalModulePath","shared.documentService",function(e,t,n){return{restrict:"E",templateUrl:t+"UIComponents/DocumentAssets/FormFieldDocumentTypeSelector.html",scope:{model:"=cmsModel",disabled:"=cmsDisabled",readonly:"=cmsReadonly",onLoaded:"&cmsOnLoaded"},controller:function(){var t=this;n.getAllDocumentFileTypes().then(function(e){t.fileTypes=e,t.onLoaded&&t.onLoaded()})},controllerAs:"vm",bindToController:!0}}]),angular.module("cms.shared").directive("cmsFormFieldDocumentUpload",["_","shared.internalModulePath","baseFormFieldFactory",function(e,t,n){e={templateUrl:t+"UIComponents/DocumentAssets/FormFieldDocumentUpload.html",scope:e.extend(n.defaultConfig.scope,{asset:"=cmsAsset",loadState:"=cmsLoadState"}),passThroughAttributes:["required","ngRequired"],getInputEl:function(e){return e.find("cms-document-upload")}};return n.create(e)}]),angular.module("cms.shared").controller("UploadDocumentAssetDialogController",["$scope","shared.LoadState","shared.documentService","shared.SearchQuery","shared.focusService","shared.stringUtilities","options","close",function(e,t,n,r,i,o,a,s){var l=e;function c(){l.saveLoadState.on(),n.add(l.command).progress(l.saveLoadState.setProgress).then(h)}function u(){var e=l.command;e.file&&e.file.name&&(e.title=o.capitaliseFirstLetter(o.getFileNameWithoutExtension(e.file.name)),e.fileName=o.slugify(e.title),i.focusById("title"))}function d(){s()}function f(){return a.filter.fileExtension||a.filter.fileExtensions}function h(e){a.onUploadComplete(e),s()}angular.extend(e,a),l.command={},l.onUpload=c,l.onCancel=d,l.close=d,l.filter=a.filter,l.onFileChanged=u,l.hasFilterRestrictions=f,l.saveLoadState=new t}]),angular.module("cms.shared").controller("ImageAssetEditorDialogController",["$scope","shared.LoadState","shared.imageService","shared.SearchQuery","shared.urlLibrary","options","close",function(e,t,n,r,i,o,a){var s=e;function l(){a()}function c(){s.command.altTag=s.command.imageAsset.title||s.command.imageAsset.fileName}function u(){var e={width:d(s.command.width),height:d(s.command.height)};e.width||e.height||(e.width="100%",e.height="auto");var t=i.getImageUrl(s.command.imageAsset,-1<((n=e).width||"").indexOf("%")||-1<(n.height||"").indexOf("%")?{}:{width:n.width.replace("px",""),height:n.height.replace("px","")}),n=s.command.altTag||"",t={markdown:"![Alt "+n+"]("+t+")",html:"<img src='"+t+"' alt='"+n+"' data-image-asset-id='"+s.command.imageAssetId+"' />",model:s.command};t.html=(n=t.html,e=e,angular.element(n).css(e)[0].outerHTML),s.onSelected(t),a()}function d(e){return e?-1==e.indexOf("px")&&-1==e.indexOf("%")&&-1==e.indexOf("auto")?e+"px":e:""}angular.extend(e,o),s.formLoadState=new t,s.saveLoadState=new t,s.onInsert=u,s.onCancel=l,s.onImageChanged=c,s.command={},function(){var e,t;s.imageAssetHtml&&s.imageAssetHtml.length&&(s.command.imageAssetId=s.imageAssetHtml.attr("data-image-asset-id"),s.command.altTag=s.imageAssetHtml.attr("alt"),s.command.style=s.imageAssetHtml.attr("style"),s.command.style?(t=function(e){var t,n=/([\w-]*)\s*:\s*([^;]*)/g,r={};for(;t=n.exec(e);)r[t[1]]=t[2];return r}(s.command.style),s.command.width=t.width,s.command.height=t.height):(s.command.width=s.imageAssetHtml.attr("width"),s.command.height=s.imageAssetHtml.attr("height")),s.command.imageAssetId||(e=s.imageAssetHtml.attr("src"),t=e.lastIndexOf("/"),t=e.substr(t+1,e.indexOf("_")-t-1),s.command.imageAssetId=t))}()}]),angular.module("cms.shared").factory("shared.entityVersionModalDialogService",["shared.entityVersionService","shared.modalDialogService",function(s,l){var e={},c={entityNameSingular:"Page"};return e.publish=function(e,t,n){var r=n||c,n={title:"Publish "+r.entityNameSingular,message:"Are you sure you want to publish this "+r.entityNameSingular.toLowerCase()+"?",okButtonTitle:"Yes, publish it",onOk:function(){return t(),s.publish(r.isCustomEntity,e)}};return l.confirm(n)},e.unpublish=function(e,t,n){var r=n||c,n={title:"Unpublish "+r.entityNameSingular,message:"Unpublishing this "+r.entityNameSingular.toLowerCase()+" will remove it from the live site and put it into draft status. Are you sure you want to continue?",okButtonTitle:"Yes, unpublish it",onOk:function(){return t(),s.unpublish(r.isCustomEntity,e)}};return l.confirm(n)},e.copyToDraft=function(e,t,n,r,i){var o=i||c,i={title:"Copy "+o.entityNameSingular+" Version",message:"A draft version of this "+o.entityNameSingular.toLowerCase()+" already exists. Copying this version will delete the current draft. Do you wish to continue?",okButtonTitle:"Yes, replace it",onOk:function(){return r(),s.removeDraft(o.isCustomEntity,e).then(a)}};return n?l.confirm(i):(r(),a());function a(){return s.duplicateDraft(o.isCustomEntity,e,t)}},e}]),angular.module("cms.shared").directive("cmsForm",["shared.internalModulePath",function(e){return{restrict:"E",templateUrl:e+"UIComponents/Form/Form.html",replace:!0,transclude:!0,scope:{editMode:"=cmsEditMode",name:"@cmsName"},compile:function(e,t){angular.isDefined(t.cmsEditMode)||(t.cmsEditMode="true");return n},controller:["$scope",function(e){e.getForm=function(){return e[e.name]},this.getFormScope=function(){return e}}]};function n(e,t,n,r){(function e(t,n){var r=t.$parent;if(!r)return n||t;angular.isDefined(r.vm)&&(n=r.vm);return e(r,n)})(e)[e.name]=e.getForm()}}]),angular.module("cms.shared").directive("cmsFormSection",["shared.internalModulePath","$timeout",function(e,r){return{restrict:"E",templateUrl:e+"UIComponents/Form/FormSection.html",scope:{title:"@cmsTitle"},replace:!0,transclude:!0,link:function(e,n,t){r(function(){var e=angular.element(n[0].querySelector(".help-inline")),t=angular.element(n[0].querySelector(".toggle-helpers"));e.length&&t.addClass("show").on("click",function(){t.toggleClass("active"),n.toggleClass("show-helpers")})},100)}}}]),angular.module("cms.shared").directive("cmsFormSectionActions",["shared.internalModulePath","$timeout",function(e,t){return{restrict:"E",templateUrl:e+"UIComponents/Form/FormSectionActions.html",scope:{},replace:!0,transclude:!0,link:function(e,t,n){}}}]),angular.module("cms.shared").directive("cmsFormSectionAuditData",["shared.internalModulePath",function(e){return{restrict:"E",templateUrl:e+"UIComponents/Form/FormSectionAuditData.html",scope:{auditData:"=cmsAuditData"}}}]),angular.module("cms.shared").directive("cmsFormStatus",["_","shared.validationErrorService","shared.internalModulePath",function(i,o,e){return{restrict:"E",templateUrl:e+"UIComponents/Form/FormStatus.html",require:["^^cmsForm"],replace:!0,scope:!0,link:{post:function(e,t,n,r){(function(e,t){t=t.getFormScope().getForm(),e.success=function(e){a(this,e,"success")}.bind(e),e.error=function(e){a(this,e,"error")}.bind(e),e.errors=function(e,t){e=i.uniq(e,function(e){return e.message});a(this,t,"error",e)}.bind(e),e.clear=function(){a(this)}.bind(e),t.formStatus=e})(e,r[0]),function(e){o.addHandler("",e.errors),e.$on("$destroy",function(){o.removeHandler(e.errors)})}(e)}}};function a(e,t,n,r){e.message=t,e.errors=r,e.cls=n}}]),angular.module("cms.shared").directive("cmsFormDynamicFieldSet",["$compile","_","shared.stringUtilities","shared.internalModulePath","shared.LoadState",function(a,s,l,e,t){return{restrict:"E",replace:!0,scope:{dataSource:"=cmsDataSource",additionalParameters:"=cmsAdditionalParameters"},link:function(t,n,e,r){t.vm;var i=new c;function o(e){var r="";n.empty(),e&&e.modelMetaData.dataModelProperties.length&&(e.modelMetaData.dataModelProperties.forEach(function(e,n){var t=function(e){var t="cms-form-field-";switch(e.dataTemplateName){case"Single":case"Double":case"Decimal":return t+"number";case"String":return t+"text";case"Boolean":return t+"checkbox";case"MultilineText":return t+"text-area"}return t+l.toSnakeCase(e.dataTemplateName)}(e);r+="<"+t,r+=i.map("model",l.lowerCaseFirstWord(e.name)),r+=i.map("title",e.displayName),r+=i.map("required",e.isRequired&&!e.additionalAttributes.readonly),r+=i.map("description",e.description),e.additionalAttributes&&s.each(e.additionalAttributes,function(e,t){r+=i.map(t,e,n)}),r+="></"+t+">"}),n.append(a(r)(t)))}t.$watch("vm.dataSource",function(e){o(e)})},controller:["$scope",function(e){}],bindToController:!0,controllerAs:"vm"};function c(){var n="cms-",o={maxlength:a,minlength:a,min:a,max:a,pattern:a,step:a,placeholder:a,match:e,model:e,options:function(e,t,n){return s(e,"vm.dataSource.modelMetaData.dataModelProperties["+n+"].additionalAttributes['"+e+"']")},required:function(e,t){if(t)return r(e.toLowerCase());return""},rows:a,cols:a};function e(e,t){return s(e,t="vm.dataSource.model['"+t+"']")}function a(e,t){return r(l.toSnakeCase(e),t)}function s(e,t){return r(e=n+l.toSnakeCase(e),t)}function r(e,t){return t?" "+e+'="'+t+'"':" "+e}this.map=function(e,t,n){var r,i=o[e];return!i&&l.endsWith(e,"ValMsg")?(r=e.substring(0,e.length-"ValMsg".length),t&&o[r]===a&&(i=a)):i=i||s,i?i(e,t,n):""}}}]),angular.module("cms.shared").factory("baseFormFieldFactory",["$timeout","shared.stringUtilities","shared.directiveUtilities","shared.validationErrorService",function(o,s,a,l){var t={},c=[{attr:"required",msg:"This field is required"},{attr:"maxlength",msg:"This field cannot be longer than {0} characters"},{attr:"minlength",msg:"This must be at least {0} characters long"}];function i(e){return e.find("input")}function u(t,e,n){var r=t.formScope.getForm()[t.modelName];t.resetCustomErrors(),r.$setValidity("server",!1),i(e).removeClass("ng-pristine").addClass("ng-dirty"),n.forEach(function(e){t.customErrors.push(e)})}return t.create=function(e){return angular.extend({},t.defaultConfig,e)},t.defaultConfig={restrict:"E",replace:!0,require:["^^cmsForm"],scope:{title:"@cmsTitle",description:"@cmsDescription",change:"&cmsChange",model:"=cmsModel",disabled:"=cmsDisabled",readonly:"=cmsReadonly"},compile:function(e,t){return function(e,n){var r=this.getInputEl(e);(this.passThroughAttributes||[]).forEach(function(e){var t=e.name||e;angular.isDefined(n[t])?r[0].setAttribute(n.$attr[t],n[t]):e.default&&r[0].setAttribute(t,e.default)})}.call(this,e,t),this.link.bind(this)},link:function(e,n,t,r){var i=e.vm,r=r[0];i.formScope=r.getFormScope(),i.form=i.formScope.getForm(),a.setModelName(i,t),function(r,i){var o=this;function a(e,t){e=_.find(e,function(e){return e.attr===t});if(e)return _.isFunction(e.msg)?e.msg(r.modelName,i):e.msg}r.validators=[],_.each(i.$attr,function(e,t){var n,e=s.endsWith(t,"ValMsg")?(n=e.substring(0,e.length-"-val-msg".length),i[t]):(n=e,a(o.defaultValidationMessages,t)||a(c,t));e&&r.validators.push({name:i.$normalize(n),message:s.format(e,i[t])})})}(i,t),i.onChange=function(){this.resetCustomErrors(),this.change&&o(this.change,0)}.bind(i),i.resetCustomErrors=function(){var e=this.form[this.modelName];e&&e.$setValidity("server",!0);this.customErrors=[]}.bind(i),i.addOrUpdateValidator=function(t){var e=_.filter(this.validators,function(e){return e.name!==t.name});e.push(t),this.validators=e}.bind(i),i.resetCustomErrors(),function(e){var t=_.partial(u,e.vm,n);l.addHandler(e.vm.modelName,t),e.$on("$destroy",function(){l.removeHandler(t)})}(e),e.$watch("vm.model",function(){i.resetCustomErrors()})},controller:function(){},controllerAs:"vm",bindToController:!0,getInputEl:i,passThroughAttributes:[],defaultValidationMessages:[]},t}]),angular.module("cms.shared").directive("cmsFormFieldChar",["_","shared.internalModulePath","baseFormFieldFactory",function(e,t,n){t={templateUrl:t+"UIComponents/FormFields/FormFieldChar.html",passThroughAttributes:["required","placeholder","pattern","disabled","cmsMatch"]};return n.create(t)}]),angular.module("cms.shared").directive("cmsFormFieldCheckbox",["shared.internalModulePath","baseFormFieldFactory",function(e,t){e={templateUrl:e+"UIComponents/FormFields/FormFieldCheckbox.html",passThroughAttributes:["disabled"]};return t.create(e)}]),angular.module("cms.shared").directive("cmsFormFieldCheckboxList",["_","$http","shared.internalModulePath","shared.optionSourceService","baseFormFieldFactory",function(u,e,t,d,f){t={templateUrl:t+"UIComponents/FormFields/FormFieldCheckboxList.html",scope:u.extend(f.defaultConfig.scope,{options:"=cmsOptions",optionValue:"@cmsOptionValue",optionName:"@cmsOptionName",optionsApi:"@cmsOptionsApi",noValueText:"@cmsNoValueText",required:"=cmsRequired",disabled:"=cmsDisabled"}),passThroughAttributes:["placeholder","disabled","cmsMatch","required"],link:function(t,e,n,r){var i=t.vm;function o(){s(),l()}function a(e){i.listOptions=u.map(e,function(e){return{text:e[i.optionName],value:e[i.optionValue]}}),s()}function s(){var e=!i.model||!i.model.length;i.displayValues=[],u.each(i.listOptions,function(t){t.selected=!e&&!!u.find(i.model,function(e){return e===t.value})})}function l(){i.displayValues=u.chain(i.listOptions).filter(function(e){return e.selected}).pluck("text").value()}function c(){i.model=u.chain(i.listOptions).filter(function(e){return e.selected}).pluck("value").value()}(function(){var e;i.isRequiredAttributeDefined=angular.isDefined(n.required),i.onCheckChanged=c,i.optionsApi?(e=i.optionsApi,d.getFromApi(e).then(function(e){a(e),l()})):t.$watch("vm.options",function(){a(i.options),l()}),t.$watch("vm.model",o)})(),f.defaultConfig.link.apply(this,arguments)}};return f.create(t)}]),angular.module("cms.shared").directive("cmsFormFieldColor",["shared.internalModulePath","baseFormFieldFactory",function(e,n){e={templateUrl:e+"UIComponents/FormFields/FormFieldColor.html",passThroughAttributes:["required","disabled"],link:function(e){var t=e.vm;n.defaultConfig.link.apply(this,arguments),t.validators.push({name:"pattern",message:t.title+" must be a hexadecimal colour value e.g. '#EFEFEF' or '#fff'"})}};return n.create(e)}]),angular.module("cms.shared").directive("cmsFormFieldContainer",["shared.internalModulePath",function(e){return{restrict:"E",templateUrl:e+"UIComponents/FormFields/FormFieldContainer.html",require:["^^cmsForm"],replace:!0,transclude:!0,scope:{title:"@cmsTitle",description:"@cmsDescription"}}}]),angular.module("cms.shared").directive("cmsFormFieldDate",["shared.internalModulePath","baseFormFieldFactory",function(e,o){e={templateUrl:e+"UIComponents/FormFields/FormFieldDate.html",passThroughAttributes:["required","min","max","step","disabled","cmsMatch"],link:function(e,t,n,r){var i=e.vm;o.defaultConfig.link.apply(this,arguments),n.min&&i.addOrUpdateValidator({name:"min",message:"This date cannot be before "+n.min}),n.max&&i.addOrUpdateValidator({name:"max",message:"This date cannot be after "+n.max})}};return o.create(e)}]),angular.module("cms.shared").directive("cmsFormFieldDateLocal",["shared.internalModulePath","baseFormFieldFactory",function(e,o){e={templateUrl:e+"UIComponents/FormFields/FormFieldDateLocal.html",passThroughAttributes:["required","min","max","disabled","cmsMatch"],link:function(e,t,n,r){var i=e.vm;o.defaultConfig.link.apply(this,arguments),n.min&&i.addOrUpdateValidator({name:"min",message:"This date cannot be before "+n.min}),n.max&&i.addOrUpdateValidator({name:"max",message:"This date cannot be after "+n.max})}};return o.create(e)}]),angular.module("cms.shared").directive("cmsFormFieldDateTime",["shared.internalModulePath","baseFormFieldFactory",function(e,o){e={templateUrl:e+"UIComponents/FormFields/FormFieldDateTime.html",passThroughAttributes:["required","min","max","disabled","cmsMatch"],link:function(e,t,n,r){var i=e.vm;o.defaultConfig.link.apply(this,arguments),function(){var e;n.min&&(e=n.min.replace("T"," "),i.addOrUpdateValidator({name:"min",message:"This date cannot be before "+e})),n.max&&(e=n.min.replace("T"," "),i.addOrUpdateValidator({name:"max",message:"This date cannot be after "+e}))}()}};return o.create(e)}]),angular.module("cms.shared").directive("cmsFormFieldDateTimeLocal",["shared.internalModulePath","baseFormFieldFactory",function(e,l){e={templateUrl:e+"UIComponents/FormFields/FormFieldDateTimeLocal.html",scope:_.extend(l.defaultConfig.scope,{minUtc:"@cmsMinUtc",maxUtc:"@cmsMaxUtc"}),passThroughAttributes:["required","min","max","disabled","cmsMatch"],link:function(e,t,n,r){var i=e.vm;function o(e){if(e)return new Date(e+":00.000Z")}function a(e){if(e)return e.getFullYear()+"-"+s(e.getMonth()+1)+"-"+s(e.getDate())+"T"+s(e.getHours())+":"+s(e.getMinutes())}function s(e){return("00"+e).slice(-2)}l.defaultConfig.link.apply(this,arguments),e.$watch("vm.minUtc",function(e){e=o(e);i.minLocal=a(e),i.minLocal&&i.addOrUpdateValidator({name:"min",message:"This date cannot be before "+e.toLocaleString()})}),e.$watch("vm.maxUtc",function(e){e=o(e);i.maxLocal=a(e),i.maxLocal&&i.addOrUpdateValidator({name:"max",message:"This date cannot be after "+e.toLocaleString()})})}};return l.create(e)}]),angular.module("cms.shared").directive("cmsFormFieldDropdown",["_","$http","shared.internalModulePath","baseFormFieldFactory",function(a,s,e,l){e={templateUrl:e+"UIComponents/FormFields/FormFieldDropdown.html",scope:a.extend(l.defaultConfig.scope,{options:"=cmsOptions",optionValue:"@cmsOptionValue",optionName:"@cmsOptionName",optionsApi:"@cmsOptionsApi",defaultItemText:"@cmsDefaultItemText",href:"@cmsHref",required:"=cmsRequired",disabled:"=cmsDisabled"}),passThroughAttributes:["placeholder","disabled","cmsMatch"],getInputEl:function(e){return e.find("select")},link:function(t,e,n,r){var i=t.vm;function o(){var e=a.find(i.listOptions,function(e){return e[i.optionValue]==i.model});i.displayValue=e?e[i.optionName]:i.defaultItemText,!e&&null!=i.model&&i.listOptions&&(i.model=void 0)}(function(){var e;i.isRequiredAttributeDefined=angular.isDefined(n.required),i.optionsApi?(e=i.optionsApi,s.get(e).then(function(e){i.listOptions=e,o()})):t.$watch("vm.options",function(){i.listOptions=i.options,o()}),t.$watch("vm.model",o)})(),l.defaultConfig.link.apply(this,arguments)}};return l.create(e)}]),angular.module("cms.shared").directive("cmsFormFieldEmailAddress",["shared.internalModulePath","baseFormFieldFactory",function(e,n){e={templateUrl:e+"UIComponents/FormFields/FormFieldEmailAddress.html",passThroughAttributes:["required","maxlength","placeholder","disabled","cmsMatch"],link:function(e){var t=e.vm;n.defaultConfig.link.apply(this,arguments),t.validators.push({name:"email",message:"Please enter a valid email address"})}};return n.create(e)}]),angular.module("cms.shared").directive("cmsFormFieldFilteredDropdown",["$q","_","shared.internalModulePath","shared.stringUtilities","baseFormFieldFactory",function(c,u,e,t,d){e={templateUrl:e+"UIComponents/FormFields/FormFieldFilteredDropdown.html",passThroughAttributes:["required","disabled"],scope:u.extend(d.defaultConfig.scope,{defaultItemText:"@cmsDefaultItemText",href:"@cmsHref",searchFunction:"&cmsSearchFunction",initialItemFunction:"&cmsInitialItemFunction",optionName:"@cmsOptionName",optionValue:"@cmsOptionValue",required:"=cmsRequired"}),require:u.union(d.defaultConfig.require,["?^^cmsFormDynamicFieldSet"]),link:function(e,t,n,r){var i=e.vm,o=u.last(r);function a(t){var e;i.selectedText="",t&&i.dataSource&&i.dataSource.length&&((e=u.find(i.dataSource,function(e){return t==e[i.optionValue]}))&&(i.selectedText=e[i.optionName])),!i.selectedText&&t&&i.initialItemFunction&&c.when(i.initialItemFunction({id:t})).then(function(e){e&&(i.selectedText=e[i.optionName],l(i.selectedText))})}function s(){i.selectedText="",i.model&&(i.model=null)}function l(e){e={text:e,pageSize:20};return i.localeId?e.localeId=i.localeId:o&&o.additionalParameters&&(e.localeId=o.additionalParameters.localeId),i.searchFunction({$query:e}).then(function(e){i.dataSource=e.items})}i.refreshDataSource=l,i.dataSource=[],i.hasRequiredAttribute=u.has(n,"required"),i.placeholder=n.placeholder,i.clearSelected=s,e.$watch("vm.model",a),d.defaultConfig.link.apply(this,arguments)},transclude:!0};return d.create(e)}]),angular.module("cms.shared").directive("cmsFormFieldHtml",["$sce","$q","$http","_","shared.internalModulePath","shared.internalContentPath","shared.stringUtilities","shared.modalDialogService","baseFormFieldFactory",function(i,a,s,l,c,u,d,f,o){var e={templateUrl:c+"UIComponents/FormFields/FormFieldHtml.html",passThroughAttributes:["required","maxlength","disabled","rows"],getInputEl:function(e){return e.find("textarea")},scope:l.extend(o.defaultConfig.scope,{toolbarsConfig:"@cmsToolbars",toolbarCustomConfig:"@cmsCustomToolbar",options:"=cmsOptions",configPath:"@cmsConfigPath"}),link:function(e,t,n){var r=e.vm;o.defaultConfig.link.apply(this,arguments),function(e,t){var n=20,r=a.defer();t.rows&&(n=parseInt(t.rows));var i={toolbar:function(e,t){var n={headings:"formatselect",basicFormatting:"fullscreen undo redo removeformat | bold italic underline | link unlink",advancedFormatting:"bullist numlist blockquote | alignleft aligncenter alignright alignjustify | strikethrough superscript subscript",media:"cfimage media",source:"code"},r=[];return(e=e||"headings,basicFormatting").split(",").forEach(function(e){"custom"===(e=d.lowerCaseFirstWord(e.trim()))?r=l.union(r,function(e){var t;if(e){if(!e.startsWith("'")&&!e.startsWith('"'))return[e];try{t=JSON.parse('{"j":['+e.replace(/'/g,'"')+"]}").j}catch(e){}if(t&&t.length)return t}return[]}(t)):n[e]&&r.push(n[e])}),r.join(" | ")}(e.toolbarsConfig,e.toolbarCustomConfig),plugins:"link image media fullscreen imagetools code",content_css:u+"css/third-party/tinymce/content.min.css",menubar:!1,min_height:16*n,setup:function(e){e.addButton("cfimage",{icon:"image",onclick:function(t){var e=t.selection.getContent({format:"image"}),e=e.length?angular.element(e):null;f.show({templateUrl:c+"UIComponents/EditorDialogs/ImageAssetEditorDialog.html",controller:"ImageAssetEditorDialogController",options:{imageAssetHtml:e,onSelected:function(e){t.insertContent(e.html)}}})}.bind(null,e)})},browser_spellcheck:!0,convert_urls:!1};e.configPath?s.get(e.configPath).then(function(e){e&&e.data&&l.extend(i,e.data);o()}):o();return r.promise;function o(){e.options&&l.extend(i,e.options),r.resolve(i)}}(r,n).then(function(e){r.tinymceOptions=e}),e.$watch("vm.model",function(e){e!==r.editorModel&&(r.editorModel=e,r.rawHtml=i.trustAsHtml(e))}),e.$watch("vm.editorModel",function(e){e!==r.model&&(r.model=e,r.rawHtml=i.trustAsHtml(e))})}};return o.create(e)}]),angular.module("cms.shared").directive("cmsFormFieldNumber",["shared.internalModulePath","baseFormFieldFactory",function(e,t){e={templateUrl:e+"UIComponents/FormFields/FormFieldNumber.html",passThroughAttributes:["required","maxlength","min","max","step","disabled","placeholder","cmsMatch"]};return t.create(e)}]);var numericTypes=[{name:"Byte",min:0,max:255,step:1},{name:"SByte",min:-128,max:127,step:1},{name:"Int16",min:-32768,max:32767,step:1},{name:"UInt16",min:0,max:65535,step:1},{name:"Int32",min:-2147483648,max:2147483647,step:1},{name:"UInt32",min:0,max:4294967295,step:1},{name:"Int64",step:1},{name:"UInt64",min:0,step:1}];numericTypes.forEach(function(n){angular.module("cms.shared").directive("cmsFormField"+n.name,["shared.internalModulePath","baseFormFieldFactory",function(e,t){e={templateUrl:e+"UIComponents/FormFields/FormFieldNumber.html",passThroughAttributes:["required","maxlength",{name:"min",default:n.min},{name:"max",default:n.max},{name:"step",default:n.step},"disabled","placeholder","cmsMatch"]};return t.create(e)}])}),angular.module("cms.shared").directive("cmsFormFieldPassword",["shared.internalModulePath","baseFormFieldFactory",function(e,t){e={templateUrl:e+"UIComponents/FormFields/FormFieldPassword.html",passThroughAttributes:["required","minlength","maxlength","disabled","cmsMatch"]};return t.create(e)}]),angular.module("cms.shared").directive("cmsFormFieldRadioList",["_","$http","shared.internalModulePath","baseFormFieldFactory",function(a,s,e,l){e={templateUrl:e+"UIComponents/FormFields/FormFieldRadioList.html",scope:a.extend(l.defaultConfig.scope,{options:"=cmsOptions",optionValue:"@cmsOptionValue",optionName:"@cmsOptionName",optionsApi:"@cmsOptionsApi",defaultItemText:"@cmsDefaultItemText",required:"=cmsRequired",disabled:"=cmsDisabled"}),passThroughAttributes:["placeholder","disabled","cmsMatch"],link:function(t,e,n,r){var i=t.vm;function o(){var e=a.find(i.listOptions,function(e){return e[i.optionValue]==i.model});i.displayValue=e?e[i.optionName]:i.defaultItemText,!e&&null!=i.model&&i.listOptions&&(i.model=void 0)}(function(){var e;i.isRequiredAttributeDefined=angular.isDefined(n.required),i.optionsApi?(e=i.optionsApi,s.get(e).then(function(e){i.listOptions=e,o()})):t.$watch("vm.options",function(){i.listOptions=i.options,o()}),t.$watch("vm.model",o)})(),l.defaultConfig.link.apply(this,arguments)}};return l.create(e)}]),angular.module("cms.shared").directive("cmsFormFieldReadonly",["shared.internalModulePath",function(e){return{restrict:"E",templateUrl:e+"UIComponents/FormFields/FormFieldReadonly.html",replace:!0,require:"^^cmsForm",scope:{title:"@cmsTitle",description:"@cmsDescription",model:"=cmsModel"},controller:function(){},controllerAs:"vm",bindToController:!0}}]),angular.module("cms.shared").directive("cmsFormFieldText",["_","shared.internalModulePath","baseFormFieldFactory",function(e,t,n){t={templateUrl:t+"UIComponents/FormFields/FormFieldText.html",passThroughAttributes:["required","minlength","maxlength","placeholder","pattern","disabled","readonly","cmsMatch"]};return n.create(t)}]),angular.module("cms.shared").directive("cmsFormFieldTextArea",["shared.internalModulePath","shared.stringUtilities","baseFormFieldFactory",function(e,t,n){e={templateUrl:e+"UIComponents/FormFields/FormFieldTextArea.html",passThroughAttributes:["required","maxlength","placeholder","ngMinlength","ngMaxlength","ngPattern","disabled","rows","cols","wrap"],getInputEl:function(e){return e.find("textarea")}};return n.create(e)}]),angular.module("cms.shared").directive("cmsFormFieldTime",["shared.internalModulePath","shared.timeUtilities","baseFormFieldFactory",function(e,o,a){e={templateUrl:e+"UIComponents/FormFields/FormFieldTime.html",passThroughAttributes:["required","min","step","max","disabled","readonly","cmsMatch"],link:function(e,t,n,r){var i=e.vm;a.defaultConfig.link.apply(this,arguments),e.$watch("vm.model",function(e){e!==i.editorModel&&(i.editorModel=o.toDate(e))}),e.$watch("vm.editorModel",function(e){e!==i.model&&(i.model=o.format(e))})}};return a.create(e)}]),angular.module("cms.shared").directive("cmsFormFieldUrl",["_","shared.internalModulePath","baseFormFieldFactory",function(e,t,n){t={templateUrl:t+"UIComponents/FormFields/FormFieldUrl.html",passThroughAttributes:["required","minlength","maxlength","placeholder","pattern","disabled","cmsMatch"]};return n.create(t)}]),angular.module("cms.shared").directive("cmsFormFieldValidationSummary",["shared.internalModulePath",function(e){return{restrict:"E",templateUrl:e+"UIComponents/FormFields/FormFieldValidationSummary.html",replace:!0}}]),angular.module("cms.shared").directive("cmsHttpPrefix",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){function i(e){var t="http://";return e&&!/^(https?):\/\//i.test(e)&&-1===t.indexOf(e)&&-1==="https://".indexOf(e)?(r.$setViewValue(t+e),r.$render(),t+e):e}r.$formatters.push(i),r.$parsers.splice(0,0,i)}}}),angular.module("cms.shared").directive("cmsMatch",["$parse","$timeout","shared.internalModulePath","shared.directiveUtilities",function(e,t,n,s){var l="cmsMatch";return{link:function(e,t,n,r){if(!n[l]||!r[1])return;var i=r[0],r=r[1],o=i.getFormScope().getForm(),a=s.parseModelName(n[l]);r.$validators[l]=function(e,t){var n=o[a];return!!n&&e===n.$viewValue}},restrict:"A",require:["^^cmsForm","?ngModel"]}}]),angular.module("cms.shared").directive("cmsFormFieldImageAnchorLocationSelector",["_","shared.internalModulePath",function(e,t){return{restrict:"E",templateUrl:t+"UIComponents/ImageAssets/FormFieldImageAnchorLocationSelector.html",scope:{model:"=cmsModel",readonly:"=cmsReadonly"},controller:function(){this.options=[{name:"Top Left",id:"TopLeft"},{name:"Top Center",id:"TopCenter"},{name:"Top Right",id:"TopRight"},{name:"Middle Left",id:"MiddleLeft"},{name:"Middle Center",id:"MiddleCenter"},{name:"Middle Right",id:"MiddleRight"},{name:"Bottom Left",id:"BottomLeft"},{name:"Bottom Center",id:"BottomCenter"},{name:"Bottom Right",id:"BottomRight"}]},controllerAs:"vm",bindToController:!0}}]),angular.module("cms.shared").directive("cmsFormFieldImageAsset",["_","shared.internalModulePath","shared.internalContentPath","shared.modalDialogService","shared.stringUtilities","shared.imageService","shared.urlLibrary","baseFormFieldFactory",function(d,f,e,h,m,p,g,t){var v=t.defaultConfig,e={templateUrl:f+"UIComponents/ImageAssets/FormFieldImageAsset.html",scope:d.extend(v.scope,{asset:"=cmsAsset",loadState:"=cmsLoadState",updateAsset:"@cmsUpdateAsset"}),passThroughAttributes:["required"],link:function(e,t,n,r){var i,o=e.vm,a=d.has(n,"required");return function(){o.urlLibrary=g,o.showPicker=l,o.remove=s,o.isRemovable=d.isObject(o.model)&&!a,o.filter=function(r){var i={};return e("Tags"),e("Width",!0),e("Height",!0),e("MinWidth",!0),e("MinHeight",!0),i;function e(e,t){var n=r["cms"+e];n&&(e=m.lowerCaseFirstWord(e),i[e]=t?parseInt(n):n)}}(n),o.previewWidth=n.cmsPreviewWidth||220,o.previewHeight=n.cmsPreviewHeight,e.$watch("vm.asset",u),e.$watch("vm.model",c)}(),v.link(e,t,n,r);function s(){u(null)}function l(){h.show({templateUrl:f+"UIComponents/ImageAssets/ImageAssetPickerDialog.html",controller:"ImageAssetPickerDialogController",options:{currentAsset:o.previewAsset,filter:o.filter,onSelected:function(e){!e&&o.previewAsset?(u(null),o.onChange()):(!o.previewAsset||e&&o.previewAsset.imageAssetId!==e.imageAssetId)&&(u(e),o.onChange())}}})}function c(e){e||(o.model=e=void 0),!e||o.previewAsset&&o.previewAsset.imageAssetId==e||p.getById(e).then(function(e){e&&u(e)})}function u(e){e?(o.previewAsset=e,o.isRemovable=!a,o.model=e.imageAssetId,o.updateAsset&&(o.asset=e)):i&&(o.previewAsset=null,o.isRemovable=!1,o.model&&(o.model=null),o.updateAsset&&(o.asset=null)),o.buttonText=o.model?"Change":"Select",i=!0}}};return t.create(e)}]),angular.module("cms.shared").directive("cmsFormFieldImageAssetCollection",["_","shared.internalModulePath","shared.LoadState","shared.imageService","shared.modalDialogService","shared.arrayUtilities","shared.stringUtilities","shared.urlLibrary","baseFormFieldFactory",function(c,u,d,f,h,m,p,g,e){var v="imageAssetId",y=e.defaultConfig,t={templateUrl:u+"UIComponents/ImageAssets/FormFieldImageAssetCollection.html",passThroughAttributes:["required","ngRequired"],link:function(e,t,i,n){var o=e.vm;return o.gridLoadState=new d,o.urlLibrary=g,o.showPicker=a,o.remove=r,o.onDrop=s,e.$watch("vm.model",l),y.link(e,t,i,n);function r(e){function t(e,t){t=e.indexOf(t);return 0<=t&&e.splice(t,1)}t(o.gridData,e),t(o.model,e.imageAssetId)}function a(){function e(e,t){var n=i["cms"+e];n&&(e=p.lowerCaseFirstWord(e),r[e]=t?parseInt(n):n)}var r;h.show({templateUrl:u+"UIComponents/ImageAssets/ImageAssetPickerDialog.html",controller:"ImageAssetPickerDialogController",options:{selectedIds:o.model||[],filter:(r={},e("Tags"),e("Width",!0),e("Height",!0),e("MinWidth",!0),e("MinHeight",!0),r),onSelected:function(e){l(o.model=e)}}})}function s(e,t){m.moveObject(o.gridData,t,e,v),o.model=c.pluck(o.gridData,v)}function l(e){e&&e.length?o.gridData&&c.pluck(o.gridData,v).join()==e.join()||(o.gridLoadState.on(),f.getByIdRange(e).then(function(e){o.gridData=e,o.gridLoadState.off()})):o.gridData=[]}}};return e.create(t)}]),angular.module("cms.shared").directive("cmsFormFieldImageUpload",["_","$timeout","shared.internalModulePath","shared.internalContentPath","shared.LoadState","shared.stringUtilities","shared.imageFileUtilities","shared.imageService","shared.urlLibrary","shared.validationErrorService","baseFormFieldFactory",function(u,d,e,t,f,h,m,p,g,v,n){var y=n.defaultConfig,t=t+"img/AssetReplacement/",b=t+"preview-not-supported.png",w=t+"image-replacement.png",e={templateUrl:e+"UIComponents/ImageAssets/FormFieldImageUpload.html",scope:u.extend(n.defaultConfig.scope,{asset:"=cmsAsset",loadState:"=cmsLoadState",filter:"=cmsFilter",onChange:"&cmsOnChange"}),link:function(e,t,n,r){var i=e.vm;return i.isRequired=u.has(n,"required"),i.remove=a,i.fileChanged=l,i.isRemovable=u.isObject(i.ngModel)&&!i.isRequired,i.mainLoadState=new f(!0),e.$watch("vm.asset",s),p.getSettings().then(o).then(i.mainLoadState.off),y.link(e,t,n,r);function o(e){i.settings=e}function a(){l()}function s(){var e=i.asset;e?(i.previewUrl=g.getImageUrl(e,{width:220}),i.isRemovable=!i.isRequired,i.model={name:e.fileName+"."+e.extension,size:e.fileSizeInBytes,isCurrentFile:!0}):(i.previewUrl=w,i.isRemovable=!1,i.model&&(i.model=void 0)),c()}function l(e){function t(){i.model=void 0,i.previewUrl=w,i.isRemovable=!1,i.isResized=!1,n()}function n(){c(),i.onChange&&i.onChange()}e&&e[0]?(i.mainLoadState.on(),m.getFileInfoAndResizeIfRequired(e[0],i.settings).then(function(e){e||t();i.model=e.file,function(e){var t=i.filter;function n(e,t){return!(1<e)||e<=t}function r(e,t){return!(1<e)||t==e}t&&(n(t.minWidth,e.width)&&n(t.minHeight,e.height)&&r(t.width,e.width)&&r(t.height,e.height)||function(e){d(function(){v.raise([{message:e,properties:[i.modelName]}])})}("The image is "+e.width+"x"+e.height+" which does not meet the size requirements."))}(e),function(e){if(!function(t){return!u.find([".tiff",".tif"],function(e){return h.endsWith(t.name,e)})}(e))return i.previewUrl=b;try{i.previewUrl=URL.createObjectURL(e)}catch(e){i.previewUrl=b}}(e.file),i.isRemovable=!i.isRequired,i.isResized=e.isResized,i.resizeSize=e.width+"x"+e.height,n()}).finally(i.mainLoadState.off)):i.ngModel&&!u.isUndefined(e)||t()}function c(){i.buttonText=i.model?"Change":"Upload"}}};return n.create(e)}]),angular.module("cms.shared").directive("cmsImageAsset",["shared.internalModulePath","shared.internalContentPath","shared.urlLibrary",function(e,r,i){return{restrict:"E",scope:{image:"=cmsImage",width:"@cmsWidth",height:"@cmsHeight",cropMode:"@cmsCropMode"},templateUrl:e+"UIComponents/ImageAssets/ImageAsset.html",link:function(n,e,t){n.$watch("image",function(e,t){e&&e.imageAssetId?n.src=i.getImageUrl(e,{width:n.width,height:n.height,mode:n.cropMode}):n.src=r+"img/AssetReplacement/image-replacement.png"})},replace:!0}}]),angular.module("cms.shared").controller("ImageAssetPickerDialogController",["$scope","shared.LoadState","shared.imageService","shared.SearchQuery","shared.modalDialogService","shared.internalModulePath","shared.permissionValidationService","options","close",function(e,t,n,r,i,o,a,s,l){var c=e;function u(e){c.isFilterVisible=_.isUndefined(e)?!c.isFilterVisible:e}function d(){u(!1),f()}function f(){return c.gridLoadState.on(),n.getAll(c.query.getParameters()).then(function(e){c.result=e,c.gridLoadState.off()})}function h(){c.multiMode||c.onSelected(c.currentAsset),l()}function m(e){c.multiMode?b(e):c.selectedAsset=e}function p(e){if(!c.multiMode)return c.selectedAsset=e,void g();b(e),g()}function g(){c.multiMode?c.onSelected(c.selectedIds):c.onSelected(c.selectedAsset),l()}function v(){i.show({templateUrl:o+"UIComponents/ImageAssets/UploadImageAssetDialog.html",controller:"UploadImageAssetDialogController",options:{filter:s.filter,onUploadComplete:function(e){n.getById(e).then(p)}}})}function y(e){return!!(c.selectedIds&&e&&-1<c.selectedIds.indexOf(e.imageAssetId))||!(!e||!c.selectedAsset)&&e.imageAssetId===c.selectedAsset.imageAssetId}function b(e){var t;y(e)?(t=c.selectedIds.indexOf(e.imageAssetId),c.selectedIds.splice(t,1)):c.selectedIds.push(e.imageAssetId)}angular.extend(e,s),c.onOk=g,c.onCancel=h,c.onSelect=m,c.onUpload=v,c.selectedAsset=c.currentAsset,c.onSelectAndClose=p,c.close=h,c.gridLoadState=new t,c.query=new r({onChanged:d,useHistory:!1,defaultParams:s.filter}),c.presetFilter=s.filter,c.filter=c.query.getFilters(),c.toggleFilter=u,c.isSelected=y,c.multiMode=!!c.selectedIds,c.okText=c.multiMode?"Ok":"Select",c.canCreate=a.canCreate("COFIMG"),u(!1),f()}]),angular.module("cms.shared").controller("UploadImageAssetDialogController",["$scope","shared.LoadState","shared.imageService","shared.SearchQuery","shared.focusService","shared.stringUtilities","options","close",function(e,t,n,r,i,o,a,s){var l=e;function c(){l.saveLoadState.on(),n.add(l.command).progress(l.saveLoadState.setProgress).then(f)}function u(){var e=l.command;e.file&&e.file.name&&(e.title=o.capitaliseFirstLetter(o.getFileNameWithoutExtension(e.file.name)),i.focusById("title"))}function d(){s()}function f(e){a.onUploadComplete(e),s()}angular.extend(e,a),l.command={},l.filter.tags&&(l.command.tags=l.filter.tags.split(",")),l.onUpload=c,l.onCancel=d,l.close=d,l.filter=a.filter,e.$watch("command.file",u),function(e){var r=[];function t(e,t,n){e&&t?r.push(n+"size "+e+"x"+t):(i(n+"width",e),i(n+"height",t))}function i(e,t){t&&r.push(e+" "+t)}e&&(t(e.width,e.height),t(e.minWidth,e.minHeight,"min-")),l.filterText=r.join(", "),l.isFilterSet=0<r.length}(a.filter),l.saveLoadState=new t}]),angular.module("cms.shared").directive("cmsLoading",function(){return{restrict:"A",link:function(e,t,n){e.$watch(n.cmsLoading,function(e){t.toggleClass("loading",e)})}}}),angular.module("cms.shared").factory("shared.LoadState",["$q","$rootScope","_",function(r,e,i){return function(e){var n=this;n.isLoading=!0===e,n.progress=n.isLoading?0:100,n.on=function(){n.isLoading=!0,100===n.progress&&(n.progress=0)},n.off=function(){n.isLoading=!1,n.progress=100},n.offWhen=function(){var t=[],e=Array.prototype.slice.call(arguments);return i.each(e,function(e){t.push(e.promise||e)}),r.all(t).then(function(){n.off()})},n.setProgress=function(e,t){i.isObject(e)&&(t=e.total,e=e.loaded),i.isUndefined(t)&&(t=100),100<=(t=(t=parseInt(100*e/t))<=0?0:t)?t=100:n.on(),n.progress=t}}}]),angular.module("cms.shared").directive("cmsProgressBar",["shared.internalModulePath",function(e){return{restrict:"E",scope:{loadState:"="},templateUrl:e+"UIComponents/Loader/ProgressBar.html"}}]),angular.module("cms.shared").directive("cmsField",["$timeout","shared.internalModulePath",function(e,t){return{restrict:"E",templateUrl:t+"UIComponents/Layout/Field.html",transclude:!0,replace:!0,require:"^^cmsForm"}}]),function(t){var e,n;t(document.getElementsByClassName("main-nav")),e=t(document.getElementsByClassName("category")),n=t(document.getElementsByClassName("category selected")),e.on("mouseenter",function(e){t(e.srcElement);n.removeClass("selected")}),e.on("mouseleave",function(e){t(e.srcElement);n.addClass("selected")})}(angular.element),angular.module("cms.shared").directive("cmsPageActions",function(){return{restrict:"E",template:'<div class="page-actions" ng-transclude></div>',replace:!0,transclude:!0}}),angular.module("cms.shared").directive("cmsPageBody",function(){return{restrict:"E",template:'<div class="page-body {{ contentType }} {{ subHeader }}"><div class="form-wrap" ng-transclude></div></div>',scope:{contentType:"@cmsContentType",subHeader:"@cmsSubHeader"},replace:!0,transclude:!0}}),angular.module("cms.shared").directive("cmsPageFilter",function(){return{restrict:"E",template:'<div class="page-filter" ng-transclude></div>',replace:!0,transclude:!0}}),angular.module("cms.shared").directive("cmsPageHeader",function(){return{restrict:"E",template:'<h1 class="page-header"><a ng-href="{{parentHref ? parentHref : \'#/\'}}" ng-if="parentTitle">{{parentTitle}}</a><span ng-if="parentTitle && title"> &gt; </span>{{title}}</h1>',replace:!0,scope:{title:"@cmsTitle",parentTitle:"@cmsParentTitle",parentHref:"@cmsParentHref"}}}),angular.module("cms.shared").directive("cmsPageHeaderButtons",function(){return{restrict:"E",template:'<div class="btn-group page-header-buttons" ng-transclude></div>',replace:!0,transclude:!0}}),angular.module("cms.shared").directive("cmsPageSubHeader",function(){return{restrict:"E",template:'<div class="page-sub-header" ng-transclude></div>',replace:!0,transclude:!0}}),angular.module("cms.shared").directive("cmsFormFieldLocaleSelector",["_","shared.internalModulePath","shared.localeService","shared.directiveUtilities",function(n,e,r,i){return{restrict:"E",templateUrl:e+"UIComponents/Locales/FormFieldLocaleSelector.html",scope:{model:"=cmsModel",onLoaded:"&cmsOnLoaded",readonly:"=cmsReadonly"},link:{pre:function(e,t,n){e=e.vm;angular.isDefined(n.required)?e.isRequired=!0:(e.isRequired=!1,e.defaultItemText=n.cmsDefaultItemText||"None");i.setModelName(e,n)}},controller:function(){var t=this;r.getAll().then(function(e){t.locales=n.map(e,function(e){return{name:e.name+" ("+e.ietfLanguageTag+")",id:e.localeId}}),t.onLoaded&&t.onLoaded()})},controllerAs:"vm",bindToController:!0}}]),angular.module("cms.shared").directive("cmsMenu",["shared.internalModulePath",function(e){return{restrict:"E",replace:!0,transclude:!0,templateUrl:e+"UIComponents/Menus/Menu.html",scope:{icon:"@cmsIcon"}}}]),angular.module("cms.shared").controller("AlertController",["$scope","options","close",function(e,t,n){angular.extend(e,t),e.close=n}]),angular.module("cms.shared").controller("ConfirmDialogController",["$scope","options","close",function(e,t,n){function r(){t.autoClose&&n()}angular.extend(e,t),e.close=function(e){e=e?t.ok:t.cancel;e&&e().then(r).finally(t.onCancel)}}]),angular.module("cms.shared").controller("DeveloperExceptionController",["$scope","$sce","shared.internalContentPath","options","close",function(e,t,n,r,i){var o=r.response.data,a=document.createElement("iframe");a.setAttribute("srcdoc",o),a.setAttribute("src",n+"developer-exception-not-supported.html"),a.setAttribute("sandbox","allow-scripts"),e.messageHtml=t.trustAsHtml(a.outerHTML),angular.extend(e,r),e.close=i}]),angular.module("cms.shared").directive("cmsModalDialogActions",["shared.internalModulePath",function(e){return{restrict:"E",templateUrl:e+"UIComponents/Modals/ModalDialogActions.html",transclude:!0}}]),angular.module("cms.shared").directive("cmsModalDialogBody",["shared.internalModulePath",function(e){return{restrict:"E",templateUrl:e+"UIComponents/Modals/ModalDialogBody.html",transclude:!0}}]),angular.module("cms.shared").directive("cmsModalDialogContainer",["shared.internalModulePath","$timeout",function(e,i){return{restrict:"E",templateUrl:e+"UIComponents/Modals/ModalDialogContainer.html",transclude:!0,link:function(e,t,n){var r="large"===n.cmsModalSize?"modal-lg":"";r+=e.isRootModal?" is-root-modal":" is-child-modal","large"===n.cmsModalSize&&(e.sizeCls=r);i(function(){e.sizeCls=r+" modal--show"},1)},controller:angular.noop}}]),angular.module("cms.shared").directive("cmsModalDialogHeader",["shared.internalModulePath",function(e){return{restrict:"E",templateUrl:e+"UIComponents/Modals/ModalDialogHeader.html",transclude:!0}}]),angular.module("cms.shared").factory("shared.modalDialogService",["$q","_","ModalService","shared.internalModulePath","shared.LoadState",function(s,l,c,u,t){var e={alert:function(e){var t=s.defer(),n=e||{};return l.isString(e)&&(n={message:e}),c.showModal({templateUrl:u+"UIComponents/Modals/Alert.html",controller:"AlertController",inputs:{options:n}}).then(function(e){e.close.then(t.resolve)}),t.promise},show:function(e){return c.showModal({templateUrl:e.templateUrl,controller:e.controller,inputs:{options:e.options}})}};return e.confirm=function(e){var r=s.defer(),i=new t,o=function(e){var t=e||{},n={ok:a.bind(null,!0),cancel:a.bind(null,!1),onOkLoadState:i};l.isString(e)&&(t={message:e});return l.defaults(n,t,{okButtonTitle:"OK",cancelButtonTitle:"Cancel",autoClose:!0})}(e);return c.showModal({templateUrl:u+"UIComponents/Modals/ConfirmDialog.html",controller:"ConfirmDialogController",inputs:{options:o}}),r.promise;function a(e){var t,n=e?o.onOk:o.onOk.onCancel,e=e?r.resolve:r.reject;return l.isFunction(n)&&(i.on(),t=n()),s.when(t).then(e)}},e}]),angular.module("cms.shared").factory("shared.ImagePreviewFieldCollection",["$q","_","shared.arrayUtilities","shared.imageService",function(c,u,d,f){return function(t){var n,r,o=this,i="previewImage";function a(e){if(t){e=e[t],e=r[e].fields[i];return e?e.lowerName:void 0}return n=!n&&r.fields[i]?r.fields[i].lowerName:n}function s(e,t,n){var r=a(e);if(r){r=l(e,r);if(!n){var i,n=o.images[t];if(r==(i=n?n.imageAssetId:i))return;if(!r)return void(o.images[t]=void 0)}return f.getById(r).then(function(e){o.images[t]=e})}}function l(e,t){if(t)return(e.model||e)[t]}o.load=function(e,t){if(r=t,!e||!e.length||!t)return n();t=u.chain(e).map(function(e){return l(e,a(e))}).filter(function(e){return!!e}).uniq().value();return t.length?f.getByIdRange(t).then(function(n){o.images=[],u.each(e,function(e){var t,e=l(e,a(e));e&&(t=u.find(n,{imageAssetId:e})),o.images.push(t)})}):n();function n(){var e=c.defer();return e.resolve(),o.images=[],e.promise}},o.move=function(e,t){d.move(o.images,e,t)},o.add=function(e,t){return s(e,t,!0)},o.update=function(e,t){return s(e,t)},o.remove=function(e){d.remove(o.images,e)}}}]),angular.module("cms.shared").factory("shared.ModelPreviewFieldset",["$q","_","shared.stringUtilities","shared.imageService",function(e,s,l,t){return function(e){var t=this,i="previewTitle",o="previewDescription",a="previewImage";t.modelMetaData=e,t.fields=function(n){var r={};return e(i),e(o),e(a),r;function e(t){var e=s.find(n.dataModelProperties,function(e){return e.additionalAttributes[t]});e&&(e.lowerName=l.lowerCaseFirstWord(e.name),r[t]=e,r.hasFields=!0)}}(e),t.showTitle=function(e){return e[i]||!e.hasFields}(t.fields),t.titleTerm=function(e){return e[i]?e[i].displayName:"Title"}(t.fields),t.on=function(){t.isLoading=!0,100===t.progress&&(t.progress=0)}}}]),angular.module("cms.shared").controller("EditNestedDataModelDialogController",["$scope","shared.nestedDataModelSchemaService","shared.LoadState","options","close",function(e,t,n,r,i){var o=e;function a(){o.saveLoadState.on(),t.validate(o.formDataSource.modelMetaData.typeName,o.formDataSource.model).then(function(){r.onSave&&r.onSave(o.formDataSource.model);i()}).finally(o.saveLoadState.off)}function s(){i()}angular.extend(e,r),o.save=a,o.onCancel=s,o.close=s,o.isNew=!r.model,o.title=o.isNew?"Add Item":"Edit Item",o.saveLoadState=new n,function(e){var t=e.model||{},e=e.modelMetaData;o.isNew&&e.defaultValue&&e.defaultValue.value&&(t=angular.copy(e.defaultValue.value)),o.formDataSource={model:t,modelMetaData:e}}(r)}]),angular.module("cms.shared").directive("cmsFormFieldNestedDataModelCollection",["_","shared.internalModulePath","shared.LoadState","shared.nestedDataModelSchemaService","shared.modalDialogService","shared.arrayUtilities","shared.ModelPreviewFieldset","shared.ImagePreviewFieldCollection","baseFormFieldFactory",function(p,g,e,v,y,b,w,x,t){var $=t.defaultConfig,n={templateUrl:g+"UIComponents/NestedDataModels/FormFieldNestedDataModelCollection.html",scope:p.extend($.scope,{minItems:"@cmsMinItems",maxItems:"@cmsMaxItems",modelType:"@cmsModelType",orderable:"=cmsOrderable"}),passThroughAttributes:["required"],link:function(e,t,n,r){var i,o=e.vm,a=p.last(r);return function(){o.add=u,o.edit=c,o.remove=l,o.onDrop=f,o.onDropSuccess=h,o.getTitle=m,v.getByName(o.modelType).then(function(e){o.modelMetaData=e,o.previewFields=new w(e),o.gridImages=new x,o.gridImages.load(o.model,o.previewFields)})}(),$.link(e,t,n,r);function s(){o.model=o.model.slice(0)}function l(e,t){b.removeObject(o.model,e),o.gridImages.remove(t)}function c(e,t){d({model:e,onSave:function(){o.gridImages.update(e,t),s()}})}function u(){d({onSave:function(e,t){o.model=o.model||[],o.model.push(e),o.gridImages.add(e,o.model.length-1),s()}})}function d(e){e.modelMetaData=o.modelMetaData,a&&(e.additionalParameters=a.additionalParameters),y.show({templateUrl:g+"UIComponents/NestedDataModels/EditNestedDataModelDialog.html",controller:"EditNestedDataModelDialogController",options:e})}function f(e,t){i=e}function h(e){b.move(o.model,e,i),o.gridImages.move(e,i)}function m(e,t){var n=o.previewFields.fields.previewTitle;return n?e[n.lowerName]:e.title||"Item "+(t+1)}}};return t.create(n)}]),angular.module("cms.shared").directive("cmsFormFieldNestedDataModelMultiTypeCollection",["_","shared.internalModulePath","shared.LoadState","shared.nestedDataModelSchemaService","shared.modalDialogService","shared.arrayUtilities","shared.ModelPreviewFieldset","shared.ImagePreviewFieldCollection","baseFormFieldFactory",function(b,w,e,x,$,C,S,k,t){var E=t.defaultConfig,n={templateUrl:w+"UIComponents/NestedDataModels/FormFieldNestedDataModelMultiTypeCollection.html",scope:b.extend(E.scope,{minItems:"@cmsMinItems",maxItems:"@cmsMaxItems",modelTypes:"@cmsModelTypes",orderable:"=cmsOrderable",titleColumnHeader:"@cmsTitleColumnHeader",descriptionColumnHeader:"@cmsDescriptionColumnHeader",imageColumnHeader:"@cmsImageColumnHeader",typeColumnHeader:"@cmsTypeColumnHeader"}),passThroughAttributes:["required"],link:function(e,t,n,r){var i,o=e.vm,a=b.last(r),s="previewTitle",l="previewDescription",c="previewImage";return function(){var e=o.modelTypes?o.modelTypes.split(","):[];o.add=m,o.edit=h,o.remove=f,o.onDrop=g,o.onDropSuccess=v,o.getTitle=y,x.getByNames(e).then(d),void 0===o.titleColumnHeader&&(o.titleColumnHeader="Title"),void 0===o.descriptionColumnHeader&&(o.descriptionColumnHeader="Description"),void(void 0===o.typeColumnHeader&&(o.typeColumnHeader="Type"))}(),E.link(e,t,n,r);function u(){o.model=o.model.slice(0)}function d(e){var n=!1,r=!1;o.modelMetaDataLookup={},o.previewFields={},b.chain(e).sortBy("displayName").each(function(e){o.modelMetaDataLookup[e.typeName]=e;var t=new S(e);t.fields[s]&&(n=!0),t.fields[l]&&(o.previewFields.showDescription=!0,r=!0),t.fields[c]&&(o.previewFields.showImage=!0,r=!0),o.previewFields[e.typeName]=t}),!n&&r||(o.previewFields.showTitle=!0),o.gridImages=new k("typeName"),o.gridImages.load(o.model,o.previewFields)}function f(e,t){C.removeObject(o.model,e),o.gridImages.remove(t)}function h(e,t){p({model:e.model,onSave:function(){o.gridImages.update(e,t),u()},modelMetaData:o.modelMetaDataLookup[e.typeName]})}function m(t){p({onSave:function(e){o.model=o.model||[];e={model:e,typeName:t.typeName};o.model.push(e),o.gridImages.add(e,o.model.length-1,!0),u()},modelMetaData:t})}function p(e){a&&(e.additionalParameters=a.additionalParameters),$.show({templateUrl:w+"UIComponents/NestedDataModels/EditNestedDataModelDialog.html",controller:"EditNestedDataModelDialogController",options:e})}function g(e,t){i=e}function v(e){C.move(o.model,e,i),o.gridImages.move(e,i)}function y(e,t){var n=o.previewFields[e.typeName].fields[s];return n?e.model[n.lowerName]:e.model.title||"Item "+(t+1)}}};return t.create(n)}]),angular.module("cms.shared").directive("cmsFormFieldPageCollection",["_","shared.internalModulePath","shared.LoadState","shared.pageService","shared.modalDialogService","shared.arrayUtilities","shared.urlLibrary","baseFormFieldFactory",function(d,f,h,m,p,g,v,e){var y="pageId",b=e.defaultConfig,t={templateUrl:f+"UIComponents/Pages/FormFieldPageCollection.html",scope:d.extend(b.scope,{localeId:"=cmsLocaleId",orderable:"=cmsOrderable"}),require:d.union(b.require,["?^^cmsFormDynamicFieldSet"]),passThroughAttributes:["required"],link:function(e,t,n,r){var i=e.vm,o=(d.has(n,"required"),d.last(r));return i.gridLoadState=new h,i.showPicker=s,i.remove=a,i.onDrop=l,i.urlLibrary=v,e.$watch("vm.model",u),b.link(e,t,n,r);function a(e){g.removeObject(i.gridData,e),g.removeObject(i.model,e[y])}function s(){p.show({templateUrl:f+"UIComponents/Pages/PagePickerDialog.html",controller:"PagePickerDialogController",options:{selectedIds:i.model||[],filter:function(){var e,t={};i.localeId?e=i.localeId:o&&o.additionalParameters&&(e=o.additionalParameters.localeId);e&&(t.localeId=e);return t}(),onSelected:function(e){u(i.model=e)}}})}function l(e,t){g.moveObject(i.gridData,t,e,y),c()}function c(){i.model=d.pluck(i.gridData,y)}function u(e){e&&e.length?i.gridData&&d.pluck(i.gridData,y).join()==e.join()||(i.gridLoadState.on(),m.getByIdRange(e).then(function(e){i.gridData=e,i.orderable||(i.gridData=d.sortBy(i.gridData,function(e){return e.auditData.createDate}).reverse(),c())}).then(i.gridLoadState.off)):i.gridData=[]}}};return e.create(t)}]),angular.module("cms.shared").directive("cmsFormFieldPageSelector",["_","shared.internalModulePath","shared.pageService","shared.directiveUtilities","shared.modalDialogService",function(e,t,i,o,n){return{restrict:"E",templateUrl:t+"UIComponents/Pages/FormFieldPageSelector.html",scope:{model:"=cmsModel",title:"@cmsTitle",localeId:"=cmsLocaleId",readonly:"=cmsReadonly"},require:["?^^cmsFormDynamicFieldSet"],link:{pre:function(e,t,n,r){e=e.vm,r[0];angular.isDefined(n.required)?e.isRequired=!0:e.isRequired=!1;o.setModelName(e,n),e.search=function(e){return i.getAll(e)},e.initialItemFunction=function(e){return i.getByIdRange([e]).then(function(e){return e[0]})}}},controller:function(){},controllerAs:"vm",bindToController:!0}}]),angular.module("cms.shared").factory("shared.pageModalDialogService",["shared.pageService","shared.modalDialogService",function(a,s){var e={publish:function(e,t){var n={title:"Publish Page",message:"Are you sure you want to publish this page?",okButtonTitle:"Yes, publish it",onOk:function(){return t(),a.publish(e)}};return s.confirm(n)},unpublish:function(e,t){var n={title:"Unpublish Page",message:"Unpublishing this page will remove it from the live site and put the page into draft status. Are you sure you want to continue?",okButtonTitle:"Yes, unpublish it",onOk:function(){return t(),a.unpublish(e)}};return s.confirm(n)},copyToDraft:function(e,t,n,r){var i={title:"Copy Version",message:"A draft version of this page already exists. Copying this version will delete the current draft. Do you wish to continue?",okButtonTitle:"Yes, replace it",onOk:function(){return r(),a.removeDraft(e).then(o)}};return n?s.confirm(i):(r(),o());function o(){return a.duplicateDraft(e,t)}}};return e}]),angular.module("cms.shared").controller("PagePickerDialogController",["$scope","shared.LoadState","shared.pageService","shared.SearchQuery","shared.modalDialogService","shared.internalModulePath","shared.urlLibrary","options","close",function(e,t,n,r,i,o,a,s,l){var c=e,u="pageId";function d(e){c.isFilterVisible=_.isUndefined(e)?!c.isFilterVisible:e}function f(){d(!1),h()}function h(){return c.gridLoadState.on(),n.getAll(c.query.getParameters()).then(function(e){c.result=e,c.gridLoadState.off()})}function m(){c.multiMode||c.onSelected(c.currentPage),l()}function p(e){c.multiMode?b(e):c.selectedPage=e}function g(e){if(!c.multiMode)return c.selectedPage=e,void v();b(e),v()}function v(){c.multiMode?c.onSelected(c.selectedIds):c.onSelected(c.selectedPage),l()}function y(e){return!!(c.selectedIds&&e&&-1<c.selectedIds.indexOf(e.pageId))||!(!e||!c.selectedPage)&&e[u]===c.selectedPage[u]}function b(e){var t;y(e)?(t=c.selectedIds.indexOf(e[u]),c.selectedIds.splice(t,1)):c.selectedIds.push(e[u])}angular.extend(e,s),c.onOk=v,c.onCancel=m,c.onSelect=p,c.selectedPage=c.currentPage,c.onSelectAndClose=g,c.close=m,c.gridLoadState=new t,c.query=new r({onChanged:f,useHistory:!1,defaultParams:s.filter}),c.presetFilter=s.filter,c.filter=c.query.getFilters(),c.toggleFilter=d,c.isSelected=y,c.multiMode=!!c.selectedIds,c.urlLibrary=a,d(!1),h()}]),angular.module("cms.shared").directive("cmsPager",["shared.internalModulePath",function(e){return{restrict:"E",scope:{result:"=cmsResult",query:"=cmsQuery"},templateUrl:e+"UIComponents/Search/Pager.html",controller:angular.noop,controllerAs:"vm",bindToController:!0,link:function(e,t,n){var r=e.vm;function i(e){r.query&&r.query.update({pageNumber:e})}r.setPage=i,e.$watch("vm.result",function(e){e?(r.isFirstPage=e.pageNumber<=1,r.isLastPage=e.pageNumber===e.pageCount):(r.isFirstPage=!0,r.isLastPage=!0)})}}}]),angular.module("cms.shared").directive("cmsSearchFilter",["shared.internalModulePath",function(e){return{restrict:"E",scope:{query:"=cmsQuery",filter:"=cmsFilter",ngShow:"="},templateUrl:e+"UIComponents/Search/SearchFilter.html",transclude:!0,controller:angular.noop,controllerAs:"vm",bindToController:!0,link:function(e,t,n){var r=e.vm;function i(){r.query.update(r.filter),r.ngShow=!0}function o(){r.ngShow=!1,r.query.clear(),r.filter=r.query.getFilters()}_.isUndefined(r.ngShow)&&(r.ngShow=!0),r.setFilter=i,r.clear=o}}}]),angular.module("cms.shared").factory("shared.SearchQuery",["$location","_",function(s,l){var e={pageSize:30,pageNumber:1};return function(t){var r=this,i=l.isUndefined(t.useHistory)||t.useHistory,o=l.defaults({},t.defaultParams,e),a=(t.filters,l.defaults({},function(){if(!i)return{};var n=s.search();return l.each(n,function(e,t){isNaN(e)||(n[t]=parseInt(e))}),n}(),o));function n(e){var n={};a=e,i&&(l.each(e,function(e,t){o[t]!==e&&e&&(l.isFunction(e.toJSON)?n[t]=e.toJSON():n[t]=e)}),console.log(n),s.search(n)),t.onChanged&&t.onChanged(r)}r.getParameters=function(){return a},r.getFilters=function(){return l.omit(a,Object.keys(e))},r.update=function(e){n(l.defaults({},e,o,a))},r.clear=function(){n(o)}}}]),angular.module("cms.shared").directive("cmsSuccessMessage",["shared.internalModulePath",function(e){return{restrict:"E",templateUrl:e+"UIComponents/StatusMessages/SuccessMessage.html",replace:!0,transclude:!0}}]),angular.module("cms.shared").directive("cmsWarningMessage",["shared.internalModulePath",function(e){return{restrict:"E",templateUrl:e+"UIComponents/StatusMessages/WarningMessage.html",replace:!0,transclude:!0}}]),angular.module("cms.shared").directive("cmsFormFieldTags",["_","shared.internalModulePath","shared.stringUtilities","baseFormFieldFactory",function(e,t,n,r){t={templateUrl:t+"UIComponents/Tags/FormFieldTags.html",passThroughAttributes:["required"]};return r.create(t)}]),angular.module("cms.shared").directive("cmsTagList",["shared.internalModulePath",function(e){return{restrict:"E",scope:{tags:"=cmsTags"},require:"?^^cmsModalDialogContainer",templateUrl:e+"UIComponents/Tags/TagList.html",link:function(e,t,n,r){r&&(e.isInModal=!0)}}}]),angular.module("cms.shared").directive("cmsTagsInput",["_","shared.stringUtilities",function(u,d){var f=/[^,&\w\s'()-]+/g;return{restrict:"A",require:"ngModel",link:function(r,i,e,t){r.vm;function n(e){return e&&e.length?u.map(e,function(e){return d.capitaliseFirstLetter(e.replace(c(),"").trim())}).join(", "):""}function o(e){var e=e.replace(c(),"").split(",").map(function(e){return e.trim()}),e=u.filter(e,function(e){return e&&","!==e});return e.length?e:null}function a(e){var t,n;t=i.val(),n=t.replace(c(),""),t!=n&&i.val(n),r.$evalAsync(l)}function s(e){var t=String.fromCharCode(e.which);c().test(t)&&e.preventDefault()}function l(){var e=i.val();t.$setViewValue(e)}function c(){return f.lastIndex=0,f}t.$formatters.push(n),t.$parsers.push(o),t.$render=function(){i.val(t.$viewValue||"")},i.on("keypress",s),i.on("blur change keyup",a)}}}]),angular.module("cms.shared").directive("cmsTableActions",["shared.internalModulePath",function(e){return{restrict:"E",templateUrl:e+"UIComponents/Table/TableActions.html",replace:!0,transclude:!0,link:function(e,t,n,r,i){}}}]),angular.module("cms.shared").directive("cmsTableCellCreatedAuditData",["shared.internalModulePath",function(e){return{restrict:"E",scope:{auditData:"=cmsAuditData"},templateUrl:e+"UIComponents/Table/TableCellCreatedAuditData.html"}}]),angular.module("cms.shared").directive("cmsTableCellImage",["shared.internalModulePath",function(e){return{restrict:"E",scope:{image:"=cmsImage"},templateUrl:e+"UIComponents/Table/TableCellImage.html"}}]),angular.module("cms.shared").directive("cmsTableCellUpdatedAuditData",["shared.internalModulePath",function(e){return{restrict:"E",scope:{auditData:"=cmsAuditData"},templateUrl:e+"UIComponents/Table/TableCellUpdatedAuditData.html"}}]),angular.module("cms.shared").directive("cmsTableColumnActions",function(){return{restrict:"A",link:function(e,t,n,r){t.addClass("actions")}}}),angular.module("cms.shared").directive("cmsTableContainer",["shared.internalModulePath",function(e){return{restrict:"E",templateUrl:e+"UIComponents/Table/TableContainer.html",replace:!0,transclude:!0,link:function(e,t,n,r,i){t.find("table").addClass("table")}}}]),angular.module("cms.shared").directive("cmsTableGroupHeading",function(){return{restrict:"E",template:'<h5 class="table-group-heading" ng-transclude></h5>',replace:!0,transclude:!0}}),angular.module("cms.shared").directive("cmsTableRowInactive",function(){return{restrict:"A",scope:{tableRowInactive:"=cmsTableRowInactive"},link:function(e,t,n,r){e.$watch("tableRowInactive",function(e){t.toggleClass("inactive",!!e)})}}}),angular.module("cms.shared").directive("cmsTimeAgo",["shared.internalModulePath",function(e){return{restrict:"E",scope:{time:"=cmsTime"},templateUrl:e+"UIComponents/Time/TimeAgo.html",controller:["$scope",function(e){var t=this;e.$watch("time",function(){e.time?(t.date=new Date(e.time),t.timeAgo=function(e){switch(typeof e){case"number":break;case"string":e=+new Date(e);break;case"object":e.constructor===Date&&(e=e.getTime());break;default:e=+new Date}var t=[[60,"seconds",1],[120,"1 minute ago","1 minute from now"],[3600,"minutes",60],[7200,"1 hour ago","1 hour from now"],[86400,"hours",3600],[172800,"Yesterday","Tomorrow"],[604800,"days",86400],[1209600,"Last week","Next week"],[2419200,"weeks",604800],[4838400,"Last month","Next month"],[29030400,"months",2419200],[58060800,"Last year","Next year"],[290304e4,"years",29030400],[580608e4,"Last century","Next century"],[580608e5,"centuries",290304e4]],n=(+new Date-e)/1e3,r="ago",i=1;if(n<=0&&-3600<n||0==Math.abs(n))return"Just now";n<0&&(n=Math.abs(n),r="from now",i=2);var o,a=0;for(;o=t[a++];)if(n<o[0])return"string"==typeof o[2]?o[i]:Math.floor(n/o[2])+" "+o[1]+" "+r;return e}(t.date)):(t.date=null,t.timeAgo=null)})}],controllerAs:"vm"}}]),angular.module("cms.shared").directive("cmsUserLink",["shared.internalModulePath","shared.urlLibrary","shared.permissionValidationService",function(e,t,n){return{restrict:"E",scope:{user:"=cmsUser"},templateUrl:e+"UIComponents/User/UserLink.html",controller:function(){this.urlLibrary=t,this.canRead=n.canRead("COFUSR")},controllerAs:"vm",bindToController:!0}}]),angular.module("cms.shared").directive("cmsAutoTargetBlank",function(){return{restrict:"A",require:["?^^cmsModalDialogContainer","?^^cmsForm"],link:function(e,t,n,r){var i=r[0],r=r[1];i?t.attr("target","_blank"):r&&(e.formScope=r.getFormScope(),e.$watch("formScope.editMode",function(){e.formScope.editMode?t.attr("target","_blank"):t.removeAttr("target")}))}}}),angular.module("cms.shared").directive("cmsModelAsDate",function(){return{require:"ngModel",link:function(e,t,n,r){r.$formatters.push(function(e){return e?new Date(e):null})}}});